{"version":3,"file":"basicworker.js","mappings":"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","sources":["webpack://B3/./tmp/basicworker.js"],"sourcesContent":["//src/sys/modules/basic/worker/sys.js\n//src/sys/modules/basic/worker/basicarray.js\n//src/sys/modules/basic/worker/basicerrorhandler.js\n//src/sys/modules/basic/worker/coding/codingeditor.js\n//src/sys/modules/basic/worker/basicruntime.js\n//src/sys/modules/basic/worker/extendedcommands.js\n//src/sys/modules/basic/worker/pgmmanager.js\n//src/sys/modules/basic/worker/basiccommands.js\n//src/sys/modules/basic/worker/basicparser.js\n//src/sys/modules/basic/worker/basictokenizer.js\n//src/sys/modules/basic/worker/input.js\n//src/sys/modules/basic/worker/processes.js\n//src/sys/modules/basic/worker/commandhelp.js\n//src/sys/modules/basic/worker/../../rwbuffers/worker/textarea.js\n//src/sys/modules/basic/worker/../../rwbuffers/worker/bitmap.js\n//src/sys/modules/basic/worker/../../rwbuffers/worker/audio.js\n//src/sys/modules/basic/worker/workerbootstrap_static.js\n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n\n// ## sys.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/sys.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/sys.js\n\nvar sys = {\n  appName: \"unknown\",\n  unique: 0\n\n};\n\nconsole = sys;\n\n/* LOGGER */\n\nfunction init_sys() {\n\n  function post( type, message ) {\n    postMessage( { type: type, message: message } );\n  }\n\n  sys.post = post;\n\n  sys.log = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      var args2 = [];\n\n      for( var i=0; i<args.length ; i++) {\n        args2.push( JSON.stringify( args[ i ]) );\n      }\n      post(\"syslog\",args2 );\n\n  }\n\n  sys.logerr = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      post(\"syserr\",args );\n\n  }\n\n  sys.load = function( rt, path ) {\n\n      post(\"load\", { processId: rt.processId, path:path } );\n\n  }\n\n  sys.loaddata = function( rt, path, type, label ) {\n\n      post(\"loaddata\", { processId: rt.processId, path:path, type: type, label: label } );\n\n  }\n\n  sys.save = function( rt, path, data ) {\n\n      post(\"save\", { processId: rt.processId, path:path, data: data } );\n\n  }\n\n  sys.delete = function( rt, path ) {\n\n      post(\"delete\", { processId: rt.processId, path:path } );\n\n  }\n\n  sys.dir = function( rt, path ) {\n\n      post(\"dir\", { processId: rt.processId, path:path } );\n\n  }\n\n\n  sys.setcfg = function( cfg ) {\n      this.cfg = cfg;\n  }\n\n  sys.listfs = function( rt  ) {\n\n      post(\"listfs\", { processId: rt.processId } );\n\n  }\n\n  sys.poststatus = function( procId, status  ) {\n\n      post(\"status\", { procId: procId, status: status } );\n\n  }\n\n  sys.setfs = function( rt, path  ) {\n\n      this.fs = path;\n      post(\"setfs\", { path: path, processId: rt.processId } );\n\n  }\n\n  sys.setDisplayMode = function( rt, m ){\n    post( \"displaymode\", { processId: rt.processId, m:m } );\n  }\n\n  sys.blinkMode = function( m ){\n    post( \"blinkMode\", { m:m } );\n  }\n\n\n  sys.html = {}\n\n  sys.html.executeFunction = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      post( \"htmldofun\",args );\n\n  }\n\n  sys.html.html = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      post( \"html\",args );\n\n  }\n\n  sys.html.htmlnode = function() {\n\n    var args = Array.prototype.slice.call(arguments);\n    post( \"htmlnode\",args );\n\n  }\n\n\n  sys.html.get = function() {\n\n    post( \"htmlget\", args );\n    return { wait_for_result: true }\n\n  }\n\n  sys.export = function( code, destination ) {\n    post( \"export\", { code: code, destination: destination } );\n  }\n\n  sys.signalHideMenu = function( flag ) {\n    post( \"signalHideMenu\", { hide: flag } );\n  }\n\n}\n\nfunction start_sys() {\n  sys.log(\"Starting wsys\");\n\n  sys.processes = new processes( sys );\n  sys.input = new Input( sys );\n  sys.out = new TextArea( sys );\n  sys.bout = new BitMap( sys );\n  sys.audio = new Audio( sys );\n  sys.rootProcId = -1;\n\n  /* APPLICATION */\n\n  /* HANDLERS */\n  self.onmessage = function( obj ) {\n\n      try {\n        var data = obj.data;\n\n        if( data.type == \"keydown\" ) {\n\n          sys.input.inputKeyHandler( data );\n          sys.audio.flagUserInput();\n\n        }\n        else if( data.type == \"message\") {\n          var id = data.processId;\n          var runtime = sys.processes.get( id );\n\n          runtime.receiveMessage( data.message, data.messageObject );\n\n          //TODO, index of runtime.\n        }\n        else if( data.type == \"interrupt\") {\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          runtime.interrupt( 0, data.sub, data.data );\n\n          //TODO, index of runtime.\n        }\n        else if( data.type == \"loadpgm\" ) {\n\n          sys.log(\"Received 'loadpgm' message. Loaded \" + data.pgmData.length + \" bytes..\" );\n\n          var editor = new Editor( sys );\n          var runtime = new BasicRuntime( sys, editor );\n          sys.log(\"Context created, parsing program\");\n\n          var ok = runtime.bootPGM( data.pgmData, data.QPath  );\n          sys.log(\"Parsed program => RUN\");\n\n          if( ok ) {\n            runtime.runPGM();\n            sys.log(\"Program started...\");\n          }\n          else {\n            runtime.stop();\n          }\n\n          var id = sys.processes.register( runtime );\n          sys.log(\"Basic program registered as process \" + id + \".\");\n\n          if( sys.rootProcId == -1 ) {\n            sys.rootProcId = id;\n          }\n          pgmman.addRuntime( runtime );\n\n\n        }\n        else if( data.type == \"inittxtarea\" ) {\n\n          sys.log( \"init with: \" + JSON.stringify( data ) )\n\n          sys.out.attach( data.w, data.h );\n\n\n        }\n        else if( data.type == \"initcolors\" ) {\n\n          sys.log( \"init colors with: \" + JSON.stringify( data ) )\n\n          sys.out.setDefault( data.colors.fg, data.colors.bg );\n          sys.out.control( 18, data.colors.border );\n          sys.out.reset();\n\n        }\n        else if( data.type == \"systeminfo\" ) {\n\n          sys.log( \"systeminfo with: \" + JSON.stringify( data ) )\n          sys.screenModes = data.modes;\n          sys.displayMode = data.mode;\n          sys.windowWidth = data.windowWidth;\n          sys.windowHeight = data.windowHeight;\n\n        }\n        else if( data.type == \"setcfg\" ) {\n\n          sys.log( \"init with: \" + JSON.stringify( data ) );\n\n          sys.setcfg( data.cfg );\n\n        }\n        else if( data.type == \"initbitmap\" ) {\n\n          sys.log( \"init with: \" + JSON.stringify( data ) );\n          sys.bout.attach( data.w, data.h );\n\n        }\n        else if( data.type == \"clipboardCopy\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var code = runtime.getProgramAsText();\n\n          sys.export( code, \"clipboard\" );\n\n          if( runtime.isReady() ) {\n            runtime.printLine(\"(!)Copied program to clipboard\");\n            runtime.printReady();\n          }\n          sys.log( \"clipboard copy\" )\n\n        }\n        else if( data.type == \"export\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var code = runtime.getProgramAsText();\n\n          sys.export( code, \"disk\" );\n\n          if( runtime.isReady() ) {\n            runtime.printLine(\"(!)Export program to disk\");\n            runtime.printReady();\n          }\n          sys.log( \"Export to disk\" )\n\n        }\n        else if( data.type == \"showList\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var list = data.list;\n\n          runtime.enterListMode(list);\n\n        }\n        else if( data.type == \"list\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var list = [\"LIST\",\"\"];\n          for (const l of runtime.program)\n            {\n\n              var lineNr = parseInt(l[0]);\n\n              list.push( l[2] );\n            }\n\n          runtime.enterListMode(list);\n\n        }\n        else if( data.type == \"renumber\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          runtime.renumberProgram( 10,10 );\n\n          var list = [\"RENUMBER\"];\n          runtime.enterListMode(list);\n\n        }\n        else if( data.type == \"new\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( !runtime.isRunning() ) {\n            runtime.new();\n\n            var output = [\"NEW\", \"\"];\n            runtime.enterListMode( output );\n          }\n        }\n        else if( data.type == \"pastpgm\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( !runtime.isRunning() ) {\n            runtime.new();\n            runtime.resetConsole();\n\n            var result = runtime.textLinesToBas( data.data.split(\"\\n\") );\n            var pgm = result.pgm;\n            runtime.setProgram( pgm );\n\n            if( result.exception ) {\n              throw result.exception;\n            }\n\n          }\n        }\n        else if( data.type == \"vars\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var varList = runtime.getFullVarList();\n          varList.unshift( \"\" );\n          varList.unshift( \"VARS\" );\n\n          runtime.enterListMode( varList );\n\n        }\n        else if( data.type == \"datablocks\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var list = runtime.getDataBlocks();\n          var blockList = [\"DATABLOCKS\",\"\"];\n\n          for( var i=0;i<list.length;i++) {\n            blockList.push( list[i] );\n          }\n\n          runtime.enterListMode( blockList );\n\n        }\n        else if( data.type == \"stopMenu\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isRunning() ) {\n            runtime.stop();\n            runtime.toggleMenu();\n          }\n          else {\n            runtime.toggleMenu();\n          }\n\n        }\n        else if( data.type == \"toggleMenu\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n          runtime.toggleMenu();\n\n        }\n        else if( data.type == \"help\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.clearScreen();\n            runtime.printLine(\"HELP\");\n            runtime.printHelp();\n            runtime.printLine(\"\");\n            runtime.printLine(\"For more help type:\");\n            runtime.printLine(\"HELP <option>\");\n            runtime.printLine(\"\");\n            runtime.printReady();\n          }\n\n        }\n        else if( data.type == \"run\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.clearScreen();\n            runtime.printLine(\"RUN\");\n            runtime.runPGM();\n          }\n        }\n        else if( data.type == \"stop\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isRunning() ) {\n            runtime.stop();\n          }\n        }\n        else if( data.type == \"resetConsole\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.resetConsole();\n          }\n        }\n        else if( data.type == \"colorReset\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.colorReset( data.colors );\n          }\n        }\n        else if( data.type == \"clearScreen\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.clearScreen();\n          }\n        }\n        else {\n          var type = obj.data;\n          if(! type ) {\n            type = \"????\";\n          }\n          else {\n            type=type.type;\n            if(! type ) {\n              type = \"????\";\n            }\n          }\n          sys.logerr( \"Ignored unclassified message type (\"+type+\") for 'APP://\"+sys.appName+\"':  \" + JSON.stringify( obj.data ) );\n          //postMessage( self.onAppMessage( obj ) );\n        }\n      }\n      catch( e ) {\n        if( e.message ) {\n          sys.logerr( e.message + \" at \" + e.fileName + \":\"+ e.lineNumber );\n        }\n        else if ( e.clazz ) {\n          sys.logerr( e.clazz + \": \" + e.detail + \" at \"+ e.lineNr );\n          sys.out.writeln( \"?\" + e.clazz + \" error at \" + e.lineNr );\n        }\n\n        sys.logerr( JSON.stringify( e ) );\n\n      }\n\n    }\n}\n\ninit_sys();\n\n//--EOC \n\n// ## basicarray.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicarray.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicarray.js\n\nclass  BasicArray {\n\n  constructor( name, indices, defaultValue  ) {\n    this.name = name;\n    this.indices = indices;\n    this.buffer = null;\n    this.defaultValue = defaultValue;\n  }\n\n  getIndexCount() {\n    return this.indices.length;\n  }\n\n  _check( indices ) {\n    if( indices.length != this.indices.length ) {\n      throw \"BasicArray:00:index dimension mismatch:For array \" + this.name;\n    }\n    for( var i=0; i<indices.length; i++) {\n      if ( indices[i] > this.indices[ i ]) {\n        var detail = \"\\\"\" + this.name + \"[\" + indices[i] + \"]\"+\"\\\" does not exist\";\n        if( indices.length > 1) {\n          detail = \"\\\"\" + this.name + \"\\\" with index \" + indices[i] + \" does not exist\";\n          detail += \" for index dimension \" + i;\n        }\n        throw \"BasicArray:01:index out of bounds:\" + detail;\n      }\n      else if ( indices[i] < 0) {\n        throw \"BasicArray:02:index smaller then zero:For array \" + this.name;\n      }\n\n    }\n  }\n\n  set( indices, val ) {\n    this._check( indices );\n    if( this.buffer == null ) {\n      this.buffer = [];\n    }\n    var ptr = this.buffer;\n    var last = indices.length - 1;\n    for( var i=0; i<=last; i++) {\n\n      if( i == last ) {\n        ptr[ indices[ i ]] = val;\n      }\n      else {\n        if( (ptr [ indices[i] ] === undefined )) {\n          ptr[ indices[ i ]] = [];\n        }\n        ptr = ptr[ indices[ i ]];\n      }\n    }\n  }\n\n  get( indices ) {\n    this._check( indices );\n\n    if( this.buffer == null ) {\n      return this.defaultValue;\n    }\n    var ptr = this.buffer;\n    var last = indices.length - 1;\n    for( var i=0; i<=last; i++) {\n\n      if( i == last ) {\n        return ptr[ indices[ i ]];\n      }\n      else {\n        if( (ptr [ indices[i] ] === undefined )) {\n          return this.defaultValue;\n        }\n        ptr = ptr[ indices[ i ]];\n      }\n    }\n  }\n\n}\n\n//--EOC \n\n// ## basicerrorhandler.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicerrorhandler.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicerrorhandler.js\n\nclass ErrorHandler {\n\n  newError( clazz, detail, context, lineNr ) {\n    return { context: context, clazz: clazz, detail: detail, lineNr: lineNr };\n  }\n\n  throwError( clazz, detail, context, lineNr ) {\n    throw this.newError( clazz, detail, context, lineNr );\n  }\n\n\n  fromSimpleExternalError( s, context, lineNr0 ) {\n\n    var lineNr = lineNr0;\n    if( lineNr === undefined ) {\n      lineNr = -1;\n    }\n\n    var parts = s.split(\":\");\n    if( !parts.length == 3) {\n      return undefined;\n    }\n\n    var err = this.newError( parts[2], parts[3], context, lineNr );\n\n    err.extCode0 = parts[0];\n    err.extCode1 = parts[1];\n\n    return err;\n\n  }\n\n  fromSerializedError( s, context, lineNr0 ) {\n\n    var lineNr = lineNr0;\n    if( lineNr === undefined ) {\n      lineNr = -1;\n    }\n    if( ! this.isSerializedError( s ) ) {\n      return this.newError( \"unknown\", null, context, lineNr );\n    }\n    var parts = s.substr(1).split(\"@\");\n    if( parts.length == 1 ) {\n        return this.newError( parts[0], null, context, lineNr );\n    }\n    return this.newError( parts[0], parts[1], context, lineNr );\n\n  }\n\n  isSerializedError( e ) {\n    if( typeof e != \"string\" ) {\n      return false;\n    }\n    return e.startsWith( \"@\" );\n  }\n\n  isError( e ) {\n    if( Object.prototype.toString.call( e ) === '[object Object]' ) {\n      var ctx = e[ \"context\" ];\n      var clss = e[ \"clazz\" ];\n      var dtl = e[ \"detail\" ];\n\n      if( !( clss === undefined ) ) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\n//--EOC \n\n// ## coding/codingeditor.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/coding/codingeditor.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/coding/codingeditor.js\n\nclass Editor {\n\n  constructor( sys ) {\n    this.sys = sys;\n    this.output = sys.out;\n    this.keyMode = \"insert\";\n\n    //this.lineMarkers = [ 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0 ];\n  }\n\n\n  addRunTime( rt ) {\n    this.runTime = rt;\n  }\n\n  keyHandlerForCLE( e ) {\n\n      if( e.keyLabel == \"Enter\" ) {\n        var command = sys.out.getCurrentLine();\n        this.output.writeln(\"\");\n\n        this.runTime.executeInteractiveLine( command );\n\n      }\n      else if( e.keyLabel == \"Backspace\" ||\n              e.keyLabel == \"Delete\"  ) {\n\n        if( e.keyLabel == \"Delete\" ) {\n              this.output.delete();\n        }\n        else {\n            this.output.backspace();\n        }\n\n      }\n      else if( e.keyLabel == \"ArrowUp\" && !e.ctrlKey) {\n        this.output.cursorMove(\"up\");\n      }\n      else if( e.keyLabel == \"ArrowDown\" && !e.ctrlKey) {\n        this.output.cursorMove(\"down\");\n      }\n      else if( e.keyLabel == \"ArrowUp\" && e.ctrlKey ) {\n        this.output.cursorMove(\"up\");\n        this.output.cursorMove(\"up\");\n        this.output.cursorMove(\"up\");\n        this.output.cursorMove(\"up\");\n      }\n      else if( e.keyLabel == \"ArrowDown\" && e.ctrlKey ) {\n        this.output.cursorMove(\"down\");\n        this.output.cursorMove(\"down\");\n        this.output.cursorMove(\"down\");\n        this.output.cursorMove(\"down\");\n      }\n      else if( e.keyLabel == \"ArrowLeft\" && !e.ctrlKey ) {\n        this.output.cursorMove(\"left\");\n      }\n      else if( e.keyLabel == \"ArrowRight\" && !e.ctrlKey) {\n        this.output.cursorMove(\"right\");\n      }\n      else if( (e.keyLabel == \"ArrowRight\" && e.ctrlKey) ) {\n        this.output.jumpTo(\"text-end\");\n      }\n      else if( (e.keyLabel == \"ArrowLeft\" && e.ctrlKey) ) {\n        this.output.jumpTo(\"text-start\");\n      }\n      else if( e.keyLabel == \"Home\" && !e.ctrlKey && !e.shiftKey ) {\n        this.output.jumpTo(\"line-start\");\n      }\n      else if( e.keyLabel == \"Home\" && e.shiftKey && !e.ctrlKey ) {\n        this.output.clear();\n      }\n      else if( e.keyLabel == \"End\" && !e.ctrlKey ) {\n        this.output.jumpTo(\"line-end\");\n      }\n      else if( e.keyLabel == \"Home\" && e.ctrlKey && !e.shiftKey ) {\n        this.output.jumpTo(\"home\");\n      }\n      else if( e.keyLabel == \"End\" && e.ctrlKey ) {\n        this.output.jumpTo(\"end\");\n      }\n      else if( e.keyLabel == \"Tab\" ) {\n        if( this.keyMode == \"insert\") {\n          this.output.insert(  \"        \" );\n        }\n        else {\n          this.output.write(  \"        \" );\n        }\n\n      }\n      else if( e.keyLabel == \"Insert\" ) {\n\n        if( this.keyMode == \"insert\") {\n          this.keyMode = \"overwrite\";\n        }\n        else {\n          this.keyMode = \"insert\";\n        }\n        this.output.setCursorMode( this.keyMode )\n      }\n      else {\n        if( e.key != null ) {\n          if( this.keyMode == \"insert\") {\n            this.output.insert( e.key );\n          }\n          else {\n            this.output.write( e.key );\n          }\n        }\n      }\n\n  }\n\n\n  interactiveKeyHandler( e ) {\n    this.keyHandlerForCLE( e );\n  }\n}\n\n//--EOC \n\n// ## basicruntime.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicruntime.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicruntime.js\n\nclass BasicRuntime {\n\n  constructor( sys, editor ) {\n\n    this.debugFlag = false;\n    this.sys = sys;\n    this.editor = editor;\n    this.editor.addRunTime( this );\n    this.listSpeed = 15;\n\n    this.output = sys.out;\n    this.bitmap = sys.bout;\n    this.input = sys.input;\n    this.audio = sys.audio;\n    this.input.setHandler( this );\n    this.input.setInterActive( false);\n    this.html = sys.html;\n    this.menuEnable = false;\n\n    this.program = [];\n    this.runFlag = false;\n    this.waitForMessageFlag = false;\n    this.waitForMessageVariable = null;\n    this.executeLineFlag = false;\n    this.goPlayExampleFlag = false;\n    this.breakCycleFlag;\n    this.inputFlag = false;\n    this.listFlag = false;\n    this.immersiveFlag = false;\n    this.statusChanged = false;\n\n    this.gosubReturn = [];\n    this.nullTime = new Date().getTime();\n\n    this.turboMode = false;\n    this.cmdCountPerCycleDefault = 10000;\n    this.cmdCountPerCycleTurbo = 20000;\n    this.cmdCountPerCycle = this.cmdCountPerCycleDefault ;\n\n    var c = this.output;\n    this.commands = new BasicCommands( this );\n    this.extendedcommands = new ExtendedCommands( this.commands, this );\n\n    this.erh = new ErrorHandler();\n    this.vars = {};\n    this.functions = [];\n    this.data = [];\n    this.loadedData = { default: [] };\n    this.loadedLabel = null;\n\n    this.kbBuffer = [];\n\n    this.yPos = -1;\n\n    this.SHORTLINE = 0;\n    this.LONGLINESTART = 1;\n    this.LONGLINEEND = 2;\n\n    this.forContext = { default:[] }\n\n    this.outputCallBacksAll = {\n        lineOverFlow: { clazz: this, method: \"cbLineOverFlow\" },\n        scroll: { clazz: this, method: \"cbScroll\" },\n        clearScreen: { clazz: this, method: \"cbClearScreen\" }\n    }\n\n    this.outputCallBacksClScr = {\n        lineOverFlow: undefined,\n        scroll: { clazz: this, method: \"cbScroll\" },\n        clearScreen: { clazz: this, method: \"cbClearScreen\" }\n    }\n\n    //this.setTurbo( true );\n    this.synchClock( );\n    this.exitMode = \"stay\";\n\n    this.code2colMap = [];\n    var km = this.code2colMap;\n\n    km[0x90] = 0;\n    km[0x05] = 1;\n    km[0x1c] = 2;\n    km[0x9f] = 3;\n    km[0x9c] = 4;\n    km[0x1e] = 5;\n    km[0x1f] = 6;\n    km[0x9e] = 7;\n\n    km[0x81] = 8;\n    km[0x95] = 9;\n    km[0x96] = 10;\n    km[0x97] = 11;\n    km[0x98] = 12;\n    km[0x99] = 13;\n    km[0x9a] = 14;\n    km[0x9b] = 15;\n\n    this.symbolTable = {};\n\n    this.symbolTable.up     = 0x91;\n    this.symbolTable.down   = 0x11;\n    this.symbolTable.left   = 157;\n    this.symbolTable.right  = 29;\n    this.symbolTable[\"reverse on\"]  = 0x12;\n    this.symbolTable[\"reverse off\"]  = 0x92;\n    this.symbolTable[\"clear\"]  = 0x93;\n    this.symbolTable[\"home\"]  = 0x13;\n    this.symbolTable.black  = 144;\n    this.symbolTable.white  = 5;\n    this.symbolTable.red  = 28;\n    this.symbolTable.cyan  = 159;\n    this.symbolTable.purple  = 156;\n    this.symbolTable.green  = 30;\n    this.symbolTable.blue  = 31;\n    this.symbolTable.yellow  = 158;\n    this.symbolTable.orange  = 129;\n    this.symbolTable.brown  = 149;\n    this.symbolTable.pink  = 150; // light red\n    this.symbolTable.grey1  = 151;  //dark grey\n    this.symbolTable.grey2  = 152;\n    this.symbolTable[\"light green\"]  = 153;\n    this.symbolTable[\"light blue\"]  = 154;\n    this.symbolTable.grey3  = 155; //light grey\n\n\n    var backmap = []\n    var mapInfo = Object.entries(this.symbolTable);\n    for( var i=0; i<mapInfo.length; i++) {\n      backmap[ mapInfo[i][1]] = mapInfo[i][0];\n    }\n    this.symbolTableBM = backmap;\n\n  }\n\n  flagStatusChange() {\n    this.statusChanged = true;\n  }\n\n\n  getScopeVars( s ) {\n    return s.vars;\n  }\n\n  getFullVarList() {\n    var scopes = this.getFullScopes();\n    var varList = [];\n\n    for( var si = 0; si< scopes.length; si++ ) {\n\n      var fullscope = scopes[si];\n      var vars = this.getScopeVars( fullscope.scope );\n      var names = Object.getOwnPropertyNames( vars );\n\n      for( var i=0;i<names.length;i++) {\n        var name = names[i];\n        var value = vars[ name ];\n        var path = fullscope.path;\n        if( path == \"\" ) { path = \"\"; }\n        else { path += \"/\"; }\n        if( ! name.startsWith( \"@array_\" ) ) {\n            if( name.endsWith(\"$\") ) {\n                varList.push( path + name + \" = \\\"\" + value + \"\\\"\" );\n            }\n            else {\n                varList.push( path + name + \" = \" + value );\n            }\n        }\n        else {\n            var descr = \"\";\n            for( var ii=0; ii<value.indices.length; ii++ ) {\n              if( ii>0 ) { descr += \",\"; }\n              descr += value.indices[  ii ];\n\n            }\n            varList.push( name.substr(7) + \" = array with dim(\" + descr + \")\" );\n        }\n      }\n    }\n\n    return varList;\n  }\n\n  getFullScopes() {\n    var scopes = [];\n    var path = \"\";\n    for( var si = 0 ; si < this.scopes.length; si++ ) {\n      var scope = this.scopes[si].name;\n\n      if( si > 0) {\n        if( path != \"\" ) {\n          path += \"/\";\n        }\n        path += scope;\n      }\n\n      scopes.push( { path: path, scope: this.scopes[si]  } );\n    }\n\n    return scopes;\n  }\n\n  cpuNeeded() {\n    return this.runFlag;\n  }\n\n  getStatus() {\n\n    var status = \"\";\n    var lineNr;\n    if( this.runFlag ) {\n      lineNr = this.program[ this.runPointer ][0];\n      status = \"running[\" + lineNr + \"]\";\n    }\n    else {\n      status = \"stopped\";\n    }\n\n    if( this.runFlag && this.inputFlag ) {\n      status = \"running[\" + lineNr + \"]/input\";\n    }\n    else if( !this.runFlag && this.listFlag ) {\n      status = \"stopped/listing\";\n    }\n\n    var vlen = Object.getOwnPropertyNames( this.getVars() ).length;\n\n\n    this.statusChanged = false;\n\n    return {\n      status: status,\n      pgmLen: this.program.length,\n      varLen: vlen,\n      displayMode: this.sys.displayMode\n    }\n  }\n\n  dir( path ) {\n    this.sys.dir( this, path );\n    this.startWaitForMessage( \"dir\" )\n  }\n\n  listfs() {\n    this.sys.listfs( this );\n    this.startWaitForMessage( \"listfs\" )\n  }\n\n  setfs( path ) {\n    this.sys.setfs( this, path );\n    this.startWaitForMessage( \"path\" )\n  }\n\n  load( path, start ) {\n    this.sys.load( this, path );\n    this.startWaitForMessage( \"load\" )\n    this.autoStartAfterLoad = start;\n\n  }\n\n  loaddata( path, type, label ) {\n    this.sys.loaddata( this, path, type, label );\n    this.startWaitForMessage( \"loaddata\" )\n\n  }\n\n  save( path0 ) {\n\n    var data = this.getProgramAsText();\n    var path = path0;\n    if( path0 == null ) {\n      path = \"default.bas\";\n    }\n    this.sys.save( this, path, data );\n    this.startWaitForMessage( \"save\" )\n  }\n\n  deleteFile( path ) {\n\n    this.sys.delete( this, path );\n    this.startWaitForMessage( \"delete\" )\n  }\n\n\n  startWaitForMessage( variable ) {\n    this.waitForMessageFlag = true;\n    this.waitForMessageVariable = variable;\n  }\n\n\n  keyInterrupt( _type, _data ) {\n    this.interrupt( 0, _type, {} );\n  }\n\n  interrupt( _ix, _type, _data ) {\n\n\n\n    if( _ix == 0 && this.interruptFlag0 ) {\n        return; //allready in an interrupt0\n    }\n\n    if( _ix == 1 && this.interruptFlag1 ) {\n        return; //allready in an interrupt1\n    }\n\n\n    var line, useLabel;\n    if( _ix == 0 ) {\n\n      line = this.handlers.interrupt0;\n      if( line === undefined ) {\n        return;\n      }\n      this.interruptFlag0 = true;\n      useLabel = this.handlers.interrupt0ParamIsLabel;\n    }\n    else {\n\n      line = this.handlers.interrupt1;\n      if( line === undefined ) {\n        return;\n      }\n      this.interruptFlag1 = true;\n      useLabel = this.handlers.interrupt1ParamIsLabel;\n    }\n\n\n    this.newScope( \"interrupt\" + _ix,\n      { runPointer: this.runPointer, runPointer2: this.runPointer2 } );\n\n    var variables = Object.entries( _data );\n    this.setVar( \"itr0$\".toUpperCase(), _type.toUpperCase() );\n    for( var i=0; i<variables.length; i++) {\n      this.setVar( variables[i][0].toUpperCase(), variables[i][1] );\n    }\n\n    var pgm = this.program;\n    var len=this.program.length;\n    var found = false;\n\n    if( useLabel ) {\n\n      line = this.labels[line];\n      if( line == undefined ) {\n        throw \"@undef'd label\";\n      }\n    }\n\n    for( var i=0; i<len; i++) {\n      var l = pgm[i];\n\n      if( l[0] == line ) {\n        this.runPointer = i;\n        this.runPointer2 = 0;\n        found = true;\n        break;\n      }\n    }\n\n    if(!found ) {\n      throw \"@invalid interrupt handler\";\n    }\n\n  }\n\n  receiveMessage( _message, _data ) {\n\n    this.vars[ this.waitForMessageVariable ] = _message;\n    this.waitForMessageFlag = false;\n\n    if( _message.startsWith( \"displaysize:\" )) {\n        this.output.reInit( _data.textW, _data.textH );\n        this.bitmap.reInit( _data.bitmapW, _data.bitmapH );\n        this.sys.displayMode = _data.mode;\n\n    }\n    else if( _message == \"load:error\" ) {\n\n      if( this.runFlag == false ) {\n          this.printError(\"load\", false, undefined, _data.reason );\n      }\n    }\n    else if( _message == \"load:completed\" ) {\n\n      sys.log(\"Received 'load:completed' message. Loaded \" + _data.pgmData.length + \" bytes..\" );\n\n      var ok = this.bootPGM( _data.pgmData, _data.path  );\n      sys.log(\"Parsed program => RUN\");\n\n      if( ok && this.autoStartAfterLoad ) {\n        this.output.control( 24 )\n        this.runPGM();\n        sys.log(\"Program started...\");\n      }\n      else {\n        this.stop();\n      }\n    }\n    else if( _message == \"loaddata:completed\" ) {\n\n      sys.log(\"Received 'loaddata:completed' message. Loaded \" + _data.data.length + \" bytes..\" );\n      this.insertData( _data.data, _data.type, _data.label  );\n\n    }\n    else if( _message == \"loaddata:error\" ) {\n\n      sys.log(\"Received 'loaddata:error' message. Error \" + _data.reason );\n\n      this.printError(\"loaddata\", false, undefined, _data.reason );\n      this.stop();\n    }\n    else if( _message == \"delete:completed\" ) {\n\n      sys.log(\"Received 'delete:completed' message.\" );\n\n    }\n    else if( _message == \"delete:error\" ) {\n\n      sys.log(\"Received 'delete:error' message. Error \" + _data.reason );\n\n      this.printError(\"delete\", false, undefined, _data.reason );\n      this.stop();\n    }\n    else if( _message == \"save:completed\" ) {\n\n      sys.log(\"Received 'save:completed' message.\" );\n\n      if( !this.isRunning() ) {\n      }\n    }\n    else if( _message == \"save:error\" ) {\n\n      sys.log(\"Received 'save:error' message. Error \" + _data.reason );\n\n      this.printError(\"save\", false, undefined, _data.reason );\n      this.stop();\n    }\n    else if( _message == \"dir:completed\" ) {\n\n      sys.log(\"Received 'dir:completed' message.\" );\n\n      var list = [\"\",\"Directory of: \\\"\" + _data.title + \"\\\" on \" + _data.fs, \"\" ];\n\n      for( var i=0; i<_data.files.length; i++) {\n          list.push( _data.files[i].fname );\n      }\n\n      list.push( _data.files.length + \" files\");\n\n      this.enterListMode( list );\n\n    }\n    else if( _message == \"listfs:completed\" ) {\n\n      sys.log(\"Received 'listfs:completed' message.\" );\n\n      var list = [\"\", \"Default Filesystem: \\\"\" + _data.currentFs + \"\\\"\", \"\", \"Devices:\", \"\" ];\n\n      for( var i=0; i<_data.fs.length; i++) {\n          list.push(\"    \\\"\" + _data.fs[i] + \"\\\"\");\n      }\n\n      list.push( \"\" );\n      list.push( _data.fs.length + \" Filesystem Devices Found\");\n\n      this.enterListMode( list );\n\n    }\n    else if( _message == \"setfs:completed\" ) {\n\n      if( !this.isRunning() ) {\n        if( _data.status == \"ok\" ) {\n        }\n        else {\n          this.printError(\"file system\", false, undefined, \"Could not select file system\" );\n        }\n\n      }\n      else {\n        if( _data.status != \"ok\" ) {\n\n          this.printError(\"file system\", false, undefined, \"Could not select file system\" );\n          this.stop();\n        }\n      }\n    }\n\n    if( this.stopAfterMessage ) {\n      this.stopAfterMessage = false;\n      this.runFlag = false;\n      this.HandleStopped( false );\n\n    }\n\n    if( !this.isRunning() && this.listFlag == false ) {\n      this.printReady();\n    }\n\n  }\n\n  stop() {\n    if( this.runFlag ) {\n      this.runStop();\n    }\n    if( this.listFlag ) {\n      this.listStop();\n    }\n  }\n\n  interactiveKeyHandler( e ) {\n\n    if( this.runFlag == true ) {\n      if( e.keyLabel == \"Enter\" ) {\n\n        var cxy = this.output.getCursorPos();\n\n        var string = this.output.getLineFrom( this.inputStartInputPosX, cxy[1]);\n        this.output.writeln(\"\");\n\n        this.handleLineInput( string, true );\n      }\n      else if( e.keyLabel == \"Backspace\" ||\n              e.keyLabel == \"Delete\"  ) {\n        var x = this.output.getCursorPos()[0];\n\n        if( e.keyLabel == \"Delete\" ) {\n              this.output.delete();\n        }\n        else {\n            if( x > this.inputStartInputPosX ) {\n                this.output.backspace();\n            }\n            else {\n              this.output.delete();\n            }\n        }\n\n      }\n      else if( e.keyLabel == \"ArrowLeft\" && !e.ctrlKey) {\n        var cx = this.output.getCursorPos();\n        if( cx[0] > this.inputStartInputPosX ) {\n          this.output.cursorMove(\"left\");\n        }\n      }\n      else if( e.keyLabel == \"ArrowRight\" && !e.ctrlKey) {\n        this.output.cursorMove(\"right\");\n      }\n      else if( e.keyLabel == \"Home\" && !e.ctrlKey ) {\n        var xy = this.output.getCursorPos();\n\n        this.output.setCursorPos( this.inputStartInputPosX, xy[1]);\n      }\n      else if( (e.keyLabel == \"ArrowRight\" && e.ctrlKey)) {\n        this.output.jumpTo(\"text-end\");\n      }\n      else if( e.keyLabel == \"End\" ) {\n        this.output.jumpTo(\"text-end-all\");\n      }\n      else if( (e.keyLabel == \"ArrowLeft\" && e.ctrlKey) ) {\n        this.output.jumpTo(\"text-start\");\n        var xy = this.output.getCursorPos();\n        if( xy[0]< this.inputStartInputPosX ) {\n          this.output.setCursorPos( this.inputStartInputPosX, xy[1] );\n        }\n      }\n      else {\n        if( e.key != null ) {\n          this.output.write( e.key );\n        }\n      }\n    }\n    else {\n      this.editor.interactiveKeyHandler( e );\n    }\n  }\n\n  toggleMenu()  {\n    this.menuEnable = !this.menuEnable;\n\n    if( this.menuEnable ) {\n      this.sys.signalHideMenu( false );\n    }\n    else {\n      this.sys.signalHideMenu( true );\n    }\n  }\n\n  HandleStopped( startingProgram ) {\n\n    this.input.setInterActive( true);\n    this.input.flush();\n    if( !startingProgram && this.menuEnable ) {\n      this.sys.signalHideMenu( false );\n    }\n\n    this.flagStatusChange();\n  }\n\n  importPGMHandler( content, filename ) {\n    var pgm = this.textLinesToBas( content.split(\"\\n\") ).pgm;\n    this.fileName = filename;\n\n    this.program = pgm;\n    this.sys.log( \"imported program \" + filename +\" with \" + content.length + \" bytes \");\n  }\n\n  bootPGM( content, filename ) {\n    try {\n      var pgm = this.textLinesToBas( content.split(\"\\n\") ).pgm;\n      this.fileName = filename;\n\n      this.program = pgm;\n      this.setProgram( pgm );\n\n      this.sys.log( \"imported program \" + filename +\" with \" + content.length + \" bytes \");\n      return true;\n    }\n    catch ( e ) {\n      var tmp = 1;\n\n      var pgm = this.textLinesToBas( \"\" ).pgm;\n      this.program = pgm;\n      this.HandleStopped( false );\n      this.printError(\"parsing syntax\", false, e.lineNr, e.detail );\n      this.printReady();\n      return false;\n\n    }\n  }\n\n\n/*  exportPGM() {\n    var exportName = \"program.bas\";\n    if( this.fileName ) {\n      exportName = this.fileName;\n    }\n\n    var text = this.getProgramAsText();\n    this.DESKTOP.requestDownload( text, exportName );\n  }\n*/\n\n  exitProgram() {\n    this.closeWindow( this.windowId );\n  }\n\n\n  enterListMode( list ) {\n    this.listFlag = true;\n    this.list = list;\n    this.listPointer = 0;\n    this.printLine(\"\");\n    this.input.setInterActive( false );\n    this.flagStatusChange();\n  }\n\n  setExitMode( v ) {\n    this.exitMode = v;\n  }\n\n  synchClock() {\n\n    //var clock = new Date().getTime();\n    var nullClock = new Date();\n    nullClock.setHours(0);\n    nullClock.setSeconds(0);\n    nullClock.setMinutes(0);\n    nullClock.setMilliseconds(0);\n\n    this.nullTime = nullClock;\n\n  }\n\n  setTurbo( on ) {\n    if( on ) {\n      this.cmdCountPerCycle = this.cmdCountPerCycleTurbo ;\n      this.turboMode = true;\n      return;\n    }\n    this.cmdCountPerCycle = this.cmdCountPerCycleDefault ;\n    this.turboMode = false;\n  }\n\n  setProgram( pgm ) {\n    this.program = pgm;\n    this.runFlag = false;\n    this.HandleStopped( true );\n\n    this.inputFlag = false;\n    this.listFlag = false;\n\n    this.flagStatusChange();\n\n  }\n\n  appendProgram( pgm ) {\n\n    for(var i=0; i<pgm.length; i++) {\n      var exists = -1;\n\n      for(var j=0; j<this.program.length; j++) {\n        if( this.program[j][0] == pgm[i][0] ) {\n          exists = j;\n        }\n      }\n\n      if( exists>-1 ) {\n        this.program[ exists ] = pgm[ i ];\n      }\n      else {\n        this.program.push( pgm[ i ] );\n      }\n    }\n\n    var sortF = function compare( a, b ) {\n      return a[0] - b[0];\n    }\n\n    this.program.sort( sortF );\n\n    this.runFlag = false;\n    this.HandleStopped( false );\n\n    this.inputFlag = false;\n    this.listFlag = false;\n    //this.output.clearCursor();\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  getProgramState() {\n    return {\n      runFlag: this.runFlag,\n      inputFlag: this.inputFlag,\n      vars: this.vars,\n      functions: this.functions,\n      forContext: this.forContext,\n      runPointer: this.runPointer,\n      runPointer2: this.runPointer2\n    }\n  }\n\n  setProgramState( pgmState ) {\n      this.runFlag = pgmState.runFlag;\n      this.HandleStopped( false );\n      this.inputFlag = pgmState.inputFlag;\n      this.vars = pgmState.vars;\n      this.functions = pgmState.functions;\n      this.forContext = pgmState.forContext;\n      this.runPointer = pgmState.runPointer;\n      this.runPointer2 = pgmState.runPointer2;\n  }\n\n  _setByteBits( bits ) {\n\n   var byte = 0b00000000;\n\n   for( var i=0; i<8; i++) {\n     if(i>0) {\n       byte = byte >> 1;\n     }\n     if( bits[i]) {\n       byte = byte | 128;\n     }\n   }\n   return byte;\n  }\n\n  _getByteBits( byte ) {\n    var masks = [\n      0b00000001,0b00000010,0b00000100,0b00001000,\n      0b00010000,0b00100000,0b01000000,0b10000000\n    ];\n\n   var results = [ false, false, false, false, false, false, false, false ];\n\n   for( var i=0; i<8; i++) {\n\n     results[ i ] = (byte & masks[i]) > 0;\n\n   }\n\n   return results;\n  }\n\n  upperFirst( s ) {\n    if( s ) {\n      if ( s.length > 1 ) {\n          return s.substr(0,1).toUpperCase() + s.substr( 1 );\n      }\n    }\n    return s;\n  }\n\n  printError( s, supressLine, explicitline, detail ) {\n\n    var line1 = (\"?\" + this.upperFirst( s ) + \" error\" + this.onLineStr());\n\n    if( explicitline ) {\n        line1 = ( (\"?\" + this.upperFirst( s ) + \" error in \" + explicitline ) );\n    }\n    if( supressLine ) {\n        line1 = ( (\"?\" + this.upperFirst( s ) + \" error\") );\n    }\n\n    this.output.writeln(  line1 );\n    if( detail ) {\n      this.output.writeln(  \">> \" + detail );\n    }\n\n  }\n\n  printInfo( s ) {\n\n    this.sys.log(  ( s + this.onLineStr()).toUpperCase() );\n\n  }\n\n  printHelp() {\n    this.extendedcommands[\"_stat_help\"]([]);\n  }\n\n  printLine( s ) {\n    this.output.writeln(s);\n    this.reverseOn = false;\n  }\n\n\n  print( s ) {\n    this.output.writeln(s);\n    this.reverseOn = false;\n  }\n\n\n//{ fg: 5, bg:1, border: 7 }\n  colorReset( colors ) {\n    this.output.setDefault( colors.fg, colors.bg );\n    this.output.control( 18, colors.border );\n    this.output.colorReset();\n  }\n\n  resetConsole() {\n    var wh = this.output.getDimensions();\n\n    //this.output.textArea(  wh[0], wh[1], -1, -1 );\n\n    this.output.reset();\n    //this.output.setPos(0,0);\n  }\n\n  clearScreen() {\n    this.output.clear();\n    this.output.setPos(0,0);\n  }\n\n  getMillis() {\n    var millis=new Date().getTime() - this.nullTime;\n    return millis;\n  }\n\n  getJiffyTime() {\n    var millis=new Date().getTime() - this.nullTime;\n    var jiffis = Math.floor(millis / (1000 / 60));\n\n    return jiffis % 5184000;\n  }\n\n  getTime() {\n    var millis=new Date().getTime() - this.nullTime;\n    millis = millis % 86400000;\n\n    var hours = Math.floor(millis / 3600000);\n    millis = millis - (hours * 3600000 );\n    var minutes = Math.floor(millis / 60000);\n    millis = millis - (minutes * 60000 );\n    var seconds = Math.floor(millis / 1000);\n    //millis = millis - (seconds * 1000 );\n    return [hours,minutes,seconds];\n  }\n\n  reset( hard, muteReady ) {\n    this.output.clearScreen();\n    this.output.writel(\"Ready.\");\n\n    this.inputFlag = false;\n    this.runFlag = false;\n    this.listFlag = false;\n\n    this.clrPGM();\n    this.setTurbo( false );\n  }\n\n  compressPGMText( pgmTxt ) {\n\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n    var kws = p.getKeyWordCodes();\n    var txt2 = pgmTxt;\n\n    for( var i=0; i<kws.length; i++) {\n      var kw = kws[i];\n      if( !(kw===undefined || kw === null )) {\n          txt2 = txt2.replaceAll( kw.toLowerCase() , String.fromCharCode(i));\n      }\n    }\n\n    return txt2;\n  }\n\n\n  getProgramAsTextNoPETSCII() {\n    var text = \"\";\n    for (const l of this.program)\n      {\n        if( text != \"\") {\n          text += \"\\n\";\n        }\n        text +=  this.prepareLineForExportNoPETSCII( l[2].trim(), true );\n      }\n    return text;\n  }\n\n  getProgramSize() {\n    return this.program.length;\n  }\n\n  getProgramAsText() {\n    var text = \"\";\n    for (const l of this.program)\n      {\n        if( text != \"\") {\n          text += \"\\n\";\n        }\n        //text +=  this.prepareLineForExport( l[2].trim() );\n        if( l[1][0].type == \"control\" && l[1][0].controlKW == \"sub\" ) {\n            text += \"\\n\";\n        }\n        text += l[2].trim();\n      }\n    return text;\n  }\n\n  prepareLineForExport( txt0 ) {\n    var txt;\n    txt = txt0.trim();\n    var dst = \"\";\n\n    for( var i=0; i<txt.length; i++) {\n      var c = txt.charCodeAt( i );\n      if( c<31 || c==92 || c>=126 ) {\n        var symdef = this.symbolTableBM[ c ];\n        if( ! ( symdef === undefined ) ) {\n            dst += \"{\" + symdef + \"}\";\n        }\n        else {\n            dst += \"{\"+c+\"}\"\n        }\n\n      }\n      else {\n        dst += txt.charAt( i );\n      }\n    }\n    return dst.toLowerCase();\n  }\n\n  replaceAll( src, str1, str2 ) {\n\n    var rv = src;\n    while( rv.indexOf( str1 ) > -1 ) {\n      rv = rv.replace( str1, str2 );\n    }\n    return rv;\n  }\n\n\n  rebuildNoPETSCIILineString( raw )\n  {\n\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n    var noPetsciiLine = this.prepareLineForExportNoPETSCII( raw, false );\n    var rec = p.parseLine( noPetsciiLine );\n    return rec;\n  }\n\n\n  prepareLineForExportNoPETSCII( txt0, toLower ) {\n    var txt;\n    txt = txt0.trim();\n    var dst = \"\";\n    var last= \"\";\n\n    for( var i=0; i<txt.length; i++) {\n      var c = txt.charCodeAt( i );\n      var cc = txt.charAt( i );\n      if( c<31 || c==92 || c>=94 ) {\n\n        var prevCharIsQuote = false, nextCharIsQuote=false;\n        if( (i+1)<txt.length) {\n          var cc2 = txt.charAt( i+1 );\n          if( cc2 == \"\\\"\" ) {\n            nextCharIsQuote = true;\n          }\n        }\n        if( last == \"\\\"\" ) {\n            prevCharIsQuote = true;\n          }\n\n        if( prevCharIsQuote && !nextCharIsQuote ) {\n            dst = dst.substr( 0, dst.length-1 );\n            dst += \"CHR$(\"+c+\");\\\"\";\n        }\n        else if( prevCharIsQuote && nextCharIsQuote ) {\n            dst = dst.substr( 0, dst.length-1 );\n            dst += \"CHR$(\"+c+\")\";\n            i++;\n        }\n        else if( !prevCharIsQuote && nextCharIsQuote ) {\n            dst += \"\\\";CHR$(\"+c+\")\";\n            i++;\n        }\n\n        else {\n            dst += \"\\\";CHR$(\"+c+\");\\\"\";\n        }\n      }\n      else {\n        dst += txt.charAt( i );\n      }\n      last = cc;\n    }\n\n    var dst2= this.replaceAll( dst, \";\\\"\\\";\",\";\");\n\n    if( toLower ) { return dst2.toLowerCase(); }\n    return dst2;\n  }\n\n  ResolveStringSymbolToCode( x ) {\n\n    if(this.symbolTable[x]) {\n      return this.symbolTable[x];\n    }\n\n    return x;\n  }\n\n  prepareLineForImport( txt0 ) {\n    var txt;\n    txt = txt0.trim(); //.toUpperCase();\n    var dst = \"\";\n\n    var i=0; while( i<txt.length ) {\n      var c = txt.charCodeAt( i );\n      if( c == 123 ) {\n        i++;\n        var num = \"\";\n        while( i < txt.length ) {\n            c = txt.charCodeAt( i );\n            if( c == 125 ) {\n              i++;\n              break;\n            }\n            num += String.fromCharCode( c );\n\n            if( this.debugFlag ) {\n              console.log(\"found ESC seq char \" + String.fromCharCode( c ) );\n              console.log(\"found ESC seq char code \" + c);\n            }\n            i++;\n        }\n\n        if( this.debugFlag ) {\n          console.log(\"found ESC seq \" + num);\n        }\n\n        num = this.ResolveStringSymbolToCode(num.toLowerCase());\n\n        if( this.debugFlag ) {\n          console.log(\"found resolved ESC seq \" + num);\n        }\n\n        dst += String.fromCharCode( parseInt( num, 10) );\n      }\n      else if( c == 8221 || c == 8220) { //looks like a double quote\n        dst += \"\\\"\";\n        i++;\n      }\n      else {\n        dst += txt.charAt( i );\n        i++;\n      }\n    }\n\n    if( this.debugFlag ) {\n      console.log(\"dst:\" + dst);\n    }\n\n    return dst;\n  }\n\n  getProgramLines() {\n\n    return this.program;\n  }\n\n  padZeros2( x ) {\n    var s = x + \"\";\n    for(var i=s.length; i<2; i++) {\n      s=\"0\"+s;\n    }\n    return s;\n  }\n\n  evalExpressionPart( p ) {\n    var val=0;\n\n    if( p.type==\"num\" ) {\n      if( p.data == \".\" ) {\n        val = 0;\n      }\n      else if((\"\"+p.data).indexOf(\".\") >= 0) {\n        val = parseFloat(p.data);\n      }\n      else {\n        val = parseInt(p.data);\n      }\n    }\n    else if( p.type==\"str\" ) {\n      val = p.data;\n    }\n    else if( p.type==\"var\" ) {\n      if(p.data.startsWith(\"TI\")) {\n        val = this.getMillis();\n        if(p.data.endsWith(\"$\")) {\n          val = this.getTime();\n          val = \"\" +\n            this.padZeros2(val[0]) +\n            this.padZeros2(val[1]) +\n            this.padZeros2(val[2]);\n        }\n      }\n      else if(p.data == \"CURRENTLINE\") {\n        val = this.runPointer;\n        if( val != -1 ) {\n          val = parseInt( this.program[ val ][0] );\n        }\n      }\n      else if(p.data == \"PI\") {\n        val = Math.PI;\n      }\n      else {\n        val = this.vars[ p.data ];\n      }\n      if( val == undefined ) {\n        val = 0;\n        if( this.scopes[0].vars[ p.data ] ) {\n          val = this.scopes[0].vars[ p.data ];\n        }\n      }\n    }\n    else if( p.type==\"array\" ) {\n      var varIntName = \"@array_\" + p.data;\n      var arr = this.vars[ varIntName ];\n\n      if( arr === undefined ) {\n        if( this.scopes[0].vars[ varIntName ] ) {\n          arr = this.scopes[0].vars[ varIntName ];\n        }\n        if( arr === undefined ) {\n          throw \"@no such array@Array '\"+ varIntName+\"' does not exist\";\n        }\n      }\n\n      if( arr.getIndexCount() != p.indices.length ) {\n          throw \"@bad subscript@Array index dimensions do not match\";\n      }\n\n      var indices = [];\n      for( var ai=0; ai<p.indices.length; ai++) {\n        indices[ai] = this.evalExpression( p.indices[ ai ] );\n      }\n\n      val = arr.get( indices );\n      if( val === undefined ) {\n        val = 0;\n      }\n\n    }\n    else if( p.type==\"expr\" ) {\n      val = this.evalExpression( p );\n    }\n    else if( p.type==\"funCall\" ) {\n\n      var values = [];\n      for( var j=0; j<p.params.length; j++) {\n        var par = this.evalExpression( p.params[j] );;\n        values.push( {value: par} );\n      }\n      try {\n        var commands = this.commands;\n        var ecommands = this.extendedcommands;\n        var cmds = this.commands;\n\n        var nFunName = \"_fun_\" + p.functionName.toLowerCase().replace(\"$\",\"_DLR_\");\n\n        var stc = commands[ nFunName ];\n        if( stc === undefined ) {\n\n          stc = ecommands[ nFunName ];\n\n          if( stc === undefined ) {\n\n            stc = ecommands[ nFunName ];\n\n            this.printError(\"no such function: \" + p.functionName);\n            console.log(\"Cannot find functionName \" + nFunName );\n\n            throw \"@no such function \" + p.functionName;\n\n          }\n          else {\n            cmds = ecommands;\n          }\n        }\n\n        val = cmds[ nFunName ]( values );\n\n      }\n      catch ( e ) {\n        throw e;\n      }\n    }\n    else if( p.type==\"defFnCall\" ) {\n\n      try {\n        var fName = p.functionName;\n        var parValue = this.evalExpression( p.params[0] );\n        var restore = null;\n\n        if( this.functions[ fName ] === undefined ) {\n          throw \"@undef'd function\";\n        }\n        var functRecord = this.functions[ fName ];\n\n        if(!(  this.vars[ functRecord.par ] === undefined )) {\n          restore= this.vars[ functRecord.par ];\n        }\n\n        this.vars[ functRecord.par ] = parValue;\n        val  = this.evalExpression( functRecord.expr );\n\n        if( restore != null ) {\n          this.vars[ restore.name ] = restore;\n        }\n        else {\n          this.vars[ functRecord.par ] = 0; //TODO, actually should delete it\n        }\n\n      }\n      catch ( e ) {\n        throw e;\n      }\n    }\n\n    return val;\n  }\n\n  evalExpression( expr ) {\n\n    if( expr == null ) {\n      return null;\n    }\n\n    if( expr.parts.length == 0 ) {\n      return null;\n    }\n\n    var val = this.evalExpressionPart( expr.parts[ 0 ] );\n\n    for( var i=1; i<expr.parts.length; i++) {\n      var p = expr.parts[ i ];\n      if( p.op == \"+\" ) {\n        val += this.evalExpressionPart( p );\n      }\n      else if( p.op == \"^\" ) {\n        val = Math.pow( val, this.evalExpressionPart( p ) );\n      }\n      else if( p.op == \"-\" ) {\n        val -= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"*\" ) {\n        val *= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"/\" ) {\n        if( this.evalExpressionPart( p ) == 0) {\n          throw \"@division by zero\";\n        }\n        val /= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"%\" ) {\n        val %= this.evalExpressionPart( p );\n      }\n      else if( p.op == \";\" ) {\n        val += (\"\" + this.evalExpressionPart( p ));\n      }\n      else if( p.op == \"OR\"  ) {\n          val |= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"AND\"  ) {\n          val &= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"<\" ) {\n        if( val < (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \">\" ) {\n        if( val > (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \"=\" ) {\n        if( val == (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \"<>\" ) {\n        if( val != (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \"<=\" ) {\n        if( val <= (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \">=\" ) {\n        if( val >= (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n\n      else {\n        throw \"@syntax@unknown operator '\"+p.op+\"'\";\n      }\n    }\n\n    if( expr.negate ) {\n      return -val;\n    }\n    if( expr.binaryNegate ) {\n      if( val == 0 ) {\n        return -1;\n      }\n      return 0;\n    }\n    return val;\n  }\n\n  exitInputState() {\n    var con = this.output;\n    var p = this.program;\n\n    this.inputFlag = false;\n\n\n    var l = this.program[ this.runPointer ];\n    var cmds = l[1];\n    //console.log(cmds);\n\n\n    if( this.runPointer > -1 ) {\n\n        var l=this.program[this.runPointer];\n        //console.log( l[0] + \"after input >>(\" + this.runPointer + \":\"  + this.runPointer2 +\")\");\n    }\n\n    this.runPointer2++;\n\n    if( this.runPointer > -1 ) {\n\n        var l=this.program[this.runPointer];\n        //console.log( l[0] + \"after input >>>(\" + this.runPointer + \":\"  + this.runPointer2 +\")\");\n    }\n\n    if( this.runPointer2 >=  cmds.length ) {\n\n\n      this.runPointer2 = 0;\n      this.runPointer++;\n\n      if( this.runPointer > -1 ) {\n\n          var l=this.program[this.runPointer];\n          //console.log( l[0] + \"after input >>>>(\" + this.runPointer + \":\"  + this.runPointer2 +\")\");\n      }\n\n      this.sys.blinkMode( false  );\n\n      if( this.runPointer >=  p.length ) {\n\n        if( this.runPointer > -1 ) {\n\n            var l=this.program[this.runPointer];\n            //console.log( l[0] + \"after input >>>>>(\" + this.runPointer + \":\"  + this.runPointer2 +\")\");\n        }\n\n        this.runFlag = false;\n\n        this.HandleStopped( false );\n        //con.clearCursor();\n        this.printLine(\"\");\n        this.printReady();\n\n      }\n\n    }\n\n\n  }\n\n  breakCycle() {\n    this.breakCycleFlag = true;\n  }\n\n\n\n  cycle() {\n\n    /*return values*/\n    var END_W_ERROR = 0;\n    var TERMINATE_PROGRAM = -1;\n    var LINE_FINISHED = 10;\n    var MIDLINE_INTERUPT = 20;\n    var TERMINATE_W_JUMP = 30;\n    var PAUSE_F_INPUT = 40;\n\n    var c = this.output;\n\n    var cmdCount = this.cmdCountPerCycle;\n    var lineNumber = -1;\n    try {\n\n      if( this.bitmap.isActive() ) {\n        this.bitmap.triggerFlush();\n      }\n      if( this.output.isActive() && this.output.changeCount() > 0) {\n        this.output.triggerFlush();\n      }\n\n      if( !this.runFlag ||\n            this.inputFlag ||\n            this.listFlag\n             ) {\n\n        if( this.listFlag ) {\n           var countdown = this.listSpeed;\n           while( this.listPointer < this.list.length && countdown-- > 0 ) {\n               this.listCodeLine( this.list[ this.listPointer ] );\n               this.listPointer++;\n           }\n           if (  this.listPointer >= this.list.length ){\n             this.listStop();\n             this.flagStatusChange();\n           }\n\n        }\n      }\n      else {\n\n        if(this.debugFlag) console.log(\"START CYCLE------------------------------\" );\n\n        var p = this.program;\n\n        while (true) {\n\n\n          if( this.waitForMessageFlag ) {\n              return this.statusChanged;\n          }\n\n          if( this.breakCycleFlag ) {\n            this.breakCycleFlag = false;\n            break;\n          }\n\n          if(this.debugFlag) console.log(\"START CYCLE LOOP-------------\" );\n          var l = p[ this.runPointer ];\n          lineNumber = l[0];\n\n          if( l === undefined ) {\n            var t=1;\n          }\n          var bf = this.runPointer2;\n          if(this.debugFlag) console.log(\" this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n          if(this.debugFlag) console.log(\" cmdCount = \" + cmdCount);\n          var rv = this.runCommands( l[1], cmdCount );\n\n          if(! ( this.traceVars === undefined )) {\n              for( var tvi=0; tvi<this.traceVars.length; tvi++) {\n                var thisVar = this.traceVars[ tvi ];\n                var thisValue = this.vars[ thisVar ];\n                var oldValue = this.traceOldValues[ thisVar ];\n\n                if( ! ( thisValue === undefined )) {\n                  if( oldValue != thisValue ) {\n                    this.traceList.push(\n                      \"TRC(\" + lineNumber + \") \" + thisVar + \"=\" + thisValue\n                    );\n\n                    this.traceOldValues[ thisVar ] = thisValue;\n                  }\n\n                }\n              }\n          }\n\n          //console.log(\" rv = \", rv);\n          var af = rv[ 1 ];\n\n          if( rv[0] == MIDLINE_INTERUPT) {\n            this.runPointer2 = af;\n          }\n\n          var executedCount = rv[2];\n\n          if(this.debugFlag) console.log(\" bf = \" + bf, \" af = \" + af);\n          if(this.debugFlag) console.log(\" executedCount = \" + executedCount);\n          if(this.debugFlag) console.log(\" rv = \" + rv);\n\n          cmdCount = cmdCount - executedCount;\n\n          if( rv[0]<=0 ) {\n            if(this.debugFlag) console.log(\" PGM END!!!!\" );\n            this.runFlag = false;\n            var e = null;\n            if( rv.length >= 4 ) {\n              e = rv[3];\n            }\n            this.printLine(\"\");\n            this.printReady();\n            this.HandleStopped( false );\n            if( rv[0] == END_W_ERROR ) {\n\n              this.setVar(\"LINE\", lineNumber );\n              console.log(\"ERROR: \", e, \" LINE \", this.retreiveRuntimeLine() );\n              console.log(\"PARAMETER DUMP:\", this.vars );\n              console.log(\"FUNCTION DUMP:\", this.functions );\n            }\n            if(this.debugFlag) console.log(\"CYCLE RETURN END\");\n            return this.statusChanged;\n          }\n          else if( rv[0] == LINE_FINISHED ) {\n            this.runPointer ++;\n            this.runPointer2 = 0;\n            if(this.debugFlag) console.log(\" new this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n\n            if( this.runPointer >=  p.length ) {\n              if(this.debugFlag) console.log( \"end program\");\n\n              this.setVar(\"LINE\", lineNumber );\n\n              if( !this.waitForMessageFlag ) {\n                this.runFlag = false;\n                this.HandleStopped( false );\n                this.printReady();\n              }\n              else {\n                this.stopAfterMessage = true;\n              }\n              break;\n            }\n          }\n          else if( rv[0] == TERMINATE_W_JUMP ) {\n\n            if(this.debugFlag) console.log(\" jump to new this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n\n          }\n          else if( rv[0] == PAUSE_F_INPUT ) {\n\n            this.runPointer2 = af;\n            if(this.debugFlag) console.log(\"CYCLE PAUSE 4 INPUT\" + this.runPointer + \",\" + this.runPointer2);\n            break;\n\n          }\n\n          if( cmdCount<=0 ) {\n            if(this.debugFlag) console.log(\"Breaking cmdCount=\" + cmdCount)\n            break;\n          }\n\n        }\n\n        if(this.debugFlag) console.log(\" this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n\n      }\n\n    }\n    catch (e) {\n      //c.clearCursor();\n\n      sys.log(\"DEBUG: \", typeof e );\n\n      this.setVar(\"LINE\", lineNumber );\n\n\n\n      if( this.erh.isSerializedError( e ) ) {\n        var err = this.erh.fromSerializedError( e );\n\n        this.setVar(\"ERR\", err.clazz );\n        this.setVar(\"ERRDETAIL\", err.detail  );\n\n        this.printError( err.clazz, undefined, undefined, err.detail );\n      }\n      else {\n        var err = this.erh.fromSimpleExternalError( e, undefined, undefined );\n\n        if( err ) {\n\n            this.setVar(\"ERR\", err.clazz );\n            this.setVar(\"ERRDETAIL\", err.detail  );\n            this.printError( err.clazz, undefined, undefined, err.detail );\n        }\n        else {\n\n            this.setVar(\"ERR\", \"unexpected\" );\n            this.setVar(\"ERRDETAIL\", \"unexpected\"  );\n            this.printError( \"unexpected\", undefined, undefined, e );\n        }\n\n      }\n\n      this.printReady();\n      this.runFlag = false;\n      this.HandleStopped( false );\n\n      sys.log(\"ERROR: \", e, \" LINE \", this.retreiveRuntimeLine() );\n      sys.log(\"PARAMETER DUMP:\", this.vars );\n      sys.log(\"FUNCTION DUMP:\", this.functions );\n\n    }\n\n    return this.statusChanged;\n  }\n\n  doReturn() {\n\n    var oldPointers = this.gosubReturn.pop();\n    if( oldPointers === undefined ) {\n      throw \"@return without gosub\";\n    }\n\n    this.runPointer2 = oldPointers[ 1 ];\n    this.runPointer = oldPointers[ 0 ];\n\n    //this.goto( oldLine );\n  }\n\n\n  doInterruptReturn() {\n\n    if( this.scope.name == \"interrupt0\" ) {\n      this.interruptFlag0 = false; // TODO interrupt, take from scope which flag\n    }\n    else {\n      this.interruptFlag1 = false; // TODO interrupt, take from scope which flag\n    }\n\n    this.runPointer = this.scope.data.runPointer;\n    this.runPointer2 = this.scope.data.runPointer2;\n\n    this.closeScope();\n\n  }\n\n\n\n\n  gosub( line0, runPointer2 ) {\n\n\n    var pgm = this.program;\n    var len=this.program.length;\n    var retLine = null;\n    var retCmd = null;\n\n    var line = line0;\n    if( (typeof line0).toLowerCase() == \"string\" ) {\n      line = this.labels[line0];\n      if( line == undefined ) {\n        throw \"@undef'd label\";\n      }\n    }\n\n    this.runPointer2 = runPointer2;\n\n    if( ( this.runPointer2 + 1) < this.program[ this.runPointer ][1].length ) {\n      retCmd = this.runPointer2 + 1;\n      retLine = this.runPointer;\n    }\n    else {\n      if( (this.runPointer+1) < len ) {\n        retCmd=0;\n        retLine = this.runPointer+1 ;\n      }\n      else {\n        retCmd=9999;\n        retLine = this.runPointer;\n      }\n    }\n\n    this.gosubReturn.push( [ retLine, retCmd ] );\n    this.goto( line );\n  }\n\n  goto( line0 ) {\n\n    //console.log( \"goto line \" + line)\n    var pgm = this.program;\n    var len=this.program.length;\n    var found = false;\n    var line;\n\n    line = line0;\n    if( (typeof line0).toLowerCase() == \"string\" ) {\n      line = this.labels[line0];\n      if( line == undefined ) {\n        throw \"@undef'd label\";\n      }\n    }\n\n    for( var i=0; i<len; i++) {\n      var l = pgm[i];\n\n      if( l[0] == line ) {\n        this.runPointer = i;\n        this.runPointer2 = 0;\n        found = true;\n      }\n    }\n\n    if(!found ) {\n      throw \"@undef'd statement\";\n    }\n\n    if(!this.runFlag ) {\n      this.startAsGoto = true;\n      this.runPGM();\n    }\n  }\n\n  listStop() {\n    if( this.listFlag ) {\n      var c = this.output;\n      this.listFlag = false;\n      this.HandleStopped( false );\n      this.printLine( \"\" );\n      this.printReady();\n    }\n  }\n\n\n  runStop() {\n    if( this.runFlag ) {\n      var c = this.output;\n      this.runFlag = false;\n      this.handlers.interrupt0 = undefined;\n      this.handlers.interrupt1 = undefined;\n\n      this.HandleStopped( false );\n\n      console.log( \"break in \" + this.program[ this.runPointer ][0] );\n\n      this.setVar( \"LINE\", this.program[ this.runPointer ][0] );\n      this.setVar(\"ERR\", \"BREAK\" );\n\n      this.printLine(\"\");\n      this.printLine( \"break in \" + this.program[ this.runPointer ][0]);\n      this.printReady();\n    }\n  }\n\n  isRunning() {\n    return this.runFlag;\n  }\n\n  isListing() {\n    return this.listFlag;\n  }\n\n  isInput() {\n    return this.inputFlag;\n  }\n\n  isReady() {\n    return !this.runFlag && !this.listFlag && ! this.executeLineFlag;\n  }\n\n\n  getDataBlocks() {\n    var list = [];\n\n    var mapInfo = Object.entries( this.loadedData );\n    for( var i=0; i<mapInfo.length; i++) {\n      if( mapInfo[i][1].length > 0) {\n        list.push( mapInfo[i][0] + \": \" + mapInfo[i][1].length  );\n      }\n\n    }\n\n    return list;\n\n  }\n\n  readData() {\n\n    if( this.dataPointer >= this.data.length ) {\n      return undefined;\n    }\n\n    var result = this.data[ this.dataPointer ];\n    this.dataPointer++;\n\n    return result;\n  }\n\n\n  getDataLength() {\n\n    return this.data.length;\n\n  }\n\n  setData( label0 ) {\n    var label = label0;\n    if( ! label ) {\n      label = \"default\";\n    }\n\n    this.data = this.loadedData[ label ];\n    this.dataPointer = 0;\n\n  }\n\n  insertData( data, type, label0 ) {\n\n    //this.loadedData = { default: [] };\n    var label = label0;\n    if( ! label ) {\n      label = \"default\";\n    }\n    this.loadedLabel = label;\n    this.dataPointer = 0;\n\n    var arr = [];\n    this.loadedData[label ] = arr;\n\n    var typeParts = type.split(\":\");\n    var typeData = typeParts[0].toUpperCase();\n    var dataSyntax = typeParts[1].toUpperCase();\n\n    this[\"parseSimpleData\" + typeData + \"_\" + dataSyntax]( data, arr );\n\n    this.data = arr;\n  }\n\n\n  parseSimpleDataI_CSV( data, toArr ) {\n    var data2 = data.replaceAll(\" \",\"\").replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\");\n    data2 = data2.split(\",\");\n    for( var i=0; i<data2.length; i++) {\n      toArr.push( data2[ i ] );\n    }\n\n  }\n\n\n  parseSimpleDataS_CSV( data, toArr ) {\n    var data2 = data.replaceAll(\" \",\"\").replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\");\n    data2 = data2.split(\",\");\n    for( var i=0; i<data2.length; i++) {\n      toArr.push( data2[ i ] );\n    }\n\n  }\n\n  parseSimpleDataS_LINES( data, toArr ) {\n    var data2;\n    data2 = data.split(\"\\n\");\n    for( var i=0; i<data2.length; i++) {\n      toArr.push( data2[ i ] );\n    }\n\n  }\n\n  printChar( c  ) {\n    this.output.write( c );\n  }\n\n  listCodeLine( rawLine ) {\n    if( rawLine === undefined ) {\n        this.printLine( \"???\" );\n        return;\n    }\n\n    this.printLine( rawLine );\n\n  }\n\n  rebuildLineString( nr, raw,\n      removePadding,\n      renumbering,\n      addSmartPadding,\n      shortenKeywords)\n  {\n\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n\n    var tokens = p.getTokens( raw, false, false );\n\n    if( ! ( renumbering === undefined )) {\n\n      var foundGoto = false;\n      var foundGotoIndex = 0;\n      for( i = 0; i<tokens.length; i++) {\n        if( tokens[i].type == \"name\" && (tokens[i].data == \"GOTO\" || tokens[i].data == \"GOSUB\") ) {\n          foundGoto = true;\n        } else {\n          if( i>1 ) {\n            if( tokens[i].type == \"num\" &&\n                tokens[i-1].type == \"pad\" &&\n                tokens[i-2].type == \"name\" && tokens[i-2].data == \"THEN\" ) {\n              foundGoto = true;\n              foundGotoIndex = i;\n            }\n            else if( tokens[i].type == \"num\" && tokens[i-1].type == \"name\" && tokens[i-1].data == \"THEN\" ) {\n              foundGoto = true;\n              foundGotoIndex = i;\n            }\n          }\n        }\n\n        if( tokens[i].type == \"num\" && foundGoto &&  i == (foundGotoIndex + 1)) {\n          var newLine = renumbering[ \"old_\" + tokens[i].data ];\n          if( newLine == undefined ) { newLine = 99999;}\n          tokens[i].data =newLine;\n          foundGoto = false;\n        }\n      }\n    }\n    tokens[0].data = nr;\n    var newString;\n\n    newString = nr;\n    if( removePadding ) {\n      newString = nr + \" \" ;\n    }\n    for( var i = 1 ; i< tokens.length; i++) {\n      if( removePadding ) {\n         if( tokens[i].type == \"pad\" ) {\n           continue;\n         }\n       }\n\n       if( shortenKeywords ) {\n         if( tokens[i].type == \"name\" && tokens[i].data == \"PRINT\" ) {\n           tokens[i].data = \"?\";\n         }\n       }\n       else {\n         if( tokens[i].type == \"name\" && tokens[i].data == \"?\" ) {\n           tokens[i].data = \"PRINT\";\n         }\n      }\n\n      if( tokens[i].type == \"str\" ) {\n        newString += \"\\\"\" + tokens[i].data + \"\\\"\";\n      }\n      else if( tokens[i].type == \"name\" && addSmartPadding == true) {\n        newString += tokens[i].data + \" \";\n      }\n      else if( tokens[i].type == \"num\" && addSmartPadding == true) {\n        if( tokens[i].data.length == 1 ) {\n            newString += \" \" + tokens[i].data;\n        }\n        else {\n            newString += tokens[i].data;\n        }\n      }\n      else {\n        newString += tokens[i].data;\n      }\n\n    }\n\n    var rec = p.parseLine( newString );\n\n    return rec;\n  }\n\n  lineIsData( line ) {\n    console.log( line );\n    if( line[1].length == 1 ) {\n      if( ! ( line[1][0].controlKW === undefined) ) {\n        if( line[1][0].controlKW.toUpperCase() == \"DATA\" ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  lineIsRem( line ) {\n    console.log( line );\n    if( line[1].length == 1 ) {\n      if( ! ( line[1][0].controlKW === undefined) ) {\n        if( line[1][0].controlKW.toUpperCase() == \"REM\" ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  lineIsSub( line ) {\n    console.log( line );\n    if( line[1].length == 1 ) {\n      if( ! ( line[1][0].controlKW === undefined) ) {\n        if( line[1][0].controlKW.toUpperCase() == \"SUB\" ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  renumberProgram( start, gap ) {\n\n    var p = this.program;\n\n    var newLineNr = start;\n    var renumbering = {};\n    var lineNumbers = [];\n\n    var method = \"sub\";\n\n    if( method  == \"plain\" ) {\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n\n          renumbering[\"old_\" + line[0]] = newLineNr;\n          lineNumbers.push( newLineNr );\n          newLineNr += gap;\n      }\n    }\n    else if( method  == \"data\" ) {\n      // non data\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var data = this.lineIsData( line );\n\n          if( data ) {\n            continue;\n          }\n          else {\n            renumbering[\"old_\" + line[0]] = newLineNr;\n            lineNumbers.push( newLineNr );\n            newLineNr += gap;\n          }\n      }\n\n      //data\n      var kNumber = Math.ceil( newLineNr / 1000 );\n      var newLineNr2 = 1000 * ( kNumber  );\n      if( newLineNr2 - newLineNr  < 100 ) {\n        newLineNr2+=1000;\n      }\n      newLineNr = newLineNr2;\n\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var data = this.lineIsData( line );\n\n          if( !data ) {\n            continue;\n          }\n          else {\n            renumbering[\"old_\" + line[0]] = newLineNr;\n            lineNumbers.push( newLineNr );\n            newLineNr += gap;\n          }\n      }\n\n    }\n    else if( method  == \"rem\" ) {\n      // non data\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var rem = this.lineIsRem( line );\n\n          if( rem ) {\n            var kNumber = Math.ceil( newLineNr / 1000 );\n            var newLineNr2 = 1000 * ( kNumber  );\n            if( newLineNr2 - newLineNr  < 100 ) {\n              newLineNr2+=1000;\n            }\n            newLineNr = newLineNr2;\n          }\n          renumbering[\"old_\" + line[0]] = newLineNr;\n          lineNumbers.push( newLineNr );\n          newLineNr += gap;\n\n      }\n\n    }\n    else if( method  == \"sub\" ) {\n      // non data\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var rem = this.lineIsSub( line );\n\n          if( rem ) {\n            var kNumber = Math.ceil( newLineNr / 1000 );\n            var newLineNr2 = 1000 * ( kNumber  );\n            if( newLineNr2 - newLineNr  < 100 ) {\n              newLineNr2+=1000;\n            }\n            newLineNr = newLineNr2;\n          }\n          renumbering[\"old_\" + line[0]] = newLineNr;\n          lineNumbers.push( newLineNr );\n          newLineNr += gap;\n\n      }\n\n    }\n    //newLineNr = start;\n    for( var i=0; i<p.length; i++) {\n        newLineNr = lineNumbers[ i ]\n        var line = p[ i ];\n        var lRec = this.rebuildLineString( newLineNr, line[2], true, renumbering, true );\n\n        line[0] = newLineNr;\n        line[1] = lRec.commands;\n        line[2] = lRec.raw.trim();\n\n        //newLineNr += gap;\n    }\n  }\n\n  PETSCIIreplace( keywordCompress ) {\n    var p = this.program;\n\n    for( var i=0; i<p.length; i++) {\n        var line = p[ i ];\n\n        var lRec = this.rebuildNoPETSCIILineString( line[2] );\n\n        line[1] = lRec.commands;\n        line[2] = lRec.raw;\n\n    }\n  }\n\n  compressProgram( keywordCompress ) {\n    var p = this.program;\n\n    for( var i=0; i<p.length; i++) {\n        var line = p[ i ];\n\n       var lRec = this.rebuildLineString( line[0], line[2], true, undefined, false, keywordCompress );\n\n        line[1] = lRec.commands;\n        line[2] = lRec.raw;\n\n    }\n  }\n\n  normalizeProgram() {\n    var p = this.program;\n\n    for( var i=0; i<p.length; i++) {\n        var line = p[ i ];\n\n        var lRec = this.rebuildLineString( line[0], line[2], true, undefined, true );\n\n        line[1] = lRec.commands;\n        line[2] = lRec.raw;\n\n    }\n  }\n\n  clrPGM() {\n    this.vars = {};\n    this.functions = [];\n    this.restoreDataPtr();\n  }\n\n  restoreDataPtr() {\n    this.dataPointer = 0;\n    this.data = this.loadedData[ \"default\" ];\n  }\n\n  normalizeData( dataRec ) {\n    var data = dataRec.data;\n\n    if( dataRec.type == \"num\" ) {\n      if( (typeof data).toLowerCase() == \"string\" ) {\n        data = parseInt( data );\n      }\n    }\n    else {\n      if( (typeof data).toLowerCase() == \"number\" ) {\n        data = \"\" + data ;\n      }\n    }\n\n    return data;\n  }\n\n  runPGM() {\n\n    this.executeLineFlag = false;\n    this.stopAfterMessage = false;\n\n    if( this.startAsGoto ) {\n        this.startAsGoto = false;\n\n        var bak1 = this.runPointer;\n        var bak2 = this.runPointer2;\n\n        this.runPGM();\n\n        this.runPointer = bak1;\n        this.runPointer2 = bak2;\n\n\n        return;\n    }\n\n    this.input.setInterActive( false);\n    this.input.flush();\n\n    var c = this.output;\n    var p = this.program;\n\n    this.loadedData[ \"default\" ] = [];\n    this.restoreDataPtr();\n\n    this.gosubReturn = [];\n    this.scopes = [];\n    this.newScope( \"global\", {} );\n    this.functions = [];\n    this.handlers = {}\n    this.labels = {};\n    this.traceList = [];\n    this.traceOldValues = {};\n\n    var normalize = this.normalizeData;\n\n    for( var i=0; i<p.length; i++) {\n\n        var line = p[ i ];\n        var commands = line[1];\n\n        for( var j=0; j<commands.length; j++) {\n\n          var command = commands[j];\n\n          if( command.type  == \"control\" && command.controlKW == \"data\") {\n            for( var k=0; k<command.params.length; k++) {\n              this.loadedData[ \"default\" ].push( normalize( command.params[k] ) );\n            }\n          }\n          else if( command.type  == \"control\" && command.controlKW == \"on\") {\n            if( command.params[0] == \"interrupt1\") {\n              this.handlers.interrupt1 = command.params[1];\n              this.handlers.interrupt1ParamIsLabel = command.label;\n            }\n            else if( command.params[0] == \"interrupt0\") {\n              this.handlers.interrupt0 = command.params[1];\n              this.handlers.interrupt0ParamIsLabel = command.label;\n            }\n          }\n          else if( command.type  == \"control\" && command.controlKW == \"sub\") {\n            var label = command.label;\n            this.labels[ label ] = parseInt(line[0]);\n          }\n        }\n    }\n\n    if( this.debugFlag ) {\n      console.log(\"data dump:\",this.data);\n    }\n\n\n    if( this.program.length > 0) {\n      this.runFlag = true;\n      this.inputFlag = false;\n      this.runPointer = 0;\n      this.runPointer2 = 0;\n      this.waitForMessageFlag = false;\n      this.interruptFlag0 = false;\n      this.interruptFlag1 = false;\n\n    }\n    else {\n      this.runFlag = false;\n      this.inputFlag = false;\n      this.runPointer = 0;\n      this.runPointer2 = 0;\n      this.waitForMessageFlag = false;\n      this.interruptFlag0 = false;\n      this.interruptFlag1 = false;\n      this.input.setInterActive( true);\n    }\n\n    this.flagStatusChange();\n  }\n\n  getVars() {\n    return this.vars;\n  }\n\n\n\n\n  doForInit( from, to, step, varName, cmdPointer, cmdArrayLen, linePointersLen ) {\n\n    var ctx = this.forContext;\n\n    if( this.vars[ varName ] === undefined ) {\n      this.vars[ varName ] = 0;\n    }\n    this.vars[ varName ] = this.evalExpression( from );\n\n    ctx.default.push( varName );\n    ctx[varName] = {};\n\n    var ctxv = ctx[varName];\n    ctxv.to = this.evalExpression( to );\n\n    if( step == null ) {\n        ctxv.step = 1;\n    }\n    else {\n      ctxv.step = this.evalExpression( step );\n    }\n\n    ctxv.jumpTo =\n      { line: this.runPointer,\n        cmdPointer: cmdPointer+1 }\n    if( ctxv.jumpTo.cmdPointer >= cmdArrayLen )  {\n\n      if( this.runPointer == -1) {\n        throw \"@syntax@Can't find command after 'FOR'\";\n      }\n      else {\n        if( ( this.runPointer + 1) >= linePointersLen ) {\n          throw \"@syntax@Can't find command after 'FOR', on next line\";\n        }\n        ctxv.jumpTo.line++;\n        ctxv.jumpTo.cmdPointer = 0;\n      }\n    }\n\n  }\n\n  doForNext( nextVarName ) {\n    var ctx = this.forContext;\n    if( ctx.default.length == 0 ) {\n      throw \"@syntax@Next without for\";\n    }\n    var varName = ctx.default[ctx.default.length-1];\n    if( nextVarName  != null ) {\n      varName = nextVarName;\n    }\n\n    var ctxv = ctx[varName];\n\n    this.vars[ varName ] += ctxv.step;\n    if( ctxv.step > 0) {\n      if(this.vars[ varName ]<=ctxv.to) {\n\n        return ctxv.jumpTo;\n      }\n    }\n    else if( ctxv.step == 0) {\n      return ctxv.jumpTo;\n    }\n    else {\n      if(this.vars[ varName ]>=ctxv.to) {\n        return ctxv.jumpTo;\n      }\n    }\n\n    ctx.default.pop();\n    return -1;\n  }\n\n  onLineStr() {\n\n    var line = this.retreiveLine();\n    if( line == -1 || line == \"\") { return \"\"; }\n\n    return \" in \" + line;\n\n  }\n\n  retreiveRuntimeLine() {\n    if( this.runPointer > -1 ) {\n      var line = this.program[this.runPointer];\n      return line[0];\n    }\n    return -1;\n  }\n\n\n  retreiveLine() {\n    if( this.runFlag ) {\n      return this.retreiveRuntimeLine();\n    }\n    else {\n      if( this[\"parseLineNumber\"] === undefined ) {\n        return -1;\n      }\n      if( this.parseLineNumber == -1) { return \"\"; }\n      return this.parseLineNumber;\n    }\n    return -1;\n  }\n\n\n  commandToString( cmd ) {\n    if( cmd.type == \"control\" )  {\n      return cmd.controlKW.toUpperCase();\n    }\n    else if( cmd.type == \"call\" ) {\n      return cmd.statementName;\n    }\n    else if( cmd.type == \"assignment\" )  {\n      return \"assign ->\" + cmd.var;\n    }\n    return \"????\";\n  }\n\n  runCommands( cmds, limit ) {\n    /* return values\n      false -> error or end program\n      true  -> executed ok\n\n      should return\n      end_w_error\n      terminate_program\n      line_finished\n      goto_gosub\n    */\n\n    var commands = this.commands;\n    var ecommands = this.extendedcommands;\n    var EXPR = 0, PAR = 1;\n\n    /*return values*/\n    var END_W_ERROR = 0;\n    var TERMINATE_PROGRAM = -1;\n    var LINE_FINISHED = 10;\n    var MIDLINE_INTERUPT = 20;\n    var TERMINATE_W_JUMP = 30;\n    var PAUSE_F_INPUT = 40;\n\n    var end = cmds.length;\n    var i=this.runPointer2;\n    var cnt=0;\n\n    if(!(limit == undefined )) {\n      //nothing\n    }\n    else {\n      limit = 9999; //reaching to infinite (max on line maybe  40)\n    }\n\n\n\n    while( i<end && cnt<limit ) {\n\n\n      if( this.breakCycleFlag ) {\n        if(!(limit == undefined )) {\n          this.breakCycleFlag = false;\n          break;\n        }\n      }\n\n      var cmd=cmds[i];\n\n      var l=this.program[this.runPointer];\n      if( l ) {\n        //console.log( l[0] );\n        if(parseInt(l[0]) == 3155 ) {\n          console.log(\"bump\");\n        }\n      }\n      //if( this.runPointer > -1 ) {\n      //  console.log( l[0] + \"(\" + this.runPointer + \":\" + i +\")\" + this.commandToString( cmd ) );\n      //}\n      //console.log( cmd.lineNumber + \":\" + cmd.type + \":\" + (cmd.controlKW ? cmd.controlKW : cmd.statementName ));\n\n      if( cmd.type == \"control\" )  {\n        var cn = cmd.controlKW;\n        if( cn == \"goto\" ) {\n          this.goto( cmd.params[0] );\n          return [TERMINATE_W_JUMP,i+1,cnt+1];\n        }\n        else if( cn == \"end\" ) {\n          return [TERMINATE_PROGRAM,i+1,cnt+1];\n        }\n        else if( cn == \"stop\" ) {\n          this.printInfo(\"break\");\n          return [TERMINATE_PROGRAM,i+1,cnt+1];\n        }\n        else if( cn == \"gosub\" ) {\n          this.gosub( cmd.params[0], i );\n          return [TERMINATE_W_JUMP,i+1,cnt+1];\n        }\n        else if( cn == \"on\" ) {\n          var onCommand = cmd.params[ 0 ];\n\n          if( onCommand != \"interrupt0\"  && onCommand != \"interrupt1\" ) {\n            var onExpr = cmd.params[ 1 ];\n            var onLineNrs = cmd.params[ 2 ];\n\n            var value = this.evalExpression( onExpr );\n            if( (value-1)>=0 && (value-1)<onLineNrs.length ) {\n              if( onCommand == \"goto\" ) {\n                this.goto( onLineNrs[ (value-1) ] );\n                return [TERMINATE_W_JUMP,i+1,cnt+1];\n              }\n              else if( onCommand == \"gosub\" ) {\n                this.gosub( onLineNrs[ (value-1) ], i );\n                return [TERMINATE_W_JUMP,i+1,cnt+1];\n              }\n            }\n          }\n\n          //if not jumping, do nothing\n        }\n        else if( cn == \"return\" ) {\n\n          if( this.interruptFlag0 || this.interruptFlag1) {\n\n            this.doInterruptReturn();\n\n          }\n          else {\n            this.doReturn();\n          }\n\n          return [TERMINATE_W_JUMP,i+1,cnt+1];\n        }\n        else if( cn == \"if\" ) {\n          var IF_ERROR = -1;\n          var IF_TRUE = 1;\n          var IF_FALSE = 0;\n\n          var ifresult = this.evalExpression( cmd.params[0] );\n          if( ifresult != IF_FALSE ) {\n             //return [MIDLINE_INTERUPT,i+1];\n          }\n          else  {\n             return [LINE_FINISHED,i+1,cnt+1];\n          }\n        }\n        else if( cn == \"data\" ) {\n          //Nothing\n        }\n        else if( cn == \"rem\" ) {\n          return [LINE_FINISHED,i+1,cnt+1];\n        }\n        else if( cn == \"sub\" ) {\n          return [LINE_FINISHED,i+1,cnt+1];\n        }\n        else if( cn == \"for:init\" ) {\n          this.doForInit( cmd.params[0], cmd.params[1], cmd.params[2], cmd.variable, i, cmds.length );\n        }\n        else if( cn == \"for:next\" ) {\n\n          var jump = this.doForNext( cmd.nextVar );\n\n          if( !(jump === -1 ) ) {\n\n            if( jump.line != -1 ) {\n                if( this.runPointer == jump.line ) {\n                  i = jump.cmdPointer;\n                  cnt++;\n                  continue;\n                }\n                else {\n                  this.runPointer = jump.line;\n                  this.runPointer2 = jump.cmdPointer;\n                }\n                return [TERMINATE_W_JUMP,i+1,cnt+1];\n            }\n            else {\n              i = jump.cmdPointer;\n              cnt++;\n              continue;\n            }\n          }\n        }\n        else if( cn == \"dim\" ) {\n          var vars = this.vars;\n\n          for( var ix=0; ix<cmd.params.length; ix++) {\n\n            var indices = [];\n            for( var ai=0;ai<cmd.params[ix].length;ai++){\n              indices[ai] = this.evalExpression( cmd.params[ix][ai] );\n            }\n\n            var arrRec = new BasicArray( cmd.arrayNames[ix], indices, 0 );\n\n            var varIntName = \"@array_\" + cmd.arrayNames[ix];\n\n            if( ! ( this.vars[ varIntName ] === undefined )) {\n              this.printError( \"redim'd array\" );\n              return [END_W_ERROR,i+1,cnt+1];\n            }\n            this.vars[ varIntName ] = arrRec;\n          }\n\n        }\n        else if( cn == \"def\" ) {\n          this.functions[ cmd.params[0] ] = {\n            par: cmd.params[1],\n            expr: cmd.params[2]\n          };\n        }\n        else {\n          this.printError( \"illegal ctrl token '\" + cn  +\"'\");\n          return [END_W_ERROR,i+1,cnt+1];\n        }\n      }\n      else if( cmd.type == \"call\" )  {\n        var values = [];\n        var pardefs = [];\n        var mycommands = commands;\n        var stc = mycommands[ \"_stat_\" + cmd.statementName.toLowerCase()];\n\n        if( stc === undefined ) {\n          //cmd.statementName.toLowerCase().startsWith(\"x\") )\n          mycommands = ecommands;\n\n          stc = mycommands[ \"_stat_\" + cmd.statementName.toLowerCase()];\n\n          if( stc === undefined ) { }\n          else {\n            if( mycommands.enabled == false &&\n              cmd.statementName.toLowerCase() != \"xon\") {\n                  this.printError( \"extended not enabled\" );\n                  return [END_W_ERROR,i+1,cnt+1];\n            }\n          }\n        }\n\n        var intf = mycommands[ \"_if_\" + cmd.statementName.toLowerCase()];\n        if( !( intf === undefined ) ) {\n            pardefs = mycommands[ \"_if_\" + cmd.statementName.toLowerCase()]();\n        }\n        else {\n          for( var j=0; j<cmd.params.length; j++) {\n            pardefs[j] = EXPR;\n          }\n        }\n\n        for( var j=0; j<cmd.params.length; j++) {\n          if( pardefs[j] == EXPR ) {\n\n            var p = this.evalExpression( cmd.params[j] );  //NOTE this one gets the trailing ;, from a \"PRINT ;\" command\n\n            if( p != null ) {\n              values.push( { type: \"value\", value: p } );\n            }\n          }\n          else if( pardefs[j] == PAR ) {\n            var varName = cmd.params[j].parts[0].data;\n            var varType = \"num\";\n            if( varName.indexOf(\"$\") > -1) {\n              varType = \"str\";\n            }\n\n            values.push( { type: \"var\", value: varName, varType: varType } );\n          }\n          else { /*RAW*/\n            //values.push( cmd.params[j].parts );\n            values.push( cmd.params[j] );\n\n          }\n        }\n        try {\n          //var stc = ;\n          if( stc === undefined ) {\n            this.printError(\"syntax\");\n            return [END_W_ERROR,i+1,cnt+1];\n          }\n          else {\n              mycommands[ \"_stat_\" + cmd.statementName.toLowerCase()]( values );\n              if( this.inputFlag ) {\n                return [PAUSE_F_INPUT,i+1,cnt+1];\n              }\n          }\n\n        }\n        catch ( e ) {\n          console.log(e);\n\n          if( this.erh.isSerializedError( e ) ) {\n            var err = this.erh.fromSerializedError( e );\n            this.printError( err.clazz, false, false, err.detail );\n          }\n          else if( this.erh.isError( e ) ) {\n            var err = e;\n            this.printError( err.clazz, false, false, err.detail );\n          }\n          else {\n            this.printError(\"unexpected \" + e );\n          }\n\n          return [END_W_ERROR,i+1,cnt];\n        }\n      }\n      else if( cmd.type == \"assignment\" )  {\n        if( cmd.arrayAssignment ) {\n          var varIntName = \"@array_\" + cmd.var;\n          if( this.vars[ varIntName ] === undefined ) {\n            this.printError(\"bad subscript\");\n            return [END_W_ERROR,i+1,cnt];\n          }\n\n          var arr = this.vars[ varIntName ];\n          if( cmd.indices.length != arr.getIndexCount() ) {\n            this.printError(\"bad subscript\");\n            return [END_W_ERROR,i+1,cnt];\n          }\n\n          var indices = [];\n          for( var ai=0;ai<cmd.indices.length;ai++){\n            indices[ai] = this.evalExpression( cmd.indices[ai] );\n          }\n\n          if( cmd.var.endsWith(\"%\") ) {\n              arr.set( indices, Math.floor( this.evalExpression( cmd.expression ) ) );\n          }\n          else if( ! cmd.var.endsWith(\"$\") ) {\n              var v = this.evalExpression( cmd.expression );\n              if( ! (typeof v == \"number\") ) {\n                this.printError(\"type mismatch\", undefined, undefined, \"value not a number\");\n                return [END_W_ERROR,i+1,cnt];\n              }\n              arr.set( indices, this.evalExpression( cmd.expression ) );\n          }\n          else {\n              arr.set( indices, this.evalExpression( cmd.expression ) );\n          }\n\n        }\n        else { //single var (not an array)\n          if( this.vars[ cmd.var ] === undefined ) {\n            if(cmd.var.startsWith(\"TI\")) {\n              this.printError(\"syntax\");\n              return [END_W_ERROR,i+1,cnt+1];\n            }\n            this.vars[ cmd.var ] = 0;\n          }\n          if(cmd.var.endsWith(\"%\")) {\n            this.vars[ cmd.var ] = Math.floor( this.evalExpression( cmd.expression ) );\n          }\n          else if( ! cmd.var.endsWith(\"$\") ) {\n              var v = this.evalExpression( cmd.expression );\n              if( ! (typeof v == \"number\") ) {\n                this.printError(\"type mismatch\", undefined, undefined, \"value not a number\");\n                return [END_W_ERROR,i+1,cnt];\n              }\n              this.vars[ cmd.var ] = this.evalExpression( cmd.expression );\n          }\n          else {\n            this.vars[ cmd.var ] = this.evalExpression( cmd.expression );\n          }\n        }\n      }\n      //cnt++;\n      i++;\n      cnt++;\n    }\n\n    if( i== cmds.length ) {\n      return [LINE_FINISHED,i,cnt];\n    }\n\n    return [MIDLINE_INTERUPT,i,cnt];\n\n  }\n\n  newScope( name, data ) {\n    var scope = { name: name, vars: {}, data: data };\n    this.scopes.push( scope );\n    this.vars = scope.vars;\n    this.scope = scope;\n  }\n\n  closeScope() {\n    this.scopes.pop();\n    this.vars = this.scopes[ this.scopes.length - 1 ].vars;\n  }\n\n  setVar( a, b ) {\n    this.vars[ a ] = b;\n  }\n\n  getTraceList() {\n    if( this.traceList === undefined ) {\n      return [];\n    }\n\n    return this.traceList;\n  }\n\n  setTraceVar( v ) {\n    if( this.traceVars === undefined ) {\n        this.traceVars = [];\n    }\n    this.traceVars.push( v.toUpperCase() );\n\n  }\n\n  resetTraceVar( v ) {\n    this.traceVars = undefined;\n  }\n\n\n  old( ) {\n    this.program = this.oldProgram;\n  }\n\n  new( ) {\n    this.oldProgram = this.program ;\n    this.program = [];\n  }\n\n  removePgmLine( linenr ) {\n\n    var pgm2 = [];\n\n    for( var i=0; i<this.program.length; i++) {\n      var pl=this.program[i];\n      if( pl[0] != linenr ) {\n        pgm2.push(pl);\n      }\n    }\n    this.program = pgm2;\n\n  }\n\n\n  padSpaces6( no ) {\n    var s = no + \"\";\n    for(var i=s.length; i<6; i++) {\n      s+=\" \";\n    }\n    return s;\n  }\n\n  padSpaces8( no ) {\n    var s = no + \"\";\n    for(var i=s.length; i<8; i++) {\n      s+=\" \";\n    }\n    return s;\n  }\n\n\n  insertPgmLine( linenr, commands, handlers, raw ) {\n\n    this.insertPgmLineLocal( linenr, commands, handlers, raw, this.program );\n  }\n\n  insertPgmLineLocal( linenr, commands, handlers, raw, myProgram ) {\n\n    for( var i=0; i<myProgram.length; i++) {\n      var pl=myProgram[i];\n      if( pl[0] == linenr ) {\n        myProgram[i] = [linenr, commands, raw.trim() ];\n        return;\n      }\n    }\n\n    myProgram.push( [linenr, commands, raw.trim(), handlers ]);\n\n    var sortF = function compare( a, b ) {\n      return a[0] - b[0];\n    }\n\n    myProgram.sort( sortF );\n\n  }\n\n  textLinesToBas( lines ) {\n\n    var myProgram = [];\n    var exception = undefined;\n\n    if( this.debugFlag ) {\n      console.log( \"textLinesToBas\" );\n    }\n    for( var i = 0; i<lines.length; i++ ) {\n\n      var line = this.prepareLineForImport( lines[ i ] );\n      var p = new Parser( this.commands, this.extendedcommands );\n      p.init();\n\n      var l = null;\n\n      try {\n          l = p.parseLine( line );\n      }\n      catch ( e ) {\n        if( exception === undefined ) {\n            exception = e;\n        }\n\n        try {\n          l = p.parseErrorLine( line );\n        }\n        catch ( e ) {\n            this.printError( \"unexpected text (at \"+i+\")\", true );\n            console.log(\"Illegal Line: \", line );\n        }\n      }\n\n      if( l == null ) {\n        continue;\n      }\n      if( l.lineNumber != -1 ) {\n        if( l.commands.length > 0) {\n          this.insertPgmLineLocal( l.lineNumber, l.commands, l.handlers, l.raw,  myProgram);\n          //this.program[ l.lineNumber ] = [l.commands,l.raw];\n        }\n        else {\n          throw \"Error, no commands on line \" + l.lineNumber;\n        }\n      }\n      else {\n        throw \"Error, command must start with number to be part of program\";\n      }\n\n      if( this.debugFlag ) {\n        console.log(\"program:\",myProgram);\n        console.log(\"Line: \", l );\n      }\n    }\n    return { pgm: myProgram, exception: exception };\n  }\n\n  printReady() {\n    this.printLine(\"Ready.\");\n  }\n\n\n  startConsoleDataInput( vars ) {\n\n    if( this.debugFlag ) {\n      console.log(\"inputvars=\",vars);\n    }\n    this.inputFlag = true;\n    this.inputVars = vars;\n    this.input.setInterActive( true);\n    this.inputVarsPointer = 0;\n    this.output.write( \"? \");\n    this.inputStartInputPosX = this.output.getCursorPos()[0];\n    this.sys.blinkMode( true );\n    this.flagStatusChange();\n\n  }\n\n  executeInteractiveLine( str ) {\n    this.handleLineInput( str, false );\n  }\n\n  handleLineInput( str, isInputCommand ) {\n\n    if( this.debugFlag ) {\n      console.log(\"handleLineInput: start debug / isInputCommand=\" + isInputCommand + \" -------------\");\n    }\n\n    if( isInputCommand ) {\n\n        var input=str;\n        var qMark = input.indexOf(\"?\");\n        while( qMark > -1 ) {\n          input = input.substr(qMark+2);\n          qMark = input.indexOf(\"?\");\n        }\n\n        if( this.debugFlag ) {\n          console.log(\"handleLineInput: start debug / input, name -------------\");\n          console.log( \"InputVarsPointer:\" , this.inputVarsPointer );\n          console.log( \"InputVars:\" , this.inputVars );\n\n          console.log( \"Input String:\" ,input );\n          console.log( \"Input Vars[current]:\" ,this.inputVars[ this.inputVarsPointer ] );\n        }\n\n\n        var vName = this.inputVars[ this.inputVarsPointer ];\n        if( vName.indexOf(\"$\") >-1 ) {\n            this.setVar( this.inputVars[ this.inputVarsPointer ], input.trim() );\n        }\n        else {\n          var num = parseFloat( input.trim() );\n\n          if( isNaN( num ) ) {\n            this.printLine(\"?redo from start\");\n            this.printChar( \"? \");\n            return;\n          }\n          this.setVar( this.inputVars[ this.inputVarsPointer ], num );\n        }\n\n        this.inputVarsPointer++;\n        if( this.inputVarsPointer >= this.inputVars.length ) {\n\n          this.exitInputState();\n        }\n        else {\n          this.printChar( \"?? \");\n        }\n\n        if( this.debugFlag ) {\n          console.log(\"handleLineInput: end debug -------------\");\n        }\n        return;\n    }\n\n    this.executeLineFlag = true;\n\n    if( this.debugFlag ) {\n      console.log( str );\n    }\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n    try {\n      var l = p.parseLine( str );\n    }\n    catch( e ) {\n\n      this.parseLineNumber = -1;\n      if( this.erh.isError( e ) ) {\n        this.parseLineNumber = e.lineNr;\n        this.printError( e.clazz, true, undefined, e.detail );\n      }\n      else {\n        this.printError( \"syntax\", true );\n      }\n      this.printReady();\n    }\n    if( l == null ) {\n      if( this.debugFlag ) {\n        console.log(\"handleLineInput: end debug -------------\");\n      }\n\n      this.executeLineFlag = false;\n      return;\n    }\n\n    if( l.lineNumber != -1 ) {\n      if( l.commands.length > 0) {\n        this.insertPgmLine( l.lineNumber, l.commands, l.handlers, l.raw);\n      }\n      else {\n        this.removePgmLine( l.lineNumber  );\n      }\n    }\n    else {\n      this.runPointer = -1;\n      this.runPointer2 = 0;\n\n      try {\n        this.runCommands( l.commands );\n      }\n      catch( e ) {\n\n        this.parseLineNumber = -1;\n\n        if( this.erh.isSerializedError( e ) ) {\n          var err = this.erh.fromSerializedError( e );\n          this.parseLineNumber = err.lineNr;\n          this.printError( err.clazz, undefined, undefined, err.detail );\n        }\n        else if( this.erh.isError( e ) ) {\n          var err = e;\n          this.printError( err.clazz );\n          this.parseLineNumber = err.lineNr;\n        }\n        else {\n          this.printError(\"unexpected \" + e );\n        }\n\n        this.runFlag = false;\n      }\n\n      if( ! this.runFlag && ! this.listFlag && !this.waitForMessageFlag) {\n        this.printReady();\n      }\n\n    }\n\n    this.executeLineFlag = false;\n\n    if( this.debugFlag ) {\n      console.log(\"program:\",this.program);\n      console.log(\"Line: \", l );\n\n      console.log(\"handleLineInput: end debug -------------\");\n    }\n  }\n\n}\n\n//--EOC \n\n// ## extendedcommands.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/extendedcommands.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/extendedcommands.js\n\nclass ExtendedCommands {\n\n  constructor( basicCmds, runtime ) {\n    this.output = runtime.output;\n    this.bitmap = runtime.bitmap;\n    this.audio = runtime.audio;\n    this.html = runtime.html;\n    this.input = runtime.input;\n    this.runtime = runtime;\n    this.sys = runtime.sys;\n    this.cmds = {};\n    this.func = {};\n    this.statementList = null;\n    this.erh = new ErrorHandler();\n    this.basicCmds = basicCmds;\n\n  }\n\n  getStatements( raw ) {\n\n    //TODO, why is it called so often?\n    var stats = Object.getOwnPropertyNames( ExtendedCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_stat_\")) {\n        if( stats[i].startsWith(\"_stat_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(6 ).toUpperCase();\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n  getFunctions( raw ) {\n    var stats = Object.getOwnPropertyNames( ExtendedCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_fun_\")) {\n        if( stats[i].startsWith(\"_fun_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(5 ).toUpperCase().replace(\"_DLR_\",\"$\");\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n\n  getAllCategories() {\n    var categoryIndexes = this.basicCmds.getCategories();\n    var categoryIndexes2 = this.getCategories( categoryIndexes );\n\n    return new CommandHelp().getCategoriesNormalize( categoryIndexes2 );\n  }\n\n  getCategories( categoryIndexes ) {\n\n    return new CommandHelp().getCategoriesIntermediate( categoryIndexes, this );\n\n  }\n\n\n\n  /************************ commands ************************/\n\n\n  _stat_info_help() { return \"general:Show help on commands:[<Help Category Index>]\"; }\n\n  _stat_help( pars ) {\n\n  this.output.writeln(\"\");\n  var catRecord = this.getAllCategories();\n  var lst = catRecord[0];\n  var catLists = catRecord[1];\n  var hlpctx = 1000;\n\n  if( pars.length == 1 ) {\n    hlpctx = pars[0].value;\n  }\n\n  if( hlpctx == 1000 ) {\n    this.output.writeln(\"------------------------------\");\n    this.output.writeln(\" Help Categories:\");\n    this.output.writeln(\"------------------------------\");\n    for( var i=0; i<lst.length; i++) {\n      this.output.writeln( i + \" \" + lst[i].toUpperCase() );\n    }\n  }\n  else {\n\n    var lbl = lst[ hlpctx ];\n    lst = catLists[ lbl ];\n    if(lst === undefined ) {\n      this.erh.throwError( \"invalid help index\" );\n    }\n    this.output.writeln(\"------------------------------\");\n    this.output.writeln(\" Help on Category: \\\"\" + lbl.toUpperCase() + \"\\\"\");\n    this.output.writeln(\"------------------------------\");\n    for( var i=0; i<lst.length; i++) {\n      //this.context.printLine( ((hlpctx * 100) + i) + \" \" + lst[i] );\n      var attr = lst[i].attribs;\n      var padLen = 11-lst[i].name.length;\n      var pad = \"               \".substr(0,padLen );\n\n\n      if( attr.description ) {\n          this.output.writeln( \" \" + lst[i].name  + pad + \" ; \" + attr.description );\n      }\n      else {\n          this.output.writeln( \" \" + lst[i].name  );\n      }\n      if( attr.input ) {\n        var lines = attr.input.split(\"\\n\");\n\n        this.output.writeln( \"               input : \" + lines[0] );\n        for( var l=1; l<lines.length; l++) {\n            var line = lines[ l ];\n\n            this.output.writeln( \"                       \" + line );\n          }\n          this.output.writeln( \"\" );\n        }\n\n        if( attr.output ) {\n          var lines = attr.output.split(\"\\n\");\n\n          this.output.writeln( \"               output : \" + lines[0] );\n          for( var l=1; l<lines.length; l++) {\n              var line = lines[ l ];\n\n              this.output.writeln( \"                       \" + line );\n            }\n            this.output.writeln( \"\" );\n        }\n      }\n    }\n  this.output.writeln(\"\");\n\n  }\n\n  _if_cls() {\n    var EXPR = 0, PAR = 1, RAW=2;\n    return [RAW];\n  }\n\n  _stat_info_cls() { return \"general:Clears the screen:[<Reset Screen Flag>]\"; }\n\n  _stat_cls( pars ) {\n    var reset = false;\n\n    if( pars.length > 1 ) {\n      throw \"parameters\";\n    }\n    if( pars.length == 1 && pars[0].parts.length > 1 ) {\n      throw \"parameters\";\n    }\n    if( pars.length == 1 && pars[0].parts.length == 1 ) {\n      if( pars[0].parts[0].data.toUpperCase() == \"RESET\" ) {\n          reset = true;\n      }\n      else {\n        throw \"parameters\";\n      }\n    }\n\n    if( reset ) {\n      this.output.control( 12 );\n    }\n    else {\n      this.output.control( 24 );\n    }\n  }\n\n  _stat_info_reset() { return \"general:Resets the audio and the terminal:[ mode (0=screen, 1=audio, 2=all) ]\"; }\n  _stat_reset( pars ) {\n\n    if( pars.length == 0 ) {\n      this.output.reset();\n      this.audio.reset();\n      this.runtime.resetTraceVar();\n      return;\n    }\n\n    var mode = pars[0].value;\n\n    if( mode != 0 && mode != 1 && mode != 2 ) {\n      this.erh.throwError( \"mode\", \"only 0, 1, 2 supported\" );\n      return\n    }\n\n    if( mode == 0) {\n      this.output.reset();\n    }\n    if( mode == 1) {\n      this.audio.reset();\n    }\n    else  {\n      this.output.reset();\n      this.audio.reset();\n    }\n\n  }\n\n\n  _stat_info_menu() { return \"general:Enable the programmers menu\"; }\n  _stat_menu( pars ) {\n\n    if( pars.length == 0 ) {\n      this.runtime.toggleMenu();\n      return;\n    }\n\n  }\n\n  _stat_info_reverse() { return \"print:Reverse the print output:reverse-flag\"; }\n\n  _stat_reverse( pars ) {\n\n    if( pars.length == 0 ) {\n      this.output.control( 65 );\n      return;\n    }\n\n    var reverse = pars[0].value;\n    if( reverse <0 || reverse >1 ) {\n      return;\n    }\n\n    this.output.control( 64 + reverse );\n  }\n\n\n\n\n  _stat_info_beep() { return \"sound:Make a short sound:channel,frequency,length\"; }\n  _stat_beep( pars ) {\n\n\n    if( pars.length == 0 ) {\n      this.audio.playBeep( 0, 440, 100 );\n\n      return\n    }\n\n    if( pars.length != 3) {\n      this.erh.throwError( \"parameter count\", \"expected channel, freq, time\" );\n      return\n    }\n\n    this.audio.playBeep( pars[0].value, pars[1].value, pars[2].value );\n\n  }\n\n\n\n  _stat_info_sound() { return \"sound:Make a pre defined sound:channel,frequency,length\"; }\n  _stat_sound( pars ) {\n\n    if( pars.length == 0 ) {\n      this.audio.playSound( 0, 440, 100 );\n\n      return\n    }\n\n    if( pars.length != 3) {\n      this.erh.throwError( \"parameter count\", \"expected channel, freq, time\" );\n      return\n    }\n\n    this.audio.playSound( pars[0].value, pars[1].value, pars[2].value );\n\n  }\n\n\n  _stat_info_setadr() { return \"sound:Define Attach,Decay and Release:channel, attackT, decayT, releaseT\"; }\n  _stat_setadr( pars ) {\n\n\n    if( pars.length != 4) {\n      this.erh.throwError( \"parameter count\", \"expected channel, attackT, decayT, releaseT\" );\n      return\n    }\n\n    this.audio.attackDecayRelease(\n       pars[0].value,\n       pars[1].value,\n       pars[2].value,\n       pars[3].value\n      );\n\n  }\n\n  _stat_info_volume() { return \"sound:Change the audio volume:volume\"; }\n  _stat_volume( pars ) {\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameter count\", \"expected volume\" );\n      return\n    }\n\n    this.audio.volume( pars[0].value );\n\n  }\n\n  _stat_info_chfreq() { return \"sound:Change the channel audio frequency:channel, frequency\"; }\n  _stat_chfreq( pars ) {\n\n    if( pars.length != 2) {\n      this.erh.throwError( \"parameter count\", \"expected channel, frequency\" );\n      return\n    }\n\n    this.audio.channelFrequency( pars[0].value, pars[1].value );\n\n  }\n\n  _stat_info_chvolume() { return \"sound:Change the channel audio volume:channel, volume\"; }\n  _stat_chvolume( pars ) {\n\n    if( pars.length != 2) {\n      this.erh.throwError( \"parameter count\", \"expected channel, volume\" );\n      return\n    }\n\n    this.audio.channelVolume( pars[0].value, pars[1].value );\n\n  }\n\n  _stat_info_chsvolume() { return \"sound:Change the channel sustain volume:channel, volume\"; }\n  _stat_chsvolume( pars ) {\n\n    if( pars.length != 2) {\n      this.erh.throwError( \"parameter count\", \"expected channel, volume\" );\n      return\n    }\n\n    this.audio.channelSustainVolume( pars[0].value, pars[1].value );\n\n  }\n\n  _stat_info_addfx() { return \"sound:Add a Sound FX part to the channel:channel, type, value, time\"; }\n  _stat_addfx( pars ) {\n\n    if( pars.length != 4) {\n      this.erh.throwError( \"parameter count\", \"expected channel, type, value and time(ms)\" );\n      return\n    }\n\n    this.audio.addEffect(\n        pars[0].value,\n        pars[1].value,\n        pars[2].value,\n        pars[3].value\n       );\n\n  }\n\n  _stat_info_clearfx() { return \"sound:Clear a sound effect:channel\"; }\n  _stat_clearfx( pars ) {\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameter count\", \"expected channel\" );\n      return\n    }\n\n    this.audio.clearEffect( pars[0].value  );\n\n  }\n\n  _stat_info_playfx() { return \"sound:Change the channel sustain volume:channel [,frequency ]\"; }\n  _stat_playfx( pars ) {\n\n    if( pars.length < 1 || pars.length >2 ) {\n      this.erh.throwError( \"parameter count\", \"expected channel [,frequency ]\" );\n      return\n    }\n\n    var freq = 0;\n    if( pars.length >1 ) {\n      freq = pars[1].value;\n    }\n\n    this.audio.playEffect( pars[0].value, freq );\n\n  }\n\n\n  _stat_info_textarea() { return \"print:Limit text to certain area: <CollSize>,<RowSize>\\n [,<xOffset>,<yOffset>]\"; }\n  _stat_textarea( pars ) {\n\n    var result;\n\n    if( pars.length != 2 && pars.length != 4) {\n      this.erh.throwError( \"parameter count\", \"expected cols, rows [, xoffset, yoffset ]\" );\n      return\n    }\n\n    var cols = Math.round( pars[0].value );\n    var rows = Math.round( pars[1].value );\n\n    var wh = this.output.getDimensions();\n\n    var xo, yo;\n    xo = -1, yo = -1;\n    if( pars.length == 4) {\n      var xo = Math.round( pars[2].value );\n      var yo = Math.round( pars[3].value );\n    }\n\n    if( cols > 0 && rows > 0  && cols <= wh[0] && rows <= wh[1] ) {\n\n        var divx = wh[0] - cols;\n        var divy = wh[1] - rows;\n\n        if( xo > 0 && xo > divx ) {\n          this.erh.throwError( \"parameter\", \"xo to big\");\n        }\n        if( yo > 0 && yo > divy ) {\n          this.erh.throwError( \"parameter\", \"yo to big\");\n        }\n\n        this.output.textArea(  cols, rows, xo, yo );\n\n        return\n    }\n\n  }\n\n  _stat_info_gcolor() { return \"graphics:Set graphics pen color index:<Color Index>\"; }\n  _stat_gcolor( pars ) {\n\n    var result;\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameter count\", \"expected color\" );\n      return\n    }\n\n    if( pars.length == 1) {\n        var col = Math.round( pars[0].value );\n        if( col > 0 && col < 16) {\n            this.bitmap.setLineColor(  col );\n        }\n        return\n    }\n\n  }\n\n\n\n  _stat_info_origin() { return \"graphics:Specify origin of graphics console:<x0>,<y0>,<dx>,<dy>\"; }\n  _stat_origin( pars ) {\n    if( pars.length != 4 ) {\n      this.erh.throwError( \"parameter count\", \"expected 4 (x0,y0,dx,dy), not \" + pars.length );\n      return;\n    }\n\n    if( !this.bitmap.isActive() ) {\n      this.erh.throwError( \"invalid display mode\", \"current mode cannot show graphics\" );\n      return;\n    }\n\n    if( pars[2].value != 1 && pars[2].value != -1 ) {\n      this.erh.throwError( \"parameter\", \"dx must be 1 or -1\" );\n      return;\n    }\n\n    if( pars[3].value != 1 && pars[3].value != -1 ) {\n      this.erh.throwError( \"parameter\", \"dy must be 1 or -1\" );\n      return;\n    }\n\n    this.bitmap.origin(\n      pars[0].value,\n      pars[1].value,\n      pars[2].value,\n      pars[3].value\n\n    );\n  }\n\n  _stat_info_line() { return \"graphics:Draw a line:<x0>,<y0>,<x1>,<y1>\"; }\n  _stat_line( pars ) {\n    if( pars.length != 4 ) {\n      this.erh.throwError( \"parameter count\", \"expected 2 (x0,y0,y1,y1), not \" + pars.length );\n      return;\n    }\n\n    if( !this.bitmap.isActive() ) {\n      this.erh.throwError( \"invalid display mode\", \"current mode cannot show graphics\" );\n      return;\n    }\n\n    this.bitmap.line(\n      pars[0].value,\n      pars[1].value,\n      pars[2].value,\n      pars[3].value\n\n    );\n  }\n\n  _stat_info_plot() { return \"graphics:Plot a pixel:<x0>,<y0>,<x1>,<y1>\"; }\n  _stat_plot( pars ) {\n    if( pars.length != 2 ) {\n      this.erh.throwError( \"parameter count\", \"expected 2 (x,y), not \" + pars.length );\n      return;\n    }\n\n    if( !this.bitmap.isActive() ) {\n      this.erh.throwError( \"invalid display mode\", \"current mode cannot show graphics\" );\n      return;\n    }\n\n    this.bitmap.plot( pars[0].value, pars[1].value );\n  }\n\n  _stat_info_center() { return \"print:Print horizontal center:<String to Print>\"; }\n  _stat_center( pars ) {\n\n    var string;\n\n    if( pars.length > 1 ) {\n      this.erh.throwError( \"too many parameters\", \"expected max 2, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 0 ) {\n      return;\n    }\n\n    string = pars[0].value;\n\n    this.output.center( string );\n  }\n\n\n  _stat_info_gtext() { return \"graphics:Write text at position x,y:X,Y,TEXT\"; }\n  _stat_gtext( pars ) {\n\n    var string;\n\n    if( pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"expected x,y and text parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.gtext( pars[0].value, pars[1].value, pars[2].value );\n  }\n\n\n  _stat_info_immediate() { return \"poke:Set flag to flush the render pipeline after each poke:<RenderImmediateFlag>\"; }\n  _stat_immediate( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameters\", \"expected 1 parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.setPokeFlush( pars[0].value != 0 );\n  }\n\n\n  _stat_info_pokeccl() { return \"poke:Put a character directly into the screen buffer:<Y>,<X>,<Code>,<FGColor>,<BGColor>\"; }\n  _stat_pokeccl( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length < 3 ) {\n      this.erh.throwError( \"parameters\", \"expected at least 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    var fg = undefined;\n    var bg = undefined;\n\n    if( pars.length >= 4 ) { fg = pars[3].value; }\n    if( pars.length >= 5 ) { bg = pars[4].value; }\n    this.output.pokeccl( pars[0].value, pars[1].value, pars[2].value, fg, bg );\n  }\n\n  _stat_info_pokec() { return \"poke:Put a character directly into the screen buffer:<Y>,<X>,<Code>\"; }\n  _stat_pokec( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"expected 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.pokec( pars[0].value, pars[1].value, pars[2].value );\n  }\n\n  _stat_info_pokecl() { return \"poke:Put color directly into the screen buffer:<X>,<Y>,<FGColor>[,<BGColor>]\"; }\n  _stat_pokecl( pars ) {\n\n    var row = -1, col = -1;\n    var bg = undefined;\n\n    if( pars.length != 3 &&  pars.length != 4 ) {\n      this.erh.throwError( \"parameters\", \"expected 3 or 4 parameters, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 4 ) {\n      bg = pars[3].value;\n    }\n\n    this.output.pokecl( pars[0].value, pars[1].value, pars[2].value, bg );\n  }\n\n  _stat_info_pokebcl() { return \"poke:Put background color directly into the screen buffer:<Y>,<X>,<BGColor>\"; }\n  _stat_pokebcl( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"expected 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.pokecl( pars[0].value, pars[1].value, undefined, pars[2].value );\n  }\n\n  _stat_info_locate() { return \"print:Set the cursor position:<Y>,<X>\"; }\n  _stat_locate( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length > 2 ) {\n      this.erh.throwError( \"too many parameters\", \"expected max 2, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 0 ) {\n      return;\n    }\n\n    if( pars.length >= 1 ) {\n      row = pars[0].value;\n    }\n\n    if( pars.length >= 2 ) {\n      col = pars[1].value;\n    }\n\n    this.output.setCursorPos( col, row );\n  }\n\n  _stat_info_hide() { return \"general:Hide the terminal\"; }\n  _stat_hide( pars ) {\n    this.output.control( 25 );\n  }\n\n\n  _if_html() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  _stat_info_html() { return \"html:Unsupported command\"; }\n  _stat_html( pars ) {\n    var html = this.html;\n\n    if( pars.length == 0 ) {\n      return;\n    }\n\n    var newLine = true;\n    var value;\n    var contentIx = 0;\n    var handleIx = -1;\n    var htmlHandle = null;\n    var htmlValue = \"\";\n    var htmlAppend = false;\n\n    if( pars.length == 2) {\n      contentIx = 1;\n      handleIx = 0;\n    }\n\n    for( var i=0; i<pars.length && i<2; i++) {\n\n      var exparts = pars[i];\n      var exparts2=\n        { parts: [],\n          binaryNegate: exparts.binaryNegate,\n          negate: exparts.negate  };\n\n      for( var j=0; j<exparts.parts.length; j++) {\n        if( exparts.parts[j].type == \"uniop\" &&\n            exparts.parts[j].op == \"+\" && j==(exparts.parts.length-1)\n            && (i == pars.length-1)) {\n              htmlAppend = true;\n        }\n        else {\n          exparts2.parts.push( exparts.parts[j] );\n        }\n      }\n      value = this.runtime.evalExpression( exparts2 );\n\n      if( i == handleIx ) {\n        htmlHandle =  value;\n      }\n      else {\n        htmlValue = value;\n      }\n    }\n\n    this.html.html(\n        {\n          htmlHandle: htmlHandle,\n          htmlValue: htmlValue,\n          htmlAppend: htmlAppend\n        }\n      );\n  }\n\n  _stat_info_htmlnode() { return \"html:Unsupported command\"; }\n  _stat_htmlnode( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    var node = pars[0];\n\n    this.html.htmlnode( node );\n\n  }\n\n\n  _stat_info_htmlbg() { return \"html:Unsupported command\"; }\n  _stat_htmlbg( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    var url = pars[0].value;\n\n    this.html.executeFunction( \"body.style.backgroundImage\", url );\n\n  }\n\n  _stat_info_color() { return \"print:Sets the console color index:<Pen Color>[, <Paper Color>\\n[, <Border Color>]]\"; }\n  _stat_color( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    if( pars.length == 1) {\n        var col = pars[0].value;\n        this.output.control( 16, col );\n        return\n    }\n\n    var bgcol = pars[1].value;\n    var col = pars[0].value;\n    this.output.control( 16, col   );\n    this.output.control( 17, bgcol );\n\n    if( pars.length == 3) {\n        var border = pars[2].value;\n        this.output.control( 18, border );\n        return\n    }\n\n  }\n\n  _stat_info_display() { return \"general:Set the console display mode:<Display Mode Number>\"; }\n  _stat_display( pars ) {\n\n    var result;\n    var modes = this.sys.screenModes;\n\n    if( pars.length == 0) {\n\n        var list = [ ];\n\n\n        for( var i=0 ; i<modes.length ; i++) {\n          if( modes[ i] ) {\n            list.push( i + \":   \" + modes[i]);\n          }\n        }\n        //list.push( \"Current Mode: \" + this.sys.displayMode );\n\n        this.runtime.enterListMode( list );\n        return\n    }\n\n    if( pars.length > 1) {\n        this.erh.throwError( \"too many variables\", \"expected one parameter only\" );\n    }\n\n    var mode = pars[0].value;\n    if( modes[mode] === undefined ) {\n      this.erh.throwError( \"Invalid mode\", \"No such display mode\" );\n    }\n    this.sys.setDisplayMode( this.runtime, mode );\n    this.sys.blinkMode( !this.runtime.isRunning() );\n    this.runtime.flagStatusChange();\n    this.runtime.startWaitForMessage( \"displaysize\" )\n\n\n  }\n\n  _stat_info_border() { return \"general:Changes the border color:<Color Index>\"; }\n  _stat_border( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    if( pars.length > 1) {\n        this.erh.throwError( \"too many parameters\", \"expected one parameter only\" );\n    }\n\n    var bcol = pars[0].value;\n    this.output.control( 18, bcol );\n\n  }\n\n  _stat_info_export() { return \"program:Export program for download\"; }\n  _stat_export( pars ) {\n    if( pars.length > 0) {\n        this.erh.throwError( \"too many parameters\", \"export needs no parameters\" );\n    }\n\n    var code = this.runtime.getProgramAsText();\n    this.sys.export( code, \"disk\" );\n  }\n\n  _stat_info_copy() { return \"program:Copy program to clipboard\"; }\n  _stat_copy( pars ) {\n    if( pars.length > 0) {\n        this.erh.throwError( \"too many parameters\", \"copy needs no parameters\" );\n    }\n\n    var code = this.runtime.getProgramAsText();\n    this.sys.export( code, \"clipboard\" );\n    this.runtime.printLine(\"Copied \" + this.runtime.getProgramSize() + \" program lines to the clipboard\" );\n  }\n\n\n  _fun_info_peekcl() { return \"poke:Get color information directly from from screen buffer:<Y>,<X>[,<Mode]\"; }\n  _fun_peekcl( pars ) {\n\n    var row = -1, col = -1;\n    var mode = 0;\n\n    if( pars.length != 3  && pars.length != 2 ) {\n      this.erh.throwError( \"parameters\", \"expected 2 or 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 3 ) {\n      mode = pars[2].value;\n    }\n    return this.output.peekcl( pars[0].value, pars[1].value, mode );\n  }\n\n\n  _fun_info_peekc() { return \"poke:Get a character directly into from screen buffer:<Y>,<X>\"; }\n  _fun_peekc( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 2 ) {\n      this.erh.throwError( \"parameters\", \"expected 2 parameters, not \" + pars.length );\n      return;\n    }\n\n    return this.output.peekc( pars[0].value, pars[1].value );\n  }\n\n\n  _fun_info_ucbase() { return \"string:Return unicode-set base character code:<UC-Setname$>\"; }\n  _fun_ucbase( pars ) {\n\n    if( pars.length != 1 ) {\n      this.erh.throwError( \"parameters\", \"UCBASE() needs one parameter\" );\n    }\n\n    var baseLabel = pars[0].value;\n\n    if( baseLabel.toLowerCase() == \"box\" ) {\n      return parseInt( \"2500\", 16 );\n    }\n    else if( baseLabel.toLowerCase() == \"blocks\" ) {\n      return parseInt( \"2580\", 16 );\n    }\n    else if( baseLabel.toLowerCase() == \"symbol\" ) {\n      return parseInt( \"2b00\", 16 ); //can be too wide\n    }\n    else if( baseLabel.toLowerCase() == \"legacy\" ) {\n      return parseInt( \"1fb00\", 16 );\n    }\n    return 0;\n  }\n\n  _fun_info_uc_DLR_() { return \"string:Create unicode character:<UnicodeHexCode$>\"; }\n  _fun_uc_DLR_( pars ) {\n\n    if( pars[0].value ) {\n      if( typeof pars[0].value == \"string\" ) {\n          return String.fromCodePoint( parseInt( pars[0].value, 16 ) );\n      }\n      return String.fromCodePoint( pars[0].value);\n    }\n    return \"?\";\n  }\n\n  _fun_info_dc_DLR_() { return \"print:Return device control char. sequence:<Parameter1>, <Parameter2>\"; }\n  _fun_dc_DLR_( pars ) {\n\n    var val = \"\";\n\n    val = String.fromCodePoint( 17 ) + String.fromCodePoint( pars[0].value) + String.fromCodePoint( pars[1].value);\n\n    return val;\n  }\n\n  _fun_info_html_DLR_() { return \"html:Unsupported function\"; }\n  _fun_html_DLR_( pars ) {\n    return\n      this.html.get();\n  }\n\n\n  _fun_info_width() { return \"general:Return the console width in pixels\"; }\n  _fun_width( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"width() has no parameters\" );\n    }\n\n    var wh = this.bitmap.getDimensions();\n    return wh[0];\n  }\n\n  _fun_info_height() { return \"general:Return the console height in pixels\"; }\n  _fun_height( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"width() has no parameters\" );\n    }\n\n    var wh = this.bitmap.getDimensions();\n    return wh[1];\n  }\n\n  _fun_info_cols()  { return \"print:Return the console width in columns\"; }\n  _fun_cols( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"cols() has no parameters\" );\n    }\n\n    var wh = this.output.getDimensions();\n    return wh[0];\n  }\n\n  _fun_info_columns() { return \"print:Return the console width in columns\"; }\n  _fun_columns( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"columns() has no parameters\" );\n    }\n\n    var wh = this.output.getDimensions();\n    return wh[0];\n  }\n\n  _fun_info_rows() { return \"print:Return the console height in rows\"; }\n  _fun_rows( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"rows() has no parameters\" );\n    }\n\n    var wh = this.output.getDimensions();\n    return wh[1];\n  }\n\n}\n\n//--EOC \n\n// ## pgmmanager.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/pgmmanager.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/pgmmanager.js\n\nclass BasicProgramManager {\n\n  constructor() {\n    this.rt = [];\n  }\n\n  addRuntime = function( ctx ) {\n\n    this.rt.push( ctx );\n\n  }\n\n}\n\nvar pgmman = new BasicProgramManager();\n\n//--EOC \n\n// ## basiccommands.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basiccommands.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basiccommands.js\n\nclass BasicCommands {\n\n  constructor( runtime ) {\n    this.output = runtime.output;\n    this.bitmap = runtime.bitmap;\n    this.input = runtime.input;\n    this.runtime = runtime;\n    this.sys = runtime.sys;\n    this.cmds = {};\n    this.func = {};\n    this.statementList = null;\n    this.erh = new ErrorHandler();\n\n    this.keyLabelCodes = {};\n\n    this.randnrs = [];\n    for(var i=0; i<10000;i++) {\n      this.randnrs.push( Math.random() );\n    }\n    this.randIndex = 0;\n    this.randStep = 1;\n\n  }\n\n  getStatements( raw ) {\n\n    //TODO, why is it called so often?\n    var stats = Object.getOwnPropertyNames( BasicCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_stat_\")) {\n        if( stats[i].startsWith(\"_stat_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(6 ).toUpperCase();\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n  getFunctions( raw ) {\n    var stats = Object.getOwnPropertyNames( BasicCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_fun_\")) {\n        if( stats[i].startsWith(\"_fun_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(5 ).toUpperCase().replace(\"_DLR_\",\"$\");\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n  getCategories() {\n\n    return new CommandHelp().getCategoriesIntermediate( [{},{}], this );\n\n  }\n\n\n  /************************ commands ************************/\n\n  _stat_info_new() { return \"program:Delete the current program from memory:\"; }\n  _stat_new( pars ) {\n\n    this.runtime.new();\n  }\n\n  _stat_info_list() { return \"program:List the basic program\"; }\n  _stat_list( pars ) {\n\n    var start = 0;\n    var end   = 999999;\n    var parts = [];\n\n    var mode = \"noparam\";\n\n    if( pars.length==1 ) {\n      parts = pars[0].parts;\n    }\n\n    if( parts.length == 1 && parts[0].type == \"num\" && parts[0].data >=0 ) {\n      start = parts[0].data;\n      end = parts[0].data;\n    }\n    else if( parts.length == 1 && parts[0].type == \"num\" && parts[0].data <0 ) {\n      /*NOTE, this will stop working if RAW changes to return uniop + posnum */\n      end = -parts[0].data;\n    }\n    else if( parts.length == 2\n        && parts[0].type == \"num\"\n        && parts[1].type == \"num\"\n        && parts[1].op == \"-\"\n          ) {\n      start = parts[0].data;\n      end = parts[1].data;\n\n    }\n    else if( parts.length == 2\n        && parts[0].type == \"num\"\n        && parts[1].type == \"uniop\"\n        && parts[1].op == \"-\"\n          ) {\n      start = parts[0].data;\n    }\n\n    var runtime = this.runtime;\n    var list = [];\n    for (const l of runtime.program)\n      {\n\n        var lineNr = parseInt(l[0]);\n        if(  l[0] == null || (lineNr>= start && lineNr<= end) ) {\n          if( l[1][0].type == \"control\" && l[1][0].controlKW == \"sub\" ) {\n              list.push( \"\" );\n          }\n          list.push( l[2] );\n        }\n      }\n\n      this.runtime.enterListMode( list );\n  }\n\n\n  _if_get() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [PAR];\n  }\n\n  _if_getkey() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [PAR];\n  }\n\n  _if_read() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [PAR];\n  }\n\n  _if_input() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW, RAW, RAW, RAW, RAW, RAW, RAW, RAW, RAW, RAW];\n  }\n\n  _if_list() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  _if_run() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  _stat_info_read() { return \"io:Read a value from the data::<Data$ or Data>\"; }\n  _stat_read( pars ) {\n    var p0 = pars[ 0 ];\n    if( p0.type != \"var\" ) {\n      this.erh.throwError( \"not a var\", \"parameter 0\" );\n    }\n\n    var data = this.runtime.readData();\n    if( data === undefined ) { this.erh.throwError( \"out of data\" ); }\n\n    if( p0.varType == \"num\" && (typeof data).toLowerCase() == \"number\" ) {\n          this.runtime.setVar(\n            p0.value,  data  );\n    }\n    else if( p0.varType == \"str\" && (typeof data).toLowerCase() == \"string\" ) {\n          this.runtime.setVar(\n            p0.value,  data  );\n    }\n    else if( p0.varType == \"num\" && (typeof data).toLowerCase() == \"string\" ) {\n\n          data = parseInt ( data );\n\n          if( isNaN( data ) ) {\n            this.erh.throwError( \"expected number\" );\n          }\n          this.runtime.setVar(\n            p0.value, data );\n    }\n    else if( p0.varType == \"str\" && (typeof data).toLowerCase() == \"number\" ) {\n          this.runtime.setVar(\n            p0.value,  \"\" + data  );\n    }\n\n  }\n\n  _stat_info_get() { return \"io:Retrieve the last key pressed::<Key$>\"; }\n  _stat_get( pars ) {\n    var p0 = pars[ 0 ];\n\n    if( p0.type != \"var\" ) {\n      this.erh.throwError( \"not a var\", \"parameter 0\" );\n    }\n\n    var k = this.input.getKey();\n    if( k == null ) { this.runtime.setVar(p0.value, \"\"); }\n    else {\n      if( k.key != null ) {\n        this.runtime.setVar(p0.value, k.key );\n      }\n      else {\n        this.runtime.setVar(p0.value, \"???\" );\n      }\n    }\n  }\n\n  _stat_info_getkey() { return \"io:Retrieve the last key pressed::<Key$>\"; }\n  _stat_getkey( pars ) {\n    var p0 = pars[ 0 ];\n\n    if( p0.type != \"var\" ) {\n      this.erh.throwError( \"not a var\", \"parameter 0\" );\n    }\n\n    var k = this.input.getKey();\n    if( k == null ) { this.runtime.setVar(p0.value, \"\" ); }\n    else {\n      if( k.key != null ) {\n        this.runtime.setVar(p0.value, k.key );\n      }\n      else {\n        this.runtime.setVar(p0.value, k.keyLabel );\n      }\n    }\n  }\n\n  _stat_info_input() { return \"io:Waits for the user to type in a value::<Value>\"; }\n  _stat_input( pars ) {\n\n    var vars = [];\n    var con = this.output;\n\n    for( var i=0; i<pars.length; i++) {\n      if( i == 0 ) {\n        var par = pars[0];\n\n        if( par.parts.length == 2 ) {\n          if( par.parts[0].type == \"str\" ) {\n            con.write( par.parts[0].data );\n            if( par.parts[1].type == \"var\" && par.parts[1].op == \";\" ) {\n              vars.push( par.parts[1].data );\n            }\n          }\n        }\n        else if( par.parts.length == 1 ) {\n          vars.push( par.parts[0].data );\n        }\n\n      }\n      else {\n        sys.log( \"PARS[\"+i+\"]\", pars[i] );\n        if( pars[i].parts[0].type != \"var\" ) {\n\n          this.erh.throwError( \"not a var\", \"parameter \" + i);\n        }\n        vars.push( pars[i].parts[0].data );\n      }\n    }\n\n    this.runtime.startConsoleDataInput( vars );\n\n  }\n\n  _stat_info_restore() { return \"io:Set the READ-pointer, to the beginning:\"; }\n  _stat_restore( pars ) {\n    this.runtime.restoreDataPtr();\n  }\n\n  _stat_info_load() { return \"program:Load a program in memory:<Filename>\"; }\n  _stat_load( pars ) {\n    var runtime = this.runtime;\n    var result;\n\n    runtime.printLine(\"\");\n\n    if( pars.length == 0) {\n      runtime.printLine(\"searching\");\n    }\n    else {\n      runtime.printLine(\"searching for \\\"\" + pars[0].value + \"\\\"\" );\n    }\n\n    if( pars.length == 0) {\n        result = runtime.load( \"*\", false );\n    }\n    else {\n      result = runtime.load( pars[0].value, false );\n    }\n    this.aSync = true;\n\n  }\n\n  _stat_info_setdata() { return \"io:Set data pointer:[<label>]\"; }\n  _stat_setdata( pars ) {\n\n    var runtime = this.runtime;\n    var label = null;\n\n    if( pars.length > 1  ) {\n      this.erh.throwError( \"parameters\", \"Setdata takes one optional parameter\" );\n    }\n\n    if( pars.length == 1 ) {\n      label = pars[0].value ;\n    }\n\n    var list = runtime.setData( label );\n\n  }\n\n  _stat_info_datablocks() { return \"io:Dump data blocks in memory\"; }\n  _stat_datablocks( pars ) {\n\n    var runtime = this.runtime;\n    var result;\n\n    if( pars.length != 0 ) {\n      this.erh.throwError( \"parameters\", \"Listdata takes no parameterss\" );\n    }\n\n    var list = runtime.getDataBlocks();\n    runtime.enterListMode( list );\n\n  }\n\n  _stat_info_loaddata() { return \"io:Load data in memory:<Filename> [, <Type>, <Label>]\"; }\n  _stat_loaddata( pars ) {\n\n    var runtime = this.runtime;\n    var result;\n    var label = null;\n    var type = \"I:CSV\";\n    runtime.printLine(\"\");\n\n    if( pars.length != 1 && pars.length != 2 && pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"loaddata takes one mandatory and two optional parameters\" );\n    }\n\n    if( pars.length >= 2 ) {\n      type = pars[1].value ;\n    }\n\n    if( type.indexOf(\":\") < 0) {\n      this.erh.throwError( \"invalid type specification\", \"Expected <Type>:<FileSyntax>. Example: \\\"I:CSV\\\"\" );\n    }\n\n    if( pars.length == 3 ) {\n      label = pars[2].value ;\n    }\n\n    result = runtime.loaddata( pars[0].value, type, label );\n\n    this.aSync = true;\n\n  }\n\n\n  _stat_info_dir() { return \"program:List a files on the current file system:[PATH]\"; }\n  _stat_dir( pars ) {\n    var runtime = this.runtime;\n    var result;\n\n    runtime.printLine(\"\");\n\n    if( pars.length == 0) {\n      runtime.dir( \"\" );\n      return;\n    }\n\n    if( pars.length == 1) {\n      runtime.dir( pars[0].value );\n      return;\n    }\n\n    this.erh.throwError( \"parameter\", \"dir takes 0 or 1 parameter(s)\"  );\n\n    this.aSync = true;\n\n  }\n\n  _stat_info_fs() { return \"program:Set or List (the) filesystem(s):[<FileSystem$>]\"; }\n  _stat_fs( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n      runtime.listfs();\n    }\n    else if( pars.length == 1) {\n      runtime.setfs( pars[0].value );\n    }\n\n\n    this.aSync = true;\n\n  }\n\n\n  _stat_info_renumber() { return \"program:Renumber the current program\"; }\n  _stat_renumber( pars ) {\n\n    var runtime = this.runtime;\n    runtime.renumberProgram( 10,10 );\n\n  }\n\n  _stat_info_vars() { return \"program:List all variables to the screen\"; }\n  _stat_vars( pars ) {\n\n\n    var runtime = this.runtime;\n\n    var varList = runtime.getFullVarList();\n    this.runtime.enterListMode( varList );\n\n  }\n\n\n  _stat_info_tracevar() { return \"program:Trace variable changes:[<\\\"Variable Name\\\">]\"; }\n  _stat_tracevar( pars ) {\n\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n      var traceList = runtime.getTraceList();\n      this.runtime.enterListMode( traceList );\n\n      return;\n    }\n\n    if( pars.length == 1) {\n      runtime.setTraceVar( pars[0].value );\n      return;\n    }\n\n  }\n\n  _stat_info_clrtracevar() { return \"program:Stop tracing variables\"; }\n  _stat_clrtracevar( pars ) {\n\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n      var traceList = runtime.resetTraceVar();\n    }\n  }\n\n\n  _stat_info_boot() { return \"program:Load and run a program:<FileName>\"; }\n  _stat_boot( pars ) {\n    var runtime = this.runtime;\n    var result;\n\n    runtime.printLine(\"\");\n\n    if( pars.length == 0) {\n      runtime.printLine(\"searching\");\n    }\n    else {\n      runtime.printLine(\"searching for \" + pars[0].value);\n    }\n\n    if( pars.length == 0) {\n        result = runtime.load( \"*\", true );\n    }\n    else {\n      result = runtime.load( pars[0].value, true );\n    }\n    this.aSync = true;\n\n  }\n\n  _stat_info_save() { return \"program:Save the current program:<FileName>\"; }\n  _stat_save( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n        runtime.save( null );\n    }\n    else {\n      runtime.save( pars[0].value );\n    }\n  }\n\n  _stat_info_delete() { return \"program:Delete a file:<FileName>\"; }\n  _stat_delete( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length != 1) {\n        this.erh.throwError( \"parameter\", \"delete without filename\" );\n    }\n    else {\n      runtime.deleteFile( pars[0].value );\n    }\n  }\n\n  _stat_info_run() { return \"program:Run the current program\"; }\n  _stat_run( pars ) {\n    var runtime = this.runtime;\n\n    runtime.runPGM();\n  }\n\n\n  _if_print() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  isNumber(value) {\n    return typeof value === 'number' && isFinite(value);\n  }\n\n  normalizeIfNumber( x )  {\n    if( this.isNumber( x ) ) {\n      if ( x >= 0 ) {\n        return \" \" + x;\n      }\n    }\n    return \"\" + x;\n  }\n\n  _stat_info_print() { return \"print:Print text or values to the console:<Value>[<Value>;][;]\"; }\n  _stat_print( pars ) {\n\n    var runtime = this.runtime;\n    var con= this.output;\n\n    if( pars.length == 0 ) {\n      con.nl();\n      return;\n    }\n    else if( pars.length == 1 ) {\n      if( pars[0].parts.length == 0 ) {\n        con.nl();\n        return;\n      }\n    }\n\n    var newLine = true;\n    var value;\n    for( var i=0; i<pars.length; i++) {\n\n      newLine = true;\n      if( i<(pars.length-1)) {\n        newLine = false;\n      }\n\n      if( i>0) {\n        con.write( \"         \" );\n      }\n\n      var exparts = pars[i];\n      var exparts2=\n        { parts: [],\n          binaryNegate: exparts.binaryNegate,\n          negate: exparts.negate  };\n\n      for( var j=0; j<exparts.parts.length; j++) {\n        if( exparts.parts[j].type == \"uniop\" &&\n            exparts.parts[j].op == \";\" && j==(exparts.parts.length-1)\n            && (i == pars.length-1)) {\n              //console.log( \"i=\"+i+\" newline: set to false\");\n          newLine = false;\n        }\n        else {\n          exparts2.parts.push( exparts.parts[j] );\n        }\n      }\n\n      value = runtime.evalExpression( exparts2 );\n\n      if( i == 0) {\n        con.write( this.normalizeIfNumber( value ) );\n      }\n      else {\n        con.write( \"\" + value );\n      }\n      if( newLine ) { con.nl(); }\n\n    }\n\n  }\n\n  _stat_info_clr() { return \"program:Clear all variables\"; }\n  _stat_clr( pars ) {\n    return this.runtime.clrPGM();\n  }\n\n  /************************ functions ************************/\n\n  _fun_info_datalen() { return \"io:Return length of current datablock\"; }\n  _fun_datalen( pars ) {\n    var runtime = this.runtime;\n    return runtime.getDataLength();\n  }\n\n  _fun_info_chr_DLR_() { return \"string:Return ascii character:<Ascii Code>\"; }\n  _fun_chr_DLR_( pars ) {\n    return String.fromCharCode( pars[0].value );\n  }\n\n  _fun_info_str_DLR_() { return \"string:Converts number to string: <Number>[,<Base>[,<Trim>]]\"; }\n  _fun_str_DLR_( pars ) {\n\n    if( pars.length <1 || pars.length >3  ) {\n      this.erh.throwError( \"parameter\", \"str$() takes 1,2 or 3 parameters\"  );\n    }\n\n    var number = pars[0].value;\n    var base = 10;\n    var trim = false;\n\n    if( pars.length>=2  ) {\n      base = pars[1].value;\n    }\n\n    if( pars.length==3  ) {\n      trim = ( pars[1].value > 0);\n    }\n\n    var numberStr = number.toString(base);\n\n    if( number >=0 && !trim) {\n      return \" \" +  numberStr;\n    }\n\n    return numberStr;\n  }\n\n  _fun_info_abs() { return \"math:Absolute value\"; }\n  _fun_abs( pars ) {\n    if( pars[0].value < 0 ) {\n      return -pars[0].value;\n    }\n    return pars[0].value;\n  }\n\n  _fun_info_len() { return \"string:Length of a string\"; }\n  _fun_len( pars ) {\n    return pars[0].value.length;\n  }\n\n  _fun_info_asc() { return \"string:ASCII value of a character\"; }\n  _fun_asc( pars ) {\n    if( (typeof pars[0].value).toUpperCase() == \"STRING\" ) {\n\n      if ( pars[0].value.length > 0) {\n          return pars[0].value.charCodeAt(0);\n      }\n    }\n    return 0;\n  }\n\n  _fun_info_val() { return \"string:Retrieve number from string\"; }\n  _fun_val( pars ) {\n    var base = 10;\n\n    if( pars.length==2  ) {\n      base = pars[1].value;\n    }\n\n    if(base < 2 || base > 16) {\n      this.erh.throwError( \"base\", \"base should be inbetween 2 and 16\" );\n    }\n\n    var val = parseInt( pars[0].value, base );\n\n    if( isNaN( val ) ) {\n      this.erh.throwError( \"invalid number syntax\", \"Could not parse \" + pars[0].value+ \" with base\" + base  );\n    }\n\n    return val;\n  }\n\n  _fun_info_hex2dec() { return \"string:Retrieve number from hexadecimal string\"; }\n  _fun_hex2dec( pars ) {\n    var base = 16;\n\n    if( pars.length != 1  ) {\n      this.erh.throwError( \"parameter\", \"HEX2DEC() needs one parameter\" );\n    }\n\n    var val = parseInt( pars[0].value, base );\n\n    if( isNaN( val ) ) {\n      this.erh.throwError( \"invalid number syntax\", \"Could not parse \" + pars[0].value+ \" with base\" + base  );\n    }\n\n    return val;\n  }\n\n\n  _fun_info_hex_DLR_() { return \"string:Format a number as a hexadecimal string\"; }\n  _fun_hex_DLR_( pars ) {\n    var base = 16;\n\n    if( pars.length != 1  ) {\n      this.erh.throwError( \"parameter\", \"HEX$() needs one parameter\" );\n    }\n\n    var hexString = (pars[0].value * 1).toString(16);\n\n    return hexString;\n }\n\n\n\n\n  _fun_info_exp() { return \"math:Exponent\"; }\n  _fun_exp( pars ) {\n    return Math.exp( pars[0].value );\n  }\n\n  intGetNextRand() {\n    this.randIndex = (this.randIndex + this.randStep) % this.randnrs.length;\n    return this.randnrs[ this.randIndex ];\n  }\n\n  intSeedRand( x0 ) {\n\n    if( x0 < 0) {\n      var x = -x0;\n      var base = Math.floor( x * 11 );\n      this.randIndex= base % this.randnrs.length;\n      this.randStep = 1+(base % 7);\n\n      /* Also reseed random buffer */\n      this.randnrs = [];\n      for(var i=0; i<10000;i++) {\n        this.randnrs.push( Math.random() );\n      }\n    }\n    else {\n\n      const minute = 1000 * 60;\n      const hour = minute * 60;\n      const day = hour * 24;\n      const year = day * 365;\n\n      const d = new Date();\n      let seedModifier = Math.round(d.getTime() / year);\n\n      x = -x;\n      var base = Math.floor( seedModifier * 11 );\n      this.randIndex= base % this.randnrs.length;\n      this.randStep = 1+(base % 7);\n\n      /* Also reseed random buffer */\n      this.randnrs = [];\n      for(var i=0; i<10000;i++) {\n        this.randnrs.push( Math.random() );\n      }\n    }\n\n  }\n\n\n  _fun_info_pad_DLR_() { return \"string:Add string padding:<String>, <padChar>,<Length>[,<PadLeft>]\"; }\n  _fun_pad_DLR_( pars ) {\n\n    if( pars.length < 3 || pars.length >4 ) {\n      this.erh.throwError( \"syntax\", \"pad$() takes 3 or 4 parameters\" );\n    }\n\n    var str = pars[0].value;\n    var ch = pars[1].value;\n    var len = pars[2].value;\n    var left = true;\n\n    if( pars.length == 4 ) {\n      left= pars[3].value;\n\n      if( left !== 0 ) {\n        left = true;\n      }\n      else { left = false; }\n    }\n\n    var dest = \"\";\n\n    var strLen = str.length;\n    var toPad = len-strLen;\n    for( var i = 0; i<toPad ; i++) {\n      dest += ch;\n    }\n\n    if( left ) {\n      dest = dest + str;\n    }\n    else {\n      dest = str + dest;\n    }\n\n    return dest;\n  }\n\n\n  _fun_info_rnd() { return \"math:Random number between 0 and 1:<Seed Or Mode>\"; }\n  _fun_rnd( pars ) {\n\n    if( pars.length >1) {\n      this.erh.throwError( \"syntax\", \"rnd takes one parameter\" );\n    }\n\n    if( pars.length == 1) {\n\n      if( pars[0].value == 0 ) {\n        return Math.random();\n      }\n      this.intSeedRand( pars[0].value );\n    }\n\n    return this.intGetNextRand();\n  }\n\n  _fun_info_sqr() { return \"math:Square Root\"; }\n  _fun_sqr( pars ) {\n    return Math.sqrt( pars[0].value);\n  }\n\n  _fun_info_log() { return \"math:Logaritm\"; }\n  _fun_log( pars ) {\n    return Math.log( pars[0].value);\n  }\n\n  _fun_info_pos() { return \"print:Position\"; }\n  _fun_pos( pars ) {\n    return this.runtime.getLinePos();\n  }\n\n  _fun_info_left_DLR_() { return \"string:Left part of the string\"; }\n  _fun_left_DLR_( pars ) {\n      //? LEFT$(A$,8)\n      var s = pars[0].value;\n\n      if( (typeof s) != \"string\") {\n        throw \"@type mismatch\";\n      }\n      return s.substr(0,pars[1].value);\n  }\n\n  _fun_info_right_DLR_() { return \"string:Right part of the string\"; }\n  _fun_right_DLR_( pars ) {\n      //? RIGHT$(A$,8)\n      var s = pars[0].value;\n\n      if( (typeof s) != \"string\") {\n        throw \"@type mismatch\";\n      }\n      return s.substr( s.length - pars[1].value );\n  }\n\n  _fun_info_mid_DLR_() { return \"string:A substring\"; }\n  _fun_mid_DLR_( pars ) {\n      //? RIGHT$(A$,8)\n      var s = pars[0].value;\n\n      if( (typeof s) != \"string\") {\n        throw \"@type mismatch\";\n      }\n      if( pars.length == 3) {\n        return s.substr( pars[1].value-1, pars[2].value );\n      }\n      else if( pars.length == 2) {\n        return s.substr( pars[1].value-1 );\n      }\n  }\n\n  _fun_info_sin() { return \"math:Sinus\"; }\n  _fun_sin( pars ) {\n    return Math.sin( pars[0].value);\n  }\n\n  _fun_info_tri() { return \"math+:Triangle\"; }\n  _fun_tri( pars ) {\n    var v = Math.abs( pars[0].value) % 1;\n\n    if( v<=0.5 ) {\n        return v*2;\n    }\n    else if( v<=1 ) {\n        return 1-((v-0.5) * 2);\n    }\n  }\n\n  _fun_info_saw() { return \"math+:Saw Tooth\"; }\n  _fun_saw( pars ) {\n    var v = Math.abs( pars[0].value) % 1;\n\n    return v;\n\n  }\n\n  _fun_info_tan() { return \"math:Tangent\"; }\n  _fun_tan( pars ) {\n    return Math.tan( pars[0].value);\n  }\n\n  _fun_info_atn() { return \"math:ATan function\"; }\n  _fun_atn( pars ) {\n    return Math.atan( pars[0].value);\n  }\n\n  _fun_info_cos() { return \"math:Cosinus\"; }\n  _fun_cos( pars ) {\n    return Math.cos( pars[0].value);\n  }\n\n  _fun_info_spc() { return \"string:Spaces for padding:<Size Of Padding>\"; }\n  _fun_spc( pars ) {\n    var out=\"\";\n    for( var i=0; i<pars[0].value; i++) {\n      out+=\" \";\n    }\n    return out;\n  }\n\n  _max(x,m) {\n    if( x<m ) {  return x; }\n    return m;\n  }\n\n\n\n  _fun_info_int() { return \"math:Convert to Integer\"; }\n  _fun_int( pars ) {\n    return Math.floor( pars[0].value );\n  }\n\n  _fun_info_range() { return \"math+:Keep in range:<V>,<MIN>,<MAX>\"; }\n  _fun_range( pars ) {\n\n    if( pars.length <3) {\n      this.erh.throwError( \"parameter\", \"expected 3 parameters\" );\n    }\n    var v = pars[0].value ;\n    var min = pars[1].value ;\n    var max = pars[2].value ;\n\n    if( v<min ) { return min; }\n    if( v>max ) { return max; }\n    return v;\n  }\n\n\n  _fun_info_tab() { return \"print:Tab cursor Xpos to the right:<Number of Tabs>\"; }\n  _fun_tab( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length <1) {\n      this.erh.throwError( \"syntax\", \"missing parameter 0\" );\n    }\n    var p = pars[0].value;\n    if( p<0 || p > 255 ) {\n      this.erh.throwError( \"illegal quantity\", \"value must be in-between 0 and 255\" );\n    }\n\n    for( var i=0; i<pars[0].value ; i++) {\n        this.output.write( \" \" );\n    }\n\n    return \"\";\n  }\n\n  _fun_info_sgn() { return \"math:Sign of number\"; }\n  _fun_sgn( pars ) {\n    var x = pars[0].value;\n\n    if( x<0 ) { return -1; }\n    else if( x>0 ) { return 1; }\n    return 0;\n  }\n\n  _fun_info_millis() { return \"time:Current time in milliseconds\"; }\n  _fun_millis( pars ) {\n    return this.runtime.getMillis( );\n  }\n\n  _fun_info_jiffies() { return \"time:Current time in 'jiffies'\"; }\n  _fun_jiffies( pars ) {\n    return this.runtime.getJiffyTime( );\n  }\n}\n\n//--EOC \n\n// ## basicparser.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicparser.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicparser.js\n\nclass Parser {\n\n  constructor( cmds, ecmds ) {\n    this.commands = cmds;\n    this.extendedcommands = ecmds;\n    this.erh = new ErrorHandler();\n    this.debugFlag = false;\n  }\n\n  init() {\n\n\t  this.CTRL_KW = [\"IF\",\"THEN\",\"GOTO\",\"AND\", \"NOT\", \"OR\",  \"GOSUB\", \"RETURN\", \"FOR\", \"TO\", \"NEXT\", \"STEP\", \"DATA\", \"REM\", \"GOSUB\", \"DIM\", \"END\", \"LET\", \"STOP\", \"DEF\", \"FN\", \"ON\", \"SUB\", \"INTERRUPT0\", \"INTERRUPT1\" ];\n    this.SHORTCUT_KW = [\"?\"];\n\n    this.KEYWORDS = this.commands.getStatements();\n\n    var more = this.extendedcommands.getStatements();\n    for( var i=0; i<more.length; i++) {\n      this.KEYWORDS.push( more[ i ] );\n    }\n\n    more = this.commands.getFunctions();\n    for( var i=0; i<more.length; i++) {\n      this.KEYWORDS.push( more[ i ] );\n    }\n\n    more = this.extendedcommands.getFunctions();\n    for( var i=0; i<more.length; i++) {\n      this.KEYWORDS.push( more[ i ] );\n    }\n\n     for( var i=0; i<this.CTRL_KW.length; i++) {\n       this.KEYWORDS.push( this.CTRL_KW[ i ] );\n     }\n\n     for( var i=0; i<this.SHORTCUT_KW.length; i++) {\n       this.KEYWORDS.push( this.SHORTCUT_KW[ i ] );\n     }\n     //this.padArray( this.KWCODES, 256 );\n\n     if( this.debugFlag ) { console.log(\"KEYWORDS:\" , this.KEYWORDS ); }\n\n     this.screenCodes2CTRLTable = [];\n     var tab = this.screenCodes2CTRLTable;\n\n     tab['\\x93'] = '\\x13';\n     tab['\\xd3'] = '\\x93';\n  }\n\n  getKeyWordCodes() {\n\n    this.throwError( null, \"(Extended) Keywords not yet supported\", \"extended disabled\" );\n    return this.KWCODES;\n  }\n\n  padArray( arr, nr ) {\n    var missing = nr - arr.length;\n    while( missing > 0) {\n      arr.push( null );\n      missing--;\n    }\n  }\n\n  throwError( ctx, detail, clazz ) {\n\n    var clazz2 = clazz;\n    if( clazz2 === undefined ) {\n      clazz2 = \"syntax\";\n    }\n\n    if( ctx ) {\n      console.log(\" Exception \" + clazz + \" at line \" + ctx.lineNumber+ \" \" + detail );\n    }\n\n    if( ctx ) {\n      if( ! ( ctx.lineNumber == undefined ) ) {\n        this.erh.throwError( clazz2, detail, ctx, ctx.lineNumber );\n      }\n    }\n\n    this.erh.throwError( clazz2, detail, undefined, -1 );\n\n  }\n\n  upperCaseNameTokens( tokens ) {\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n\t\t\tvar token = tokens[i];\n\n\t\t\tif( token ) {\n\t\t\t\tif( token.type == \"name\" ) {\n\t\t\t\t\ttoken.data = token.data.toUpperCase();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn tokens;\n\t}\n\n\tremovePadding( tokens ) {\n\t\tvar tokens2 = [];\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n\t\t\tvar token = tokens[i];\n\n\t\t\tif( token ) {\n\t\t\t\tif( token.type != \"pad\" ) {\n\t\t\t\t\ttokens2.push( token );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn tokens2;\n\t}\n\n  mergeCompTokens( tokens ) {\n\t\tvar tokens2 = [];\n\n    /* Convert token sequences like (\"<\",\"=\")\n       into single token \"<=\" */\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n\t\t\tvar token = tokens[i];\n\n\t\t\tif( i>0 ) {\n        var token2 = tokens[i-1];\n\t\t\t\tif( ( token.type == \"comp\" || token.type == \"eq\" ) &&\n            ( token2.type == \"comp\" || token2.type == \"eq\" ) ) {\n\t\t\t\t\ttoken2.type = \"@@removeme\";\n          token.data = token2.data + token.data;\n          token.type = \"comp\";\n          if( token.data == \"><\" ) {\n            token.data = \"<>\";\n          }\n          else if( token.data == \"=<\" ) {\n            token.data = \"<=\";\n          }\n          else if( token.data == \"=>\" ) {\n            token.data = \">=\";\n          }\n\n  \t\t\t}\n\t\t\t}\n\n      if( ( token.type == \"name\"  && token.data == \"OR\" ) ||\n        ( token.type == \"name\"  && token.data == \"AND\" ) ||\n        ( token.type == \"name\"  && token.data == \"NOT\" )) {\n          token.type = \"bop\";\n        }\n\n\t\t}\n\n    for( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n      if( tokens[i].type!=\"@@removeme\") {\n        tokens2.push( tokens[i] );\n      }\n    }\n\n\t\treturn tokens2;\n\t}\n\n\n\n  mergeBrokenUpTokens( tokens ) {\n\n    var splits = [];\n\n    //console.log(\"tokens\",tokens)\n    //standard\n    splits.push( { p1: \"REST\", p2: \"OR\", p3: \"E\", whole: \"RESTORE\" } );\n    splits.push( { p1: \"S\", p2: \"TO\", p3: \"P\", whole: \"STOP\" } );\n\n\n    //extended\n//    splits.push( { p1: \"Dsk\", p2: \"OR\", p3: \"T\", whole: \"DXPORT\" } );\n//    splits.push( { p1: \"LXP\", p2: \"OR\", p3: \"T\", whole: \"LXPORT\" } );\n    splits.push( { p1: \"IMP\", p2: \"OR\", p3: \"T\", whole: \"IMPORT\" } );\n    splits.push( { p1: \"EXP\", p2: \"OR\", p3: \"T\", whole: \"EXPORT\" } );\n    splits.push( { p1: \"L\", p2: \"GET\", p3: \"URL\", whole: \"LGETURL\" } );\n    splits.push( { p1: \"L\", p2: \"GET\", p3: \"NAME\", whole: \"LGETNAME\" } );\n    splits.push( { p1: \"L\", p2: \"GET\", p3: \"ID\", whole: \"LGETID\" } );\n    splits.push( { p1: \"GO\", p2: \"TO\", p3: null, whole: \"GOTO\" } );\n    splits.push( { p1: \"GO\", p2: \"SUB\", p3: null, whole: \"GOSUB\" } );\n\n    splits.push( { p1: \"GO\", p2: \"LINK\", p3: null, whole: \"GOLINK\" } );\n    splits.push( { p1: \"WINDOW\", p2: \"S\", p3: null, whole: \"WINDOWS\" } );\n    splits.push( { p1: \"UN\", p2: \"TAG\", p3: null, whole: \"UNTAG\" } );\n    splits.push( { p1: \"LINK\", p2: \"S\", p3: null, whole: \"LINKS\" } );\n    splits.push( { p1: \"DE\", p2: \"LET\", p3: \"E\", whole: \"DELETE\" } );\n    splits.push( { p1: \"LDE\", p2: \"LET\", p3: \"E\", whole: \"LDELETE\" } );\n    splits.push( { p1: \"TDE\", p2: \"LET\", p3: \"E\", whole: \"TDELETE\" } );\n    splits.push( { p1: \"B\", p2: \"OR\", p3: \"DER\", whole: \"BORDER\" } );\n    splits.push( { p1: \"G\", p2: \"COLOR\", p3: \"S\", whole: \"GCOLORS\" } );\n    splits.push( { p1: \"CHAR\", p2: \"COL\", p3: null, whole: \"CHARCOL\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"CP\", p3: null, whole: \"SFRAMECP\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"FLIPX\", p3: null, whole: \"SFRAMEFLIPX\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"FLIPY\", p3: null, whole: \"SFRAMEFLIPY\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"FX\", p3: null, whole: \"SFRAMEFX\" } );\n    splits.push( { p1: \"TAG\", p2: \"S\", p3: null, whole: \"TAGS\" } );\n    splits.push( { p1: \"X\", p2: \"ON\", p3: null, whole: \"XON\" } );\n    splits.push( { p1: \"S\", p2: \"POS\", p3: null, whole: \"SPOS\" } );\n    splits.push( { p1: \"S\", p2: \"POKE\", p3: null, whole: \"SPOKE\" } );\n    splits.push( { p1: \"WJ\", p2: \"IF\", p3: \"FY\", whole: \"WJIFFY\" } );\n    splits.push( { p1: \"REF\", p2: \"OR\", p3: \"MAT\", whole: \"REFORMAT\" } );\n\n\n    var tokens2 = []; //tokens;\n\n    for( var i=0; i<tokens.length; i++) {\n      tokens2.push( tokens[ i ]);\n    }\n\n    for( var i=0; i<splits.length; i++) {\n      var r=splits[i];\n      tokens2 = this.mergeTokenRange( tokens2, r );\n    }\n\n    if( this.debugFlag ) {  console.log( tokens2 ); }\n    return tokens2;\n  }\n\n\n  mergeTokenRange( tokens, record ) {\n\t\tvar tokens2 = [];\n    var tokens3 = [];\n\n    /* Convert \"S\",\"TO\",\"P\" into \"STOP\" */\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n      tokens2[i] = tokens[i];\n\t\t}\n\n    for( \tvar i=1;\n\t\t\t\t\ti<tokens2.length;\n\t\t\t\t\ti++)\n\t\t{\n      if( record.p3 == null ) {\n        if(\n           ( tokens2[i-1].type == \"name\" || tokens2[i-1].type == \"bop\" ) &&\n           ( tokens2[i-0].type == \"name\" || tokens2[i-0].type == \"bop\" ) ) {\n             if(\n                tokens2[i-1].data == record.p1 &&\n                tokens2[i-0].data == record.p2 ) {\n                  tokens2[i-1].data = record.whole;\n                  tokens2[i-0].type = \"removeme\";\n                }\n           }\n      }\n      else {\n        if(i<2) {\n          continue;\n        }\n        if(\n          ( tokens2[i-2].type == \"name\" || tokens2[i-2].type == \"bop\" ) &&\n           ( tokens2[i-1].type == \"name\" || tokens2[i-1].type == \"bop\" ) &&\n           ( tokens2[i-0].type == \"name\" || tokens2[i-0].type == \"bop\" ) ) {\n\n             if( tokens2[i-2].data == record.p1 &&\n                tokens2[i-1].data == record.p2 &&\n                tokens2[i-0].data == record.p3 ) {\n                  tokens2[i-2].data = record.whole;\n                  tokens2[i-1].type = \"removeme\";\n                  tokens2[i-0].type = \"removeme\";\n                }\n           }\n      }\n\t\t}\n\n    var j=0;\n    for( \tvar i=0;\n\t\t\t\t\ti<tokens2.length;\n\t\t\t\t\ti++)\n\t\t{\n      if( tokens2[i].type != \"removeme\" ) {\n          tokens3[j] = tokens2[i];\n          j++;\n      }\n\t\t}\n\n\t\treturn tokens3;\n\t}\n\n\tparseFunParList( context ) {\n\n\t\tvar tokens = context.tokens;\n\t\tvar params = [];\n\t\tvar even = true;\n\n\t\tvar endTokens = [];\n\t\tendTokens.push( { type: \"sep\", data: \"@@@all\" });\n\t\tendTokens.push( { type: \"bracket\", data: \")\" });\n\n\t\tendTokens.push();\n\n\t\twhile( true ) {\n\n\t\t\tvar token;\n\n      if( tokens.length > 0) {\n        if( tokens[0].type==\"bracket\" && tokens[0].data==\")\") {\n          break;\n        }\n      }\n\n\t\t\tif( even ) {\n        var expr = this.parseBoolExpression( context, endTokens );\n        expr.type = \"expr\";\n\t\t\t\tparams.push( expr );\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoken = tokens.shift();\n\n\t\t\t\tif( token.type==\"sep\" ) {\n\t\t\t\t\t//all ok, next par\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.throwError( context, \"Expected ',' or ')', got '\" + token.data + \"'\");\n\t\t\t\t}\n\t\t\t}\n\t\t\teven = !even;\n\t\t}\n\n\t\treturn params;\n\t}\n\n\tpeekIfNextIsOpenBracket( context ) {\n\n\t\tvar tokens = context.tokens;\n\n\t\tif( tokens.length > 0 ) {\n\t\t\tif( tokens[0].type == \"bracket\" && tokens[0].data == \"(\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tparseSubExpression( context ) {\n\n\t\tvar token = context.tokens.shift();\n\n\t\tif( !(token.type == \"bracket\" && token.data == \"(\")) {\n\t\t\tthis.throwError( context, \"parsing subexpression, expected \\\"bracket\\\", not '\" + token.data + \"'\");\n\t\t}\n\n\t\tvar endTokens = [];\n\t\tendTokens.push( { type: \"bracket\", data: \")\" });\n\n\t\tvar expr = this.parseBoolExpression( context, endTokens );\n\t\tcontext.tokens.shift();\n\n\t\texpr.type = \"expr\";\n\t\treturn expr;\n\t}\n\n\n  tokensToString( token )  {\n    var str = \"\";\n\n    if(token.data == \"@@@all\") {\n        str = str + \"'\" + token.type + \"'\";\n    }\n    else {\n      //str = str + \"'\" + token.type + \"/\" + token.data + \"'\";\n      str = str + \"'\" + token.data + \"'\";\n    }\n\n    return str;\n  }\n\n  endTokensToString( endTokenArray )  {\n    var str = \"\";\n\n    for( var et=0; et<endTokenArray.length; et++) {\n      var endToken = endTokenArray[et];\n\n      if( str != \"\") { str+= \" \";}\n      str += this.tokensToString( endToken );\n    }\n    return str;\n  }\n\n  isEndToken( token, endTokenArry ) {\n\n    for( var et=0; et<endTokenArry.length; et++) {\n      var endToken = endTokenArry[et];\n\n      if( token.type == endToken.type && token.data == endToken.data ) {\n        return true;\n      }\n      else if( token.type == endToken.type && endToken.data == \"@@@all\" ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  parseSimpleExpression( context, endTokens ) {\n\n    var endLoop;\n\t\tvar tokens = context.tokens;\n\n    if( tokens.length == 0) {\n      return undefined;\n    }\n\n\t\tvar token, returnValue=undefined;\n\t\ttoken = tokens.shift();\n\n\t\tif( !token ) {\n\t\t\tthis.throwError( context, \"empty simple expression\");\n\t\t}\n\n    endLoop = this.isEndToken( token, endTokens );\n    if( endLoop ) {\n      this.throwError( context, \"empty simple expression\");\n    }\n\n\n    if( token.type == \"op\" && token.data == \"-\" ) {\n\t\t\t\tvar pair = this.parseSimpleExpression( context, endTokens );\n        pair[0].data = -pair[0].data;\n        return pair;\n\t\t}\n\n\t\tif( token.type == \"num\" ) {\n        returnValue= { type: \"num\", data: token.data };\n\t\t}\n\t\telse if( token.type == \"str\" ) {\n\t\t\t\treturnValue= { type: \"str\", data: token.data };\n\t\t}\n\n\n    token = tokens.shift();\n    if( token ) {\n      endLoop = this.isEndToken( token, endTokens );\n      if( ! endLoop ) {\n        endLoop = context.tokens.length == 0;\n      }\n      if( !endLoop ) {\n        this.throwError( context, \"Empty simple expression end expected\");\n      }\n    }\n\n\t\treturn [returnValue, token];\n\t}\n\n\n  parseBoolExpression( context, endTokens0 ) {\n\n    var endTokens = [];\n    var tokens = context.tokens;\n\n    for( var i=0; i < endTokens0.length; i++ ) {\n      endTokens.push( endTokens0[ i ] );\n    }\n\n    endTokens.push( { type: \"bop\", data: \"OR\" });\n    endTokens.push( { type: \"bop\", data: \"AND\" });\n\n    var first = true;\n    var eList = [];\n    var op = null;\n    while( true ) {\n\n      var expr = this.parseExpression( context, endTokens );\n      if( first && tokens.length == 0) {\n        return expr;\n      }\n      first = false;\n\n      var opData = null;\n      if( op != null ) {\n          opData = op.data;\n      }\n\n      //if( expr.parts.length == 1) {\n      //    expr.parts[0].op = opData;\n      //    expr.parts[0].dbg = \"1\";\n      //    eList.push(  expr.parts[0] );\n      //}\n      //else {\n          expr.op = opData;\n          expr.type = \"expr\";\n          expr.dbg = \"1\";\n          eList.push(  expr );\n      //}\n\n      if( tokens.length > 0) {\n        if( tokens[0].type == \"bop\" ) {\n          var op = tokens.shift();\n          continue;\n        }\n      }\n      break;\n    }\n\n    if( eList.length == 1 ) {\n        eList[0].dbg2 = \"len=1\";\n        return eList[0];\n    }\n\n\n    var retExpr = {\n      negate: false,\n      binaryNegate: false,\n      type: \"expr\",\n      parts: [],\n      op: null\n    };\n\n    for( i=0; i<eList.length; i++) {\n      retExpr.parts.push( eList[ i ] );\n    }\n\n    return retExpr;\n\n  }\n\n\tparseExpression( context, endTokens ) {\n\n\t\tvar tokens = context.tokens;\n    if( tokens.length == 0) {\n      return null;\n    }\n\n\t\tvar expression = {\n\t\t\t\t\tparts: [],\n          negate: false,\n          binaryNegate: false\n\t\t};\n\n\t\tvar index = 0;\n\t\tvar even = true;\n\t\tvar op = null;\n\t\tvar parts = expression.parts;\n    var first = true;\n    var negate = false;\n\n    var binaryNegate = false;\n\n\n\t\twhile( true ) {\n\t\t\tvar token, part;\n\t\t\ttoken = tokens.shift();\n\n\t\t\tif( !token ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n      var endLoop = this.isEndToken( token, endTokens );\n      if( endLoop ) {\n\n        tokens.unshift( token );\n        break;\n      }\n\n\t\t\tif( even ) {\n\n\t\t\t\tif( token.type == \"num\" ) {\n\t\t\t\t\tpart = { type: \"num\", data: token.data, op: op };\n          if( negate ) {\n            part.data = -part.data;\n          }\n\t\t\t\t\tparts.push( part );\n          first = false;\n          negate = false;\n\t\t\t\t}\n\t\t\t\telse if( token.type == \"str\" ) {\n\t\t\t\t\tpart = { type: \"str\", data: token.data, op: op };\n\t\t\t\t\tparts.push( part );\n          if( negate ) {\n            this.throwError( context, \"found negation on a string\", \"type mismatch\");\n          }\n          first = false;\n\t\t\t\t}\n\t\t\t\telse if( token.type==\"bracket\" && token.data==\"(\") {\n\t\t\t\t\t\ttokens.unshift( token );\n\n            var subEndTokens = [];\n            subEndTokens.push( { type: \"bracket\", data: \")\" });\n\n\t\t\t\t\t\tvar expr = this.parseSubExpression( context, subEndTokens );\n            expr.op = op;\n            expr.negate = negate;\n            expr.binaryNegate = binaryNegate;\n\t\t\t\t\t\tparts.push ( expr );\n            first = false;\n            negate = false;\n\t\t\t\t}\n\t\t\t\telse if( token.type==\"name\" ) {\n\n\t\t\t\t\t\tvar name = token.data;\n\t\t\t\t\t\tvar isFunctionCallOrArray = this.peekIfNextIsOpenBracket( context );\n            var isUserDefinedFunctionCall = (name == \"FN\");\n\n\t\t\t\t\t\tif( isFunctionCallOrArray ) { /*We have a function or an Array */\n\n\t\t\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\t\t\tvar parameters = this.parseFunParList( context );\n              tokens.shift();\n\n              part = { type: \"funCall\", params: parameters, op: op, functionName: name };\n\n              if( this.KEYWORDS.indexOf( name ) == -1 ) {\n                //isArray  example: x=a(5)\n                part = { type: \"array\", data: name, op: op, indices: parameters };\n\n              }\n\n              if( op == null && negate ) {\n                var subExpression = {\n                      parts: [part],\n                      negate: true,\n                      binaryNegate: false,\n                      type: \"expr\"\n                };\n                parts.push ( subExpression );\n              }\n\t\t\t\t\t\t\telse {\n                parts.push ( part );\n              }\n\n\t\t\t\t\t\t}\n            else if( isUserDefinedFunctionCall ) {\n\n              token = tokens.shift();\n              name = token.data;\n\n              token = tokens.shift();\n              var parameters = this.parseFunParList( context ); //TODO limit to 1 par\n              tokens.shift();\n\n              part = { type: \"defFnCall\", params: parameters, op: op, functionName: name };\n\n              if( op == null && negate ) {\n                var subExpression = {\n                      parts: [part],\n                      negate: true,\n                      binaryNegate: false,\n                      type: \"expr\"\n                };\n                parts.push ( subExpression );\n              }\n\t\t\t\t\t\t\telse {\n                parts.push ( part );\n              }\n\n            }\n\t\t\t\t\t\telse { /* we have an variable*/\n\n\t\t\t\t\t\t\tpart = { type: \"var\", data: token.data, op: op };\n              if( op == null && negate ) {\n                var subExpression = {\n                      parts: [part],\n                      negate: true,\n                      binaryNegate: false,\n                      type: \"expr\"\n                };\n                parts.push ( subExpression );\n              }\n              else {\n                parts.push ( part );\n              }\n\n\t\t\t\t\t\t}\n            negate = false;\n            first = false;\n\t\t\t\t}\n        else if( token.type==\"op\" && token.data==\"-\" ) {\n          negate = ! negate;\n          continue;\n        }\n        else if( token.type==\"bop\" && token.data==\"NOT\" && first ) {\n          binaryNegate = ! binaryNegate;\n          expression.binaryNegate = binaryNegate;\n          if( this.debugFlag ) {\n            console.log(\"NOT\")\n          }\n          continue;\n        }\n\t\t\t\telse {\n\t\t\t\t\tthis.throwError( context, \"Expected \\\"number\\\", \\\"string\\\", \\\"symbol\\\" or \\\"bracket\\\", not \" + token.data);\n\t\t\t\t}\n        op = null;\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif( token.type == \"op\" || token.type == \"comp\" || token.type == \"eq\" || token.type == \"bop\" ) {\n\t\t\t\t\top = token.data;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.throwError( context, \"Expected \\\"operator\\\" or one of (\"+\n          this.endTokensToString(endTokens)+\n          \"), not '\" + token.data + \"'\");\n\t\t\t\t}\n\t\t\t}\n\t\t\teven = !even;\n\n\t\t}\n\n    if( op != null ) {\n      part = { type: \"uniop\", data: null, op: op };\n      parts.push ( part );\n    }\n\n\t\tif( expression.parts == null ) {\n\t\t\treturn null;\n\t\t}\n\n    var newParts;\n    newParts = this.groupParts( expression.parts, \"^\" );\n    newParts = this.groupParts( newParts, \"/\" );\n    newParts = this.groupParts( newParts, \"*\" );\n\n    var oldExpression = expression;\n    expression = {\n          parts: newParts,\n          negate: oldExpression.negate,\n          binaryNegate: oldExpression.binaryNegate\n    };\n\n\t\treturn expression;\n\t}\n\n\n  groupParts( parts0 , op ) {\n\n    var parts1=[], parts2=[];\n\n    for( var i=0; i<parts0.length; i++ ) {\n      parts1.push( parts0[ i ] );\n    }\n\n    for( var i=0; i<parts1.length; i++ ) {\n\n      var part = parts1[ i ];\n      if( i>0 && part.op == op ) {\n        var prevPart = parts1[ i-1 ];\n\n        var subExpr = {\n          negate: false,\n          binaryNegate: false,\n          type: \"expr\",\n          parts: [],\n          op: prevPart.op\n        };\n\n        subExpr.parts[ 0 ] = prevPart;\n        subExpr.parts[ 0 ].op = null;\n        subExpr.parts[ 1 ] = part;\n\n        parts1[i-1] = null;\n        parts1[ i ] = subExpr;\n\n      }\n    }\n\n\n    for( var i=0; i<parts1.length; i++ ) {\n\n      var part = parts1[ i ];\n      if( part != null ) {\n        parts2.push( part );\n      }\n    }\n\n    return parts2;\n  }\n\n  normalizeStatementName( x ) {\n    if(x == \"?\") {\n      return \"print\";\n    }\n    return x;\n  }\n\n  parseAssignment( context, preTokens, commands, command, nameToken, token0  ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    command.type = \"assignment\";\n    command.var = nameToken;\n    command.arrayAssignment = false;\n\n    var endTokens = [];\n    endTokens.push( { type: \"cmdsep\", data: \"@@@all\" });\n\n    command.expression = this.parseBoolExpression( context, endTokens );\n    commands.push( command );\n  }\n\n  parseArrayAssignment( context, preTokens, commands, command, nameToken, token0  ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    command.type = \"assignment\";\n    command.var = nameToken;\n    command.arrayAssignment = true;\n\n    //token = tokens.shift();\n    var indices = this.parseFunParList( context );\n    command.indices = indices;\n\n    tokens.shift();\n    if( this.debugFlag ) {\n      console.log(\"tokens after:\",tokens)\n    }\n\n    token = tokens.shift();\n    if( token === undefined ) {\n      token = { type: \"@@@notoken\" };\n    }\n\n    if( token.type != \"eq\") {\n      this.throwError( context, \"Expected =\");\n    }\n\n    var endTokens = [];\n    endTokens.push( { type: \"cmdsep\", data: \"@@@all\" });\n\n    command.expression = this.parseBoolExpression( context, endTokens );\n    commands.push( command );\n\n  }\n\n  parseControlStructure(  context, preTokens, commands, command, handlers, nameToken, token0  ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    if( true ) {\n\n      command.type = \"control\";\n      var controlToken = nameToken;\n      command.controlKW = nameToken.toLowerCase();\n      if( token.type != \"@@@notoken\") {\n        tokens.unshift( token );\n      }\n\n      if( controlToken == \"LET\") {\n\n        token = tokens.shift();\n        if( token.type != \"name\") {\n          this.throwError( context, \"LET expects var name\");\n        }\n        nameToken = token.data;\n\n        token = tokens.shift();\n        if( token === undefined ) {\n          token = { type: \"@@@notoken\" };\n        }\n\n/*        if( token.type != \"bracket\") { #TODO array assignments, ex: LET a(8) = 2\n          this.throwError( context, \"LET expects =\");\n        }\n*/\n\n        if( token.type == \"eq\") {\n\n          this.parseAssignment( context, preTokens, commands, command, nameToken, token );\n        }\n        else if( token.type == \"bracket\" && token.data==\"(\" ) {\n\n          this.parseArrayAssignment( context, preTokens, commands, command, nameToken, token );\n\n        }\n        else {\n          this.throwError( context, \"Unexpected data after 'LET': '\" + token.data + \"'\" );\n        }\n\n      }\n      else if( controlToken == \"DIM\") {\n\n        var first = true;\n        command.params = [];\n        command.arrayNames = [];\n\n        while( true ) {\n\n          token = tokens.shift();\n          if(!first ) {\n            if( token === undefined ) {\n              break;\n            }\n            if( ! ( token.type == \"sep\" && token.data == \",\" )) {\n              tokens.unshift( token );\n              break;\n            }\n            token = tokens.shift();\n          }\n\n          if( token.type != \"name\" ) {\n            this.throwError( context, \"DIM expects var name\");\n          }\n\n          nameToken = token.data;\n\n          token = tokens.shift();\n          if( token === undefined ) {\n            token = { type: \"@@@notoken\" };\n          }\n\n          if( !(token.type==\"bracket\" && token.data==\"(\") ) {\n            this.throwError( context, \"DIM expects (\");\n          }\n\n          var indices = this.parseFunParList( context );\n\n          token = tokens.shift();\n          if( token === undefined ) {\n            token = { type: \"@@@notoken\" };\n          }\n\n          if( !(token.type==\"bracket\" && token.data==\")\") ) {\n            this.throwError( context, \"DIM expects )\");\n          }\n\n          command.params.push( indices );\n          command.arrayNames.push( nameToken );\n\n          first = false;\n        }\n\n        commands.push( command );\n      }\n      else if( controlToken == \"DEF\") {\n\n        token = tokens.shift();\n        if( !( token.type == \"name\" && token.data == \"FN\" ) ) {\n          this.throwError( context, \"DEF expects FN\");\n        }\n\n        token = tokens.shift();\n        if( token.type != \"name\") {\n          this.throwError( context, \"DEF FN expects function name\");\n        }\n        var fName = token.data;\n\n        token = tokens.shift();\n        if(! ( token.type == \"bracket\" && token.data == \"(\" )) {\n          this.throwError( context, \"DEF FN expects function name and ->( varname )\");\n        }\n\n        token = tokens.shift();\n        if(! ( token.type == \"name\"  )) {\n          this.throwError( context, \"DEF FN expects function name and ( ->varname )\");\n        }\n        var varName = token.data;\n\n        token = tokens.shift();\n        if(! ( token.type == \"bracket\" && token.data == \")\" )) {\n          this.throwError( context, \"DEF FN expects function name and ( varname -> )\");\n        }\n\n        token = tokens.shift();\n        if(! ( token.type == \"eq\" && token.data == \"=\" )) {\n          this.throwError( context, \"DEF FN expects function name and ( varname ) -> =\");\n        }\n\n\n        endTokens = [];\n        var expr_fn = this.parseBoolExpression( context, endTokens );\n\n        if( this.debugFlag ) {\n          console.log(\"expr = \" + expr_fn );\n        }\n\n        command.params=[];\n        command.params[0] = fName;\n        command.params[1] = varName;\n        command.params[2] = expr_fn;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"GOTO\" || controlToken == \"GOSUB\") {\n        var num = -1;\n\n        token = tokens.shift();\n\n        if( token === undefined ) {\n          this.throwError( context, \"GOTO/GOSUB expects linenumber or label\", \"undef'd statement\");\n        }\n\n        if( token.type != \"num\") {\n          //this.throwError( context, \"GOTO/GOSUB expects number\", \"undef'd statement\");\n\n          if( token.type != \"name\") {\n              this.throwError( context, \"GOTO/GOSUB expects linenumber or label\", \"undef'd statement\");\n          }\n\n          var label = token.data;\n\n          token = tokens.shift();\n          if( token !== undefined ) {\n            if( token.type != \"cmdsep\") {\n              this.throwError( context, \"Expected \\\"command separator\\\", instead of '\"+token.data+\"'\");\n            }\n          }\n\n          command.params=[];\n          command.params[0] = label;\n          command.label = true;\n          commands.push( command );\n          return;\n\n        }\n        num = parseInt(token.data);\n        token = tokens.shift();\n        if( token !== undefined ) {\n          if( token.type != \"cmdsep\") {\n            this.throwError( context, \"Expected \\\"command separator\\\", instead of '\"+token.data+\"'\");\n          }\n        }\n\n        command.params=[];\n        command.params[0] = num;\n        command.label = false;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"ON\" ) {\n        var nums = [];\n        var onInterrupt = false;\n\n        endTokens = [];\n        endTokens.push( { type: \"name\", data: \"GOTO\" });\n        endTokens.push( { type: \"name\", data: \"GOSUB\" });\n\n        token = tokens.shift();\n        var onExpr = null;\n\n        if( token.type == \"name\" && (token.data == \"INTERRUPT0\" || token.data == \"INTERRUPT1\")) {\n          onInterrupt = true;\n          onExpr = {\n            type: \"control\",\n            data: token.data\n          }\n        }\n        else {\n          tokens.unshift( token );\n          onExpr = this.parseBoolExpression( context, endTokens );\n        }\n\n        token = tokens.shift();\n        if( token.type != \"name\") {\n          this.throwError( context, \"ON expects GOTO/GOSUB\");\n        }\n\n        if( !onInterrupt ) {\n          if( !( token.data == \"GOTO\" || token.data == \"GOSUB\" )) {\n            this.throwError( context, \"ON expects GOTO/GOSUB\");\n          }\n        }\n        else {\n          if( !( token.data == \"GOTO\" )) {\n            this.throwError( context, \"ON INTERRUPT expects GOTO\");\n          }\n        }\n\n        var onType = token.data;\n\n        token = tokens.shift();\n\n        var labelFlag = false;\n        var label = \"\";\n        var num0;\n\n        if( token.type != \"num\") {\n\n            if( token.type != \"name\") {\n                this.throwError( context, \"GOTO/GOSUB expects linenumber or label\", \"undef'd statement\");\n            }\n\n            labelFlag = true;\n            label = token.data;\n\n        }\n        else {\n          num0  = parseInt(token.data);\n        }\n\n        nums.push( num0 );\n\n        if( !onInterrupt ) {\n          while ( true ) {\n\n            token = tokens.shift();\n            if( token == undefined ) { break; }\n            if( token.type == \"cmdsep\") { break; }\n            if( token.type == \"cmdsep\") { break; }\n            if( !( token.type == \"sep\" && token.data == \",\" )) {\n              this.throwError( context, \"ON GOTO/GOSUB expects numberlist\");\n            }\n\n            token = tokens.shift();\n            if( token.type != \"num\") {\n              this.throwError( context, \"GOTO/GOSUB expects number\");\n            }\n            nums.push(  parseInt(token.data) );\n          }\n\n          if( nums.length > 1 ) {\n            this.throwError( context, \"ON INTERUPT GOTO expects only a single line number\");\n          }\n\n          command.params=[];\n          command.params[0] = onType.toLowerCase();\n          command.params[1] = onExpr;\n          command.params[2] = nums;\n          commands.push( command );\n        }\n        else {\n\n          command.params=[];\n          command.params[0] = onExpr.data.toLowerCase();\n          if ( labelFlag ) {\n              command.params[1] = label;\n          }\n          else {\n              command.params[1] = num0;\n          }\n          command.label = labelFlag;\n\n          commands.push( command );\n\n        }\n\n      }\n      else if( controlToken == \"RETURN\") {\n        var num = -1;\n\n        command.params=[];\n        commands.push( command );\n\n      }\n      else if( controlToken == \"END\") {\n        var num = -1;\n\n        command.params=[];\n        commands.push( command );\n\n      }\n      else if( controlToken == \"STOP\") {\n        var num = -1;\n\n        command.params=[];\n        commands.push( command );\n\n      }\n      else if( controlToken == \"FOR\") {\n\n        var variable, expr_from, expr_to, expr_step;\n        var endTokens = [];\n\n        token = tokens.shift();\n        if( token.type != \"name\" ) {\n          this.throwError( context,\n                \"For expects variable, no var found, found \" + token.type+\"/\"+token.data);\n        }\n\n        variable = token.data;\n\n        token = tokens.shift();\n        if( !( token.type == \"eq\" && token.data == \"=\" )) {\n          this.throwError( context,\n                \"For expects '=', not found, found \" + token.type+\"/\"+token.data);\n        }\n\n        endTokens = [];\n        endTokens.push( { type: \"name\", data: \"TO\" });\n\n        expr_from = this.parseBoolExpression( context, endTokens );\n\n        token = tokens.shift();\n        if( !( token.type == \"name\" && token.data == \"TO\" ) ) {\n          this.throwError( context, \"For expects 'to', not found, found \" + token.type+\"/\"+token.data);\n        }\n\n        endTokens = [];\n        endTokens.push( { type: \"cmdsep\", data: \":\" });\n        endTokens.push( { type: \"name\", data: \"STEP\" });\n\n        expr_to = this.parseBoolExpression( context, endTokens );\n        expr_step = { parts: [ { data: \"1\", op: null, type: \"num\"} ] };\n\n        token = tokens.shift();\n        if( !( token === undefined ) ) {\n          if( token.type == \"name\" && token.data == \"STEP\") {\n\n              endTokens = [];\n              endTokens.push( { type: \"cmdsep\", data: \":\" });\n              expr_step = this.parseBoolExpression( context, endTokens );\n          }\n          else {\n            if(! ( token.type == \"cmdsep\" && token.data == \":\")) {\n              throw \"FOR: unexpected token '\" + token.data +\"'\";\n            }\n          }\n        }\n\n        command.controlKW = \"for:init\";\n        command.params=[];\n        command.params[0] = expr_from;\n        command.params[1] = expr_to;\n        command.params[2] = expr_step;\n        command.variable = variable;\n        commands.push( command );\n        if( this.debugFlag ) {\n          console.log(\"command=\", command);\n        }\n\n      }\n      else if( controlToken == \"NEXT\") {\n\n        var variable;\n\n        var explicit = false;\n        while( true ) {\n\n          var token = tokens.shift();\n          if( ! token ) {\n            break;\n          }\n          if( token.type == \"cmdsep\" ) {\n            break;\n          }\n\n          if( token.type != \"name\" ) {\n            throw \"Next expected variable, not '\" +token.data+ \"'\";\n          }\n\n          var nextcommand = {\n            controlKW: \"for:next\",\n            nextVar: token.data,\n            lineNumber: command.lineNumber,\n            type: command.type\n          };\n\n          commands.push( nextcommand );\n          explicit = true;\n\n          var token = tokens.shift();\n          if( ! token ) {\n            break;\n          }\n          if( token.type == \"cmdsep\" ) {\n            break;\n          }\n          if( !( token.type == \"sep\" && token.data == \",\" )) {\n            throw \"Expected comma, found '\" + token.data + \"'\";\n          }\n        }\n\n        if( ! explicit ) {\n          command.controlKW = \"for:next\";\n          command.nextVar = null;\n          commands.push( command );\n        }\n\n      }\n      else if( controlToken == \"IF\") {\n\n        var expr1, expr2, comp;\n        endTokens = [];\n        endTokens.push( { type: \"name\", data: \"THEN\" });\n        endTokens.push( { type: \"name\", data: \"GOTO\" });\n        var expr1 = this.parseBoolExpression( context, endTokens );\n        command.params= [ expr1 ];\n\n        token = tokens.shift();\n\n        if( token.type == \"name\" && token.data == \"GOTO\") {\n          var insert = {};\n          insert.data = \"GOTO\";\n          insert.type = \"name\";\n          tokens.unshift( insert );\n        } else {\n          if( tokens.length > 0 ) {\n            if( tokens[0].type == \"num\" ) {\n              var insert = {};\n              insert.data = \"GOTO\";\n              insert.type = \"name\";\n              tokens.unshift( insert );\n            }\n          }\n        }\n\n        //var block = this.parseLineCommands( context );\n        var result = this.parseLineCommands( context );\n        var block = result.commands;\n\n        if( this.debugFlag ) {\n          console.log( block );\n        }\n\n        commands.push( command );\n\n        for( var bi=0; bi<block.length; bi++) {\n          commands.push( block[bi] );\n        }\n\n      }\n      else if( controlToken == \"DATA\") {\n\n        var dataArray = [];\n        var endTokens;\n\n        endTokens = [];\n        endTokens.push( { type: \"cmdsep\", data: \":\" });\n        endTokens.push( { type: \"sep\", data: \",\" });\n\n        while ( true ) {\n            var pair = this.parseSimpleExpression( context, endTokens );\n\n            var expr1 = pair[0];\n\n\n            if( expr1 === undefined ) {\n              throw \"DATA: expected data\";\n            }\n\n            dataArray.push( expr1 );\n\n            token = pair[1];\n            if( token === undefined ) {\n              break;\n            }\n            if( token.type == \"cmdsep\" && token.data == \":\" ) {\n              break;\n            }\n            else if( token.type == \"sep\" && token.data ==\",\") {\n              continue;\n            }\n            else {\n              this.throwError( context, \"data unknown token found \" + token.type+\"/\"+token.data);\n            }\n        }\n\n        command.params=dataArray;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"SUB\") {\n\n        var label = \"\";\n        token = tokens.shift();\n        if( token == null ) { throw \"SUB expected label\"; }\n\n        if( token.type != \"name\" ) {\n          throw \"SUB expected label not '\" +token.data+ \"'\";\n        }\n\n        label = token.data.toUpperCase();\n\n        token = tokens.shift();\n        if( token != null ) { throw \"SUB unexpected data after label\"; }\n\n        command.label = label;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"REM\" ) {\n\n        while( true ) {\n\n            token = tokens.shift();\n            if( token == null ) { break ; }\n        }\n\n        commands.push( command );\n\n      }\n      else {\n        this.throwError( context, command.controlKW + \" not implemented\");\n      }\n    }\n  }\n\n  parseStatementCall(  context, preTokens, commands, command, nameToken, token0 ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    command.statementName = this.normalizeStatementName( nameToken );\n    command.type = \"call\";\n\n\n    if( token.type != \"@@@notoken\") {\n      tokens.unshift( token );\n    }\n\n    command.params = [];\n\n    while ( true ) {\n\n      var endCommand = false;\n      var endTokens = [];\n      endTokens.push( { type: \"sep\", data: \"@@@all\" });\n      endTokens.push( { type: \"cmdsep\", data: \"@@@all\" });\n\n      var expression = this.parseBoolExpression( context, endTokens );\n      if( this.debugFlag ) {\n        console.log( expression );\n      }\n\n      if( expression != null ) {\n        command.params.push( expression );\n\n        token = tokens.shift();\n        if( token != undefined ) {\n          if( token === undefined ) {\n            endCommand = true;\n          }\n          if( token.type == \"cmdsep\" ) {\n            endCommand = true;\n          }\n          else if( token.type == \"sep\") {\n            continue;\n          }\n          else {\n            this.throwError( context, \"Unexpected characters in statement call: '\" + token.data +\"'\");\n          }\n        }\n        else {\n          endCommand = true;\n        }\n\n      }\n      else {\n        endCommand = true;\n      }\n\n      if( endCommand  ) {\n        commands.push( command );\n        break;\n      }\n    }\n  }\n\n\tparseLineCommands( context, preTokens ) {\n\n\t\tvar tokens = context.tokens;\n\t\tvar commands = [];\n    var handlers = {};\n\n\t\tvar i=1;\n\t\twhile( true ) {\n\n\t\t\tvar command = {};\n\t\t\tvar token;\n      var keyword = false;\n      var control = false;\n\n\t\t\tcommand.lineNumber = context.lineNumber;\n\n\t\t\ttoken = tokens.shift();\n\t\t\tif( token === undefined ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif( token.type == \"cmdsep\" ) {\n\t\t\t\t/* empty command */\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( token.type != \"name\" ) {\n\t\t\t\tif( token.type != \"trash\" ) {\n          this.throwError( context, \"Unexpected token, expected symbolname, got '\" + oken.data +\"'\") ;\n        }\n        else {\n          this.throwError( context, \"Unexpected character, expected \\\"symbolname\\\", got \" + token.detail ) ;\n        }\n\t\t\t}\n\n\t\t\tvar nameToken = token.data;\n\t\t\tvar cmdType = \"unknown\";\n\n\t\t\tif( this.CTRL_KW.indexOf( token.data ) > -1) {\n\t\t\t\t\tcontrol = true;\n\t\t\t}\n\n      if( this.KEYWORDS.indexOf( token.data ) > -1 || token.data == \"XON\") {\n\t\t\t\t\tkeyword = true;\n\t\t\t}\n      else {\n        if( this.SHORTCUT_KW.indexOf( token.data ) > -1) {\n  \t\t\t\t\tkeyword = true;\n  \t\t\t}\n      }\n\n\t\t  token = tokens.shift();\n\t\t\tif( token === undefined ) {\n\t\t\t\ttoken = { type: \"@@@notoken\" };\n\t\t\t}\n\n      if (  control ) {\n\n        this.parseControlStructure( context, preTokens, commands, command, handlers, nameToken, token );\n\n      }\n\t\t\telse if( token.type == \"eq\") {\n\n\t\t\t\tthis.parseAssignment( context, preTokens, commands, command, nameToken, token );\n\t\t\t}\n      else if( token.type == \"bracket\" && token.data==\"(\" && !keyword ) {\n\n\t\t\t\tthis.parseArrayAssignment( context, preTokens, commands, command, nameToken, token );\n\n\t\t\t}\n      else {\n          if( !keyword ) {\n            console.log(\"Dump: \",context, preTokens, commands, command, nameToken, token);\n            this.throwError( context, \"no such command: \" + nameToken );\n          }\n          this.parseStatementCall( context, preTokens, commands, command, nameToken, token );\n\n      }\n\n\t\t}\n\n    var result = {\n        commands: commands,\n        handlers: handlers\n      };\n\n    return result;\n\t}\n\n  logTokens( tokens ) {\n    if( !this.debugFlag ) { return ; }\n\n    var tokensStr = \"\";\n    for( var i=0; i<tokens.length; i++) {\n      var tok = tokens[i];\n      var tokStr = tok.type + \":\" + tok.data;\n      if( tokensStr != \"\" ) {\n        tokensStr += \", \";\n      }\n      tokensStr += tokStr;\n    }\n\n    console.log( tokensStr );\n\n\n    for( var i=0; i<tokens.length; i++) {\n        var tok = tokens[i];\n        console.log(\"token: \",tok);\n    }\n\n  }\n\n\n\n\n  parseErrorLine( line ) {\n\n    var lineRecord = {\n      lineNumber: -1,\n      commands: []\n    };\n\n    var errContext, detail, lineNr=-1;\n\n    errContext=\"tokenizer\";\n    detail=\"init\";\n\t\tvar toker = new Tokenizer( new StringReader ( line ), this.KEYWORDS );\n\n    detail=\"parsing tokens\";\n    var tokens = toker.tokenize();\n    if( this.debugFlag ) {\n      console.log(\"Tokens after tokenizer\");\n    }\n    this.logTokens( tokens );\n\n    detail=\"internal\";\n    tokens = this.upperCaseNameTokens( tokens );\n    tokens = this.removePadding( tokens );\n    tokens = this.mergeCompTokens( tokens );\n    tokens = this.mergeBrokenUpTokens( tokens );\n\n\n    if( this.debugFlag ) {\n      console.log(\"Tokens after merge\");\n    }\n    this.logTokens( tokens );\n\n    if( tokens.length == 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif( tokens[0].type == \"num\" ) {\n\t\t\tlineRecord.lineNumber = tokens[0].data;\n      lineNr = tokens[0].data;\n      var lineRest = line.substr( lineNr.length );\n      return this.parseLine( lineNr + \" REM[ERROR] \" + lineRest  );\n    }\n    else {\n      throw \"Expected line number, when reparsing line with error\";\n    }\n\n  }\n\n  parseLine( line ) {\n\n    var lineRecord = {\n      lineNumber: -1,\n      commands: []\n    };\n\n    var errContext, detail, lineNr=-1;\n    try {\n      errContext=\"tokenizer\";\n      detail=\"init\";\n  \t\tvar toker = new Tokenizer( new StringReader ( line ), this.KEYWORDS );\n\n      detail=\"parsing tokens\";\n      var tokens = toker.tokenize();\n      if( this.debugFlag ) {\n        console.log(\"Tokens after tokenizer\");\n      }\n      this.logTokens( tokens );\n\n      detail=\"internal\";\n      tokens = this.upperCaseNameTokens( tokens );\n      tokens = this.removePadding( tokens );\n      tokens = this.mergeCompTokens( tokens );\n      tokens = this.mergeBrokenUpTokens( tokens );\n\n\n      if( this.debugFlag ) {\n        console.log(\"Tokens after merge\");\n      }\n      this.logTokens( tokens );\n\n      if( tokens.length == 0 ) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tif( tokens[0].type == \"num\" ) {\n  \t\t\tlineRecord.lineNumber = tokens[0].data;\n        lineNr = tokens[0].data;\n        tokens.shift();\n      }\n\n  \t\tvar context = {\n        tokens: tokens,\n        lineNumber: lineRecord.lineNumber\n      }\n\n      errContext = \"parser\";\n      detail=\"parsing commands\";\n      var result = this.parseLineCommands( context );\n      var commands = result.commands;\n      lineRecord.commands = commands;\n      lineRecord.raw = line;\n      lineRecord.handlers = result.handlers;\n      return lineRecord;\n    }\n    catch ( e ) {\n\n      if( this.erh.isError( e ) ) {\n        if( e.lineNr == -1 ) {\n          if( lineNr != -1 ) {\n            e.lineNr = lineNr;\n          }\n        }\n        throw e;\n      }\n      this.throwError( null, errContext + \" error (\" +e+ \") while \" + detail );\n    }\n  }\n\n  getTokens( line, merge, noPadding  ) {\n\n    try {\n      var toker = new Tokenizer( new StringReader ( line ), this.KEYWORDS );\n      var tokens = toker.tokenize();\n      if( noPadding) { tokens = this.removePadding( tokens ); }\n      if( merge ) {tokens = this.mergeCompTokens( tokens ); }\n      this.logTokens( tokens );\n      return tokens;\n    }\n    catch ( e ) {\n      console.log( e );\n      this.throwError(null,\"getTokens error\",\"internal\");\n    }\n  }\n}\n\n//--EOC \n\n// ## basictokenizer.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basictokenizer.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basictokenizer.js\n\nclass StringReader {\n\n\tconstructor( strIn ) {\n\t\t\tthis.buffer = strIn;\n\t\t\tthis.index = 0;\n\t\t\tthis.lineIndex = 1;\n\t\t\tthis.line = 1;\n\t\t\tvar a={}; a.b=strIn;\n\n\t}\n\n\tpeek() {\n\t\treturn this.buffer.substr( this.index,1 );\n\t}\n\tpeek2() {\n\t\treturn this.buffer.substr( this.index,2 );\n\t}\n\n\n\tunconsume( x ) {\n\t\tthis.index -= x;\n\t}\n\n\tconsume() {\n\n\t\tvar c = this.buffer.substr( this.index,1 );\n\t\tthis.index ++;\n\t\tif( c == \"\\n\") {\n\t\t\tthis.line++;\n\t\t\tthis.lineIndex = 1;\n\t\t}\n\n\t}\n\n\tEOF() {\n\t\tvar len = this.buffer.length;\n\t\tif( this.index < len ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n}\n\n\nclass Tokenizer {\n\n\tconstructor( reader, keywords ) {\n\t\t\tthis.tokens = [];\n\t\t\tthis.reader = reader;\n\t\t\tthis.keywords = keywords;\n\t\t\tthis.greedy = false;\n\t}\n\n\tisOpChar( ctx ) {\n\n\t\tvar rv = ctx.c.match(\"[+]|[-]|[*]|[/]|[\\\\%]|[\\\\^]|[;]\") != null;\n\n\t\treturn [rv,0];\n\n\t}\n\n\tisCompChar( ctx ) {\n\n\t\tvar rv =  (ctx.c == \"<\" || ctx.c == \">\");\n\t\treturn [rv,0];\n\t}\n\n\tisEqChar( ctx ) {\n\t\t\tif( ctx.c == \"=\" ) {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t}\n\n\n\tisNameChar( ctx  ) {\n\n\t\t//console.log(\"SEQ: \" + ctx.seq);\n\t\tif( ctx.endFound ) {\n\t\t\treturn [false,0];\n\t\t}\n\t\tvar rv = ctx.c.match(\"[a-zA-Z0-9$%?]\") != null;\n\n\t\tif( ctx.c== \"%\" ) {\n\t\t\t\trv = false;\n\t\t\t\tif( ctx.prev != null ) {\n\t\t\t\t\tvar varNameChar = ctx.prev.match(\"[a-zA-Z0-9]\") != null;\n\t\t\t\t\tif( varNameChar ) {\n\t\t\t\t\t\tctx.endFound = true;\n\t\t\t\t\t\trv = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\n\t\tif( ctx.c==\"$\" ) {\n\t\t\tctx.endFound = true;\n\t\t}\n\n\t\tif( this.greedy ) {\n\t\t\tif( this.keywords.indexOf( ctx.seq.toUpperCase() ) >-1 ) {\n\t\t\t\tctx.endFound = true;\n\t\t\t}\n\t\t\telse if( ! (ctx.seq === undefined )) {\n\t\t\t\tvar trappedKW = false;\n\t\t\t\tvar trapped = null;\n\t\t\t\tfor( var i=0; i<this.keywords.length; i++) {\n\t\t\t\t\tvar kw = this.keywords[i];\n\t\t\t\t\tif( ctx.seq.toUpperCase().indexOf( kw ) > 0 )  {\n\t\t\t\t\t\ttrappedKW = true;\n\t\t\t\t\t\ttrapped = kw;\n\t\t\t\t\t\treturn [rv, kw.length ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\treturn [rv,0];\n\t}\n\n\tisNumChar( ctx  ) {\n\t\treturn [(ctx.c.match(\"[0-9\\.~]\") != null),0];\n\t}\n\n\tisPadChar( ctx  ) {\n\t\t\tif( ctx.c == \" \" || ctx.c == \"\\t\" || ctx.c == \"\\n\" || ctx.c == \"\\r\") {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\n\t\t\treturn [false,0];\n\t}\n\n\tisCommandSepChar( ctx  ) {\n\t\t\tif( ctx.c == \":\" ) {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t}\n\n\n\tisSepChar( ctx  ) {\n\t\t\tif( ctx.c == \",\" ) {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t}\n\n\tisAnyChar( ctx  ) {\n\t\t\treturn [true,0]; /* Will be executed last */\n\t}\n\n\tisBracket( ctx  ) {\n\t\tif( ctx.c == \"(\" || ctx.c == \")\" || ctx.c == \"[\" || ctx.c == \"]\") {\n\t\t\treturn [true,0];\n\t\t}\n\t\treturn [false,0];\n\t}\n\n\n\tisStrChar( ctx ) {\n\n\t\tif( ctx.endFound ) {\n\t\t\treturn [false,0];\n\t\t}\n\n\t\tif( ctx.index == 0) {\n\t\t\tif( ctx.c==\"\\\"\" ) {\n\t\t\t\tctx.inString = true;\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t\t}\n\t\telse if( ctx.inString ) {\n\t\t\tif ( ctx.index > 0 && ctx.c==\"\\\"\") {\n\t\t\t\tctx.endFound = true;\n\t\t\t}\n\t\t\treturn [true,0];\n\t\t}\n\n\t\treturn [false,0];\n\n\t}\n\n\tnormalizeToken( tok0 ) {\n\t\tvar tok = tok0;\n\n\t\ttok.type = tok0.type;\n\n\t\tif( tok.type == \"str\" ) {\n\t\t\t\ttok.data = tok0.data.substr(1,tok0.data.length-2);\n\t\t}\n\t\treturn tok;\n\t}\n\n\treadChars( read, type0, compareF, tokenType ) {\n\t\tvar tok = { type: type0, data : \"\" }\n\t\tvar ctx = { index:0, prev: null, seq: \"\" };\n\n\t\twhile(!read.EOF()) {\n\n\t\t\tvar c = read.peek();\n\n\t\t\tctx.seq += c;\n\t\t\tctx.c = c;\n\n\t\t\tvar rv = this[compareF ] ( ctx );\n\t\t\tif( rv[1] > 0 ) {\n\t\t\t\t\tread.unconsume( rv[1]-1 );\n\t\t\t\t\tctx.seq = ctx.seq.substr(0,ctx.seq.length-rv[1]) ;\n\t\t\t\t\ttok.data = ctx.seq;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif( !rv[0] ) {\n\t\t\t\treturn this.normalizeToken( tok );\n\t\t\t}\n\t\t\ttok.data += c;\n\t\t\tread.consume();\n\n\t\t\tctx.index++;\n\t\t\tctx.prev = c;\n\n\t\t\tif( tokenType == \"chr\") {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.normalizeToken( tok );\n\t}\n\n\n\ttokenize() {\n\t\tvar read = this.reader;\n\n\t\tvar _this = this;\n\t\tvar tokens = [];\n\n\t\tvar parseRules = [];\n\t\tvar TYPEIX = 0;\n\t\tvar FUNCIX = 1;\n\t\tvar STRINGTYPEIX = 2;\n\n\t\tparseRules.push([\"pad\", \t\t\"isPadChar\"\t\t, \"str\"] );\n\t\tparseRules.push([\"str\", \t\t\"isStrChar\"\t\t, \"str\"] );\n\t\tparseRules.push([\"num\", \t\t\"isNumChar\"\t\t, \"str\"] );\n\t\tparseRules.push([\"name\", \t\t\"isNameChar\"\t, \"str\"] );\n\t\tparseRules.push([\"op\", \t\t\t\"isOpChar\"   \t, \"chr\"] );\n\t\tparseRules.push([\"comp\", \t\t\"isCompChar\"  , \"chr\"] );\n\t\tparseRules.push([\"eq\", \t\t\t\"isEqChar\"   \t, \"chr\"] );\n\t\tparseRules.push([\"bracket\", \"isBracket\"   , \"chr\"] );\n\t\tparseRules.push([\"sep\", \t\t\"isSepChar\"   , \"chr\"] );\n\t\tparseRules.push([\"cmdsep\", \t\"isCommandSepChar\"   , \"chr\"] );\n\t\tparseRules.push([\"trash\", \t\"isAnyChar\"   , \"chr\"] );\n\n\t\twhile( !read.EOF() ) {\n\t\t\tvar c = read.peek();\n\t\t\tvar tokenFound = false;\n\n\t\t\tfor( var i=0; i<parseRules.length; i++) {\n\t\t\t\tvar rule = parseRules[ i ];\n\n\t\t\t\tvar ctx = { index: 0, c:c }\n\t\t\t\tvar rv = this[rule[FUNCIX]]( ctx );\n\t\t\t\tif( rv[0] ) {\n\t\t\t\t\t\tvar tok = this.readChars( read, rule[TYPEIX], rule[FUNCIX], rule[STRINGTYPEIX] );\n\n\t\t\t\t\t\tif( tok.type == \"name\") {\n\t\t\t\t\t\t\ttok.data = tok.data.toUpperCase();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( tok.type == \"trash\") {\n\t\t\t\t\t\t\ttok.detail = \"'\" + tok.data + \"' (ASCII-code=\" + tok.data.charCodeAt(0) + \")\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttokens.push( tok );\n\t\t\t\t\t\ttokenFound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//do nothing\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!tokenFound) {\n\t\t\t\tthrow \"syntax error, unexpected character: '\" + c + \"' =>\" + read.line + \":\" + read.lineIndex;\n\t\t\t}\n\t\t}\n\t\treturn tokens;\n\t}\n}\n\n//--EOC \n\n// ## input.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/input.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/input.js\n\nclass Input {\n\n  constructor( sys ) {\n    this.keyPress = [];\n    this.interactive = false;\n    this.sys = sys;\n  }\n\n  setHandler( hc ) {\n    this.handlerClazz = hc;\n  }\n\n  setInterActive( flag ) {\n\n    this.interactive = flag;\n    this.sys.blinkMode( flag  );\n\n  }\n\n  flush() {\n    this.keyPress = [];\n  }\n\n  inputKeyHandler( e )  {\n\n    var hc = this.handlerClazz;\n\n    if( e.keyLabel == \"Escape\" ) {\n        hc[\"stop\"]();\n        return;\n    }\n\n    hc[\"keyInterrupt\"]( \"keypress\", e );\n\n    if( !this.interactive ) {\n        this.keyPress.push( e );\n    }\n    else {\n        hc[\"interactiveKeyHandler\"]( e );\n      }\n  }\n\n  getKey() {\n    var key = this.keyPress.shift();\n    if( key ) {\n      return key;\n    }\n    return null;\n  }\n\n}\n\nclass MutedInput {\n\n  setHandler( hc ) {}\n  setActive( flag ) {}\n  getKey() { return null; }\n  inputKeyHandler(e) {}\n  getKey() { return null;}\n\n}\n\n//--EOC \n\n// ## processes.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/processes.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/processes.js\n\nclass processes {\n\n\tconstructor( sys ) {\n\n\t\tthis.sys = sys;\n\t\tthis.processes = [];\n\t\tthis.fastProcesses = [];\n\t\tthis.fastProcessesIds = {};\n\t\tthis.count = 0;\n\n\t\tvar _this = this;\n    var processes = _this.processes;\n\n\t\tthis.sys.log(\"Starting process interval\");\n\n\t\t//slow loop\n\t\tsetInterval(function()  {\n\n\t\t\tfor( var i=0; i<processes.length; i++ ) {\n\t\t\t\tif( processes[i] ) {\n\n\t\t\t\t\tvar upd;\n\n\t\t\t\t\tupd = processes[ i ].cycle();\n\t\t\t\t\tif( upd ) {\n\t\t\t\t\t\tvar stat = processes[ i ].getStatus();\n\t\t\t\t\t\t_this.sys.poststatus( i, stat );\n\t\t\t\t\t}\n\n\t\t\t\t\tvar cpuHungry =  processes[ i ].cpuNeeded();\n\t\t\t\t\tvar found = !(_this.fastProcessesIds[ i + \"_\"] === undefined);\n\n\t\t\t\t\tif( cpuHungry && !found) {\n\t\t\t\t\t\t_this.fastProcessesIds[ i + \"_\"] = _this.fastProcesses.length;\n\t\t\t\t\t\t_this.fastProcesses.push( processes[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\telse if( !cpuHungry && found) {\n\t\t\t\t\t\tvar fpID = _this.fastProcessesIds[ i + \"_\"];\n\t\t\t\t\t\tvar nfpArr = [];\n\t\t\t\t\t\tfor( var j=0; j<_this.fastProcesses.length; j++ ) {\n\t\t\t\t\t\t\tvar el = _this.fastProcesses[ j ];\n\t\t\t\t\t\t\tif( j!= fpID ) {\n\t\t\t\t\t\t\t\tnfpArr.push( el );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.fastProcesses = nfpArr;\n\t\t\t\t\t\t_this.fastProcessesIds[ i + \"_\"] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 100);\n\n\t\t//fast loop\n\t\tsetInterval(function()  {\n\n\t\t\tfor( var i=0; i<_this.fastProcesses.length; i++ ) {\n\t\t\t\t\tvar dummy = _this.fastProcesses[ i ].cycle();\n\t\t\t}\n\t\t}, 10);\n\t}\n\n\n\n\tgetTicks() {\n\t\treturn this.count;\n\t}\n\n\told_register( obj ) {\n\n\t\tvar newId = this.processes.length-1;\n\n\t\tthis.processes[newId] = obj;\n\t\tobj.processId = newId;\n\n\t\treturn newId;\n\t}\n\n\tget( id ) {\n\t\treturn this.processes[ id ];\n\t}\n\n\tregister( obj ) {\n\n\t\tvar newId = this.processes.length;\n\n\t\tthis.processes.push( obj );\n\n\t\tobj.processId = newId;\n\t\treturn newId;\n\t}\n\n\n\tgetRoot() {\n\n\t\treturn this.processes[ 0 ];\n\t}\n}\n\n//--EOC \n\n// ## commandhelp.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/commandhelp.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/commandhelp.js\n\nclass CommandHelp {\n\n\tconstructor() {}\n\n\n  getCategoriesNormalize(  categoryIndexesInt ) {\n    var categoryIndexes = [\n      Object.getOwnPropertyNames( categoryIndexesInt[0] ),\n      categoryIndexesInt[1]\n    ];\n    return categoryIndexes;\n  }\n\n  getCategoriesIntermediate(  categoryIndexes, clazz ) {\n\n\n    var stats = clazz.getStatements( true );\n    var funs = clazz.getFunctions( true );\n\n    var cat = categoryIndexes[ 0 ];\n    var catLists = categoryIndexes[ 1 ];\n\n    if( cat[ \"general\" ] === undefined ) { cat[ \"general\" ] = 0; catLists[ \"general\" ] = []; }\n\n    for( var i=0;i<stats.length;i++) {\n      var rname = stats[i];\n      var si = rname.replace(\"_stat_\",\"_stat_info_\");\n\n      var catlabel;\n      if( !( clazz[ si ] === undefined ) ) { catlabel = clazz[ si ](); }\n      else { catlabel = \"general\"; }\n\n      var f_attribs = {};\n      if( catlabel.indexOf(\":\") >0 ) {\n\n        var partsLen = catlabel.split(\":\" ).length;\n\n        f_attribs.description =  catlabel.split(\":\" )[1];\n        f_attribs.input =   catlabel.split(\":\" )[2];\n        f_attribs.output =  catlabel.split(\":\" )[3];\n\n        catlabel=catlabel.split(\":\")[0];\n      }\n\n      rname = rname.replace(\"_stat_\",\"\").toUpperCase();\n\n      if( cat[ catlabel ] === undefined ) { cat[ catlabel ] = 0; catLists[ catlabel ] = []; }\n      cat[ catlabel ]++;\n      catLists[ catlabel ].push( {name: rname, attribs: f_attribs } );\n    }\n\n    for( var i=0;i<funs.length;i++) {\n      var rname = funs[i];\n      var si = rname.replace(\"_fun_\",\"_fun_info_\");\n\n      var catlabel;\n      if( !( clazz[ si ] === undefined ) ) { catlabel = clazz[ si ](); }\n      else { catlabel = \"general\"; }\n      var f_attribs = {};\n\n      if( catlabel.indexOf(\":\") >0 ) {\n\n          var partsLen = catlabel.split(\":\" ).length;\n\n          f_attribs.description =  catlabel.split(\":\" )[1];\n          f_attribs.input =   catlabel.split(\":\" )[2];\n          f_attribs.output =  catlabel.split(\":\" )[3];\n\n          catlabel=catlabel.split(\":\")[0];\n      }\n\n      rname = rname.replace(\"_fun_\",\"\").replace(\"_DLR_\",\"$\").toUpperCase() + \"()\";\n\n      if( cat[ catlabel ] === undefined ) { cat[ catlabel ] = 0; catLists[ catlabel ] = []; }\n      cat[ catlabel ]++;\n      catLists[ catlabel ].push( {name: rname, attribs: f_attribs } );\n    }\n\n    //var cats = Object.getOwnPropertyNames( cat );\n\n    return [cat,catLists];\n  }\n}\n\n//--EOC \n\n// ## ../../rwbuffers/worker/textarea.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/../../rwbuffers/worker/textarea.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/../../rwbuffers/worker/textarea.js\n\nclass TextArea {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.cursorOn = false;\n\t\tthis.cols = 80;\n\t\tthis.rows = 30;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.hidden = false;\n\n\t\tthis.dc = false;\n\t\tthis.dcCmd = false;\n\n\t\tthis.colors ={};\n\t\tthis.reverse = false;\n\n\t\tthis.defaultFG = 5;\n\t\tthis.defaultBG = 0;\n\n\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\tthis.initialized = false;\n\n\t\tthis.changes = { all: false, list: [] };\n\t\tthis.pokeFlush = true;\n\n\n\t\t//this.textArea( this.cols , this.rows , -1, -1 );\n\t}\n\n\tisActive() {\n    return this.initialized && !this.hidden;\n  }\n\n\treInit( w, h ) {\n\t\tthis._int_initMode( w, h );\n\t}\n\n\n\tdestroy() {\n\n\t\t\tthis.cellel = undefined;\n\n\t\t\tthis.changes = { all: false, list: [] };\n\t\t\tthis.initialized = false;\n\t\t}\n\n\n  /* Adding changes, to be posted to MT throught flush */\n\t_int_addChangeAll() {\n\n\t\t this.changes.all = true;\n\t\t this.changes.list = [];\n\n\t }\n\n\n\n\t changeCount() {\n\t\t if( this.changes.all ) { return 65535; }\n\t\t return this.changes.list.length;\n\t }\n\n\t/* Adding single change, to be posted to MT throught flush */\n\t_int_addChange( area ) {\n\n\t\t\tif(  this.changes.all ) {\n\t\t\t\tif( this.changes.list.length > 0 ) {\n\t\t\t\t\t\tthis.changes.list = [];\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar clist = this.changes.list;\n\t\t\tif( clist.length > 0 ) {\n\t\t\t\tvar lc = clist[ clist.length -1 ];\n\t\t\t\tvar nc = area;\n\t\t\t\tif( lc.y1 == lc.y2 && nc.y1 == nc.y2 && lc.y1 == nc.y1) {\n\t\t\t\t\tif( nc.x1 == lc.x2 +1 ) {\n\t\t\t\t\t\t\tvar x2 = lc.x2;\n\t\t\t\t\t\t\tvar temp=1;\n\t\t\t\t\t\t\tvar changesTargetArray = lc.cells[0];\n\t\t\t\t\t\t\tfor( var i=0; i<area.cells[0].length; i++) {\n\t\t\t\t\t\t\t\tvar cell = area.cells[0][i];\n\t\t\t\t\t\t\t\tchangesTargetArray.push( cell );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlc.x2 = nc.x2;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t \tthis.changes.list.push( area );\n\n\t }\n\n\t /* Force flush to MT the whole buffer */\n\t_int_flushAll() {\n\t\t\tthis.changes.all = true;\n\t\t\tthis.changes.list = [];\n\n\t\t\tthis._int_flush();\n\n\t\t}\n\n  /* Utility function to prepare input for addChange (which itself prepares for flush )*/\n\t_int_getArea( x1, y1, x2, y2 ) {\n\t\t\tvar cells = [];\n\n\t\t\tfor( var y=y1; y<=y2; y++) {\n\t\t\t\tvar row = [];\n\t\t\t\tfor( var x=x1; x<=x2; x++) {\n\t\t\t\t\trow.push( this.cellel[ y][ x] );\n\t\t\t\t}\n\t\t\t\tcells.push( row );\n\t\t\t}\n\n\t\t\tvar area =\n\t\t\t{\n\t\t\t\t cells: cells,\n\t\t\t\t x1: x1,\n\t\t\t\t y1: y1,\n\t\t\t\t x2: x2,\n\t\t\t\t y2: y2\n\t\t\t};\n\n\t\t\treturn area;\n\n\t\t}\n\n   /* Flush local changes to Main Thread for actual display updates*/\n\t _int_flush() {\n\n\t\t\tif( this.changes.all ) {\n\t\t\t\tthis.sys.post( \"textupdate-all\",\n\t\t\t\t\t\t{\n \t\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\t\tbg: this.colors.txtBgColor,\n\t\t\t\t\t\t\tcx: this.x,\n\t\t\t\t\t\t\tcy: this.y,\n\t\t\t\t\t\t\tcells: this.cellel,\n\t\t\t\t\t\t\tcursorMode: this.cursorMode\n\t\t\t\t\t\t} );\n\n\t\t\t\tthis.changes.all = false;\n\n\n\t\t\t}\n\t\t\telse if( this.changes.list.length > 0 ) {\n\n\t\t\t\tthis.sys.post( \"textupdate\",\n\t\t\t\t\t{\n\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\tbg: this.colors.txtBgColor,\n\t\t\t\t\t\tcx: this.x,\n\t\t\t\t\t\tcy: this.y,\n\t\t\t\t\t\tareasList:  this.changes.list,\n\t\t\t\t\t\tcursorMode: this.cursorMode\n\t\t\t\t\t}  );\n\t\t\t\tthis.changes.list = [];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.sys.post( \"textupdate\",\n\t\t\t\t\t{\n\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\tbg: this.colors.txtBgColor,\n\t\t\t\t\t\tcx: this.x,\n\t\t\t\t\t\tcy: this.y,\n\t\t\t\t\t\tareasList:  [],\n\t\t\t\t\t\tcursorMode: this.cursorMode\n\t\t\t\t\t}  );\n\n\t\t\t}\n\n\t\t}\n\n\t\tattach( w, h ) {\n\t\t\tthis._int_initMode( w, h);\n\t\t}\n\n\t\tsetPokeFlush( flag ) {\n\t\t  this.pokeFlush = flag;\n\t\t}\n\n\n\t\tpeekc( x, y ) {\n\n\t\t\tvar cell = this.cellel[y][x];\n     \treturn cell.txt.codePointAt(0);\n\n\t\t}\n\n\t\tpeekcl( x, y, m ) {\n\n\t\t\tvar cell = this.cellel[y][x];\n\n\t\t\tif( m== 0 ) {\n\t\t\t\treturn cell.fg;\n\t\t\t}\n\t\t\telse if( m== 1 ) {\n\t\t\t\treturn cell.bg;\n\t\t\t}\n\t\t\telse  {\n\t\t\t\treturn cell.fg + (16*cell.bg);\n\t\t\t}\n\t\t}\n\n\t\tpokec( x, y , c ) {\n\n\t\t\ttry {\n\t\t\t\tvar cell = this.cellel[y][x];\n\t\t\t\tcell.txt = String.fromCodePoint( c );\n\n\t\t\t\tvar area = this._int_getArea( x, y, x, y );\n\t\t\t\tthis._int_addChange( area );\n\n\t\t\t\tif( this.pokeFlush ) {\n\t\t\t\t\tthis._int_flush();\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch( e ) {\n\t\t\t\tthrow \"Cannot pokec to adress (\" + x + \",\" + y + \")\";\n\t\t\t}\n\n\t\t}\n\n\t\tpokecl( x, y , fg, bg ) {\n\n\t\t\ttry {\n\t\t\t\tvar cell = this.cellel[y][x];\n\t\t\t\tif( !(fg === undefined )) {\n\t\t\t\t\tcell.fg = fg;\n\t\t\t\t}\n\t\t\t\tif( !(bg === undefined )) {\n\t\t\t\t\tcell.bg = bg;\n\t\t\t\t}\n\t\t\t\tvar area = this._int_getArea( x, y, x, y );\n\t\t\t\tthis._int_addChange( area );\n\n\t\t\t\tif( this.pokeFlush ) {\n\t\t\t\t\tthis._int_flush();\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcatch( e ) {\n\t\t\t\tthrow \"Cannot pokec to adress (\" + x + \",\" + y + \")\";\n\t\t\t}\n\t\t}\n\n\n\t\tpokeccl( x, y , c, fg, bg ) {\n\n\t\t\ttry {\n\t\t\t\tvar cell = this.cellel[y][x];\n\n\t\t\t\tcell.txt = String.fromCodePoint( c );\n\t\t\t\tif( !(fg === undefined )) {\n\t\t\t\t\tcell.fg = fg;\n\t\t\t\t}\n\t\t\t\tif( !(bg === undefined )) {\n\t\t\t\t\tcell.bg = bg;\n\t\t\t\t}\n\n\t\t\t\tvar area = this._int_getArea( x, y, x, y );\n\t\t\t\tthis._int_addChange( area );\n\n\t\t\t\tif( this.pokeFlush ) {\n\t\t\t\t\tthis._int_flush();\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcatch( e ) {\n\t\t\t\tthrow \"Cannot pokec to adress (\" + x + \",\" + y + \")\";\n\t\t\t}\n\t\t}\n\n\t\ttriggerFlush() {\n\n\t\t\tthis._int_flush();\n\t\t}\n\n\t\t_int_initMode( w, h ) {\n\n\t\t\tif( this.initialized ) {\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t\tvar sys = this.sys;\n\t\t\t//var msgs = sys.init.queuedMessages; TODO, what to do with queued messages\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t\tthis.rows = h;\n\t\t\tthis.cols = w;\n\n\t\t\tthis.textArea( this.cols, this.rows, -1, -1 );\n\n\t\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\t\tthis.cellel = [];\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar rowArray = [];\n\t\t\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\t\t\tvar cell = {\n\t\t\t\t\t\ttxt: \" \",\n\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\tbg: this.colors.txtBgColor\n\t\t\t\t\t}\n\t\t\t\t\trowArray.push( cell );\n\t\t\t\t}\n\t\t\t\tthis.cellel.push( rowArray );\n\t\t\t}\n\n\t\t\tthis.changes = { all: true, list: [] };\n\n \t\t  var _this = this;\n\n\t\t\tthis._int_flushAll();\n\n\t\t\tthis.sys.log(\"TEXTAREA w Ready.\");\n\n\t\t\tthis.initialized = true;\n\t\t\tthis.pokeFlush = true;\n\t\t\t/* if true then all pokes in \"character memory\" will be flushed immediately to the */\n\t\t\t/*main browswer process */\n\t}\n\n\n\tgetDimensions() {\n\t\t\treturn [this.cols, this.rows ];\n\t}\n\n\tgetCurrentLine() {\n\t\tvar y = this.y;\n\t\tvar str = \"\";\n\t\tfor( var i = 0; i< this.acols; i++) {\n\t\t\tvar xi = i + this.ax0;\n\t\t\tstr += this.cellel[ y ][ xi ].txt;\n\t\t}\n\t\treturn str;\n\t}\n\n\tgetLineFrom( x0, y ) {\n\n\t\tvar str = \"\";\n\t\tvar x2 = this.acols + this.ax0 - 1;\n\n\t\tfor( var i = x0; i< x2; i++) {\n\t\t\tstr += this.cellel[ this.ay0 + y ][ i ].txt;\n\t\t}\n\t\treturn str;\n\t}\n\n\t/* Commands and functions to modify the text area buffer */\n\n\n\tsetDefault( fg, bg ) {\n\t\tthis.defaultBG = bg;\n\t\tthis.defaultFG = fg;\n\n\t}\n\n\n\tcolorReset() {\n\n\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\t//this.cellel = [];\n\t\tvar fg = this.defaultFG;\n\t\tvar bg = this.defaultBG;\n\n\t\tfor( var ay=0; ay<this.rows; ay++) {\n\t\t\t//var rowArray = [];\n\n\t\t\tvar y = ay;\n\t\t\tfor( var ax=0; ax<this.cols; ax++) {\n\n\t\t\t\tvar x = ax;\n\n\t\t\t\tvar cell = this.cellel[ y ][ x];\n\n\t\t\t\tcell.fg = fg;\n\t\t\t\tcell.bg = bg;\n\t\t\t}\n\t\t\t//this.cellel.push( rowArray );\n\t\t}\n\n\t\tthis.changes = { all: true, list: [] };\n\n\t\tthis._int_flushAll();\n\t}\n\n\treset() {\n\t\tthis.textArea( this.cols, this.rows, -1, -1 );\n\n\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\tthis.pokeFlush = true;\n\t\tthis.clear();\n\n\t}\n\n\ttextArea( w, h, xo, yo ) {\n\t\tvar divx = this.cols - w;\n\t\tvar divy = this.rows - h;\n\n\t\tif( xo < 0 ) {\n\t\t\t\tthis.ax0 = Math.floor(divx / 2);\n\t\t}\n\t\telse {\n\t\t\tthis.ax0 = xo;\n\t\t}\n\n\t\tif( yo < 0 ) {\n\t\t\t\tthis.ay0 = Math.floor(divy / 2);\n\t\t}\n\t\telse {\n\t\t\tthis.ay0 = yo;\n\t\t}\n\n\t\tthis.acols = w;\n\t\tthis.arows = h;\n\t\tthis.x = this.ax0;\n\t\tthis.y = this.ay0;\n\t}\n\n\tclear() {\n\n\t\t//this.cellel = [];\n\t\tfor( var ay=0; ay<this.arows; ay++) {\n\t\t\t//var rowArray = [];\n\n\t\t\tvar y = this.ay0 + ay;\n\t\t\tfor( var ax=0; ax<this.acols; ax++) {\n\n\t\t\t\tvar x = this.ax0 + ax;\n\n\t\t\t\tvar cell = {\n\t\t\t\t\ttxt: \" \",\n\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\tbg: this.colors.txtBgColor\n\t\t\t\t}\n\t\t\t\tthis.cellel[ y ][ x] = cell;\n\t\t\t}\n\t\t\t//this.cellel.push( rowArray );\n\t\t}\n\n\t\tthis.changes = { all: true, list: [] };\n\n\t\tthis.x = this.ax0;\n\t\tthis.y = this.ay0;\n\n\t\tthis._int_flushAll();\n\t}\n\n\n\tjumpTo( destination ) {\n\t\tif( destination == \"home\" ) {\n\t\t\tthis.y = this.ay0;\n\t\t\tthis.x = this.ax0;\n\t\t}\n\t\tif( destination == \"end\" ) {\n\t\t\tthis.y = this.ay0 + this.arows - 1;\n\t\t\tthis.x = this.ax0 + this.acols - 1;\n\t\t}\n\t\telse if( destination == \"line-start\" ) {\n\t\t\tthis.x = this.ax0;\n\t\t}\n\t\telse if( destination == \"line-end\" ) {\n\t\t\tthis.x = this.ax0 + this.acols - 1;\n\t\t}\n\t\telse if( destination == \"text-end\" ) {\n\n\t\t\t/* where is the last char -> maxX */\n\t\t\tvar c = \"DC\";\n\t\t\tvar oldx = this.x;\n\t\t\tthis.x = ((this.ax0 + this.acols)-1);\n\t\t\tvar max = ((this.ax0 + this.acols)-1);\n\n\t\t\twhile( this.x >= this.ax0 ) {\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t\t\t\tif( c != \" \" ) {\n\t\t\t\t\t\t\tthis.x++;\n\t\t\t\t\t\t\tif( this.x > max) {\n\t\t\t\t\t\t\t\tthis.x = max;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.x--;\n\t\t\t}\n\n\t\t\tvar maxX = this.x;\n\t\t\t/*-reset, and jump to end of next text area-*/\n\t\t\tthis.x = oldx;\n\t\t\tvar c = \"DC\";\n\t\t\twhile( this.x< ((this.ax0 + this.acols)-1) && c != \" \") {\n\t\t\t\t\t\tthis.x++;\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t}\n\n\n\t\t\t/*make sure we did not jump past last char*/\n\t\t\tif( this.x > maxX ) {\n\t\t\t\tthis.x = maxX;\n\t\t\t}\n\t\t}\n\t\telse if( destination == \"text-end-all\" ) {\n\t\t\tvar c = \"DC\";\n\t\t\tthis.x = ((this.ax0 + this.acols)-1);\n\t\t\tvar max = ((this.ax0 + this.acols)-1);\n\n\t\t\twhile( this.x >= this.ax0 ) {\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t\t\t\tif( c != \" \" ) {\n\t\t\t\t\t\t\tthis.x++;\n\t\t\t\t\t\t\tif( this.x > max) {\n\t\t\t\t\t\t\t\tthis.x = max;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.x--;\n\t\t\t}\n\t\t}\n\t\telse if( destination == \"text-start\" ) {\n\t\t\tvar c = \"DC\";\n\t\t\twhile( this.x> this.ax0 && c != \" \") {\n\t\t\t\t\t\tthis.x--;\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t}\n\t\t}\n\n\t\tthis._int_flush();\n\t}\n\n\tcursorMove( dir ) {\n\t\tif( dir == \"up\" ) {\n\t\t\tif( this.y>this.ay0) {\n\t\t\t\tthis.y--;\n\t\t\t}\n\t\t}\n\t\telse if( dir == \"down\" ) {\n\t\t\tif( this.y< ((this.ay0 + this.arows)-1)) {\n\t\t\t\tthis.y++;\n\t\t\t}\n\t\t\telse if( this.y== ((this.ay0 + this.arows)-1)) {\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis._int_addChangeAll();\n\t\t\t}\n\t\t}\n\t\tif( dir == \"left\" ) {\n\t\t\tif( this.x>this.ax0) {\n\t\t\t\tthis.x--;\n\t\t\t}\n\t\t}\n\t\telse if( dir == \"right\" ) {\n\t\t\tif( this.x< ((this.ax0 + this.acols)-1)) {\n\t\t\t\tthis.x++;\n\t\t\t}\n\t\t}\n\t\tthis._int_flush();\n\t}\n\n\tbackspace() {\n\t\tif( this.x != this.ax0 ) {\n\t\t\t\tthis.x--;\n\t\t}\n\n\t\tthis.__int_scrollLineLeftFrom( this.x, this.y );\n\n\t\tvar area = this._int_getArea( this.x, this.y, this.cols-1, this.y, );\n\t\tthis._int_addChange( area );\n\t\tthis._int_flush();\n\t}\n\n\tdelete() {\n\n\t\tthis.__int_scrollLineLeftFrom( this.x, this.y );\n\n\t\tvar area = this._int_getArea( this.x, this.y, this.cols-1, this.y, );\n\t\tthis._int_addChange( area );\n\t\tthis._int_flush();\n\t}\n\n\tnl() {\n\n\t\t\tthis.x = this.ax0;\n\t\t\tthis.y ++;\n\t\t\tvar ya = this.y - this.ay0;\n\n\t\t\tif( ya >= this.arows ) {\n\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis.y = this.ay0 + (this.arows -1);\n\n\t\t\t\tthis._int_flushAll();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._int_flush();\n\n\t}\n\n\t__int_nl() {\n\t\t\tthis.x = this.ax0;\n\t\t\tthis.y ++;\n\t\t\tvar ya = this.y - this.ay0;\n\t\t\tif( ya >= this.arows ) {\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis.y = this.ay0 + (this.arows -1);\n\t\t\t\treturn { scroll: true }\n\t\t\t}\n\t\t\treturn { scroll: false }\n\n\t}\n\n\twriteln( str ) {\n\n\t\t\tfor( var i=0; i<str.length; i++) {\n\t\t\t\tvar c = str.substr(i,1);\n\t\t\t\tthis.__int_write_direct_ch( c );\n\t\t\t}\n\t\t\tvar stat = this.__int_nl();\n\t\t\tif( stat.scroll ) {\n\t\t\t\t\tthis._int_addChangeAll();\n\t\t\t}\n\t\t\tthis._int_flush();\n\t}\n\n\t_int_write( str, insert ) {\n\t\tfor (const c of str) {\n\t\t\tthis.__int_write_direct_ch( c, insert );\n\t\t}\n\t}\n\n\twrite( str ) {\n\t\t\tthis._int_write( str );\n\n\t\t\tthis._int_flush();\n\t}\n\n\n\tinsert( str ) {\n\t\t\tthis._int_write( str, true );\n\n\t\t\tthis._int_flush();\n\t}\n\n\n\t__int_scrollLineRightFrom( x0, y  ) {\n\n\t\tvar x = x0;\n\t\tvar x1 = this.ax0 + this.acols - 1;\n\n\t\tif( x0 == x1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor( var i=x1; i>x0; i--) {\n\t\t\tvar cell1 = this.cellel[ y  ][ i-1 ];\n\t\t\tvar cell2 = this.cellel[ y  ][ i ];\n\n\t\t\tcell2.fg = cell1.fg;\n\t\t\tcell2.bg = cell1.bg;\n\t\t\tcell2.txt = cell1.txt;\n\t\t}\n\t}\n\n\t__int_scrollLineLeftFrom( x0, y  ) {\n\n\t\tvar x = x0;\n\t\tvar x1 = this.ax0 + this.acols - 1;\n\n\t\tif( x0 == x1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor( var i=x0; i<x1; i++) {\n\t\t\tvar cell1 = this.cellel[ y  ][ i +1 ];\n\t\t\tvar cell2 = this.cellel[ y  ][ i ];\n\n\t\t\tcell2.fg = cell1.fg;\n\t\t\tcell2.bg = cell1.bg;\n\t\t\tcell2.txt = cell1.txt;\n\t\t}\n\n\n\t}\n\n\t__int_write_direct_ch( ch, insert ) {\n\n\t\tvar code = ch.codePointAt(0);\n\n\t\tif( this.dc && this.dcCmd ) {\n\n\t\t\tthis.dc = false;\n\t\t\tthis.dcCmd = false;\n\t\t\tthis._int_control( this.dcCmdCode, code );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif( this.dc && !this.dcCmd ) {\n\t\t\tthis.dcCmd = true;\n\t\t\tthis.dcCmdCode = code;\n\t\t\treturn;\n\t\t}\n\n\t\tif( code == 17 ) {\n\t\t\t//DC1\n\t\t\tthis.dc = true;\n\t\t\tthis.dcCmd = false;\n\t\t\treturn;\n\t\t}\n\n\t\tvar cell = this.cellel[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tvar area;\n\n\t\tif( insert ) {\n\t\t\tthis.__int_scrollLineRightFrom( this.x, this.y );\n\n\t\t\tarea = this._int_getArea( this.x, this.y, this.ax0 + this.acols-1, this.y );\n\t\t\tthis._int_addChange( area );\n\n\t\t}\n\n\t\tcell.txt = ch;\n\n\t\tif( !this.reverse  ) {\n\t\t\tcell.fg = this.colors.txtColor;\n\t\t\tcell.bg = this.colors.txtBgColor;\n\t\t}\n\t\telse {\n\t\t\tcell.bg = this.colors.txtColor;\n\t\t\tcell.fg = this.colors.txtBgColor;\n\t\t}\n\n\t\tvar oldx = this.x;\n\t\tvar oldy = this.y;\n\n\t\tthis.x++;\n\t\tvar ax = this.x - this.ax0;\n\t\tif( ax > (this.acols-1) ) {\n\t\t\tthis.x = this.ax0;\n\t\t\tvar stat = this.__int_nl();\n\t\t\tif( stat.scroll ) {\n\t\t\t\tthis._int_addChangeAll();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tarea = this._int_getArea( oldx, oldy, oldx, oldy );\n\t\tthis._int_addChange( area );\n\t\t//this._int_addChangeAll();\n\n\t}\n\n\twritec( chr ) {\n\n\t\tif( chr == \"\\n\" ) {\n\t\t\tvar stat = this.__int_nl();\n\t\t\tif( stat.scroll ) {\n\t\t\t\t\tthis._int_addChangeAll();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tthis.__int_write_direct_ch( chr );\n\t\tthis._int_flush();\n\t}\n\n\n\t_int_control( chr, data ) {\n\n\t\tif( chr == 16 ) {\n\t\t\tthis.colors.txtColor = data;\n\t\t}\n\t\telse if( chr == 17 ) {\n\t\t\tthis.colors.txtBgColor = data;\n\t\t}\n\t\telse if( chr == 18 ) {\n\t\t\tthis.sys.post( \"border\", { d: data }  );\n\t\t}\n\t\telse if( chr == 24 ) {  //CANCEL -> (we map it to) Clear Screen\n\t\t\tthis.clear();\n\t\t}\n\t\telse if( chr == 12 ) {  //FORMFEED -> (we map it to) RESET SCREEN\n\t\t\tthis.reset();\n\t\t}\n\t\telse if( chr == 25 ) {  //End of Medium -> (we map it to) Hide\n\t\t\t//this.hide();   TODO\n\t\t}\n\t\telse if( chr == 64 ) {\n\t\t\tthis.reverse = false;\n\t\t}\n\t\telse if( chr == 65 ) {\n\t\t\tthis.reverse = true;\n\t\t}\n\t\telse {\n\t\t\tthis.__int_write_direct_ch( \"?\" );\n\t\t}\n\t}\n\n\n\tsetPos( x, y ) {\n\n\t\tthis._int_setPos( x,y );\n\n\t\tthis._int_flush();\n\t}\n\n\tsetCursorMode( mode ) {\n\t\tthis.cursorMode = mode;\n\t\tthis._int_flush();\n\t}\n\n\tsetCursorPos( x, y ) {\n\t\tif( x<0 || y<0 ) { throw \"pos(\"+x+\",\"+y+\") < 0\" ; }\n\n\t\tif( x>=this.acols || y>= this.arows ) { throw \"pos(\"+x+\",\"+y+\") > max\" ; }\n\n\t\tthis.x = x + this.ax0;\n\t\tthis.y = y + this.ay0;\n\n\t\tthis._int_flush();\n\t}\n\n\tgetCursorPos() {\n\t\t\treturn [this.x - this.ax0, this.y - this.ay0 ];\n\t}\n\n\tcontrol( chr, data ) {\n\n\t\tthis._int_control( chr, data );\n\t\tthis._int_flush();\n\n\t}\n\n\n\t_int_setPos( x, y ) {\n\n\t\tif(x >= 0) {\n\t\t\t\tthis.x = x + this.ax0;\n\t\t}\n\t\tif(y >= 0) {\n\t\t\t\tthis.y = y + this.ay0;\n\t\t}\n\n\t\tif( this.x >= this.acols ) { this.x = this.acols-1;}\n\t\tif( this.y >= this.arows ) { this.y = this.arows-1;}\n\t}\n\n\tcenter( str ) {\n\n\t\t\tif( str.length > this.cols ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar l = str.length;\n\t\t\tvar l2 = l/2;\n\n\t\t\tvar wh = [ this.acols, this.arows ];\n\n\t\t\tvar x = Math.floor( (wh[0] / 2)-l2 );\n\t\t\tthis._int_setPos( x, -1 );\n\t\t\tthis._int_write( str );\n\t\t\tthis.__int_nl();\n\n\t\t\tvar area = this._int_getArea( this.ax0, this.y, this.acols-1, this.y );\n\t\t\tthis._int_addChange( area );\n\t\t\tthis._int_flush();\n\n\t}\n\n\t__int_scrollDown() {\n\n\t\tvar ax0 = this.ax0;\n\t\tvar ay0 = this.ay0;\n\n\t\tfor( var ax=0; ax<this.acols; ax++) {\n\n\t\t\tvar x = ax + ax0;\n\t\t\tfor( var ay=0; ay<this.arows-1; ay++) {\n\n\t\t\t\tvar y = ay + ay0;\n\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tvar cellyp1 = this.cellel[ y+1 ][ x ];\n\n\t\t\t\tcell.txt = cellyp1.txt;\n\t\t\t\tcell.fg = cellyp1.fg;\n\t\t\t\tcell.bg = cellyp1.bg;\n\t\t\t}\n\t\t}\n\n\t\t//fill last row\n\t\tvar y2 = ay0 + (this.arows-1);\n\t\tfor( var ax=0; ax<this.acols; ax++) {\n\n\t\t\tvar x = ax + ax0;\n\n\t\t\tvar cell = this.cellel[ y2 ][ x ];\n\t\t\tcell.txt = \" \";\n\t\t\tif( !this.reverse  ) {\n\t\t\t\tcell.fg = this.colors.txtColor;\n\t\t\t\tcell.bg = this.colors.txtBgColor;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcell.fg = this.colors.txtBgColor;\n\t\t\t\tcell.bg = this.colors.txtColor;\n\t\t\t}\n\t\t}\n\n\t}\n}\n\n//--EOC \n\n// ## ../../rwbuffers/worker/bitmap.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/../../rwbuffers/worker/bitmap.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/../../rwbuffers/worker/bitmap.js\n\nclass BitMap {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n    this.lineColor = 1;\n    this.changes = {};\n    this.changes.flag = false;\n    this.changes.pixels = [];\n\n\t\tthis.origin( 0,0,1,1);\n  }\n\n\n\torigin( ox0, oy0, odx, ody ) {\n\t\tthis.ox0 = ox0;\n\t\tthis.oy0 = oy0;\n\t\tthis.odx = odx;\n\t\tthis.ody = ody;\n\n\t\tvar dir = [\"m\",undefined,\"p\"];\n\t\tvar xdir = \"x\" + dir[ odx + 1 ];\n\t\tvar ydir = \"y\" + dir[ ody + 1 ];\n\t\tvar direction = xdir + ydir;\n\n\t\tthis[\"_int_convertxy\"] = this.getConvertFunc( direction );\n\n\t}\n\n\treInit( w, h ) {\n\t\tthis.width = w;\n    this.height = h;\n\t}\n\n  attach( w, h ) {\n\t\tthis.reInit( w, h );\n\t}\n\n  isActive() {\n    return this.width > 0;\n  }\n\n  getDimensions() {\n\t\t\treturn [this.width, this.height ];\n\t}\n\n  triggerFlush() {\n\n    this._int_flush();\n\n  }\n\n  _int_flush() {\n\n    if( this.changes.flag ) {\n\n      this.sys.post( \"gfxupdate\",\n        {\n          pixels: this.changes.pixels\n        }\n      );\n    }\n\n    pixels: this.changes.pixels = [];\n    this.changes.flag = false;\n\n  }\n\n\tsetLineColor( c ) {\n    this.lineColor = c;\n    this.sys.post( \"nativeout\",{\n      action: \"gcolor\",\n      params: { c: c }\n    });\n  }\n\n\tgetConvertFunc( direction ) {\n\t\tvar __this = this;\n\t\tif( direction == \"xpyp\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor(x + __this.ox0), Math.floor(y + __this.oy0)];\n\t\t\t}\n\t\t}\n\t\telse if( direction == \"xpym\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor(x + this.ox0), Math.floor( this.oy0 - y ) ];\n\t\t\t}\n\t\t}\n\t\telse if( direction == \"xmyp\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor( __this.ox0 - x ), Math.floor(y + __this.oy0)];\n\t\t\t}\n\t\t}\n\t\telse if( direction == \"xmym\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor( __this.ox0 - x ), Math.floor( this.oy0 - y ) ];\n\t\t\t}\n\t\t}\n\t}\n\n\t_int_convertxy_xpyp( x,y ) {\n\t\treturn [ Math.floor(x + this.ox0), Math.floor(y + this.oy0)];\n\t}\n\n\t_int_convertxy_xpym( x,y ) {\n\t\treturn [ Math.floor(x + this.ox0), Math.floor( this.oy0 - y )];\n\t}\n\n\t_int_convertxy_xmyp( x,y ) {\n\t\treturn [ Math.floor( this.ox0 - x), Math.floor( y + this.oy0)];\n\t}\n\n\t_int_convertxy_xmym( x,y ) {\n\t\treturn [ Math.floor( this.ox0 - x), Math.floor( this.oy0 - y )];\n\t}\n\n\n  plot( x, y ) {\n\t\tvar xy2 = this._int_convertxy( x, y );\n\n    var pixel = { x: xy2[0], y: xy2[1], c:this.lineColor };\n\n    this.changes.pixels.push( pixel );\n    this.changes.flag = true;\n\n  }\n\n\tline( x0,y0, x1, y1 ) {\n\n\t\tvar xy0 = this._int_convertxy( x0, y0 );\n\t\tvar xy1 = this._int_convertxy( x1, y1 );\n\n    this.sys.post( \"nativeout\",{\n      action: \"line\",\n      params: { x0:xy0[0], y0:xy0[1], x1:xy1[0], y1:xy1[1] }\n    });\n  }\n\n\tdestroy() {\n\n\t}\n}\n\n//--EOC \n\n// ## ../../rwbuffers/worker/audio.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/../../rwbuffers/worker/audio.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/../../rwbuffers/worker/audio.js\n\nclass Audio {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.userInput = false;\n  }\n\n\tflagUserInput() {\n\t\tthis.userInput = true;\n\t}\n\n  playBeep( channel, frequency, len ) {\n\n\t\tif( !this.userInput ) { return; }\n    this.sys.post( \"audio\",\n    {\n          method: \"playBeep\",\n\t\t\t\t\tparCount: 3,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: frequency,\n\t\t\t\t\tp3: len\n    }\n    );\n  }\n\n\tplaySound( channel, frequency, len ) {\n\n\t\tif( !this.userInput ) { return; }\n    this.sys.post( \"audio\",\n    {\n          method: \"playSound\",\n\t\t\t\t\tparCount: 3,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: frequency,\n\t\t\t\t\tp3: len\n    }\n    );\n  }\n\n\tvolume( volume ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"setVolume\",\n\t\t\t\t\tparCount: 1,\n\t\t\t\t\tp1: volume\n\t\t}\n\t\t);\n\t}\n\n\treset() {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t\t{\n\t\t\t\t\t\tmethod: \"reset\",\n\t\t\t\t\t\tparCount: 0\n\t\t\t}\n\t\t\t);\n\n\t}\n\n\tattackDecayRelease( channel, attackT, decayT, releaseT ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelSetAttackDecayRelease\",\n\t\t\t\t\tparCount: 4,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: attackT,\n\t\t\t\t\tp3: decayT,\n\t\t\t\t\tp4: releaseT\n\t\t}\n\t\t);\n\t}\n\n\tchannelVolume( channel, v ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelVolume\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: v\n\t\t}\n\t\t);\n\t}\n\n\tchannelFrequency( channel, v ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelFrequency\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: v\n\t\t}\n\t\t);\n\t}\n\n\n\tchannelSustainVolume( channel, v ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelSetSustainLevel\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: v\n\t\t}\n\t\t);\n\t}\n\n\taddEffect( channel,  type , value, time ) {\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"addEffect\",\n\t\t\t\t\tparCount: 4,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: type,\n\t\t\t\t\tp3: value,\n\t\t\t\t\tp4: time\n\t\t}\n\t\t);\n  }\n\n  clearEffect( channel ) {\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"clearEffect\",\n\t\t\t\t\tparCount: 1,\n\t\t\t\t\tp1: channel\n\t\t}\n\t\t);\n\n  }\n\n\tplayEffect( channel, freq ) {\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"playEffect\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: freq\n\t\t}\n\t\t);\n\n\t}\n\n}\n\n//--EOC \n\n// ## workerbootstrap_static.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/workerbootstrap_static.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/workerbootstrap_static.js\n\nsys.log(\"Starting\");\nstart_sys();\n\n//--EOC \n\n"],"names":["sys","appName","unique","console","post","type","message","postMessage","log","args","Array","prototype","slice","call","arguments","args2","i","length","push","JSON","stringify","logerr","load","rt","path","processId","loaddata","label","save","data","delete","dir","setcfg","cfg","this","listfs","poststatus","procId","status","setfs","fs","setDisplayMode","m","blinkMode","html","executeFunction","htmlnode","get","wait_for_result","export","code","destination","signalHideMenu","flag","hide","init_sys","BasicArray","constructor","name","indices","defaultValue","buffer","getIndexCount","_check","detail","set","val","ptr","last","undefined","ErrorHandler","newError","clazz","context","lineNr","throwError","fromSimpleExternalError","s","lineNr0","parts","split","err","extCode0","extCode1","fromSerializedError","isSerializedError","substr","e","startsWith","isError","Object","toString","clss","Editor","output","out","keyMode","addRunTime","runTime","keyHandlerForCLE","keyLabel","command","getCurrentLine","writeln","executeInteractiveLine","backspace","ctrlKey","cursorMove","jumpTo","shiftKey","clear","insert","write","setCursorMode","key","interactiveKeyHandler","BasicRuntime","editor","debugFlag","listSpeed","bitmap","bout","input","audio","setHandler","setInterActive","menuEnable","program","runFlag","waitForMessageFlag","waitForMessageVariable","executeLineFlag","goPlayExampleFlag","breakCycleFlag","inputFlag","listFlag","immersiveFlag","statusChanged","gosubReturn","nullTime","Date","getTime","turboMode","cmdCountPerCycleDefault","cmdCountPerCycleTurbo","cmdCountPerCycle","commands","BasicCommands","extendedcommands","ExtendedCommands","erh","vars","functions","loadedData","default","loadedLabel","kbBuffer","yPos","SHORTLINE","LONGLINESTART","LONGLINEEND","forContext","outputCallBacksAll","lineOverFlow","method","scroll","clearScreen","outputCallBacksClScr","synchClock","exitMode","code2colMap","km","symbolTable","up","down","left","right","black","white","red","cyan","purple","green","blue","yellow","orange","brown","pink","grey1","grey2","grey3","backmap","mapInfo","entries","symbolTableBM","flagStatusChange","getScopeVars","getFullVarList","scopes","getFullScopes","varList","si","fullscope","scope","names","getOwnPropertyNames","value","descr","ii","endsWith","cpuNeeded","getStatus","runPointer","vlen","getVars","pgmLen","varLen","displayMode","startWaitForMessage","start","autoStartAfterLoad","path0","getProgramAsText","deleteFile","variable","keyInterrupt","_type","_data","interrupt","_ix","interruptFlag0","interruptFlag1","line","useLabel","handlers","interrupt0","interrupt0ParamIsLabel","interrupt1","interrupt1ParamIsLabel","newScope","runPointer2","variables","setVar","toUpperCase","pgm","len","found","labels","receiveMessage","_message","reInit","textW","textH","bitmapW","bitmapH","mode","printError","reason","pgmData","ok","bootPGM","control","runPGM","stop","insertData","isRunning","list","title","files","fname","enterListMode","currentFs","stopAfterMessage","HandleStopped","printReady","runStop","listStop","cxy","getCursorPos","string","getLineFrom","inputStartInputPosX","handleLineInput","x","xy","setCursorPos","toggleMenu","startingProgram","flush","importPGMHandler","content","filename","textLinesToBas","fileName","setProgram","exitProgram","closeWindow","windowId","listPointer","printLine","setExitMode","v","nullClock","setHours","setSeconds","setMinutes","setMilliseconds","setTurbo","on","appendProgram","exists","j","sort","a","b","getProgram","getProgramState","setProgramState","pgmState","_setByteBits","bits","byte","_getByteBits","masks","results","upperFirst","supressLine","explicitline","line1","onLineStr","printInfo","printHelp","reverseOn","print","colorReset","colors","setDefault","fg","bg","border","resetConsole","getDimensions","reset","setPos","getMillis","getJiffyTime","millis","Math","floor","hours","minutes","hard","muteReady","writel","clrPGM","compressPGMText","pgmTxt","p","Parser","init","kws","getKeyWordCodes","txt2","kw","replaceAll","toLowerCase","String","fromCharCode","getProgramAsTextNoPETSCII","text","l","prepareLineForExportNoPETSCII","trim","getProgramSize","controlKW","prepareLineForExport","txt0","txt","dst","c","charCodeAt","symdef","charAt","src","str1","str2","rv","indexOf","replace","rebuildNoPETSCIILineString","raw","noPetsciiLine","parseLine","toLower","cc","prevCharIsQuote","nextCharIsQuote","dst2","ResolveStringSymbolToCode","prepareLineForImport","num","parseInt","getProgramLines","padZeros2","evalExpressionPart","parseFloat","PI","varIntName","arr","ai","evalExpression","values","params","par","ecommands","cmds","nFunName","functionName","stc","fName","parValue","restore","functRecord","expr","op","pow","negate","binaryNegate","exitInputState","breakCycle","cycle","cmdCount","lineNumber","isActive","triggerFlush","changeCount","countdown","listCodeLine","bf","runCommands","traceVars","tvi","thisVar","thisValue","oldValue","traceOldValues","traceList","af","executedCount","retreiveRuntimeLine","doReturn","oldPointers","pop","doInterruptReturn","closeScope","gosub","line0","retLine","retCmd","goto","startAsGoto","isListing","isInput","isReady","getDataBlocks","readData","dataPointer","result","getDataLength","setData","label0","typeParts","parseSimpleDataI_CSV","toArr","data2","parseSimpleDataS_CSV","parseSimpleDataS_LINES","printChar","rawLine","rebuildLineString","nr","removePadding","renumbering","addSmartPadding","shortenKeywords","newString","tokens","getTokens","foundGoto","foundGotoIndex","newLine","lineIsData","lineIsRem","lineIsSub","renumberProgram","gap","newLineNr","lineNumbers","newLineNr2","ceil","lRec","PETSCIIreplace","keywordCompress","compressProgram","normalizeProgram","restoreDataPtr","normalizeData","dataRec","bak1","bak2","normalize","k","doForInit","from","to","step","varName","cmdPointer","cmdArrayLen","linePointersLen","ctx","ctxv","doForNext","nextVarName","retreiveLine","parseLineNumber","commandToString","cmd","statementName","var","limit","TERMINATE_W_JUMP","end","cnt","cn","onCommand","onExpr","onLineNrs","jump","nextVar","ix","arrRec","arrayNames","pardefs","mycommands","enabled","varType","arrayAssignment","expression","getTraceList","setTraceVar","resetTraceVar","old","oldProgram","new","removePgmLine","linenr","pgm2","pl","padSpaces6","no","padSpaces8","insertPgmLine","insertPgmLineLocal","myProgram","lines","exception","parseErrorLine","startConsoleDataInput","inputVars","inputVarsPointer","str","isInputCommand","qMark","isNaN","basicCmds","runtime","func","statementList","getStatements","stats","stats2","getFunctions","getAllCategories","categoryIndexes","getCategories","categoryIndexes2","CommandHelp","getCategoriesNormalize","getCategoriesIntermediate","_stat_info_help","_stat_help","pars","catRecord","lst","catLists","hlpctx","lbl","attr","attribs","padLen","pad","description","_if_cls","_stat_info_cls","_stat_cls","_stat_info_reset","_stat_reset","_stat_info_menu","_stat_menu","_stat_info_reverse","_stat_reverse","reverse","_stat_info_beep","_stat_beep","playBeep","_stat_info_sound","_stat_sound","playSound","_stat_info_setadr","_stat_setadr","attackDecayRelease","_stat_info_volume","_stat_volume","volume","_stat_info_chfreq","_stat_chfreq","channelFrequency","_stat_info_chvolume","_stat_chvolume","channelVolume","_stat_info_chsvolume","_stat_chsvolume","channelSustainVolume","_stat_info_addfx","_stat_addfx","addEffect","_stat_info_clearfx","_stat_clearfx","clearEffect","_stat_info_playfx","_stat_playfx","freq","playEffect","_stat_info_textarea","_stat_textarea","cols","round","rows","wh","xo","yo","divx","divy","textArea","_stat_info_gcolor","_stat_gcolor","col","setLineColor","_stat_info_origin","_stat_origin","origin","_stat_info_line","_stat_line","_stat_info_plot","_stat_plot","plot","_stat_info_center","_stat_center","center","_stat_info_gtext","_stat_gtext","gtext","_stat_info_immediate","_stat_immediate","setPokeFlush","_stat_info_pokeccl","_stat_pokeccl","pokeccl","_stat_info_pokec","_stat_pokec","pokec","_stat_info_pokecl","_stat_pokecl","pokecl","_stat_info_pokebcl","_stat_pokebcl","_stat_info_locate","_stat_locate","row","_stat_info_hide","_stat_hide","_if_html","_stat_info_html","_stat_html","handleIx","htmlHandle","htmlValue","htmlAppend","exparts","exparts2","_stat_info_htmlnode","_stat_htmlnode","node","_stat_info_htmlbg","_stat_htmlbg","url","_stat_info_color","_stat_color","bgcol","_stat_info_display","_stat_display","modes","screenModes","_stat_info_border","_stat_border","bcol","_stat_info_export","_stat_export","_stat_info_copy","_stat_copy","_fun_info_peekcl","_fun_peekcl","peekcl","_fun_info_peekc","_fun_peekc","peekc","_fun_info_ucbase","_fun_ucbase","baseLabel","_fun_info_uc_DLR_","_fun_uc_DLR_","fromCodePoint","_fun_info_dc_DLR_","_fun_dc_DLR_","_fun_info_html_DLR_","_fun_html_DLR_","_fun_info_width","_fun_width","_fun_info_height","_fun_height","_fun_info_cols","_fun_cols","_fun_info_columns","_fun_columns","_fun_info_rows","_fun_rows","pgmman","addRuntime","keyLabelCodes","randnrs","random","randIndex","randStep","_stat_info_new","_stat_new","_stat_info_list","_stat_list","_if_get","_if_getkey","_if_read","_if_input","_if_list","_if_run","_stat_info_read","_stat_read","p0","_stat_info_get","_stat_get","getKey","_stat_info_getkey","_stat_getkey","_stat_info_input","_stat_input","con","_stat_info_restore","_stat_restore","_stat_info_load","_stat_load","aSync","_stat_info_setdata","_stat_setdata","_stat_info_datablocks","_stat_datablocks","_stat_info_loaddata","_stat_loaddata","_stat_info_dir","_stat_dir","_stat_info_fs","_stat_fs","_stat_info_renumber","_stat_renumber","_stat_info_vars","_stat_vars","_stat_info_tracevar","_stat_tracevar","_stat_info_clrtracevar","_stat_clrtracevar","_stat_info_boot","_stat_boot","_stat_info_save","_stat_save","_stat_info_delete","_stat_delete","_stat_info_run","_stat_run","_if_print","isNumber","isFinite","normalizeIfNumber","_stat_info_print","_stat_print","nl","_stat_info_clr","_stat_clr","_fun_info_datalen","_fun_datalen","_fun_info_chr_DLR_","_fun_chr_DLR_","_fun_info_str_DLR_","_fun_str_DLR_","number","base","numberStr","_fun_info_abs","_fun_abs","_fun_info_len","_fun_len","_fun_info_asc","_fun_asc","_fun_info_val","_fun_val","_fun_info_hex2dec","_fun_hex2dec","_fun_info_hex_DLR_","_fun_hex_DLR_","_fun_info_exp","_fun_exp","exp","intGetNextRand","intSeedRand","x0","year","day","d","seedModifier","_fun_info_pad_DLR_","_fun_pad_DLR_","ch","dest","toPad","_fun_info_rnd","_fun_rnd","_fun_info_sqr","_fun_sqr","sqrt","_fun_info_log","_fun_log","_fun_info_pos","_fun_pos","getLinePos","_fun_info_left_DLR_","_fun_left_DLR_","_fun_info_right_DLR_","_fun_right_DLR_","_fun_info_mid_DLR_","_fun_mid_DLR_","_fun_info_sin","_fun_sin","sin","_fun_info_tri","_fun_tri","abs","_fun_info_saw","_fun_saw","_fun_info_tan","_fun_tan","tan","_fun_info_atn","_fun_atn","atan","_fun_info_cos","_fun_cos","cos","_fun_info_spc","_fun_spc","_max","_fun_info_int","_fun_int","_fun_info_range","_fun_range","min","max","_fun_info_tab","_fun_tab","_fun_info_sgn","_fun_sgn","_fun_info_millis","_fun_millis","_fun_info_jiffies","_fun_jiffies","ecmds","CTRL_KW","SHORTCUT_KW","KEYWORDS","more","screenCodes2CTRLTable","tab","KWCODES","padArray","missing","clazz2","upperCaseNameTokens","token","tokens2","mergeCompTokens","token2","mergeBrokenUpTokens","splits","p1","p2","p3","whole","r","mergeTokenRange","record","tokens3","parseFunParList","even","endTokens","parseBoolExpression","shift","peekIfNextIsOpenBracket","parseSubExpression","tokensToString","endTokensToString","endTokenArray","et","endToken","isEndToken","endTokenArry","parseSimpleExpression","endLoop","returnValue","pair","endTokens0","first","eList","parseExpression","opData","dbg","dbg2","retExpr","newParts","part","unshift","subEndTokens","isUserDefinedFunctionCall","parameters","subExpression","groupParts","oldExpression","parts0","parts1","parts2","prevPart","subExpr","normalizeStatementName","parseAssignment","preTokens","nameToken","token0","parseArrayAssignment","parseControlStructure","controlToken","expr_fn","nums","onInterrupt","num0","onType","labelFlag","expr_from","expr_to","expr_step","explicit","nextcommand","expr1","block","parseLineCommands","bi","dataArray","parseStatementCall","endCommand","keyword","oken","logTokens","tokensStr","tok","Tokenizer","StringReader","tokenize","lineRest","errContext","lineRecord","toker","merge","noPadding","strIn","index","lineIndex","peek","peek2","unconsume","consume","EOF","reader","keywords","greedy","isOpChar","match","isCompChar","isEqChar","isNameChar","endFound","prev","seq","isNumChar","isPadChar","isCommandSepChar","isSepChar","isAnyChar","isBracket","isStrChar","inString","normalizeToken","tok0","readChars","read","type0","compareF","tokenType","parseRules","tokenFound","rule","categoryIndexesInt","funs","cat","f_attribs","catlabel","rname","processes","fastProcesses","fastProcessesIds","count","_this","setInterval","stat","cpuHungry","fpID","nfpArr","el","getTicks","old_register","obj","newId","id","register","getRoot","keyPress","interactive","hc","handlerClazz","inputKeyHandler","cursorOn","y","hidden","dc","dcCmd","defaultFG","defaultBG","txtBgColor","txtColor","initialized","changes","all","pokeFlush","w","h","_int_initMode","destroy","cellel","_int_addChangeAll","_int_addChange","area","clist","lc","nc","y1","y2","x1","x2","changesTargetArray","cells","cell","_int_flushAll","_int_flush","_int_getArea","cx","cy","cursorMode","areasList","attach","codePointAt","rowArray","acols","xi","ax0","ay0","ay","ax","arows","oldx","maxX","__int_scrollDown","__int_scrollLineLeftFrom","__int_nl","__int_write_direct_ch","_int_write","__int_scrollLineRightFrom","cell1","cell2","_int_control","dcCmdCode","oldy","writec","chr","_int_setPos","l2","cellyp1","lineColor","pixels","ox0","oy0","odx","ody","direction","getConvertFunc","width","height","action","__this","_int_convertxy_xpyp","_int_convertxy_xpym","_int_convertxy_xmyp","_int_convertxy_xmym","xy2","_int_convertxy","pixel","y0","xy0","xy1","userInput","flagUserInput","channel","frequency","parCount","attackT","decayT","releaseT","p4","time","rootProcId","self","onmessage","messageObject","sub","QPath","windowWidth","windowHeight","blockList"],"sourceRoot":""}