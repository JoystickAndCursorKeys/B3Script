{"version":3,"file":"basicloader.js","mappings":"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","sources":["webpack://B3/./src/sys/modules/mrbeep/mrbeep-channel.js","webpack://B3/./src/sys/modules/mrbeep/mrbeep.js","webpack://B3/./src/sys/modules/basicmenu/menudata.js","webpack://B3/./src/sys/modules/basicmenu/handlers.js","webpack://B3/./src/sys/bootloader_static.js","webpack://B3/./src/sys/bootcfg.js","webpack://B3/./src/sys/bootsys.js","webpack://B3/./src/sys/modules/displaymodes.js","webpack://B3/./src/sys/modules/tablecon.js","webpack://B3/./src/sys/modules/canvas.js","webpack://B3/./src/sys/modules/mrbeep/module.js","webpack://B3/./src/sys/modules/simplewarning.js","webpack://B3/./src/sys/modules/privwarning.js","webpack://B3/./src/sys/modules/mutedinput.js","webpack://B3/./src/sys/modules/domelinput.js","webpack://B3/./src/sys/modules/htmlwrapper.js","webpack://B3/./src/sys/modules/basic/module.js","webpack://B3/./src/sys/modules/basicmenu/module.js","webpack://B3/./src/sys/modules/fs/sessionfs.js","webpack://B3/./src/sys/modules/fs/lfs.js","webpack://B3/./src/sys/modules/fs/ramfs.js","webpack://B3/./src/sys/modules/fs/scripturl.js","webpack://B3/./src/sys/modules/fs/qfs.js"],"sourcesContent":["class MrBeepChannel {\n\n  constructor( audioCtx, waveform, masterVolume, volumeFunc ) {\n    this.audioCtx = audioCtx;\n    this.waveform = waveform;\n    this.masterVolume = masterVolume;\n    this.volumeFunc = volumeFunc;\n\n    this.initialized = false;\n    this.initializedFully = false;\n\n    this.effects = [];\n\n    this.FLR = 10;\n    this.FS = 11;\n    this.VLR = 20;\n    this.VS = 21;\n\n  }\n\n  enable() {\n    this._init();\n  }\n\n  disable() {\n    this.maxGain.gain.value=0.0;\n  }\n\n  _init() {\n\n    if( this.initialized ) {\n      return;\n    }\n\n    this.initialized = true;\n\n    this.maxGain = this.audioCtx.createGain();\n    this.maxGain.connect( this.masterVolume );\n\n    this.maxGain.gain.value=0.0;\n    this.volumeValue = 0.0;\n\n    this.gain = this.audioCtx.createGain();\n    this.gain.connect( this.maxGain );\n\n    if( this.waveform == \"noise\" ) {\n\n\n      //var from = 300;\n      //var to = 30000;\n      //var geometricMean = Math.sqrt(from * to);\n      //this.filter.Q.value = geometricMean / (to - from);\n\n      this.filter = this.audioCtx.createBiquadFilter();\n\n      this.filter.type = \"bandpass\";\n      this.filter.frequency.value = 440;\n      this.frequency = this.filter.frequency;\n      this.filter.Q.value = 5;\n      this.filter.connect(this.gain);\n\n      var bufferSize = 4096;\n\n      var b0, b1, b2, b3, b4, b5, b6;\n      b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n      var node = this.audioCtx.createScriptProcessor(bufferSize, 1, 1);\n      node.onaudioprocess = function(e) {\n          var output = e.outputBuffer.getChannelData(0);\n          for (var i = 0; i < bufferSize; i++) {\n              var white = Math.random() * 2 - 1;\n              b0 = 0.99886 * b0 + white * 0.0555179;\n              b1 = 0.99332 * b1 + white * 0.0750759;\n              b2 = 0.96900 * b2 + white * 0.1538520;\n              b3 = 0.86650 * b3 + white * 0.3104856;\n              b4 = 0.55000 * b4 + white * 0.5329522;\n              b5 = -0.7616 * b5 - white * 0.0168980;\n              output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n              output[i] *= 0.11; // (roughly) compensate for gain\n              b6 = white * 0.115926;\n          }\n      }\n\n      this.occilator = node;\n      this.occilator.connect( this.filter );\n\n      this.gain.gain.value=0.0;\n      this.gain.gain.setValueAtTime(0, this.audioCtx.currentTime);\n\n      this.initializedFully = true;\n\n\n    }\n    else {\n      // we create the gain module, named as volume, and connect it to our\n      //these sines are the same, exept for the last connect statement.\n      //Now they are connected to the volume gain module and not to the au\n\n      this.filter = null;\n\n      this.occilator = this.audioCtx.createOscillator();\n      this.occilator.frequency.value = 440;\n      this.frequency = this.occilator.frequency;\n\n      this.occilator.type = this.waveform;\n      this.occilator.connect(this.gain);\n      this.gain.gain.value=0.0;\n      this.gain.gain.setValueAtTime(0, this.audioCtx.currentTime);\n      this.occilator.start(0);\n      this.initializedFully = true;\n\n\n\n\n    }\n  }\n\n  setVolume( volume ) {\n\n    this.enable();\n\n    this.maxGain.gain.value= volume;\n    this.volumeValue = volume;\n\n    if( volume == 0) {\n      this.disable();\n    }\n\n  }\n\n  playBeep( frequency, duration ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds = duration / 1000;\n    var durInSeconds0 = durInSeconds/20;\n    var durInSeconds1 = durInSeconds - (durInSeconds/20);\n    var durInSeconds2 = durInSeconds;\n    varnow=this.audioCtx.currentTime;\n\n    this.frequency.cancelScheduledValues(now);\n    this.gain.gain.cancelScheduledValues(now);\n\n    this.frequency.setValueAtTime( frequency, now);\n\n    this.gain.gain.linearRampToValueAtTime(1.0 ,now+durInSeconds0);\n    this.gain.gain.linearRampToValueAtTime(1.0 ,now+durInSeconds1);\n    this.gain.gain.linearRampToValueAtTime(0.0 ,now+durInSeconds2);\n\n  }\n\n  clearEffect() {\n    this.effects  = [];\n  }\n\n  addEffect( type , value, time ) {\n    if( this.effects.length > 254 ) {\n      return;\n    }\n\n    this.effects.push( {\n      type: type ,\n      value: value,\n      time: time\n      }\n    );\n  }\n\n  playEffect( freq ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    varnow=this.audioCtx.currentTime;\n\n    this.gain.gain.cancelScheduledValues(now);\n    this.frequency.cancelScheduledValues(now);\n\n    //this.maxGain.gain.value= this.volumeValue;\n\n    var jiffy = 0.000001;\n    now = now + jiffy;\n\n    for( var i = 0; i < this.effects.length ; i++) {\n      var e = this.effects[ i ];\n      if( e.type == this.VLR ) {\n        this.gain.gain.linearRampToValueAtTime( e.value ,now+ e.time/1000 );\n      }\n      else if( e.type == this.FLR ) {\n        this.frequency.linearRampToValueAtTime( e.value + freq ,now+ e.time/1000 );\n      }\n      else if( e.type == this.VS ) {\n        this.gain.gain.setValueAtTime( e.value ,now+ e.time/1000 );\n      }\n      else if( e.type == this.FS ) {\n        this.frequency.setValueAtTime( e.value  + freq,now+ e.time/1000 );\n      }\n\n    }\n\n  }\n\n  setAttackDecayRelease( attackT, decayT, releaseT ) {\n\n    this.attackT = attackT;\n    this.decayT = decayT;\n    this.releaseT = releaseT;\n\n  }\n\n  setSustainLevel( sustainV ) {\n\n    this.sustainV = sustainV;\n\n  }\n\n\n  playSound( frequency, sustainT ) {\n\n    varnow=this.audioCtx.currentTime;\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds0 = (this.attackT/1000);\n    var durInSeconds1 = (this.attackT/1000) + (this.decayT/1000);\n    var durInSeconds2 = (this.attackT/1000) + (this.decayT/1000) + (sustainT/1000) ;\n    var durInSeconds3 = (this.attackT/1000) + (this.decayT/1000) + (sustainT/1000) + (this.releaseT/1000);\n\n    this.frequency.cancelScheduledValues(now);\n    this.gain.gain.cancelScheduledValues(now);\n    //this.frequency.value = frequency;\n    this.frequency.setValueAtTime( frequency,now );\n\n    this.gain.gain.linearRampToValueAtTime( 1.0              ,now+durInSeconds0);\n    this.gain.gain.linearRampToValueAtTime( this.sustainV    ,now+durInSeconds1);\n    this.gain.gain.linearRampToValueAtTime( this.sustainV    ,now+durInSeconds2);\n    this.gain.gain.linearRampToValueAtTime( 0                ,now+durInSeconds3);\n\n  }\n\n  setFrequency( f ) {\n\n    varnow=this.audioCtx.currentTime;\n    this.frequency.cancelScheduledValues( now );\n    //this.frequency.value = f;\n    this.frequency.setValueAtTime( f,now );\n  }\n\n  startSound( frequency ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds0 = this.attackT/1000;\n    var durInSeconds1 = (this.attackT/1000) + (this.decayT/1000);\n\n    //this.frequency.value = frequency;\n    this.frequency.cancelScheduledValues(now);\n    this.frequency.setValueAtTime( frequency,now );\n\n    varnow=this.audioCtx.currentTime;\n    this.gain.gain.cancelScheduledValues(now);\n\n    this.gain.gain.linearRampToValueAtTime(1.0              ,now+durInSeconds0);\n    this.gain.gain.linearRampToValueAtTime( this.sustainV   ,now+durInSeconds1);\n\n  }\n\n  releaseSound( frequency ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds0 = this.releaseT/1000;\n\n    this.frequency.value = frequency;\n\n    varnow=this.audioCtx.currentTime;\n    this.gain.gain.cancelScheduledValues(now);\n\n    this.gain.gain.linearRampToValueAtTime(0.0              ,now+durInSeconds0);\n\n  }\n\n}\n\nexport { MrBeepChannel as default};\n","class MrBeep {\n\n  constructor( MrBeepChannel ) {\n    this.audioCtx = new (window.AudioContext || window.webkitAudioContext);\n\n    this.masterVolume = { value: 0.8 };\n    this.channels = [];\n    this.defaults = [\n      \"square\",\"sawtooth\",\"triangle\", \"sine\",\n      \"noise\",\"square\",\"sawtooth\", \"triangle\"\n    ]\n\n    this.masterGain = this.audioCtx.createGain();\n    this.masterGain.connect( this.audioCtx.destination );\n    this.masterGain.gain.value=0.0;\n    this.channelCount = 8;\n\n    for( var i=0; i<this.channelCount; i++) {\n        this.channels.push( new MrBeepChannel( this.audioCtx, this.defaults[ i ], this.masterGain, this._int_v2g ) );\n    }\n\n    this.FLR = 10;\n    this.FS = 11;\n    this.VLR = 20;\n    this.VS = 21;\n  }\n\n  _int_log10(x) {\n    return Math.log(x)/Math.LN10;\n  }\n\n  _int_v2g(v) {\n    //var x = -this._int_log10( 1-(v*.9));\n    var x = -Math.log( 1-(v*.9) )/Math.LN10;\n\n    console.log( v, \"->\", x);\n    return x;\n  }\n\n  reset() {\n    for( var i=0; i<this.channelCount; i++) {\n        this.channels[i].setVolume( 0 );\n        this.channels[i].clearEffect();\n    }\n  }\n\n  setVolume( v ) {\n    //var x = -this._int_log10( 1-(l*.9));//Math.pow(10, (decibel_level / 20));\n\n    this.masterGain.gain.value= this._int_v2g( v );\n  }\n\n  channelVolume( channel, x ) {\n    this.channels[ channel ].setVolume( x );\n  }\n\n  channelFrequency( channel, f ) {\n    this.channels[ channel ].setFrequency( f );\n  }\n\n  channelSetAttackDecayRelease( channel, attackT, decayT, releaseT ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].setAttackDecayRelease( attackT, decayT, releaseT );\n  }\n\n  channelSetSustainLevel( channel,  sustainV ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].setSustainLevel( sustainV );\n  }\n\n\n  playBeep( channel, frequency, duration ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].playBeep( frequency, duration );\n  }\n\n  playSound( channel, frequency, duration ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].playSound( frequency, duration );\n  }\n\n\n  startSound( channel, frequency ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].startSound( frequency );\n  }\n\n  releaseSound( channel, frequency ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].releaseSound( frequency );\n  }\n\n  addEffect( channel,  type , value, time ) {\n    this.channels[ channel ].addEffect( type , value, time );\n  }\n\n  clearEffect( channel ) {\n    this.channels[ channel ].clearEffect();\n  }\n\n  playEffect( channel, freq ) {\n    this.channels[ channel ].playEffect( freq );\n  }\n}\n\nexport { MrBeep as default};\n","class DATA {\n\n\tconstructor() {\n\n\t\t//opt: \"name\", means use as suffix string call a handler in basicmenu/apps main class\n\t\t//opt: \"@name\", means, call a handler in basic/apps main class\n\n\t\tthis.options = {};\n\n\t\tvar opts = [];\n    opts.push({opt: \"file\", display: \"File\" });\n    opts.push({opt: \"copy\", display: \"Copy\" });\n\t\topts.push({opt: \"basic\", display: \"Basic\" });\n\t\topts.push({opt: \"screeneditor\", display: \"Screen\" });\n\t\topts.push({opt: \"help\", display: \"Help\" });\n\n    this.options[\"main\"] = opts;\n\n    opts = [];\n    opts.push({opt: \"@requestClipboardCopy\", display: \"Copy program\" });\n\t\tif( navigator.clipboard.readText ) {\n\t\t\topts.push({opt: \"pasteFromClip\", data: \"pgm\", display: \"Paste program\" });\n\t\t} else {\n\t\t\topts.push({opt: \"pasteBox\", data: \"pgm\", display: \"Paste program\" });\n\t\t}\n    opts.push({opt: \"@requestClipboardCopyScreen\", display: \"Copy screen data\" });\n    if( navigator.clipboard.readText ) {\n\t\t\topts.push({opt: \"pasteFromClip\", data: \"txt\", display: \"Paste text\" });\n\t\t} else {\n\t\t\topts.push({opt: \"pasteBox\", data: \"txt\", display: \"Paste text\" });\n\t\t}\n    this.options[\"copy\"] = opts;\n\n    opts = [];\n\t\topts.push({opt: \"@requestRun\", display: \"Run\" });\n\t\topts.push({opt: \"@requestStop\", display: \"Stop\" });\n    opts.push({opt: \"@requestList\", display: \"List Program\" });\n\t\topts.push({opt: \"@requestVars\", display:  \"Debug: List Variables\" });\n\t\topts.push({opt: \"@requestDataBlocks\", display:  \"Debug: List Data-blocks\" });\n\t\topts.push({opt: \"@requestRenumber\", display:  \"Renumber Program\" });\n\t\topts.push({opt: \"@requestNew\", display:  \"New Program\" });\n    this.options[\"basic\"] = opts;\n\n    opts = [];\n\t\topts.push({opt: \"@requestListDirectory\", display: \"List directory\" });\n\t\topts.push({opt: \"@requestFileSystems\", display: \"List file systems\" });\n\t\topts.push({opt: \"@requestListScripts\", display: \"List embedded scripts\" });\n    opts.push({opt: \"@requestExport\", display: \"Export Basic Program\" });\n    this.options[\"file\"] = opts;\n\n\t\topts = [];\n\t\topts.push({opt: \"@requestResetConsole\", display: \"Reset Console\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 1, bg:0, border: 10 }, display: \"Dark Mode 1\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 14, bg:0, border: 0 },display: \"Dark Mode 2\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 5, bg:0, border: 10 },display: \"Dark Mode 3\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:8, border: 0 },display: \"Light Mode 1\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:8, border: 10 },display: \"Light Mode 2\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:1, border: 10 },display: \"Light Mode 3\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 15, bg:4, border: 15 },display: \" C64 Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 14, bg:10, border: 14 },display: \"C128 Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 4, bg:1, border: 6 },display: \"Vic20 Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:9, border: 9 },display: \"ZX-Spectrum Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 1, bg:4, border: 4 },display: \"MSX Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 1, bg:0, border: 0 },display: \"BBC Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 3, bg:0, border: 0 },display: \"Apple2 Theme\" });\n    this.options[\"screeneditor\"] = opts;\n\n\t\topts = [];\n\t\topts.push({opt: \"@requestHelp\", display: \"Basic Commands\" });\n\t\topts.push({opt: \"@requestAbout\", display: \"About\" });\n    this.options[\"help\"] = opts;\n\n\t}\n\n\tgetOptions() {\n\t\treturn this.options;\n\t}\n}\n\nexport { DATA as default};\n","class HANDLERS {\n\n\tconstructor( menuSys ) {\n\t\tthis.menuSys = menuSys;\n\t\tthis.sys = this.menuSys.sys;\n\n\t}\n\n\tsetBasic() {\n\t\tthis.basic = this.sys.m.basic;\n\t}\n\n\tdoExposedAction( id, data ) {\n\n\t\tif( id == \"paste\" ) {\n\t\t\tif( !navigator.clipboard.readText ) {\n\t\t\t\tthis.handler_pasteBox( data );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.handler_pasteFromClip( data );\n\t\t\t}\n\t\t}\n\t}\n\n\thandler_pasteBox( type ) {\n\n\t\tthis.menuSys.pastebox.style.display = \"block\";\n\t\tthis.menuSys.pasteArea.value = this.menuSys.defaultPasteText;\n\n\t\tthis.oldInnerText = this.menuSys.pasteArea.innerText;\n\n\t\tthis.input = this.sys.input;\n    this.input.unsetInputHandler();\n\n\t\tthis.menuSys.clearMenu();\n\t\tthis.menuSys.hideMenu();\n\n\t\tthis.menuSys.pasteArea.style.color = this.menuSys.color;\n\t\tthis.menuSys.pasteArea.style.backgroundColor = this.menuSys.bgColor;\n\n\t\tthis.menuSys.pasteArea.focus();\n\t\tthis.menuSys.pasteArea.select();\n\n\t\tthis.sys.out.hideInner();\n\n\t\tvar __this = this;\n\n\t\tthis.pasteHandler = function ( e ) {\n\t\t\tsetTimeout(__this.pasteHandler2 , 10 );\n\t\t}\n\n\t\tthis.pasteHandler2 = function( e ) {\n\t\t\t__this.sys.out.showInner();\n\t\t\t__this.menuSys.unhideMenu();\n\t\t\t__this.basic.setInput( __this.sys.input );\n\t\t\t__this.menuSys.pasteArea.removeEventListener( \"paste\", __this.pasteHandler );\n\t\t\t__this.menuSys.pastebox.style.display = \"none\";\n\t\t\tif( __this.oldInnerText != __this.menuSys.pasteArea.value ) {\n\t\t\t\t__this.basic.pasteTextFromClipboard( __this.menuSys.pasteArea.value, type );\n\t\t\t}\n\n\t\t}\n\n\t\tthis.menuSys.pasteArea.addEventListener(\"paste\", this.pasteHandler);\n\t\t//this.menuSys.pasteArea.addEventListener(\"paste\", this.pasteHandler);\n\t}\n\n\n\thandler_pasteFromClip( type ) {\n\t\tvar __this = this;\n\n\t\tif( !navigator.clipboard.readText ) {\n\t\t\talert(\"Clipboard reading is disabled in your browser\\nYou have to enable it to make this feature work.\");\n\t\t}\n\n\t\tnavigator.clipboard.readText().then(\n\t\t\t(clipText) => {\n\t\t\t\t__this.basic.pasteTextFromClipboard( clipText, type );\n\t\t\t} );\n\n\t}\n\n}\n\nexport { HANDLERS as default};\n","const staticLoading = true;\n\nimport  BootCfg   from        './bootcfg.js';\nimport  BootSys   from        './bootsys.js';\n\nimport  displaymodes   from        './modules/displaymodes.js';\nimport  tablecon   from        './modules/tablecon.js';\nimport  canvas   from        './modules/canvas.js';\nimport mrbeep  from       './modules/mrbeep/module.js';\nimport  simplewarning  from   './modules/simplewarning.js';\nimport  privwarning from     './modules/privwarning.js';\nimport  mutedinput from      './modules/mutedinput.js';\nimport domelinput from      './modules/domelinput.js';\nimport htmlwrapper from     './modules/htmlwrapper.js';\nimport sessionfs  from       './modules/fs/sessionfs.js';\nimport lfs  from             './modules/fs/lfs.js';\nimport ramfs  from           './modules/fs/ramfs.js';\nimport qfs  from             './modules/fs/qfs.js';\nimport scripturl  from       './modules/fs/scripturl.js';\nimport basic from           './modules/basic/module.js';\nimport basicmenu from           './modules/basicmenu/module.js';\n\nvar bootCfg = new BootCfg(  );\nvar boot = new BootSys( bootCfg, staticLoading );\nvar sys = boot.getSys();\n\n\nboot.dep = {};\nboot.i = {}\nboot.i.displaymodes = displaymodes;\nboot.i.tablecon = tablecon;\nboot.i.canvas = canvas;\nboot.i.mrbeepaudio = mrbeep;\nboot.i.simplewarning = simplewarning;\nboot.i.priv = privwarning;\nboot.i.mutedinput = mutedinput;\nboot.i.domelinput = domelinput;\nboot.i.htmlwrapper = htmlwrapper;\nboot.i.basic = basic;\nboot.i.basicmenu = basicmenu;\nboot.i.sfs = sessionfs\nboot.i.cache = lfs;\nboot.i.ramfs = ramfs;\nboot.i.script = scripturl;\nboot.i.qfs = qfs;\nboot.dep.qfs = [ \"ramfs\", \"cache\", \"sfs\", \"script\" ];\nboot.dep.basic = [ \"canvas\", \"tablecon\", \"displaymodes\", \"mrbeepaudio\", \"qfs\", \"htmlwrapper\", \"basicmenu\" ];\n\nboot.initSimpleLogging();\n\n/* Instantiate modules */\nfunction addModule( m, toList, checkL ) {\n\n  if( checkL >= 5 ) {\n    var tmp = 1;\n    console.log(\"HALT, probably dependency recursion detected\" );\n    throw \"HALT, probably dependency recursion detected\";\n    return;\n  }\n\n  console.log(\" dependencies for \" + m + \" checkL=\" + checkL );\n  if( boot.dep[ m ]) {\n    console.log(\"FOUND DEPENDENCY LIST for \" + m );\n    var deps = boot.dep[ m ];\n    for( var j=0;j<deps.length;j++) {\n      console.log(\" add dependency:  \" + deps[ j ] );\n      addModule( deps[j], mods, checkL + 1 );\n    }\n  }\n\n  var exists = false;\n  for( var ci=0;ci<toList.length;ci++) {\n    if( toList[ ci ] == m ) {\n      exists = true;\n      return;\n    }\n  }\n\n  console.log(\"ADD MODULE \" + m );\n  toList.push( m );\n}\n\nvar mods0 = Object.getOwnPropertyNames( boot.i );\nvar mods = [];\nfor( var i=0;i<mods0.length;i++) {\n  var m = mods0[i];\n  if( mods0[ i ]  === undefined ) {\n    continue;\n  }\n\n\n  addModule( m, mods, 0 );\n\n}\n\n\nfor( var i=0;i<mods.length;i++) {\n  console.log(\"construct \" + mods[ i ] );\n  boot.m[ mods[i] ] = new boot.i[ mods[i] ]( sys, boot.dep[ mods[i] ] );\n}\n\nsys.audio = sys.m.mrbeepaudio;\n\nsys.init.queuedMessages = sys.nulcon;\nsys.init.conStyle = boot.conStyle;\nsys.init.displayMode = boot.displayMode;\nsys.m = boot.m;\nsys.fs =  sys.m.qfs;\nsys.m.displaymodes.setMode( boot.displayMode, sys.m.basicmenu );\nboot.out = sys.out;\n\n\n/* Initialize modules */\nfor( var i=0;i<mods.length;i++) {\n  console.log(\"init \" + mods[ i ] );\n  boot.m[ mods[i] ].init();\n}\n\n/* Get the boot script */\n\ntry {\n\n\n  var script = boot.rootScript.dataset.script;\n  if( script == null ) { script = \"autorun.bas\"; }\n  boot.onReady = \"script://\" + script;\n}\ncatch ( e ) {\n  alert( \"HALT: Boot-Onready Handler not found!!\");\n  throw \"HALT - Neither root-script-attribute 'basScript' or constant 'BOOT_ONREADY' defined.\";\n}\n\n\nsys.nulcon = undefined;\nboot.input = boot.m.domelinput;\nconsole.log( \"boot.basic=\",boot.basic );\nboot.m.basic.setInput( boot.input );\nboot.m.basic.loadApp(  boot.onReady );\n","class BOOTCFG {\n\n  constructor() {\n\n    this.fs = {};\n    this.fs.default = \"cache\";\n\n    this.display = {}\n    this.display.mode = 100;\n\n    this.warnings = {};\n    this.warnings.privacyMute = true;\n\n    this.subSys = \"S3\";\n\n    this.keyboard = {};\n    this.keyboard.allowDefault = {};\n    var allowDefault = this.keyboard.allowDefault;\n    allowDefault.all = false;\n    allowDefault.events = [];\n\n    var adEvents = allowDefault.events;\n    adEvents.push(\"F5\");\n    adEvents.push(\"F12\");\n\n  }\n\n}\n\nexport { BOOTCFG as default};\n","class COMMONBOOTLOADER {\n\n  constructor( cfg, staticFlag ) {\n\n    var sys = {};\n    this.m = {};\n    sys.m = this.m;\n    sys.bootCfg = cfg;\n    this.sys = sys;\n    sys.init = {};\n    sys.staticTarget = staticFlag;\n    sys.headerElement = null;\n\n    sys.domContainer = document.createElement(\"div\");\n    document.body.appendChild( sys.domContainer );\n\n    sys.SIG = \"BOSS64\";\n    sys.SUBSYS = sys.bootCfg.subSys;\n    sys.VERSION = \"0.2\";\n    sys.CODENAME = \"Papa Smurf\";\n\n    sys.nulcon = [];\n    sys.nulcon.push(\"Starting System...\");\n    sys.nulcon.push(\"SYS version \" + sys.VERSION);\n    sys.nulcon.push(\"SYS name \" + sys.SIG + \":\" + sys.SUBSYS + \" \\\"\" + sys.CODENAME + \"\\\"\");\n    sys.nulcon.push(\"SYS release name \\\"\" + sys.CODENAME + \"\\\"\");\n    sys.nulcon.push(\"Starting Boot Sequence...\");\n\n    var rootScript = document.getElementById(\"boot\");\n    this.rootScript = rootScript;\n\n    this.displayMode = parseInt( rootScript.dataset.mode );\n    if( isNaN( this.displayMode ) ) {\n      this.displayMode = cfg.display.mode;\n    }\n\n    this.bootMode = rootScript.dataset.boot;\n\n    this.dynamicMinTarget = false;\n    if( this.bootMode ) { this.dynamicMinTarget = (this.bootMode.indexOf(\"min\") >= 0) };\n    sys.dynamicMinTarget = this.dynamicMinTarget;\n\n    this.bootDebug = (this.bootMode.indexOf(\"debug\") >= 0);\n\n    if( this.bootDebug ) {\n      sys.nulcon.push(\"Enabled debug mode\");\n    }\n\n    if( this.dynamicMinTarget ) {\n      sys.nulcon.push(\"Enabled minimal target settings for dynamic mode\");\n    }\n\n    document.body.style.backgroundColor = \"#444444\";\n  }\n\n  getSys() {\n    return this.sys;\n  }\n\n  initSimpleLogging() {\n\n    /*primitive logging, before it is setup fully*/\n\n    var sys = this.sys;\n\n    sys.out = {\n      buf: \"\"\n    };\n\n    var out = sys.out;\n\n    sys.out.getAll = function() {\n      return out.buf;\n    }\n\n    sys.out.writeln = function( txt ) {\n      var s = \"$\" + txt +\"\\n\";\n      out.buf += s;\n      console.log( s );\n    }\n\n    out.writeln( \"$Init logging...\" );\n\n    sys.rawlog = function( type, array ) {\n\n      var line = array;\n      var txt = \"\";\n\n      txt +=  ( type + \": \" );\n\n      for( var j=0; j<line.length; j++) {\n          var sep = \" \";\n          if( j==0 ) { sep = \"\" };\n          txt += ( sep + line[j] );\n      }\n\n      sys.out.writeln( txt );\n\n    }\n\n    sys.rawlogcon = function( type, array ) {\n\n      var line = array;\n      var txt = \"\";\n\n      txt +=  ( type + \": \" );\n\n      for( var j=0; j<line.length; j++) {\n          var sep = \" \";\n          if( j==0 ) { sep = \"\" };\n          txt += ( sep + line[j] );\n      }\n\n      console.log( txt );\n\n    }\n\n    sys.log = function() {\n      var args = Array.prototype.slice.call(arguments);\n      sys.rawlog( \"info\", args );\n      console.log.apply(console, args);\n    }\n\n    sys.logwarn = function() {\n      var args = Array.prototype.slice.call(arguments);\n      sys.rawlog( \"warn\", args );\n      console.warn(args);\n    }\n\n    sys.logerr = function() {\n      var args = Array.prototype.slice.call(arguments);\n      sys.rawlog( \"error\", args );\n      console.error.apply(console, args);\n    }\n\n    this.logerr = sys.logerr;\n    this.logwarn = sys.logwarn;\n    this.log = sys.log;\n\n    if( !this.bootDebug ) {\n      sys.rawlog = sys.rawlogcon;\n    }\n  }\n\n\n}\n\nexport { COMMONBOOTLOADER as default};\n","class KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.initialized = false;\n\t\tthis.default = 100;\n\n\t\tthis.sys = sys;\n\t\tthis.drivers = [];\n\n\t}\n\n\tinit() {\n\n\t\t\tif( this.initialized ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.drivers[\"text\"] = this.sys.m.tablecon;\n\t\t\tthis.drivers[\"canvas\"] = this.sys.m.canvas;\n\n\t\t\tthis.modes = [];\n\n\t\t\tvar textmode1 = \"text:80x30\";\n\t\t\tvar textmode2 = \"text:80x50\";\n\t\t\tvar textmode3 = \"text:80x150\";\n\n\t\t\tvar fontSmall = \t\"font=14\";\n\t\t\tvar fontMedium1 = \"font=16\";\n\t\t\tvar fontMedium2 = \"font=18\";\n\t\t\tvar fontBig = \t\t\"font=22\";\n\n\t\t\tthis.modes[0] = textmode1 + \":\" + fontSmall;\n\t\t\tthis.modes[1] = textmode1 + \":\" + fontMedium1;\n\t\t\tthis.modes[2] = textmode1 + \":\" + fontMedium2;\n\t\t\tthis.modes[3] = textmode1 + \":\" + fontBig;\n\n\t\t\tthis.modes[4] = textmode2 + \":\" + fontSmall;\n\t\t\tthis.modes[5] = textmode2 + \":\" + fontMedium1;\n\t\t\tthis.modes[6] = textmode2 + \":\" + fontMedium2;\n\t\t\tthis.modes[7] = textmode2 + \":\" + fontBig;\n\n\t\t\tthis.modes[8] = textmode3 + \":\" + fontSmall;\n\t\t\tthis.modes[9] = textmode3 + \":\" + fontMedium1;\n\t\t\tthis.modes[10] = textmode3 + \":\" + fontMedium2;\n\t\t\tthis.modes[11] = textmode3 + \":\" + fontBig;\n\n\t\t\tthis.modes[100] = \"canvas:%95\";\n\n\t\t\tthis.modes[101] = \"canvas:%85\";\n\t\t\tthis.modes[102] = \"canvas:%75\";\n\t\t\tthis.modes[103] = \"canvas:%65\";\n\t\t\tthis.modes[104] = \"canvas:%45\";\n\t\t\tthis.modes[105] = \"canvas:%35\";\n\t\t\tthis.modes[106] = \"canvas:%25\";\n\t\t\tthis.modes[107] = \"canvas:%15\";\n\n\t\t\tthis.modes[110] = \"canvas:%%95,25\";\n\t\t\tthis.modes[111] = \"canvas:%%95,50\";\n\t\t\tthis.modes[120] = \"canvas:%%25,95\";\n\t\t\tthis.modes[121] = \"canvas:%%50,95\";\n\n\t\t\tthis.modes[200] = \"canvas:1024x768\";\n\n\t\t\tthis.modes[500] = \"canvas:800x600\";\n\t\t\tthis.modes[501] = \"canvas:640x512\";\n\t\t\tthis.modes[502] = \"canvas:640x480\";\n\t\t\tthis.modes[503] = \"canvas:640x400\";\n\t\t\tthis.modes[504] = \"canvas:320x512\";\n\t\t\tthis.modes[505] = \"canvas:320x400\";\n\t\t\tthis.modes[506] = \"canvas:320x256\";\n\t\t\tthis.modes[507] = \"canvas:320x200\";\n\n\t\t\tthis.menuCreated = false;\n\t}\n\n\tgetDriver() {\n\t\treturn this.currentDriver;\n\t}\n\n\tgetMode( x ) {\n\t\tthis.init();\n\n\t\tif( ! x ) {\n\t\t\treturn getMode( this.default );\n\t\t}\n\t\treturn this.modes[ x ];\n\t}\n\n\n\tgetModes() {\n\t\treturn this.modes;\n\t}\n\n\tgetCurrentMode() {\n\t\treturn this.currentMode;\n\t}\n\n\tsetMode( x, menu ) {\n\t\tthis.init();\n\n\n\t\tif( menu ) {\n\t\t\tthis.menu = menu;\n\t\t}\n\n\t\tif( x === undefined || x === null || x === -1 || Number.isNaN( x ) ) {\n\t\t\tthis.setMode( this.default, menu );\n\t\t}\n\n\t\tvar dc = this.getDeviceConfig( x );\n\t\tif(! dc ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cm = this.currentMode;\n\t\tif( ! (cm === undefined || cm === null || cm === -1 || Number.isNaN( x ) ) ) {\n\t\t\t\tthis.endMode( this.currentMode );\n\t\t\t\tthis.menuCreated = false;\n\t\t}\n\n\t\tif( !this.menuCreated ) {\n\t\t this.menu.create();\n\t\t this.menuCreated = true;\n\t\t}\n\n\t\tdc.device.initMode( dc.config, this.menu );\n\t\tthis.sys.out =  dc.device;\n\n\t\tthis.sys.out.notifyOnClick( this.sys.m.basicmenu, \"onDeselect\" );\n\n\t\tthis.currentMode = x;\n\t\tthis.currentDriver = dc.device;\n\n\t}\n\n\tendMode() {\n\n\t\tthis.init();\n\n\t\tif( !this.currentDriver ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar dev = this.currentDriver;\n\n\t\tdev.destroy();\n\t\tthis.menu.destroy();\n\n\t\tthis.currentMode = undefined;\n\t\tthis.currentDriver = undefined;\n\n\t}\n\n\tgetDeviceConfig( x ) {\n\n\t\tif( x === undefined || x === null || x === -1 || Number.isNaN( x ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif( !this.modes[ x ] ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar tmp = this.modes[ x ].split(\":\");\n\t\tif( tmp.length < 2 ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar driver = tmp[0];\n\t\tif( !this.drivers[ driver ] ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar driverDevice = this.drivers[ driver ];\n\n\t\tvar param = tmp.splice(1);\n\n\t\treturn {\n\t\t\tdevice: driverDevice,\n\t\t\tconfig: param\n\t\t};\n\n\t}\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.cursorOn = false;\n\t\tthis.cols = 80;\n\t\tthis.rows = 30;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.hidden = false;\n\t\tthis.blinking = true;\n\t\tthis.reverse = false;\n\n\t\tthis.outColors ={};\n\n\t\tthis.fontSizeInt = 18;\n\t\tthis.fontSizeCSS = this.fontSizeInt + \"px\";\n\t\tthis.fontFamily = \"monospace\";\n\n\n\t\tthis.htmlPalette = [\n\t\t\t\"#000000\",\n\t\t\t\"#ffffff\",\n\t\t\t\"#ee2222\",\n\t\t\t\"#22ee22\",\n\t\t\t\"#2222ee\",\n\t\t\t\"#eeee22\",\n\t\t\t\"#22eeee\",\n\t\t\t\"#ee22ee\",\n\t\t\t\"#aaaaaa\",\n\t\t\t\"#777777\",\n\t\t\t\"#444444\",\n\t\t\t\"#FFAC1C\",\n\t\t\t\"#5C3317\",\n\t\t\t\"#F88379\",\n\t\t\t\"#79F883\",\n\t\t\t\"#8379F8\"\n\n\t\t];\n\n\t\tthis.outColors.txtBgColor= this.htmlPalette[0];\n\t\tthis.outColors.txtColor = this.htmlPalette[5];\n\n\t}\n\n\thtmlColor( ix ) {\n\t\treturn this.htmlPalette[ ix ];\n\t}\n\n\n\tdestroy() {\n\t\t\tthis.outDiv0.remove();\n\t\t\tthis.cvs = null;\n\t\t\tthis.cvs2 = null;\n\t\t\tthis.ctx = null;\n\t\t\tthis.ctx2 = null;\n\n\t\t\tthis.rowel = undefined;\n\t\t\tthis.cellel = undefined;\n\n\t\t\tif( this.blinkInterval ) {\n\t\t\t\tclearInterval ( this.blinkInterval );\n\t\t\t\tthis.blinkInterval = undefined;\n\t\t\t}\n\t\t}\n\n\t\tinit() {\n\t\t}\n\n\t\tgetColumCount() {\n\t\t\treturn this.cols;\n\t\t}\n\n\t\tgetRowCount() {\n\t\t\treturn this.rows;\n\t\t}\n\n\t\tgetDimensions() {\n\t\t\t\treturn [this.cols, this.rows ];\n\t\t}\n\n\t\tinitMode( m, headerElementManager ) {\n\n\t\t\tvar sys = this.sys;\n\t\t\tvar msgs = sys.init.queuedMessages;\n\n\t\t\tsys.init.inputElement = window;\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.blinking = true;\n\n\t\t\tvar tmp = m[0].split(\"x\");\n\t\t\tif( tmp.length == 2) {\n\t\t\t\tthis.rows = parseInt( tmp[1] );\n\t\t\t\tthis.cols = parseInt( tmp[0] );\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttmp = m[1].split(\"=\");\n\t\t\tif( tmp.length == 2) {\n\n\t\t\t\tthis.fontSizeInt = parseInt( tmp[1] );\n\t\t\t\tthis.fontSizeCSS = this.fontSizeInt + \"px\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.colsPercentage = (1/this.cols) * 100;\n\t\t\tthis.outColors.txtBgColor = this.htmlPalette[ 4 ];\n\t\t\tthis.outColors.txtColor = this.htmlPalette[ 1 ];\n\n\t\t\t/* Build DOM */\n\n\t\t\tthis.outDiv0 = document.createElement(\"div\");\n\t\t\tthis.outDiv1 = document.createElement(\"div\");\n\n\t\t\tthis.outEl = document.createElement(\"table\");\n\t\t\tthis.outEl.value = \"\";\n\n\t\t\tfunction getTextOfSelection () {\n\t\t\t  var range;\n\t\t\t  if (document.selection && document.selection.createRange) {\n\t\t\t    range = document.selection.createRange();\n\t\t\t    return range.toString();\n\t\t\t  }\n\t\t\t  else if (window.getSelection) {\n\t\t\t    var selection = window.getSelection();\n\t\t\t    if (selection.rangeCount > 0) {\n\t\t\t      range = selection.getRangeAt(0);\n\t\t\t\t\t\tconst documentFragment = range.cloneContents();\n\n\t\t\t\t\t\tvar rows = documentFragment.childNodes;\n\t\t\t\t\t\tvar text = \"\";\n\t\t\t\t\t\tfor( var rix=0; rix< rows.length ; rix++ ) {\n\t\t\t\t\t\t\tvar r = rows[rix];\n\t\t\t\t\t\t\tif( text != \"\" ) {\n\t\t\t\t\t\t\t\ttext += \"\\n\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar cols = r.childNodes;\n\t\t\t\t\t\t\tfor( var cix=0; cix< cols.length ; cix++ ) {\n\t\t\t\t\t\t\t\tvar c = cols[cix];\n\t\t\t\t\t\t\t\ttext += c.firstChild.data;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn text;\n\t\t\t    }\n\t\t\t    else {\n\t\t\t      return '';\n\t\t\t    }\n\t\t\t  }\n\t\t\t  else {\n\t\t\t    return '';\n\t\t\t  }\n\t\t\t}\n\n\t\t\tvar __this = this;\n\n\t\t\tthis.outDiv0.addEventListener('copy', (event) => {\n\n\t\t\t\tvar sel = getTextOfSelection();\n\n\t\t\t\tevent.clipboardData.setData(\"text/plain\", sel );\n\t\t\t  event.preventDefault();\n\n\t\t\t});\n\n\t\t\tthis.table =  this.outEl;\n\t\t\tthis.table.style.borderCollapse = \"collapse\";\n\t\t\tthis.table.style.borderSpacing = 0;\n\t\t\tthis.table.style.backgroundColor = this.outColors.txtBgColor;\n\n\t\t\tthis.table.style.resize = \"none\";\n\t\t\tthis.table.style.fontFamily = this.fontFamily;\n\t\t\tthis.table.style.fontSize = this.fontSizeCSS;\n\t\t\tthis.table.style.tableLayout = \"fixed\";\n\t\t\tthis.table.readOnly = true;\n\t\t\tthis.table.textAlign = \"center\";\n\n\t\t\tthis.rowel = [];\n\t\t\tthis.cellel = [];\n\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar tr =  document.createElement(\"tr\");\n\t\t\t\ttr.style.padding = \"0px\";\n\t\t\t\ttr.style.maxHeight = this.fontSizeInt;\n\t\t\t\ttr.style.height = this.fontSizeInt;\n\n\t\t\t\tthis.rowel.push( tr );\n\t\t\t\tthis.outEl.appendChild( tr );\n\t\t\t\tvar rowArray = [];\n\t\t\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\t\t\tvar td =  document.createElement(\"td\");\n\t\t\t\t\t//td.style.width = this.colsPercentage + \"%\";\n\t\t\t\t\t//td.style.overflow = \"hidden\";\n\t\t\t\t\t//console.log( td.style.width );\n\t\t\t\t\ttd.style.padding = \"0px\";\n\t\t\t\t\ttd.style.color = this.outColors.txtColor;\n\t\t\t\t\ttd.style.backgroundColor = undefined;\n\t\t\t\t\ttd.style.textOverflow = \"\";\n\t\t\t\t\ttd.style.whiteSpace= \"nowrap\";\n\t\t\t\t\ttd.style.overflow = \"hidden\";\n\t\t\t\t\ttd.style.maxWidth = this.fontSizeInt;\n\t\t\t\t\ttd.style.maxHeight = this.fontSizeInt;\n\t\t\t\t\t//td.style.width = this.fontSize;\n\t\t\t\t\ttd.style.height = this.fontSizeInt;\n\n\t\t\t\t\ttd.innerHTML = \"&nbsp;\";\n\n\t\t\t\t\trowArray.push( td );\n\t\t\t\t\ttr.appendChild( td );\n\t\t\t\t}\n\t\t\t\tthis.cellel.push( rowArray );\n\t\t\t}\n\n\n\t\t\tdocument.body.appendChild( this.outDiv0 );\n\n\t\t\tthis.outDiv0.style.display = \"table\";\n\t\t\tthis.outDiv0.style.width = \"99%\";\n\t\t\tthis.outDiv0.style.height = \"99%\";\n\t\t\tthis.outDiv0.style.position = \"absolute\";\n\t\t\tthis.outDiv0.style.zIndex = \"10000\";\n\n\t\t\tthis.outDiv1.style.display = \"table-cell\";\n\t\t\tthis.outDiv1.style.verticalAlign = \"middle\";\n\n\t\t\tthis.table.style.marginLeft = \"auto\";\n\t\t\tthis.table.style.marginRight = \"auto\";\n\n\t\t\tthis.outDiv0.appendChild( this.outDiv1 );\n\n\t\t\tif( headerElementManager ) {\n\t\t\t\tthis.headerElementManager = headerElementManager;\n\t\t\t\tthis.outDiv1.appendChild( this.headerElementManager.get() );\n\t\t\t\t//this.headerElementManager.setDimensions( this.fontSizeInt * this.cols, 480 );\n\n\t\t\t\tthis.headerElementManager.enable();\n\t\t\t}\n\n/*\t\t\tif( this.sys.headerElement ) {\n\t\t\t\tthis.outDiv1.appendChild( this.sys.headerElement );\n}*/\n\n\t\t\tthis.outDiv1.appendChild( this.outEl );\n\n\t\t\tif( headerElementManager ) {\n\n\t\t\t\tthis.headerElementManager.setDimensions( this.outEl.clientWidth, 480 );\n\n\t\t\t}\n\n\n\t\t\tthis.outEl.focus( );\n\n\t\t\t this.dirty = true;\n\t\t\t this.dirtyFlags = {\n\t\t\t\t bg: true,\n\t\t\t\t color: true\n\t\t\t }\n\n\t\t\tvar _this = this;\n\t\t\tthis.blinkInterval = \t setInterval(function()  {\n\t\t\t\t \t_this._int_blink();\n\t\t\t\t}, 500);\n\n\t\t\t\tfor( var i=0; i<msgs.length; i++) {\n\t\t\t\t\tthis.writeln( msgs[ i ]);\n\t\t\t\t}\n\n\t\t\t this.sys.log(\"TBCON Ready.\");\n\t}\n\n\tnative( operation ) {\n\t\tthrow \"@Operation \" + operation.action + \" not supported on TABLECON\";\n\t}\n\n\tblinkMode( mode ) {\n\t\tthis.blinking = mode;\n\t}\n\n\tnotifyOnClick() {\n\n\t}\n\n\thasPixels() {\n\t\treturn false;\n\t}\n\n\t_int_updateArea( srccells, x0, y0, x1, y1 ) {\n\n\n\t\tfor( var x=x0; x<=x1; x++) {\n\t\t\tfor( var y=y0; y<=y1; y++) {\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tvar src = srccells[ y-y0 ][ x-x0 ];\n\n\t\t\t\tif( src.txt == \" \") {\n\t\t\t\t\t\tcell.innerHTML = \"&nbsp;\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\tcell.textContent = src.txt;\n\t\t\t\t}\n\t\t\t\tcell.style.color =  this.htmlPalette[ src.fg ];\n\t\t\t\tcell.style.backgroundColor = this.htmlPalette[ src.bg ];\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\tupdate( p, list ) {\n\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tthis.x = p.cx;\n\t\tthis.y = p.cy;\n\t\tif(\n\t\t\tthis.x<0 || this.y<0 ||\n\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t) {\n\t\t\tconsole.log(\"ouch\");\n\n\t\t}\n\n\t\tthis.outColors.txtBgColor= this.htmlPalette[ p.bg ];\n\t\tthis.outColors.txtColor = this.htmlPalette[ \tp.fg];\n\n\t\tfor( var i=0; i< list.length; i++) {\n\n\t\t\tvar el = list[ i ];\n\t\t\tthis._int_updateArea( el.cells, el.x1, el.y1, el.x2, el.y2 );\n\n\t\t}\n\n\n\t}\n\n\tupdateAll( p, srccells ) {\n\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tthis.x = p.cx;\n\t\tthis.y = p.cy;\n\n\t\tif(\n\t\t\tthis.x<0 || this.y<0 ||\n\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t) {\n\t\t\tconsole.log(\"ouch\");\n\n\t\t}\n\t\tthis.outColors.txtBgColor= this.htmlPalette[ p.bg ];\n\t\tthis.outColors.txtColor = this.htmlPalette[ \tp.fg];\n\n\t\tthis._int_updateArea( srccells, 0,0, this.cols -1, this.rows -1 );\n\n\t}\n\n\n\thide() {\n\t\tif( !this.hidden ) {\n\t\t\tthis.outDiv0.hidden = true;\n\t\t\tthis.hidden = true;\n\t\t}\n\t}\n\n\tshow() {\n\t\tif( this.hidden ) {\n\t\t\tthis.outDiv0.hidden = false;\n\t\t\tthis.hidden = false;\n\t\t}\n\t}\n\n\n\tgetElement() {\n\t\treturn null;\n\t}\n\n\n\t_int_blinkOff() {\n\n\t\tif( !this.cursorOn ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cursorOn = false;\n\n\t\tvar cell = this.cellel[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tcell.style.color = this.outColors.txtColor;\n\t\tcell.style.backgroundColor = this.outColors.txtBgColor;\n\n\n\t}\n\n\t_int_blink() {\n\n\t\tif( ! this.blinking ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cell;\n\t\ttry {\n\t\t\t\tcell = this.cellel[ this.y ][ this.x ];\n\t\t}\n\t\tcatch {\n\t\t\tcell = null;\n\t\t}\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"Blink exception: Cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cursorOn = !this.cursorOn;\n\n\t\tif( !this.cursorOn ) {\n\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\tcell.style.backgroundColor = this.outColors.txtBgColor;\n\t\t}\n\t\telse {\n\t\t\tcell.style.backgroundColor = this.outColors.txtColor;\n\t\t\tcell.style.color = this.outColors.txtBgColor;\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tcell.innerHTML = \"&nbsp;\";\n\t\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\t\tcell.style.backgroundColor = this.outColors.txtBgColor;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\t__int_nl() {\n\t\t\tthis.x = 0;\n\t\t\tthis.y ++;\n\t\t\tif( this.y >= this.rows ) {\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis.y = this.rows -1;\n\t\t\t}\n\n\t}\n\n\n\twriteln( str ) {\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\t\t\t//console.log( \"writeln\" + str );\n\n\t\t\tfor( var i=0; i<str.length; i++) {\n\t\t\t\tvar c = str.substr(i,1);\n\t\t\t\tthis.__int_write_direct_ch( c );\n\t\t\t}\n\t\t\tthis.__int_nl();\n\t}\n\n\n\t__int_write_direct_ch( ch ) {\n\n\t\tvar cell = this.cellel[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tif( ch == \" \") {\n\t\t\t\tcell.innerHTML = \"&nbsp\";\n\t\t}\n\t\telse {\n\t\t\tcell.innerHTML = ch;\n\t\t}\n\n\t\tif( !this.reverse  ) {\n\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\tcell.style.backgroundColor = undefined;\n\t\t}\n\t\telse {\n\t\t\tcell.style.backgroundColor = this.outColors.txtColor;\n\t\t\tcell.style.color = this.outColors.txtBgColor;\n\t\t}\n\n\t\tthis.x++;\n\t\tif( this.x >= this.cols ) {\n\t\t\tthis.x = 0;\n\t\t\tthis.__int_nl();\n\t\t}\n\t}\n\n\n\n\t__int_scrollDown() {\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tfor( var y=0; y<this.rows-1; y++) {\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tvar cellyp1 = this.cellel[ y+1 ][ x ];\n\n\t\t\t\tcell.textContent = cellyp1.textContent;\n\t\t\t\tcell.style.color = cellyp1.style.color;\n\t\t\t\tcell.style.backgroundColor = cellyp1.style.backgroundColor;\n\n\n\t\t\t}\n\t\t}\n\n\t\tvar y2 = this.rows-1;\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tvar cell = this.cellel[ y2 ][ x ];\n\t\t\tcell.innerHTML = \"&nbsp;\";\n\t\t\tif( !this.reverse  ) {\n\t\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\t\tcell.style.backgroundColor = undefined;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcell.style.backgroundColor = this.outColors.txtColor;\n\t\t\t\tcell.style.color = \"rgba(0,255,0,0.0)\";\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.cursorOn = false;\n\t\tthis.hidden = false;\n\t\tthis.blinking = true;\n\t\tthis.reverse = false;\n\t\tthis.cursorMode = \"insert\";\n\n\t\tthis.colors ={};\n\n\t\tthis.palette = [\n\t\t\t\"#000000\",\n\t\t\t\"#ffffff\",\n\t\t\t\"#ee2222\",\n\t\t\t\"#22aa22\",\n\t\t\t\"#1111cc\",\n\t\t\t\"#eeee22\",\n\t\t\t\"#22eeee\",\n\t\t\t\"#ee22ee\",\n\t\t\t\"#bbbbbb\",\n\t\t\t\"#777777\",\n\t\t\t\"#444444\",\n\t\t\t\"#FFAC1C\",\n\t\t\t\"#5C3317\",\n\t\t\t\"#F88379\",\n\t\t\t\"#79F883\",\n\t\t\t\"#8379F8\"\n\n\t\t];\n\n\n\t\tvar pad2 = function( hs ) {\n\t\t\tvar rv = hs;\n\t\t\twhile ( rv.length < 2 ) {\n\t\t\t\trv = \"0\" + rv;\n\t\t\t}\n\t\t\treturn rv;\n\t\t}\n\n\t\tvar pl = this.palette.length;\n\t\tfor( var i=0; i < pl; i++) {\n\t\t\tvar htmlCol = this.palette[i];\n\t\t\tvar r = pad2( Math.floor(parseInt(htmlCol.substr(1,2),16) / 2).toString(16));\n\t\t\tvar g = pad2( Math.floor(parseInt(htmlCol.substr(3,2),16) / 2).toString(16));\n\t\t\tvar b = pad2( Math.floor(parseInt(htmlCol.substr(5,2),16) / 2).toString(16));\n\t\t\tvar newcolor = \"#\" + r + g + b;\n\t\t\tthis.palette.push( newcolor );\n\n\t\t}\n\n\n\t\tthis.bmPalette = [];\n\t\tfor( var i=0; i<this.palette.length; i++) {\n\t\t\tvar htmlCol = this.palette[i];\n\t\t\tvar r = parseInt(htmlCol.substr(1,2),16)\n\t\t\tvar g = parseInt(htmlCol.substr(3,2),16)\n\t\t\tvar b = parseInt(htmlCol.substr(5,2),16)\n\t\t\tthis.bmPalette.push(\n\t\t\t\t{\n\t\t\t\t\tr:r,g:g,b:b\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\n\t\tthis.defaultTextMode();\n\n\n\t}\n\n\thtmlColor( ix ) {\n\t\treturn this.palette[ ix ];\n\t}\n\n\n\tdestroy() {\n\t\tthis.outDiv0.remove();\n\t\tthis.cvs = null;\n\t\tthis.cvs2 = null;\n\t\tthis.cvsCursor = null;\n\t\tthis.ctx = null;\n\t\tthis.ctx2 = null;\n\t\tthis.ctxCursor = null;\n\t\tthis.cache = null;\n\n\t\tthis.cells = [];\n\n\t\tif( this.blinkInterval ) {\n\t\t\tclearInterval ( this.blinkInterval );\n\t\t\tthis.blinkInterval = undefined;\n\t\t}\n\t}\n\n\tdefaultTextMode() {\n\t\tthis.cols = 80;\n\t\tthis.rows = 30;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\n\t\tthis.fontSize = \"20\";  //16x10, 18x11, 20x12\n\n\t\tthis.fontSizeCSS = this.fontSize + \"px\";\n\t\tthis.fontSizeIntW = 12 ; //Math.floor(parseInt( this.fontSize ) * .7)-1;\n\t\tthis.fontSizeIntH = parseInt( this.fontSize );\n\t\tthis.fontFamily = \"monospace\";\n\n\t\tvar oc = this.colors;\n\t\toc.bg = 0;\n\t\toc.fg = 5;\n\n\t\tthis.colors.bgHTML = this.palette[ oc.bg ];\n\t\tthis.colors.fgHTML = this.palette[ oc.fg ];\n\n\t}\n\n\tinit() {\n\t}\n\n\tinitMode( config, headerElementManager ) {\n\n\t\t\tvar sys = this.sys;\n\t\t\tvar msgs = sys.init.queuedMessages;\n\n\t\t\tthis.cursorOn = false;\n\t\t\tthis.blinking = true;\n\t\t\tthis.reverse = false;\n\n\t\t\tvar w;\n\t\t\tvar h;\n\t\t\tif( config[0].indexOf(\"x\") > 0) {\n\t\t\t\tvar tmp = config[0].split(\"x\");\n\t\t\t\tw = parseInt( tmp[0] );\n\t\t\t\th = parseInt( tmp[1] );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar ww = window.innerWidth;\n\t\t\t\tvar wh = window.innerHeight;\n\n\t\t\t\tif( config[0].startsWith( \"%%\" )) {\n\t\t\t\t\tvar percentages = config[0].substr( 2 ).split(\",\");\n\t\t\t\t\tvar percentagex = percentages[0] / 100;\n\t\t\t\t\tvar percentagey = percentages[1] / 100;\n\t\t\t\t\tw = Math.floor(ww * percentagex);\n\t\t\t\t\th = Math.floor(wh * percentagey);\n\t\t\t\t}\n\t\t\t\telse if( config[0].startsWith( \"%\" )) {\n\t\t\t\t\tvar percentage = config[0].substr( 1 );\n\t\t\t\t\tpercentage = percentage / 100;\n\t\t\t\t\tw = Math.floor(ww * percentage);\n\t\t\t\t\th = Math.floor(wh * percentage);\n\t\t\t\t}\n\n\n\t\t\t}\n\n\n\n\t\t\tthis.cols = Math.floor( w / this.fontSizeIntW );\n\t\t\tthis.rows = Math.floor( h / this.fontSizeIntH );\n\n\t\t\t/* adjust w,h to fit exactly so many cols and rows */\n\t\t\tw = this.cols * this.fontSizeIntW;\n\t\t\th = this.rows * this.fontSizeIntH;\n\n\t\t\tvar fsw = this.fontSizeIntW;\n\t\t\tvar fsh = this.fontSizeIntH;\n\n\t\t\tthis.width = w;\n\t\t\tthis.height = h;\n\n\t\t\tconsole.log(\"Reinit with \" , w, h);\n\t\t\tconsole.log(\" colsXrows \" , this.cols, this.rows);\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.blinking = true;\n\n\t\t\tvar oc = this.colors;\n\t\t\toc.bg = 0;\n\t\t\toc.fg = 5;\n\t\t\toc.bgHTML = this.palette[ oc.bg ];\n\t\t\toc.fgHTML = this.palette[ oc.fg ];\n\n\t\t\tsys.init.inputElement = document.body;\n\n\t\t\tthis.outDiv0 = document.createElement(\"div\");\n\t\t\tthis.outDiv1 = document.createElement(\"div\");\n\t\t\tthis.center = document.createElement(\"center\");\n\n\t\t\tthis.cvs = document.createElement(\"canvas\");\n\t\t\tthis.ctx = this.cvs.getContext('2d', {alpha: false});\n\t\t\tthis.ctx.strokeStyle = '#ffffff';\n\t\t\tthis.cX = 0;\n\t\t\tthis.cY = 0;\n\t\t\t//this.cvs = this.outEl;\n\n\t\t\tthis.cvs2 = document.createElement(\"canvas\"); //only used for scrolling, really needed??\n\t\t\tthis.ctx2 = this.cvs2.getContext('2d');\n\n\t\t\tthis.cvsCursor = document.createElement(\"canvas\");\n\t\t\tthis.ctxCursor = this.cvsCursor.getContext('2d');\n\n\t\t\tthis.cache = [];\n\t\t\tthis.updCtxImageData = { synched: false }\n\n\t\t\tthis.cvs.width = w;\n\t\t\tthis.cvs.height = h;\n\t\t\tthis.cvs2.width = w;\n\t\t\tthis.cvs2.height = h;\n\t\t\tthis.cvsCursor.width = fsw;\n\t\t\tthis.cvsCursor.height = fsh;\n\n\t\t\tthis.offsets = [];\n\n\t\t\tvar ctx = this.ctx;\n  \t\tctx.font =  this.fontSizeCSS + \" \" + this.fontFamily;\n\t\t\t//ctx.font =  \"20px Verdana\";\n \t\t  ctx.textBaseline = \"bottom\";\n\t\t\t//ctx.fontStretch=\"expanded\";\n\n\t\t\tvar str = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890@+_!#%&/()=?*-:;,.'\\\"\";\n\t\t\tvar fsid2 = this.fontSizeIntW / 2;\n\t\t\tfor (const c of str) {\n\t\t\t\tvar tmp3 =  this.ctx.measureText( c )  ;\n\t\t\t\tvar tmp2 =  tmp3.width  ;\n\t\t\t\tvar tmp1 =  (tmp2 / 2) ;\n\t\t\t\tvar tmp0 =  fsid2 - tmp1 ;\n\t\t\t\tvar tmp = Math.floor( tmp0 );\n\t\t\t\tif( tmp<0 ) { tmp = 0; }\n\t\t\t\tthis.offsets[ c ] = tmp;\n \t\t }\n\n\t\t \tthis.oIndicatorChar = \"\\u2595\";\n\t\t  this.oIndicatorSize = this.ctx.measureText( this.oIndicatorChar )  ;\n\t\t\tthis.oIndicatorOffset = Math.floor( fsid2 - (this.oIndicatorSize.width / 2));\n\n\t\t\tthis.cells = [];\n\n\t\t\tvar cols = this.colors;\n\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar rowArray = [];\n\t\t\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\t\t\trowArray.push( { txt: \" \", fg: cols.fg, bg: cols.bg } );\n\t\t\t\t}\n\t\t\t\tthis.cells.push( rowArray );\n\t\t\t}\n\n\t\t\tdocument.body.appendChild( this.outDiv0 );\n\n\t\t\tthis.outDiv0.style.display = \"table\";\n\t\t\tthis.outDiv0.style.width = \"99%\";\n\t\t\tthis.outDiv0.style.height = \"99%\";\n\t\t\tthis.outDiv0.style.position = \"absolute\";\n\t\t\tthis.outDiv0.style.zIndex = \"10000\";\n\n\t\t\tthis.outDiv1.style.display = \"table-cell\";\n\t\t\tthis.outDiv1.style.verticalAlign = \"middle\";\n\n\t\t\tthis.cvs.style.marginLeft = \"auto\";\n\t\t\tthis.cvs.style.marginRight = \"auto\";\n\n\n\t\t\tthis.outDiv0.appendChild( this.outDiv1 );\n\t\t\tthis.outDiv1.appendChild( this.center );\n\t\t\tif( headerElementManager ) {\n\t\t\t\tthis.headerElementManager = headerElementManager;\n\t\t\t\tthis.center.appendChild( this.headerElementManager.get() );\n\t\t\t\tthis.headerElementManager.setDimensions( w, h );\n\n\t\t\t\tthis.headerElementManager.enable();\n\t\t\t}\n\t\t\tthis.center.appendChild( this.cvs );\n\n\n\t\t\tthis.cvs.focus( );\n\n\n \t\t  var _this = this;\n\n\t\t\tthis.blinkInterval = setInterval(function()  {\n\n\t\t\t\t \t_this._int_blink();\n\t\t\t\t}, 300);\n\n\t\t\t\tfor( var i=0; i<msgs.length; i++) {\n\t\t\t\t\tthis.writeln( msgs[ i ]);\n\t\t\t\t}\n\n\t\t\t this.clear();\n\n\n\t\t\t this.sys.log(\"CANVASCON Ready.\");\n\t}\n\n\n\tnotifyOnClick( handler, myFunction ) {\n\n\t\tthis.cvs.addEventListener( \"click\", function() {\n\t\t\thandler[myFunction]();\n\t\t} );\n\n\t}\n\n\thideInner() {\n\t\tthis.cvs.hidden = true;\n\t}\n\nshowInner() {\n\t\tthis.cvs.hidden = false;\n\t}\n\n\thide() {\n\t\tthis.init();\n\t\tif( !this.hidden ) {\n\t\t\tthis.outDiv0.hidden = true;\n\t\t\tthis.hidden = true;\n\t\t}\n\t}\n\n\tshow() {\n\t\tthis.init();\n\t\tif( this.hidden ) {\n\t\t\tthis.outDiv0.hidden = false;\n\t\t\tthis.hidden = false;\n\t\t}\n\t}\n\n\n\tgetElement() {\n\t\treturn null;\n\t}\n\n\n\tblinkMode( mode ) {\n\t\tthis.blinking = mode;\n\t}\n\n\n\t_int_blinkOff() {\n\n\n\t\tif( !this.cursorOn ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\n\t\tvar x0 = (fsw * this.x);\n\t\tvar y0 = fsh * (this.y );\n\n\t\tvar ctx = this.ctx;\n\n\t\tthis.ctx.drawImage(this.cvsCursor, x0, y0);\n\n\t\tthis.cursorOn = false;\n\n\t}\n\n\t_int_storeset_color( fg, bg ) {\n\n\t\tthis.oldfg = fg;\n\t\tthis.oldbg = bg;\n\n\t\tvar oc = this.colors;\n\t\toc.fg = fg;\n\t\toc.bg = bg;\n\t\toc.fgHTML = this.palette[ oc.fg ];\n\t\toc.bgHTML = this.palette[ oc.bg ];\n\n\t}\n\n\n\t_int_restore_color() {\n\n\t\tvar oc = this.colors;\n\t\toc.fg = this.oldfg;\n\t\toc.bg = this.oldbg;\n\t\toc.fgHTML = this.palette[ oc.fg ];\n\t\toc.bgHTML = this.palette[ oc.bg ];\n\n\t}\n\n\t_int_blink() {\n\n\t\tif( ! this.blinking ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar currentCursorIsOn = this.cursorOn;\n\n\t\tthis.cursorOn = !this.cursorOn;\n\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\n\t\tvar x0 = (fsw * this.x);\n\t\tvar y0 = (fsh * this.y);\n\t\tvar oc = this.colors;\n\n\t\tvar ctx = this.ctx;\n\t\tvar cell = this.cells[ this.y][this.x ];\n\n\n\t\tif(  this.cursorOn ) {\n\n\t\t\t\t/* first we backup underneath cursor */\n\t\t\t\tthis.ctxCursor.drawImage(this.cvs, x0, y0, fsw, fsh, 0, 0, fsw, fsh);\n\n\t\t\t\t/* we decide the colors */\n\t\t\t\tvar col = this.colors.fgHTML;\n\t\t\t\tvar index = this.colors.fg;\n\t\t\t\tvar index2 = this.colors.bg;\n\n\t\t\t\t/*if cell.bg == cell.fg, use instead black on white or white on black */\n\t\t\t\tif( cell.fg == cell.bg ) {\n\t\t\t\t\tif( cell.fg == 0 ) {\n\t\t\t\t\t\tindex = 1;\n\t\t\t\t\t\tindex2 = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\tindex2 = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t/*if bg!=fg use cell colors*/\n\t\t\t\t\tindex = cell.fg;\n\t\t\t\t\tindex2 = cell.bg;\n\t\t\t\t}\n\n\t\t\t\tthis.paintCursor( x0, y0, cell.txt, index, index2, this.cursorMode == \"overwrite\" );\n\n\t\t\t\treturn;\n\n\t\t}\n\t\telse {\n\n\t\t\t//cursor off\n\t\t\tthis.ctx.drawImage(this.cvsCursor, x0, y0);\n\n\t\t}\n\n\t}\n\n\t_int_updateArea( srccells, x0, y0, x1, y1 ) {\n\n\t\tvar ctx = this.ctx;\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\t\tvar oc = this.colors;\n\n\t\tvar x; var y;\n\t\ttry {\n\n\t\tfor( y=y0; y<=y1; y++) {\n\t\t\tvar yy = fsh * y;\n\t\t\tvar offX =x0 * fsw;\n\t\t\t//for( x=x1; x>=x0; x--) {\n\t\t\tfor( x=x0; x<=x1; x++) {\n\t\t\t\tvar cell = this.cells[ y ][ x ];\n\t\t\t\tvar src = srccells[ y-y0 ][ x-x0 ];\n\t\t\t\tvar ch = src.txt;\n\n\t\t\t\toc.bg = src.bg;\n\t\t\t\toc.fg = src.fg;\n\n\t\t\t\toc.bgHTML = this.palette[ src.bg ];\n\t\t\t\toc.fgHTML = this.palette[ src.fg ];\n\n\t\t\t\tcell.txt = ch;\n\t\t\t\tcell.fg = src.fg;\n\t\t\t\tcell.bg = src.bg;\n\n\t\t\t\tthis._int_paintchar( offX , yy , ch );\n\t\t\t\toffX += fsw;\n\t\t\t}\n\t\t}\n\t} catch ( e ) {\n\t\tconsole.log(\"x= \" + x + \" y= \" + y);\n\t\tconsole.log(\"x0=\", x0, \"y0=\",y0, \"x1=\",x1,\"y1=\",y1);\n\t\tconsole.log(e);\n\t}\n\n\t}\n\n\tpaintCursor( x, y, ch , col1, col2, mode ) {\n\t\tthis._int_storeset_color( col2, col1 );\n\t\tthis._int_paintchar( x, y, ch );\n\t\tif(  mode ) {\n\t\t\tthis._int_drawIndicator( x, y, ch );\n\t\t}\n\t\tthis._int_restore_color();\n\t}\n\n\n\t_int_drawIndicator( x, y, c ) {\n\n\t\tvar ctx = this.ctx;\n\n\t\tctx.font =  this.fontSizeCSS + \" \" + this.fontFamily;\n\t\tctx.textBaseline = \"top\";\n\n\t\tctx.fillStyle = this.colors.fgHTML\n\t\tctx.fillRect(  x,y + (4*this.fontSizeIntH)/5, this.fontSizeIntW, (this.fontSizeIntH)/5 );\n\n\t}\n\n\t_int_paintchar( x, y, ch ) {\n\n\t\t\tthis.updCtxImageData.synched = false;\n\n\t\t\tvar oc = this.colors;\n\t\t\tvar index = ch + \":\"+oc.bg+\":\"+oc.fg;\n\t\t\t//this.reverse\n\t\t\tvar cacheel = this.cache[ index ];\n\t\t\tvar fsw = this.fontSizeIntW;\n\t\t\tvar fsh = this.fontSizeIntH;\n\n\t\t\tif( ! cacheel ) {\n\n\t\t\t\tvar cvs = document.createElement(\"canvas\");\n\t\t\t\tvar ctx = cvs.getContext('2d', {alpha: false});\n\n\t\t\t\tif( ch.charCodeAt(0) > 255 ) {\n\t\t\t\t\tvar tmp3 =  this.ctx.measureText( ch )  ;\n\t\t\t\t\tvar tmpw =  Math.floor( tmp3.width ) ;\n\t\t\t\t\tif( tmpw > fsw ) {\n\t\t\t\t\t\tfsw = tmpw;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcvs.width = fsw;\n\t\t\t\tcvs.height = fsh;\n\n\t\t\t\tctx.font =  this.fontSizeCSS + \" \" + this.fontFamily;\n\t\t\t\tctx.textBaseline = \"top\";\n\n\t\t\t\tvar off = 0;\n\t\t\t\tif( this.offsets[ ch ] ) {\n\t\t\t\t\toff = this.offsets[ ch ];\n\t\t\t\t}\n\n\t\t\t\tctx.fillStyle = this.colors.bgHTML\n\t\t\t\tctx.fillRect(  0,0, fsw, fsh);\n\n\t\t\t\tctx.fillStyle = this.colors.fgHTML;\n\t\t\t\tctx.fillText( ch , off, 0);\n\n\t\t\t\tthis.cache[ index ] = { ctx: ctx, cvs: cvs, w: fsw } ;\n\t\t\t\tcacheel = this.cache[ index ];\n\n\t\t\t}\n\n\t\t\tthis.ctx.drawImage( cacheel.cvs, x, y );\n\t\t}\n\n\t\top_gcolor( params ) {\n\t\t\t\tvar htmlCol = this.palette[ params.c ];\n\t\t\t\tvar ctx = this.ctx;\n\t\t\t\tctx.strokeStyle = htmlCol;\n\n\t\t}\n\n\n\t\top_line( params ) {\n\n\t\t\tthis.updCtxImageData.synched = false;\n\n\t\t\tvar ctx = this.ctx;\n\n\t\t\tvar x0 =params.x0;\n\t\t\tvar y0 =params.y0;\n\t\t\tif( x0 < 0) {\n\t\t\t\tx0=this.cX;\n\t\t\t}\n\t\t\tif( y0 < 0) {\n\t\t\t\ty0=this.cY;\n\t\t\t}\n\n\t\t\tctx.beginPath(); // Start a new path\n\t\t\tctx.moveTo( x0,  y0); // Move the pen to (30, 50)\n\t\t\tctx.lineTo(params.x1, params.y1); // Draw a line to (150, 100)\n\t\t\tctx.stroke(); // Render the path\n\n\t\t\tthis.cX = params.x1;\n\t\t\tthis.cY = params.y1;\n\n\t\t}\n\n\t\tnative( operation ) {\n\n\t\t\tthis[ \"op_\" + operation.action]( operation.params);\n\t\t}\n\n\n\t\tgfxUpdate( record ) {//see 152\n\n\t\t\tvar lineLen = this.width * 4;\n\t\t\tvar cellLen = 4;\n\n\t\t\tvar pixels = record.pixels;\n\t\t\tvar ctx = this.ctx;\n\n\t\t\tvar upd = this.updCtxImageData;\n\n\t\t\tif(! upd.synched ) {\n\t\t\t\tupd.imd = ctx.getImageData( 0, 0, this.width, this.height );\n\t\t\t\tupd.data = upd.imd.data;\n\t\t\t\tupd.synched = true;\n\t\t\t}\n\n\t\t\tvar pdata = upd.data;\n\t\t\tvar imd = upd.imd;\n\n\t\t\tfor( var i=0; i< pixels.length; i++) {\n\t\t\t\tvar p = pixels[ i ];\n\n\t\t\t\tvar xrel = p.x;\n\t\t\t\tvar yrel = p.y;\n\n\t\t\t\tvar offset = ( yrel * lineLen ) + xrel * cellLen;\n\n\t\t\t\tvar c = this.bmPalette[ p.c ];\n\t\t\t\tpdata[offset+0] = c.r;\n\t\t\t\tpdata[offset+1] = c.g;\n\t\t\t\tpdata[offset+2] = c.b;\n\n\t\t\t}\n\t\t\tctx.putImageData(imd, 0, 0);\n\n\t\t}\n\n\n\t\tupdate( p, list ) {\n\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\n\t\t\tthis.x = p.cx;\n\t\t\tthis.y = p.cy;\n\t\t\tif(\n\t\t\t\tthis.x<0 || this.y<0 ||\n\t\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t\t) {\n\t\t\t\tconsole.log(\"ouch\");\n\n\t\t\t}\n\n\t\t\tthis.colors.bgHTML = this.palette[ p.bg ];\n\t\t\tthis.colors.fgHTML = this.palette[ \tp.fg ];\n\t\t\tthis.colors.bg = p.bg;\n\t\t\tthis.colors.fg = p.fg;\n\t\t\tthis.cursorMode = p.cursorMode;\n\n\t\t\tfor( var i=0; i< list.length; i++) {\n\n\t\t\t\tvar el = list[ i ];\n\t\t\t\tthis._int_updateArea( el.cells, el.x1, el.y1, el.x2, el.y2 );\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tupdateAll( p, srccells ) {\n\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\n\t\t\tthis.x = p.cx;\n\t\t\tthis.y = p.cy;\n\n\t\t\tif(\n\t\t\t\tthis.x<0 || this.y<0 ||\n\t\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t\t) {\n\t\t\t\tconsole.log(\"ouch\");\n\n\t\t\t}\n\t\t\tthis.colors.bgHTML = this.palette[ p.bg ];\n\t\t\tthis.colors.fgHTML = this.palette[ \tp.fg];\n\t\t\tthis.colors.bg = p.bg;\n\t\t\tthis.colors.fg = p.fg;\n\t\t\tthis.cursorMode = p.cursorMode;\n\n\t\t\tthis._int_updateArea( srccells, 0,0, this.cols -1, this.rows -1 );\n\n\t\t}\n\n\tclear() {\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tvar b=0;\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tb=1-b;\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tthis.cells[ y ][ x ].txt = \" \";\n\t\t\t\tthis.cells[ y ][ x ].fg = this.colors.fg;\n\t\t\t\tthis.cells[ y ][ x ].bg = this.colors.bg;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.ctx.fillStyle = this.colors.bg;\n\t\tthis.ctx.fillRect(0, 0, this.cvs.width, this.cvs.height);\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\n\t__int_nl() {\n\t\tthis.x = 0;\n\t\tthis.y ++;\n\t\tif( this.y >= this.rows ) {\n\t\t\tthis.__int_scrollDown();\n\t\t\tthis.y = this.rows -1;\n\t\t}\n\t}\n\n\twriteln( str ) {\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\t\t\t//console.log( \"writeln\" + str );\n\n\t\t\tfor (const c of str) {\n\t\t\t  this.__int_write_direct_ch( c );\n\t\t\t}\n\t\t\tthis.__int_nl();\n\t}\n\n\n\t__int_write_direct_ch( ch ) {\n\n\t\tvar cell = this.cells[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tcell = ch.txt;\n\n\t\tvar ctx = this.ctx;\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\n\t\tvar off = 0;\n\t\tif( this.offsets[ ch.txt ] ) {\n\t\t\toff = this.offsets[ ch.txt ];\n\t\t}\n\n\t\tthis.ctx.fillStyle = this.colors.bgHTML;\n\t\tctx.fillRect(  (fsw * this.x) , fsh * (this.y ), fsw, fsh);\n\n\t\tctx.fillStyle = this.colors.fgHTML;\n\t\tctx.fillText( ch.txt , off + (fsw * this.x) , fsh * (this.y +1));\n\n\t\tthis.x++;\n\t\tif( this.x >= this.cols ) {\n\t\t\tthis.x = 0;\n\t\t\tthis.__int_nl();\n\t\t}\n\t}\n\n\tgetDimensions() {\n\t\t\treturn [this.cols, this.rows ];\n\t}\n\n\thasPixels() {\n\t\treturn true;\n\t}\n\n\tgetBitmapDimensions() {\n\t\treturn [ this.width, this.height ];\n\t}\n\n\t/*plot( x, y, col ) {\n\t\tvar ctx = this.ctx;\n\n\t\tconst pixel = ctx.getImageData( x, y, 1, 1);\n\t\tconst pdata = pixel.data;\n\n\t\tvar c = this.bmPalette[ col ];\n\t\tpdata[0] = c.r;\n\t\tpdata[1] = c.g;\n\t\tpdata[2] = c.b;\n\n\t\tctx.putImageData(pixel, x, y);\n\n\t}*/\n\n\tgetColumCount() {\n\t\treturn this.cols;\n\t}\n\n\tgetRowCount() {\n\t\treturn this.rows;\n\t}\n\n\n\t__int_scrollDown() {\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tfor( var y=0; y<this.rows-1; y++) {\n\t\t\t\tvar cell = this.cells[ y ][ x ];\n\t\t\t\tvar cellyp1 = this.cells[ y+1 ][ x ];\n\n\t\t\t\tcell = cellyp1;\n\n\t\t\t}\n\t\t}\n\n\t\t//fill last row\n\t\tvar y2 = this.rows-1;\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tvar cell = this.cells[ y2 ][ x ];\n\t\t\tcell.txt = \" \";\n\t\t}\n\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntW;\n\t\tthis.ctx2.drawImage(this.cvs, 0, 0);\n\t\tvar w = this.cvs2.width;\n\t\tvar h = this.cvs2.height-fsh;\n\n\t\tthis.ctx.fillStyle = this.colors.bg;\n\t\tthis.ctx.fillRect(0, 0, this.cvs.width, this.cvs.height);\n\n\t\tthis.ctx.drawImage(this.cvs2, 0, fsh, w, h-fsh, 0, 0, w, h-fsh );\n\t\t//drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)\n\n\t}\n\n}\n\nexport { KERNALMODULE as default};\n","import  mrBeepChannelClass   from    './mrbeep-channel.js';\nimport  mrBeepClass   from           './mrbeep.js';\n\n\nclass KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t}\n\n\tdestroy() {\n\t}\n\n\n\tinit() {\n\t\tthis.mrBeep = new mrBeepClass( mrBeepChannelClass );\n\t}\n\n\treset() {\n\t\t\tthis.mrBeep.reset();\n\t}\n\n  setVolume( x ) {\n    this.mrBeep.setVolume( x );\n  }\n\n  channelVolume( channel, x ) {\n    this.mrBeep.channelVolume( channel, x );\n  }\n\n\tchannelFrequency( channel, f ) {\n    this.mrBeep.channelFrequency( channel, f );\n  }\n\n  channelSetAttackDecayRelease( channel, attackT, decayT, releaseT ) {\n    this.mrBeep.channelSetAttackDecayRelease( channel, attackT, decayT, releaseT );\n  }\n\n  channelSetSustainLevel( channel,  sustainV ) {\n    this.mrBeep.channelSetSustainLevel( channel,  sustainV );\n  }\n\n\n  playBeep( channel, frequency, duration ) {\n    this.mrBeep.playBeep( channel, frequency, duration );\n  }\n\n  playSound( channel, frequency, duration ) {\n    this.mrBeep.playSound( channel, frequency, duration );\n  }\n\n\n  startSound( channel, frequency ) {\n    this.mrBeep.startSound( channel, frequency );\n  }\n\n  releaseSound( channel, frequency ) {\n    this.mrBeep.releaseSound( channel, frequency );\n  }\n\n\n\taddEffect( channel,  type , value, time ) {\n\n\t\tthis.mrBeep.addEffect( channel,  type , value, time );\n\n  }\n\n  clearEffect( channel ) {\n\n\t\tthis.mrBeep.clearEffect( channel );\n\n  }\n\n\tplayEffect( channel, freq ) {\n\t\tthis.mrBeep.playEffect( channel, freq );\n\t}\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  /* QFS - Qualified file system */\n  /* Qualified paths can be used to find files on other file system*/\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n\n    this.sys = sys;\n    this.key = sys.SIG + \"__LSConfirmed\" ;\n\n    this.warningOngoing = false;\n\n    console.log(\"simplewarning initialized\");\n\n    sys.notify = this;\n  }\n\n  init() {\n\n  }\n\n  simpleWarning() {\n      if( this.warningOngoing ) {\n        return;\n      }\n\n      this.oldBGColor = document.body.style.backgroundColor;\n      document.body.style.backgroundColor = \"#ffffff\";\n\n      var __this = this;\n      function clearWarning() {\n        document.body.style.backgroundColor = __this.oldBGColor;\n        __this.warningOngoing = false;\n      }\n\n      var myTimeout = setTimeout(clearWarning, 200);\n\n  }\n\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  /* QFS - Qualified file system */\n  /* Qualified paths can be used to find files on other file system*/\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n\n    this.sys = sys;\n    this.disable = sys.bootCfg.warnings.privacyMute;\n    this.key = sys.SIG + \"__LSConfirmed\" ;\n    this.verified = false;\n    this.denied = false;\n\n    console.log(\"PrivWarning initialized\");\n\n  }\n\n  init() {}\n\n  confirmLocalStorage() {\n\n    if( this.denied ) {\n      return false;\n    }\n\n    var confirmed = localStorage.getItem( this.key );\n    if( confirmed == \"true\" ) { return true; }\n\n    if( this.disable ) {\n      return true;\n    }\n\n\n    var ok = confirm(\"!! Do you allow \"+\n      this.sys.SIG +\n      \" to write to local browser storage !!\\n\"+\n      \"This is needed to simulate a local harddisk.\\n\" +\n      \" If you do not agree, you can still use the system,\\n\"+\n      \" but you won't be able to save any files, or session information.\\n\\n\"+\n      \"All information will only be stored on the local storage,\\n\"+\n      \" and will not be shared with any server, unless you will give explicit permission.\\n\\n\"+\n      \"Thank you!\"\n    );\n\n    if( !ok ) { this.denied = true; return false; }\n\n    localStorage.setItem( this.key, \"true\" );\n\n    return true;\n  }\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {}\n\n  init() {}  \n\n  getKey() {\n     return null;\n  }\n\n  setInputHandler( clazz, prefix ) {\n  }\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n    this.evtQueueKeyPress = [];\n    this.handler = null;\n    this.prefix = \"\";\n    this.cfg = sys.bootCfg.keyboard;\n  }\n\n  init() {\n    var target = this.init.inputElement;\n\n    if( target ) {\n        this.target = window;\n    }\n    else {\n      this.target = window;\n    }\n  }\n\n  getKey() {\n\n    if( this.handler ) {\n      return null;\n    }\n    if( this.evtQueueKeyPress.length == 0 ) {\n      return null;\n    }\n\n    return this.evtQueueKeyPress.shift();\n  }\n\n\n  unsetInputHandler() {\n    if( this.elFun ) {\n      this.target.removeEventListener(\"keydown\", this.elFun  );\n      this.elFun = null;\n    }\n  }\n\n  checkIfAllowDefault( e ) {\n    var tmp = 1;\n    var ad = this.cfg.allowDefault;\n    if( ! ad ) {\n      return true;\n    }\n\n    if( ad.all ) { return true }\n\n    var l = ad.events;\n    for( var i=0; i<l.length; i++) {\n      var e2 = l[i];\n      if( e2 == e.key ) {\n        return true;\n      }\n    }\n    return false;\n    //98//77/88(8(88999==007777////iiii(889[]{})))\n  }\n\n  setInputHandler( clazz, prefix ) {\n    this.handler = clazz;\n    this.prefix = prefix;\n\n    if( this.elFun ) {\n      this.target.removeEventListener(\"keydown\", this.elFun  );\n      this.elFun = null;\n    }\n\n    var queuekp = this.evtQueueKeyPress;\n    var con = this.sys.out;\n    var handler = this.handler;\n    var prefix = this.prefix;\n    var _this = this;\n\n    var f = function(event) {\n\n    //console.log( event ) ;\n\n    var kEvent =\n      {\n          type: \"keydown\",\n          key: event.key,\n          keyLabel: event.key,\n          shiftKey: event.shiftKey,\n          ctrlKey: event.ctrlKey\n      };\n\n\n      if( event.key.length > 1) {\n        kEvent.key = null;\n        kEvent.keyLabel = event.key;\n        if( event.key == \"Enter\" ) {\n          kEvent.key = \"\\n\";\n        }\n      }\n\n      if( !_this.checkIfAllowDefault( event )) {\n        event.preventDefault();\n      }\n\n      if( handler ) {\n        handler[ prefix + \"KeyHandler\" ]( kEvent );\n      } else {\n        queuekp.push( kEvent );\n      }\n    };\n\n    this.elFun = f;\n\n    this.target.inputMode = \"text\";\n    this.target.addEventListener(\"keydown\", f);\n  }\n\n}\n\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n    this.node  = document.body;\n    document.body.id = \"top\";\n    this.isAttr = false;\n  }\n\n  init() {\n  }\n\n  executeFunction( paramArray ) {\n    if( paramArray[0] == \"body.style.backgroundImage\") {\n      document.body.style.backgroundImage = \"url('\" +paramArray[1]+ \"')\";\n      document.body.style.backgroundSize = \"cover\";\n    }\n  }\n\n  execute( htmlCodeArr ) {\n    var htmlCode = htmlCodeArr[0];\n    console.log( \"execute\",  htmlCode );\n\n    var handle = htmlCode.htmlHandle;\n    if( handle ) {\n      this.setnode( handle );\n    }\n    else {\n      this.isAttr = false;\n    }\n\n    if( this.node == null ) {\n        console.log(\"invalid html root\");\n        return; //TODO back propagate error\n    }\n\n    if( this.isAttr == false ) {\n      /* element */\n\n      if( htmlCode.htmlAppend) {\n        var s = document.createElement(\"span\");\n        s.innerHTML = htmlCode.htmlValue;\n\n        const list = s.childNodes;\n        var arr = [];\n        for (let i = 0; i < list.length; i++) {\n            arr.push( list[i] );\n        }\n\n        for (let i = 0; i < arr.length; i++) {\n            this.node.appendChild( arr[i]  );\n        }\n\n        s = null;\n\n      }\n      else {\n        if( this.node.id == \"top\" ) {\n          console.log(\"Cannot replace body code. it would crash the console!\")\n          return;\n        }\n\n        this.node.innerHTML = htmlCode.htmlValue;\n      }\n    }\n    else {\n      /* attribute */\n\n      var attr = this.node.attributes.getNamedItem( this.attrName );\n      if( attr == null ) {\n        console.log(\"Attr '\"+this.attrName+\"' not found on html node \"+this.node.id+\"!\")\n        return;\n      }\n      attr = attr.nodeValue;\n\n      if( htmlCode.htmlAppend) {\n        attr = attr + htmlCode.htmlValue;\n      }\n      else {\n        attr = htmlCode.htmlValue;\n      }\n\n      this.node.setAttribute( this.attrName, attr );\n    }\n\n  }\n\n\n  setnode( handle ) {\n\n    console.log( \"setnode\",  handle );\n    this.isAttr = false;\n\n    if( handle == \"..\" ) {\n      this.node  = this.node.parentNode;\n    }\n    else {\n      var parts = handle.split(\".\");\n      var attrName = null;\n      var elName = null;\n\n      if( parts.length > 1) {\n        elName = parts[0];\n        attrName = parts[1];\n      }\n      else {\n        elName = handle;\n      }\n\n      if( elName != \"\" ) {\n        var el = document.getElementById(  elName  );\n        if( el ) {\n          this.node = el;\n        }\n        else {\n          console.log(\"could not find\", handle);\n          return;\n        }\n      }\n\n      if( attrName != \"\" && attrName != null ) {\n        this.isAttr = true;\n        this.attrName = attrName;\n    }\n\n  }\n\n}\n/*\n\n\n-- flavour 1\n\nOPEN \"html://\" FOR OUTPUT AS #1\nPRINT #1, \"<b>hello world </b>\"\nCLOSE #1\n\n-- flavour 2\n\nHTM <b id=\"mylabel\">hello world</b>\nHTMINNER \"mylabel\", \"hello 2\"\nHTMCLEAR \"mybody\"\n\nHTM \"b\", \"mylabel\" TO el\nHTMTEXT \"hello world\"\n\n-- flavour 2b\n\n; stay on same line\n+ stay in element\n\n\nHTM \"b\" TO el\nHTMTEXT el, \"hello world\"\n\n\nHTM \"b\"+\nHTMTEXT \"hello world\"+\nHTM \"br\"\nHTMTEXT \"hello world2 \"\n\n\n\n-- flavour 3\n\nHTAG \"b\";\nHTEXT \"hello world\";\nHCLOSE;\n\n-- flavour 4\n\nb = html(\"b\")\nhtml b, \"hello word\"\nsleep\nhtml b, \"hello my world\"\n\ntable = html(\"table\")\n\n--- flavour 5\n\n  #add tag\n\n  b=htag(\"b\")\n\n  or htag \"b\" to b\n\n  or htag \"b\" : REM implicit output variable hnode\n     b = hnode\n\n  hclr b\n  hprint b, \"hello world1\"\n  hprint b, \"hello world2\"\n\n\n  htag \"div\"\n  hstyle hnode add \"bg-color=red\"\n  hstyle hnode add \"font-size=10px\"\n  hprint div, \"hello world1\"\n\n  htag \"div\" in div\n  hstyle hnode add \"bg-color=blue\"\n  hprint div, \"hello world1\"\n\n  console \"\"\n\n\n  ---\n\n  h \"\" to \"<body>\"\n  h \"<div id=1000>Hello world</div>\"\n  h \"\" to 1000\n  hattr \"1000.style\" set     \"background-color=green\"\n  hattr \"1000.style\" append  \";color=red\"\n\n  hshow \"1000\", 0\n  sleep 1\n  hshow \"1000\", 0\n\n  htext \"1234\";\n\n\n----------------\n\ncontent usecases\nc1a append         >\"\"\nc1b append text\nc1c append text with newline\nc2 clear          CLR\nc3 overwrite      \"\"\nc4 get\n\nattr usecases\na1 set attribute\na2 append attribute\na3 get\n\ntarget usecases\nt1 current target      <nothing>\nt2 explicit target     <target>,\"<html>\"\nt3 jump to new target hpos hjmp, hgoto htmlj command\n\n\n*t1\nimplicit :  html \"<b>implicitly in current parent</b>\"\n\n*t2\nexplicit :\n    html 1000, \"<b>explicitly in specified parent</b>\"\n    or\n    html \"<b>explicitly in specified parent</b>\" to 1000\n\n*t3\nexplicit :  html to 1000\n\n\n\n  usecases\n  1a set body\n  1b clear body\n  2 append element in body\n  3 clear Element\n  4 append element in body\n  5 add text to element\n  6 add text to element on same line\n  7 add text to element on next line\n  8 set attr to element\n  9 append into element attr\n\n\n\n  target-and-append-usecases\n  ta1 append to current target\n  ta2 overwrite current target\n\n\n  uc 1a\n  h \"<center>hello world</center>\" to \"<body>\"\n\n  uc 2\n  h \"<div>Hello world</div>\"\n\n  uc 3\n  h \"<div id=1000>Hello world</div>\"\n  h \"\" to 1000\n\n  uc 4\n  h \"<div id=1000>Hello world</div>\"\n  h \"<b>Hello bold world</b>\" to 1000\n\n  uc 5\n  h \"<div id=1000>Hello world</div>\"\n  htxt \"Hello bold world\"\n\n  uc 6\n  h \"<div id=1000>Hello world</div>\"\n  htxt \"Hello bold world\";\n  htxt \"Hello bold world2\"\n\n  uc 7\n  h \"<div id=1000>Hello world</div>\"\n  htxt \"Hello bold world\"\n  htxt \"Hello bold world2\"\n\n\n\n*/\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {\n\n    this.apps = [];\n    this.sys  = sys;\n    this.audioInitFlag = false;\n\n  }\n\n  audioInit() {\n\n    if( this.audioInitFlag ) {\n      return;\n    }\n\n    var sys = this.sys;\n    var audio = sys.audio;\n    this.audio = audio;\n\n    audio.channelVolume( 0, 1  );\n    audio.setVolume(1);\n\n    this.audioInitFlag = true;\n  }\n\n  init() {\n    var sys = this.sys;\n    var con = sys.out;\n\n    this.cfg = this.sys.bootCfg;\n    this.settings = {}; //settings set by the user, ex: the theme of the screen editor\n\n    var htmlwrapper = sys.m.htmlwrapper;\n    var display = sys.m.displaymodes;\n\n    this.out = con;\n\n    this.menu = sys.m.basicmenu;\n\n    if( sys.staticTarget ) {\n      this.worker = new Worker( \"basicworker.js\"   );\n    }\n    else {\n      if( sys.dynamicMinTarget ) {\n        this.worker = new Worker( \"sys/modules/basic/worker/workerbootstrap_min.js\"   );\n      }\n      else {\n        this.worker = new Worker( \"sys/modules/basic/worker/workerbootstrap_max.js\"   );\n      }\n    }\n\n    this.sys.m.qfs.loadFile( \"cache://settings.cfg\", { clazz: this, method: \"initMore\" } );\n\n  }\n\n/*\n  loadedApp( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n    this.out.blinkMode( false );\n    this.worker.postMessage({ type: \"loadpgm\", pgmData: response.data, QPath: path });\n\n  }\n  */\n\n  initMore( settingsPath, cbMessage, settingsLoadResponse ) {\n\n    var sys = this.sys;\n    var con = sys.out;\n    var audio = sys.audio;\n    var htmlwrapper = sys.m.htmlwrapper;\n    var display = sys.m.displaymodes;\n    var colors = undefined;\n    if( settingsLoadResponse.success ) {\n      colors = settingsLoadResponse.data.colors;\n    }\n\n    this.worker.postMessage(\n        {\n          type: \"inittxtarea\",\n          w: con.getColumCount(),\n          h: con.getRowCount()\n        }\n    );\n\n    this.worker.postMessage(\n        {\n          type: \"initcolors\",\n          colors: colors\n        }\n    );\n\n    this.worker.postMessage(\n        {\n          type: \"systeminfo\",\n          modes: display.getModes(),\n          mode: display.getCurrentMode(),\n          windowWidth: window.innerWidth,\n  \t\t\t\twindowHeight: window.innerHeight\n        }\n    );\n\n    this.worker.postMessage(\n        {\n          type: \"setcfg\",\n          cfg: this.cfg\n        }\n    );\n\n    var hasPixels = con.hasPixels();\n    var bWH = [-1,-1];\n    if( hasPixels ) {\n       bWH = con.getBitmapDimensions();\n    }\n\n    this.worker.postMessage(\n         {\n           type: \"initbitmap\",\n           w: bWH[ 0 ],\n           h: bWH[ 1 ]\n         }\n    );\n\n    var _parent = this;\n    this.worker.onmessage = function(e) {\n\n        var m = e.data.message;\n        var t = e.data.type;\n\n        if( t == \"syslog\" ) {\n           sys.log(\"BWSYS:\", e.data.message );\n        }\n        else if( t == \"syserr\" ) {\n           sys.logerr(\"BWERR:\", e.data.message );\n        }\n        else if( t == \"write\" ) {\n           for( var i =0; i<m.length; i++) {\n             con.write( m[i] );\n           }\n        }\n        else if( t == \"writeln\" ) {\n          for( var i =0; i<m.length; i++) {\n            con.writeln( m[i] );\n          }\n        }\n        else if( t == \"writec\" ) {\n          con.writec( m );\n\n        }\n        else if( t == \"border\" ) {\n\n          document.body.style.backgroundColor = con.htmlColor( m.d );\n\n        }\n        else if( t == \"audio\" ) {\n\n          _parent.audioInit();\n\n          //var audio = this.audio;\n          var method = m.method;\n          var parCount = m.parCount;\n          if( parCount == 1 ) {\n            audio[method]( m.p1 );\n          }\n          else if( parCount == 2 ) {\n            audio[method]( m.p1, m.p2 );\n          }\n          else if( parCount == 3 ) {\n            audio[method]( m.p1, m.p2, m.p3 );\n          }\n          else if( parCount == 4 ) {\n            audio[method]( m.p1, m.p2, m.p3, m.p4 );\n          }\n          else if( parCount == 0 ) {\n            audio[method]();\n          }\n\n        }\n        else if( t == \"blinkMode\" ) {\n          con.blinkMode( m.m );\n        }\n        else if( t == \"signalHideMenu\" ) {\n          if( sys.m.basicmenu ) {\n            console.log(\"signalHideMenu hideFlag=\" , m.hide )\n            sys.m.basicmenu.showMenu( !m.hide );\n          }\n        }\n        else if( t == \"locate\" ) {\n          con.setPos( m.c, m.r );\n        }\n        else if( t == \"load\" ) {\n          _parent.loadAppFromProgram( this, m );\n        }\n        else if( t == \"loaddata\" ) {\n          _parent.loadDataFromProgram( this, m );\n        }\n        else if( t == \"save\" ) {\n          _parent.saveProgram( this, m );\n        }\n        else if( t == \"delete\" ) {\n          _parent.deleteFile( this, m );\n        }\n        else if( t == \"dir\" ) {\n          _parent.dir( m.path, m );\n        }\n        else if( t == \"setfs\" ) {\n          _parent.setfs( m.path, m );\n          _parent.menu.setStatus( null );\n        }\n        else if( t == \"listfs\" ) {\n          _parent.listfs( m );\n        }\n        else if( t == \"html\" ) {\n          htmlwrapper.execute( m );\n        }\n        else if( t == \"htmlnode\" ) {\n          htmlwrapper.setnode( m[0].value );\n        }\n        else if( t == \"htmldofun\" ) {\n          htmlwrapper.executeFunction( m );\n        }\n        else if( t == \"displaymode\" ) {\n          display.setMode( m.m, _parent.menu );\n          display.cursor\n          con = display.getDriver();\n          sys.out =  con;\n\n          var wh = con.getDimensions();\n          var hasPixels = con.hasPixels();\n          var bWH = [-1,-1];\n\n          if( hasPixels ) {\n            bWH = con.getBitmapDimensions();\n          }\n          this.postMessage(\n            {\n            type: \"message\",\n            processId: m.processId,\n            message: \"displaysize:done\",\n            messageObject:\n              {\n                mode: m.m,\n                textW: wh[0], textH: wh[1],\n                bitmapW: bWH[0], bitmapH: bWH[1],\n              }\n            }\n            );\n\n        }\n        else if( t == \"textupdate\" ) {\n\n          var properties = {\n            cx: m.cx,\n            cy: m.cy,\n            fg: m.fg,\n            bg: m.bg,\n            cursorMode: m.cursorMode\n          };\n          sys.out.update( properties, m.areasList );\n        }\n        else if( t == \"textupdate-all\" ) {\n\n          var properties = {\n            cx: m.cx,\n            cy: m.cy,\n            fg: m.fg,\n            bg: m.bg,\n            cursorMode: m.cursorMode\n          };\n\n          sys.out.updateAll( properties, m.cells );\n        }\n        else if ( t == \"gfxupdate\" ) {\n          sys.out.gfxUpdate( m );\n        }\n        else if ( t == \"export\" ) {\n          if(m.destination == \"disk\") {\n            var callback = {\n              clazz: _parent,\n              method: \"nullHandler\",\n              data: \"\"\n            }\n            sys.m.qfs.saveFile(\"export://myprogram.bas\", m.code, callback);\n          }\n          else {\n            navigator.clipboard.writeText( m.code )\n          }\n        }\n        else if ( t == \"nativeout\" ) {\n          sys.out.native( m );\n        }\n        else if ( t == \"status\" ) {\n          //update menu\n          _parent.menu.setStatus( m.status );\n        }\n\n      }\n\n      var _this = this;\n      window.addEventListener(\"resize\", function(event) {\n        _this.windowResizeEvent( event );\n\n      });\n\n  }\n\n  windowResizeEvent( event ) {\n    var w = window.innerWidth;\n    var h = window.innerHeight;\n\n    this.worker.postMessage(\n      {\n      type: \"interrupt\",\n      sub: \"resize\",\n      data:\n        {\n          w: w,\n          h: h\n        }\n      }\n      );\n\n  }\n\n  nullHandler( data )  {\n    console.log( \"nullhandler \" + data );\n  }\n\n  loadApp( url0 ) {\n    var sys = this.sys;\n\n    sys.log(\"BSYS:\",\"Load\", url0 );\n    sys.m.qfs.loadFile( url0, { clazz: this, method: \"loadedApp\" } );\n\n  }\n\n  pasteTextFromClipboard( block, type ) {\n\n    if( type == \"txt\" ) {\n\n      var kEvent = {\n        keyLabel: \"\",\n        shiftKey: false,\n        ctrlKey: false,\n        key: \"\",\n        type: \"keydown\"\n\n      }\n\n      for ( var i = 0; i<block.length; i++) {\n        var c = block.charAt( i );\n        kEvent.key = c;\n        if( block.charCodeAt( i ) == 10) {\n          kEvent.keyLabel = \"Enter\";\n        }\n        else {\n          kEvent.keyLabel = \"\";\n        }\n\n        this.worker.postMessage( kEvent );\n      }\n    }\n    else {\n      this.worker.postMessage(\n        {\n        type: \"pastpgm\",\n        data: block\n        }\n        );\n    }\n\n  }\n\n  requestClipboardCopy() {\n\n    this.worker.postMessage({ type: \"clipboardCopy\" });\n\n  }\n\n  requestClipboardCopyScreen() {\n\n    this.worker.postMessage({ type: \"clipboardCopyScreen\" });\n\n  }\n\n  requestColorReset( colors ) {\n    this.worker.postMessage({ type: \"colorReset\", colors: colors });\n\n    var callback = {\n      clazz: this,\n      method: \"nullHandler\",\n      data: \"\"\n    }\n    this.settings.colors = colors;\n    this.sys.fs.saveFile(\"cache://settings.cfg\", this.settings, callback);\n\n  }\n\n  requestExport() {\n    this.worker.postMessage({ type: \"export\" });\n  }\n\n\n  requestFileSystems() {\n    var list =  this.sys.fs.listFS();\n    var list2 = [\"FS\", \"\"];\n\n    for( var i=0; i<list.length; i++) {\n        var f = list[i];\n        list2.push( f );\n    }\n\n    this.requestShowList( list2 );\n  }\n\n  requestListDirectory() {\n    var list =  this.sys.fs.getDir( this.sys.fs.getCurrent() );\n    var list2 = [\"DIR\", \"\"];\n\n    for( var i=0; i<list.files.length; i++) {\n        var f = list.files[i].fname;\n        list2.push( f );\n    }\n\n    this.requestShowList( list2 );\n  }\n\n  requestListScripts() {\n\t\tconsole.log(\"I am handler_listScripts\", this);\n\n\t\tvar list =  this.sys.m.script.getDir();\n\t\tvar list2 = [];\n\n\t\tfor( var i=0; i<list.files.length; i++) {\n\t\t\t\tvar f = list.files[i].fname;\n\t\t\t\tlist2.push( f );\n\t\t}\n\n\t\tthis.requestShowList( list2 );\n\n\t}\n\n\n  requestAbout() {\n\n    this.worker.postMessage({ type: \"resetConsole\" });\n\n\t\tvar list = [];\n\n    list.push( \"\" );\n    list.push( \"---------------------------\" );\n\t  list.push( \"  B3 Basic\" );\n    list.push( \"  Version 0.9\" );\n    list.push( \"  Copyright: \" );\n    list.push( \"    CursorKeys Retro, 2022\" );\n    list.push( \"---------------------------\" );\n    list.push( \"\" );\n\n\n\t\tthis.requestShowList( list );\n\n\t}\n\n\n  requestList() {\n    this.worker.postMessage({ type: \"list\" });\n  }\n\n  requestRenumber() {\n    this.worker.postMessage({ type: \"renumber\" });\n  }\n\n  requestNew() {\n    this.worker.postMessage({ type: \"new\" });\n  }\n\n  requestVars() {\n    this.worker.postMessage({ type: \"vars\" });\n  }\n\n  requestDataBlocks() {\n    this.worker.postMessage({ type: \"datablocks\" });\n  }\n\n  requestHelp() {\n    this.worker.postMessage({ type: \"help\" });\n  }\n\n  requestClearScreen() {\n    this.worker.postMessage({ type: \"clearScreen\" });\n  }\n\n  requestResetConsole() {\n    this.worker.postMessage({ type: \"resetConsole\" });\n  }\n\n  requestShowList( l ) {\n    this.worker.postMessage({ type: \"showList\", list: l });\n  }\n\n\n  requestRun() {\n    this.worker.postMessage({ type: \"run\" });\n  }\n\n  requestStop() {\n    this.worker.postMessage({ type: \"stop\" });\n  }\n\n  deleteFile( worker, m ) {\n    var sys = this.sys;\n\n    try {\n      sys.log(\"BSYS:\",\"delete\", m.path );\n      sys.m.qfs.deleteFile( m.path,\n        { clazz: this, method: \"deletedFile\", path: m.path, processId: m.processId })\n\n    }\n    catch ( e ) {\n      console.log ( e )\n\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: m.processId,\n        message: \"delete:error\",\n        messageObject:\n          {\n            reason: e.message\n          }\n        }\n        );\n\n    }\n  }\n\n  deletedFile( cbMessage ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Deleted\", cbMessage.args.qpath );\n\n    var result = \"ok\";\n    var message = \"delete:completed\";\n    var reason = undefined;\n    if( !cbMessage.result ) {\n      result = \"error\";\n      message = \"delete:error\";\n    }\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: cbMessage.origCallBackRecord.processId,\n      message: message,\n      messageObject:\n        {\n          status: result,\n          reason: reason\n        }\n      }\n      );\n\n  }\n\n  saveProgram( worker, m ) {\n      var sys = this.sys;\n\n      try {\n        sys.log(\"BSYS:\",\"Load\", m.path );\n        sys.m.qfs.saveFile( m.path, m.data,\n          { clazz: this, method: \"savedProgram\", processId: m.processId })\n\n      }\n      catch ( e ) {\n        console.log ( e )\n\n        this.worker.postMessage(\n          {\n          type: \"message\",\n          processId: m.processId,\n          message: \"save:error\",\n          messageObject:\n            {\n              reason: e.message\n            }\n          }\n          );\n\n      }\n  }\n\n  savedProgram( cbMessage ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Saved\", cbMessage.url );\n    //this.out.blinkMode( false );\n\n    //this.worloadAppFromProgramker.postMessage({ type: \"loadpgm\", pgmData: data, QPath: path });\n\n    var result = \"ok\";\n    if( !cbMessage.result ) {\n      result = \"error\";\n    }\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: cbMessage.origCallBackRecord.processId,\n      message: \"save:completed\",\n      messageObject:\n        {\n          status: result\n        }\n      }\n      );\n\n\n  }\n\n\n  loadDataFromProgram( worker, m ) {\n\n    var sys = this.sys;\n\n    try {\n      sys.log(\"BSYS:\",\"Load\", m.path );\n      sys.m.qfs.loadFile( m.path,\n        { clazz: this, method: \"loadedDataFromProgram\",\n        processId: m.processId,\n        label: m.label ,\n        type: m.type\n      } );\n    }\n    catch ( e ) {\n      console.log ( e )\n\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: m.processId,\n        message: \"loaddata:error\",\n        messageObject:\n          {\n            error: e.message\n          }\n        }\n        );\n\n    }\n  }\n\n\n  loadAppFromProgram( worker, m ) {\n\n    var sys = this.sys;\n\n    try {\n      sys.log(\"BSYS:\",\"Load\", m.path );\n      sys.m.qfs.loadFile( m.path, { clazz: this, method: \"loadedAppFromProgram\", processId: m.processId } );\n    }\n    catch ( e ) {\n      console.log ( e )\n\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: m.processId,\n        message: \"load:error\",\n        messageObject:\n          {\n            reason: e.message\n          }\n        }\n        );\n\n    }\n\n  }\n\n  loadedApp( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n    this.out.blinkMode( false );\n    this.worker.postMessage({ type: \"loadpgm\", pgmData: response.data, QPath: path });\n\n  }\n\n\n  loadedDataFromProgram( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n\n    if( response.success ) {\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: cbMessage.processId,\n        message: \"loaddata:completed\",\n        messageObject:\n          {\n            data: response.data,\n            label: cbMessage.label,\n            type: cbMessage.type\n          }\n        }\n        );\n      }\n      else {\n        this.worker.postMessage(\n          {\n          type: \"message\",\n          processId: cbMessage.processId,\n          message: \"loaddata:error\",\n          messageObject:\n            {\n              pgmData: null,\n              reason: response.reason\n            }\n          }\n          );\n      }\n\n  }\n\n\n  loadedAppFromProgram( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n    //this.out.blinkMode( false );\n\n    //this.worloadAppFromProgramker.postMessage({ type: \"loadpgm\", pgmData: data, QPath: path });\n\n    if( response.success ) {\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: cbMessage.processId,\n        message: \"load:completed\",\n        messageObject:\n          {\n            pgmData: response.data\n          }\n        }\n        );\n      }\n      else {\n        this.worker.postMessage(\n          {\n          type: \"message\",\n          processId: cbMessage.processId,\n          message: \"load:error\",\n          messageObject:\n            {\n              pgmData: null,\n              reason: response.reason\n            }\n          }\n          );\n      }\n\n  }\n\n\n  listfs( m ) {\n\n    var list = this.sys.fs.listFS();\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: m.processId,\n      message: \"listfs:completed\",\n      messageObject:\n        {\n          fs: list,\n          currentFs: this.sys.fs.getCurrent()\n        }\n      }\n      );\n  }\n\n  setfs( path, m ) {\n\n    var result = this.sys.fs.setFS( path );\n    if( result ) { result = \"ok\"; }\n    else {  result = \"error\" ; }\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: m.processId,\n      message: \"setfs:completed\",\n      messageObject:\n        {\n          status: result\n        }\n      }\n      );\n  }\n\n  dir( path, m ) {\n\n    var list = this.sys.fs.getDir( path );\n\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: m.processId,\n      message: \"dir:completed\",\n      messageObject:\n        {\n          files: list.files,\n          title: list.title,\n          free: list.free,\n          fs: list.fs\n        }\n      }\n      );\n  }\n\n  setInput( input ) {\n\n    this.sys.log(\"BSYS: Setting input on BAPPS..\" );\n    this.input = input;\n    this.input.setInputHandler( this, \"input\" );\n\n  }\n\n  inputKeyHandler( kEvent ) {\n\n\n\n    if( this.sys.m.basicmenu ) {\n      /*close menu on any keppress*/\n      this.sys.m.basicmenu.clearMenu();\n\n      if( kEvent.key == \"v\" && kEvent.ctrlKey) {\n        console.log( kEvent );\n        this.sys.m.basicmenu.doAction(\"paste\", \"txt\" );\n        return;\n      }\n    }\n\n    if( kEvent.keyLabel == \"Backspace\" && kEvent.ctrlKey ) {\n      this.worker.postMessage({ type: \"toggleMenu\" });\n\n    }\n    else {\n      this.worker.postMessage( kEvent );\n    }\n  }\n\n}\n\nexport { KERNALMODULE as default};\n","import  menuData   from        './menudata.js';\nimport  menuHandlers   from        './handlers.js';\n\nclass KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\n\t\tthis.defaultPasteText = \"Press CTRL-V here\";\n\n\t\tthis.options = new menuData().getOptions();\n\t\tthis.handlers = new menuHandlers( this );\n    this.menus = {};\n\t\tthis.statusWidgets = {};\n\t\tthis.status = {\n\t\t\tpgmLen: 0,\n\t\t\tstatus: \"stopped\",\n\t\t\tvarLen: 0,\n\t\t\tdisplayMode: 0\n\t\t}\n\n\t\tthis.mnuBttnOptContainers = [];\n\t\tthis.mnuBttnOptContainersTgl = [];\n\t\tthis.mnuBttns = [];\n\t\tthis.mnuBttnContainers = [];\n\t\tthis.mnuLinks = [];\n\n\t\tthis.color = \"#ffffff\";\n\t\tthis.bgColor = \"#000000\";\n\t\tthis.font = \"16px arial,serif\";\n\n\t\tthis.statusTopMargin = \"4px\";\n\t\tthis.statusColor = \"#eeffff\";\n\t\tthis.statusBgColor = \"#000000\";\n\t\tthis.statusFont = \"700 14px arial,serif\";\n\n\t\tthis.cnt = 0;\n\t}\n\n\tdestroy() {\n\n\t\tvar f = this.getOnClickMenuButtonFunc();\n\t\tvar tmp = 1;\n\n\t\tfor( var i=0; i<this.mnuBttns.length ; i++ ) {\n\t\t\tvar b = this.mnuBttns[i];\n\t\t\tb.dataset.i = i;\n\n\t\t\tvar optLst = this.mnuBttnOptContainers[i];\n\n\t\t\tvar f = this.getOnClickMenuButtonFunc();\n\t\t\tb.removeEventListener( \"click\", f );\n\n\t\t\tvar ll = this.mnuLinks[i];\n\n\t\t\tfor( var k=0; k<ll.length ; k++ ) {\n\t\t\t\tvar lnk = ll[ k ];\n\t\t\t\tlnk.dataset.i = i;\n\t\t\t\tlnk.removeEventListener( \"click\", this.getClickLinkFunc() );\n\t\t\t\tlnk.removeEventListener( \"mouseover\", this.getOnOverLinkFunc() );\n\t\t\t}\n\t\t}\n\t\tthis.element = null;\n\t}\n\n\n\tinit() {\n\t\tthis.handlers.setBasic();\n\t\tthis.basic = this.sys.m.basic;\n\t}\n\n\tshowMenu( flag ) {\n\t\tif( flag ) {\n\t\t\tthis.element.style.display = \"flex\";\n\t\t}\n\t\telse {\n\t\t\tthis.element.style.display = \"none\";\n\t\t}\n\t}\n\n\tbutton( parent, id, text, menuOptions ) {\n\n\t\tvar div0 = document.createElement(\"div\");\n\t\tvar buttn0 = document.createElement(\"button\");\n\t\tvar div1 = document.createElement(\"div\");\n\n\t\tdiv0.appendChild( buttn0 );\n\t\tdiv0.appendChild( div1 );\n\n\t\tdiv0.id = \"menu_buttnparent_\" + id;\n\t\t//div0.style.float = \"left\";\n\t\tbuttn0.innerHTML = text;\n\t\tbuttn0.id = \"menu_buttn_\" + id;\n\t\tbuttn0.style.backgroundColor = this.bgColor;\n\t\tbuttn0.style.color = this.color;\n\t\tbuttn0.style.font = this.font;\n\t\tbuttn0.style.marginLeft = \"2px\";\n\t\tbuttn0.style.marginRight = \"0px\";\n\t\tbuttn0.style.borderTop = \"0px #ccc solid\";\n\t\tbuttn0.style.borderBottom = \"0px #ccc solid\";\n\t\tbuttn0.style.borderLeft = \"0px #777 solid\";\n\t\tbuttn0.style.borderRight = \"0px #777 solid\";\n\n\t\tdiv1.id = \"menu_opts_buttn_\" + id;\n\n\t\tdiv1.style.display = \"none\";\n\t\tdiv1.style.marginLeft = \"2px\";\n\t\tdiv1.style.position = \"absolute\";\n\t\tdiv1.style.minWidth = \"260px\";\n\t\tdiv1.style.zIndex = \"1\";\n\t\tdiv1.style.backgroundColor = this.bgColor;\n\t\tdiv1.style.color = this.color;\n\t\tdiv1.style.borderTop = \"1px #ccc solid\";\n\t\tdiv1.style.borderBottom = \"1px #ccc solid\";\n\t\tdiv1.style.borderLeft = \"1px #777 solid\";\n\t\tdiv1.style.borderRight = \"1px #777 solid\";\n\n\t\tthis.mnuBttns.push( buttn0 );\n\t\tthis.mnuBttnContainers.push( div0 );\n\t\tthis.mnuBttnOptContainers.push( div1 );\n\t\tthis.mnuBttnOptContainersTgl.push( { active: false } );\n\t\tvar lnks = [];\n\n\t\tif(  menuOptions ) {\n\t\t\tfor( var i=0; i<menuOptions.length; i++) {\n\t\t\t\tvar o = menuOptions[ i ];\n\n\t\t\t\tvar lnk = document.createElement(\"a\");\n\t\t\t\tlnk.innerHTML = o.display;\n\t\t\t\tlnk.style.padding = \"12px 16px\";\n\t\t\t\tlnk.style.display = \"block\";\n\t\t\t\tlnk.style.font = this.font;\n\t\t\t\tlnk.dataset.action = o.opt;\n\t\t\t\tif( o.data ) {\n\t\t\t\t\tlnk.dataset.data = JSON.stringify( o.data );\n\t\t\t\t}\n\t\t\t\tlnks.push( lnk );\n\t\t\t\tdiv1.appendChild( lnk );\n\t\t\t}\n\t\t}\n\n\t\tthis.mnuLinks.push( lnks );\n\n\t\tdiv0.style.display = \"inline-block\";\n\t\tdiv0.style.position = \"relative\";\n\t\t//div0.style.marginTop = \"12px\";\n\n\t\tparent.appendChild( div0 );\n\n\t}\n\n\tdoAction( id, data ) {\n\t\tthis.showMenu( true );\n\t\tthis.handlers.doExposedAction( id, data );\n\t}\n\n\tstatusItem( parent, text ) {\n\n\n\t\tvar div0 = document.createElement(\"div\");\n\t\tdiv0.innerText = text;\n\t\tif( text == \"\" ) {\n\t\t\tdiv0.style.width = \"10px\";\n\t\t}\n\t\telse if( text == \" \" ) {\n\t\t\tdiv0.style.width = \"50px\";\n\t\t}\n\n\t\tdiv0.style.marginTop= this.statusTopMargin;\n\t\tdiv0.style.color = this.statusColor;\n\t\tdiv0.style.backgroundColor = this.statusBgColor;\n\t\tdiv0.style.font = this.statusFont;\n\t\tparent.appendChild( div0 );\n\n\t\tthis.statusWidgets.list.push( div0 );\n\t\treturn div0;\n\n\t}\n\n\tstatusItems( parent ) {\n\n\n\t\tthis.statusWidgets.list = [];\n\n\t\tthis.statusItem( parent, \" \");\n\t\tthis.statusWidgets.displayMode = this.statusItem( parent, \"MODE: \" + this.status.displayMode );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.fs = this.statusItem( parent, \"FS: \" + this.sys.fs.getCurrent()  );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.pgmLen = this.statusItem( parent, \"LINES: \" + this.status.pgmLen );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.varLen = this.statusItem( parent, \"VARCOUNT: \" + this.status.varLen );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.interpreterStatus = this.statusItem( parent, \"STATUS: \" + this.status.status );\n\n\t}\n\n\n\tsetStatus( status ) {\n\n\t\tthis.statusWidgets.fs.innerText = \"FS: \" + this.sys.fs.getCurrent() ;\n\n\t\tif( status ) {\n\t\t\tthis.status = status;\n\t\t\tthis.statusWidgets.interpreterStatus.innerText = \"STATUS: \" + this.status.status;\n\t\t\tthis.statusWidgets.pgmLen.innerText = \"LINES: \" + this.status.pgmLen;\n\t\t\tthis.statusWidgets.varLen.innerText = \"VARCOUNT: \" + this.status.varLen;\n\t\t\tthis.statusWidgets.displayMode.innerText = \"MODE: \" + this.status.displayMode;\n\n\n\n\t\t}\n\n\t}\n\n\n\tbuttons( parent ) {\n\n\t\tvar mainOptions = this.options[\"main\"]\n\t\tfor( var i=0; i<mainOptions.length ; i++ ) {\n\t\t\tvar o = mainOptions[i];\n\n\t\t\tthis.button( parent, i, o.display, this.options[ o.opt ]  );\n\t\t}\n\t}\n\n\n\tonDeselect() {\n\t\tif( this.element.style.display != \"none\" ) {\n\t\t\tthis.clearMenu();\n\t\t}\n\t}\n\n\tstyleButtons( buttonTable ) {\n\t\tbuttonTable.style.backgroundColor = \"black\";\n\t\tbuttonTable.style.color = \"white\";\n\t\tbuttonTable.style.width = \"100%\";\n\n\t}\n\n\tcreate() {\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.style.marginLeft = \"auto\";\n\t\tthis.element.style.marginRight = \"auto\";\n\t\tthis.element.style.display = \"none\";\n\t\tthis.element.style.backgroundColor = this.statusBgColor;\n\t\tthis.element.style.paddingBottom = \"5px\";\n\t\tthis.element.style.paddingTop = \"5px\";\n\n\t\tthis.buttons( this.element );\n\n\t\tthis.statusItems( this.element );\n\n\t\tvar paste = document.createElement(\"div\");\n\t\tthis.pastebox = paste;\n\t\tpaste.style.display = \"none\";\n\t\tpaste.style.width = \"100%\";\n\n\t\tvar ta = document.createElement(\"textarea\");\n\t\tthis.pasteArea = ta;\n\t\tta.style.width = \"100%\";\n\t\tta.style.height = \"200px\";\n\t\tthis.element.appendChild( paste );\n\t\tpaste.appendChild( ta );\n\n\t\t//this.styleButtons( this.element.childNodes[0]\t);\n\n\t}\n\n\tget() {\n\t\treturn this.element;\n\t}\n\n\n\tgetClickLinkFunc() {\n\n\t\tvar __this = this;\n\n\t\treturn function(){\n\n\t\t\tconsole.log( this.dataset.action );\n\n\n\t\t\tfor( var j=0; j<__this.mnuBttnOptContainers.length ; j++ ) {\n\t\t\t\tvar optLst2 = __this.mnuBttnOptContainers[j];\n\t\t\t\tvar optLstTgl = __this.mnuBttnOptContainersTgl[j];\n\n\t\t\t\tconsole.log(\"dsp[\"+j+\"]\" , optLst2 );\n\t\t\t\toptLst2.style.display = \"none\";\n\t\t\t\toptLstTgl.active = false;\n\n\t\t\t}\n\n\t\t\tvar funData = undefined;\n\t\t\tif( (typeof this.dataset.data).toLowerCase() == \"string\" ) {\n\t\t\t\tfunData = JSON.parse( this.dataset.data );\n\t\t\t}\n\t\t\tif( this.dataset.action.startsWith(\"@\")  ) {\n\t\t\t\t__this.basic[ this.dataset.action.substr(1) ]( funData );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t__this.handlers[ \"handler_\" + this.dataset.action ]( funData );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetOnOverLinkFunc() {\n\n\t\tvar __this = this;\n\n\t\treturn function(){\n\n\t\t\tvar ll = __this.mnuLinks[ this.dataset.i ];\n\n\t\t\tfor( var k2=0; k2<ll.length ; k2++ ) {\n\t\t\t\tvar lnk2 = ll[ k2 ];\n\n\t\t\t\tlnk2.style.color = __this.color;\n\t\t\t\tlnk2.style.backgroundColor = __this.bgColor;\n\n\t\t\t}\n\n\n\t\t\tthis.style.color = __this.bgColor;\n\t\t\tthis.style.backgroundColor = __this.color;\n\t\t}\n\t}\n\n\tgetOnClickMenuButtonFunc() {\n\n\t\tvar __this = this;\n\n\t\treturn function(){\n\n\t\t\tvar thisIx = this.dataset.i;\n\t\t\tvar active =  __this.mnuBttnOptContainersTgl[ thisIx ].active;\n\n\t\t\t//Disable all other menus\n\t\t\tfor( var j=0; j<__this.mnuBttnOptContainers.length ; j++ ) {\n\t\t\t\tvar optLst2 = __this.mnuBttnOptContainers[j];\n\t\t\t\tvar optLstTgl = __this.mnuBttnOptContainersTgl[j];\n\n\t\t\t\tconsole.log(\"dsp[\"+j+\"]\" , optLst2 );\n\t\t\t\toptLst2.style.display = \"none\";\n\t\t\t\toptLstTgl.active = false;\n\n\t\t\t}\n\n\t\t\tfor( var j=0; j<__this.mnuBttnOptContainers.length ; j++ ) {\n\t\t\t\tvar optLst2 = __this.mnuBttnOptContainers[j];\n\t\t\t\tconsole.log(\"dsp[\"+j+\"]\" , optLst2.style.display );\n\n\t\t\t}\n\n\n\t\t\tvar ll = __this.mnuLinks[ thisIx ];\n\t\t\tfor( var k=0; k<ll.length ; k++ ) {\n\t\t\t\tvar lnk2 = ll[ k ];\n\n\t\t\t\tlnk2.style.color = __this.color;\n\t\t\t\tlnk2.style.backgroundColor = __this.bgColor;\n\n\t\t\t}\n\n\t\t\tvar optLst = __this.mnuBttnOptContainers[ thisIx ];\n\n\t\t\tconsole.log(active);\n\t\t\tif( active ) {\n\t\t\t\t__this.mnuBttnOptContainersTgl[ thisIx ].active = false;\n\t\t\t\toptLst.style.display = \"none\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t__this.mnuBttnOptContainersTgl[ thisIx ].active = true;\n\t\t\t\toptLst.style.display = \"block\";\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tenable() {\n\t\tvar tmp = 1;\n\n\t\tfor( var i=0; i<this.mnuBttns.length ; i++ ) {\n\t\t\tvar b = this.mnuBttns[i];\n\t\t\tb.dataset.i = i;\n\n\t\t\tvar optLst = this.mnuBttnOptContainers[i];\n\n\t\t\tvar f = this.getOnClickMenuButtonFunc();\n\t\t\tb.addEventListener( \"click\", f );\n\n\t\t\tvar ll = this.mnuLinks[i];\n\n\t\t\tfor( var k=0; k<ll.length ; k++ ) {\n\t\t\t\tvar lnk = ll[ k ];\n\t\t\t\tlnk.dataset.i = i;\n\t\t\t\tlnk.addEventListener( \"click\", this.getClickLinkFunc() );\n\t\t\t\tlnk.addEventListener( \"mouseover\", this.getOnOverLinkFunc() );\n\t\t\t}\n\n\n\t\t}\n\t}\n\n\tsetDimensions( w,h ) {\n\t\t\tthis.element.style.width = w + \"px\";\n\t\t\tthis.element.style.textAlign = \"left\";\n\t}\n\n\tclearMenu() {\n\t\tfor( var j=0; j<this.mnuBttnOptContainers.length ; j++ ) {\n\n\t\t\tvar optLstTgl = this.mnuBttnOptContainersTgl[j];\n\n\t\t\tif( optLstTgl.active ) {\n\n\t\t\t\tvar optLst2 = this.mnuBttnOptContainers[j];\n\t\t\t\t//console.log(\"dsp[\"+j+\"]\" , optLst2 );\n\t\t\t\toptLst2.style.display = \"none\";\n\t\t\t\toptLstTgl.active = false;\n\t\t\t}\n\t\t}\n\t}\n\n\thideMenu() {\n\n\t\tfor( var j=0; j<this.mnuBttnContainers.length ; j++ ) {\n\t\t\tvar buttonCtr = this.mnuBttnContainers[j];\n\t\t\tbuttonCtr.style.display = \"none\";\n\t\t}\n\n\t\tvar statusWidgets = this.statusWidgets.list;\n\t\tfor( var j=0; j<statusWidgets.length ; j++ ) {\n\t\t\tvar wid = statusWidgets[j];\n\t\t\twid.style.display = \"none\";\n\t\t}\n\n\n\n\t}\n\n\tunhideMenu() {\n\n\t\tfor( var j=0; j<this.mnuBttnContainers.length ; j++ ) {\n\t\t\tvar buttonCtr = this.mnuBttnContainers[j];\n\t\t\tbuttonCtr.style.display = \"block\";\n\t\t}\n\n\t\tvar statusWidgets = this.statusWidgets.list;\n\t\tfor( var j=0; j<statusWidgets.length ; j++ ) {\n\t\t\tvar wid = statusWidgets[j];\n\t\t\twid.style.display = \"block\";\n\t\t}\n\n\t}\n\n\n}\n\nexport { KERNALMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.initialized = false;\n    this.sys = sys;\n    this.prefix = sys.SIG + sys.SUBSYS  + \"__\" ;\n  }\n\n  init() {\n    this.initialize();\n  }\n\n  initialize() {\n    this.currentDisk = \"SYS\";\n    this.initialized=true;\n    this.privacy = this.sys.m.priv;\n\n  }\n\n  ready() {\n    return this.initialized;\n  }\n\n  getEmptyDirStructure(name) {\n    return {files:[], title: \"temporary session\" };\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n\n    if( !this.initialized ) {\n      return getEmptyDirStructure(null);\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n    var json = sessionStorage.getItem( storageName );\n\n    if(!json) {\n      return {files:[], title: \"temporary session\" };\n    }\n\n    var dir = JSON.parse( json );\n    if(!dir) {\n      return {files:[], title: \"temporary session\" };\n    }\n\n    var title = dir.title;\n\n    dir.title = title;\n    dir.free = 32-dir.files.length;\n\n    var foundNullIx = -1;\n\n    while( true ) {\n      for( var i=0; i<dir.files.length; i++) {\n        if( dir.files[i] == null) {\n          foundNullIx = i;\n          break;\n        }\n      }\n      if( foundNullIx > -1) {\n        dir.files.splice( foundNullIx, 1 );\n        foundNullIx = -1;\n      }\n      else {\n        break;\n      }\n    }\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<dir.files.length; i++) {\n        if( defaultMatcherFunction (  path, dir.files[i].fname ) ) {\n          files2.push( dir.files[ i ] );\n        }\n      }\n\n      dir.files = files2;\n      dir.free = 32-dir.files.length;\n    }\n        \n    return dir;\n\n  }\n\n\n  setDir( dir ) {\n\n\n    if( this.privacy.confirmLocalStorage() == false ) { return ; }\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n\n    sessionStorage.setItem(storageName, JSON.stringify( dir ) );\n\n  }\n\n  existsFile( fileName ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    var dir = this.getDir( \"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      return true;\n    }\n    return false;\n  }\n\n\n  removeFromDir( fileName ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir(\"\", null);\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files.splice( i, 1 );\n    }\n    this.setDir(dir);\n  }\n\n  updateDir( fileName, programLen, type ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir( \"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files[i].size = programLen;\n      dir.files[i].type = type;\n    }\n    else {\n      dir.files.push( {fname: fileName, size: programLen, type: type } );\n    }\n    this.setDir(dir);\n  }\n\n\n  saveFile( fileName0, data, type, length ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    if( this.privacy.confirmLocalStorage() == false ) { return false; }\n\n    var fileName = fileName0;\n    if( fileName0.length > 32) {\n        fileName = fileName0.substr(0,32);\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    var container = JSON.stringify( { type: type, data: data} );\n    sessionStorage.setItem(storageName, container );\n\n    this.updateDir( fileName, length, type );\n\n    return true;\n  }\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  loadFile( fileName, cbRec ) {\n\n    if( !this.initialized ) {\n      throw makeError(\"Filesystem not initialized\");\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    var json = sessionStorage.getItem( storageName );\n\n    if(!json) {\n      throw makeError(\"File not found\");\n    }\n\n    var data;\n    try {\n      data = JSON.parse( json ).data;\n    }\n    catch( e ) {\n      throw makeError(\"File corrupt\", e);\n      return;\n    }\n\n    cbRec.clazz[ cbRec.method ]( fileName, cbRec, data );\n\n  }\n\n  deleteFile( fileName ) {\n    if( ! this.existsFile( fileName ) ) {\n      return \"no such file\";\n    }\n\n    try {\n      this.removeFromDir( fileName );\n      this._removeFile( fileName );\n    }\n    catch ( e ) {\n      return \"unexpected\";\n    }\n    return \"ok\";\n  }\n\n  _removeFile( fileName ) {\n\n    var storageName =  this.prefix + \"\" +\n      this.currentDisk + \"_\" +\n      fileName;\n\n    sessionStorage.removeItem( storageName );\n\n  }\n\n  formatDisk() {\n\n    var dir = this.getDir( \"\", null );\n\n    for( var i=0; i<dir.files.length; i++) {\n\n        var fileName = dir.files[i].fname;\n        this._removeFile( fileName );\n\n    }\n\n    dir.files = [];\n    dir.title = \"Empty\"\n    this.setDir( );\n\n  }\n\n\n  getFullDisk() {\n\n    if( !this.initialized ) {\n\n      var dir = this.getDir( \"\", null);\n\n      var disk = {\n        dir: dir,\n        content: []\n      };\n\n      var diskStr = JSON.stringify( disk );\n\n      return diskStr;\n    }\n\n    var dir = this.getDir(\"\", null);\n    var content = [];\n\n    for( var i=0; i<dir.files.length; i++) {\n        var fileName = dir.files[i].fname;\n        var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n        var json = sessionStorage.getItem( storageName );\n        content.push( { fname: fileName ,content: json} );\n    }\n\n    var disk = {\n      dir: dir,\n      content: content\n    };\n\n    var diskStr = JSON.stringify( disk );\n\n    console.log( diskStr );\n\n    return diskStr;\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.initialized = false;\n    this.sys = sys;\n    this.prefix = sys.SIG + \"_\" + sys.SUBSYS + \"__\" ;\n\n    console.log( \"FILESYSMODULE lfs: \" + this.prefix );\n\n  }\n\n  makeDataContainer( data ) {\n    return {\n      success: true,\n      data: data\n    }\n  }\n\n  init() {\n    this.initialize();\n  }\n\n  initialize() {\n\n    this.privacy = this.sys.m.priv;\n\n    this.disks = [];\n    this.currentDisk = null;\n    var defaultDisk = \"0001\"\n\n    var json = localStorage.getItem( this.prefix + \"disks_list\" );\n    if( json == null ) {\n\n      var diskId = \"0001\";\n      var diskName = \"Default\";\n      this.disks = [ diskId ];\n      this.currentDisk = diskId;\n      this.lastDisk = 1;\n      this.disksNotInitialized = true;\n\n      if( this.privacy.confirmLocalStorage() == true ) {\n        localStorage.setItem( this.prefix + \"disks_list\", JSON.stringify( this.disks ) );\n        localStorage.setItem( this.prefix + \"0001_dir\", JSON.stringify( {files:[], title: diskName, readOnly: false } ) );\n        localStorage.setItem( this.prefix + \"disk_current\", diskId );\n\n        this.formatDisk();\n      }\n    }\n    else {\n      this.disks = JSON.parse( json );\n      this.currentDisk = localStorage.getItem( this.prefix + \"disk_current\" );\n\n      var last = -1;\n      for( var i=0; i<this.disks.length; i++) {\n        if( parseInt( this.disks[i] ) > last ) {\n          last = parseInt( this.disks[ i ] );\n        }\n      }\n      this.lastDisk = last;\n    }\n\n\n    this.initialized=true;\n\n  }\n\n\n  selectDisk( diskId ) {\n    this.currentDisk = diskId;\n\n    if( this.privacy.confirmLocalStorage() == true ) {\n      localStorage.setItem( this.prefix + \"disk_current\", diskId );\n    }\n  }\n\n  ready() {\n    return this.initialized;\n  }\n\n\n  getDisks() {\n\n    if( !this.initialized ) {\n      return [];\n    }\n\n    var storageName =  this.prefix + \"disks_list\";\n    var json = localStorage.getItem( storageName );\n    var disks = JSON.parse( json );\n\n    return disks;\n\n  }\n\n  getEmptyDirStructure(name) {\n    return {files:[], title: \"null\" };\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n\n    if( !this.initialized ) {\n      return getEmptyDirStructure(null);\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n    var json = localStorage.getItem( storageName );\n    var dir = JSON.parse( json );\n\n    //var title = \"0 \\u0012\\\"\"+dir.title+\"          \\\"\\u0092 00 2A\";\n    var title = dir.title;\n\n    if(!json) {\n      return {files:[], title: title };\n    }\n    dir.title = title;\n    dir.free = 32-dir.files.length;\n\n    var foundNullIx = -1;\n\n    while( true ) {\n      for( var i=0; i<dir.files.length; i++) {\n        if( dir.files[i] == null) {\n          foundNullIx = i;\n          break;\n        }\n      }\n      if( foundNullIx > -1) {\n        dir.files.splice( foundNullIx, 1 );\n        foundNullIx = -1;\n      }\n      else {\n        break;\n      }\n    }\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<dir.files.length; i++) {\n        if( defaultMatcherFunction (  path, dir.files[i].fname ) ) {\n          files2.push( dir.files[ i ] );\n        }\n      }\n\n      dir.files = files2;\n      dir.free = 32-dir.files.length;\n    }\n\n\n\n    return dir;\n\n  }\n\n\n\n  setDir( dir ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n\n    if( this.privacy.confirmLocalStorage() == true ) {\n      localStorage.setItem(storageName, JSON.stringify( dir ) );\n    }\n\n  }\n\n  existsFile( fileName ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    var dir = this.getDir(\"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      return true;\n    }\n    return false;\n  }\n\n\n  removeFromDir( fileName ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir(\"\", null);\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files.splice( i, 1 );\n    }\n    this.setDir(dir);\n  }\n\n  updateDir( fileName, programLen, type ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir( \"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files[i].size = programLen;\n      dir.files[i].type = type;\n    }\n    else {\n      dir.files.push( {fname: fileName, size: programLen, type: type } );\n    }\n    this.setDir(dir);\n  }\n\n\n  saveFile( fileName0, data, type, length ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var fileName = fileName0;\n    if( fileName0.length > 32) {\n        fileName = fileName0.substr(0,32);\n    }\n\n    if( fileName.startsWith(\"$/\") ) {\n      fileName = fileName.substr( 2 );\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    //save pgm\n    var container = JSON.stringify( { type: type, data: data} );\n    if( this.privacy.confirmLocalStorage() == true ) {\n      localStorage.setItem(storageName, container );\n      this.updateDir( fileName, length, type );\n\n      return true;\n    }\n\n    return false;\n  }\n\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  loadFile( fileName0, cbRec ) {\n\n    var makeError = this.makeError;\n\n    if( !this.initialized ) {\n      throw makeError(\"Filesystem not initialized\");\n    }\n\n    var fileName = fileName0;\n\n    if( fileName == \"*\" )  {\n        var dir = this.getDir(\"\",null);\n        if( dir.files ) {\n          if( dir.files.length > 0) {\n            if( dir.files[0]) {\n              fileName = dir.files[0].fname;\n            }\n          }\n        }\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    var json = localStorage.getItem( storageName );\n    if(!json) {\n      throw makeError(\"File not found\");\n    }\n\n    var data;\n    try {\n      data = JSON.parse( json ).data;\n    }\n    catch( e ) {\n      throw makeError(\"File corrupt\", e);\n      return;\n    }\n\n    cbRec.clazz[ cbRec.method ]( fileName0, cbRec, this.makeDataContainer( data ) );\n\n  }\n\n  deleteFile( fileName ) {\n    if( ! this.existsFile( fileName ) ) {\n      throw \"no such file\";\n    }\n\n    try {\n      this.removeFromDir( fileName );\n      this._removeFile( fileName );\n    }\n    catch ( e ) {\n      throw \"unexpected (\"+e.message+\")\";\n    }\n    return true;\n  }\n\n  _removeFile( fileName ) {\n\n    var storageName =  this.prefix + \"\" +\n      this.currentDisk + \"_\" +\n      fileName;\n\n    localStorage.removeItem( storageName );\n\n  }\n\n  formatDisk() {\n\n    var dir = this.getDir(\"\", null);\n\n    for( var i=0; i<dir.files.length; i++) {\n\n        var fileName = dir.files[i].fname;\n        this._removeFile( fileName );\n\n    }\n\n    dir.files = [];\n    dir.title = \"Empty\"\n    this.setDir( );\n\n  }\n\n  createDiskFromImage( name, image ) {\n\n    this.createDiskFromImage2( name, image, false );\n\n  }\n\n  createSysDiskFromImage( image ) {\n\n    this.createDiskFromImage2( \"SYS\", image, true );\n\n  }\n\n  createDiskFromImage2( name, image, sysDisk ) {\n\n    if( this.privacy.confirmLocalStorage() == false ) { return ; }\n\n    var labl;\n    if( !sysDisk ) {\n      this.lastDisk++;\n      labl = \"\" + this.lastDisk;\n    }\n    else {\n      labl = \"\" + 1;\n    }\n\n    labl = labl.padStart( 4,\"0\");\n    var dir = image.dir;\n    var content = image.outtent;\n\n    var storageName =  this.prefix + \"\" + labl + \"_dir\";\n\n\n    localStorage.setItem(storageName, JSON.stringify( dir ) );\n\n\n    for( var i=0; i<content.length; i++) {\n        var fileName = content[i].fname;\n        var storageName =  this.prefix + \"\" + labl + \"_\" + fileName;\n        localStorage.setItem( storageName, content[i].outtent );\n    }\n\n    this.disks.push( labl );\n    localStorage.setItem( this.prefix + \"disks_list\", JSON.stringify( this.disks ) );\n\n  }\n\n  createDisk() {\n\n    if( this.privacy.confirmLocalStorage() == false ) { return ; }\n    var existingDisks = this.getDisks();\n    this.lastDisk ++;\n    var labl = \"\" + this.lastDisk;\n    labl = labl.padStart( 4,\"0\");\n\n    var newDir = this.getEmptyDirStructure(\"NEW DISK\");\n\n    var storageName =  this.prefix + \"\" + labl + \"_dir\";\n    localStorage.setItem(storageName, JSON.stringify( newDir ) );\n\n    this.disks.push( labl );\n    localStorage.setItem( this.prefix + \"disks_list\", JSON.stringify( this.disks ) );\n\n  }\n\n  getFullDisk() {\n\n    if( !this.initialized ) {\n\n      var dir = this.getDir( \"\", null);\n\n      var disk = {\n        dir: dir,\n        content: []\n      };\n\n      var diskStr = JSON.stringify( disk );\n\n      return diskStr;\n    }\n\n    var dir = this.getDir(\"\", null);\n    var content = [];\n\n    for( var i=0; i<dir.files.length; i++) {\n        var fileName = dir.files[i].fname;\n        var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n        var json = localStorage.getItem( storageName );\n        content.push( { fname: fileName ,content: json} );\n    }\n\n    var disk = {\n      dir: dir,\n      content: content\n    };\n\n    var diskStr = JSON.stringify( disk );\n\n    console.log( diskStr );\n\n    return diskStr;\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n\n    this.files = [];\n    this.data  = {};\n\n  }\n\n  init() {}\n\n  ready() {\n    return true;\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n\n    var files = this.files;\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<this.files.length; i++) {\n        if( defaultMatcherFunction (  path, this.files[i].fname ) ) {\n          files2.push( this.files[ i ] );\n        }\n      }\n\n      files = files2;\n    }\n\n    return {\n      title: \"Ram Disk\",\n      files: files,\n      free: 0\n    }\n  }\n\n  exists( fileName ) {\n\n    var dir = this.getDir(\"\",null);\n    var files = dir.files;\n\n    var found = -1;\n    for( var i=0; i<files.length; i++) {\n      if( files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      return true;\n    }\n    return false;\n  }\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  saveFile( fileName, data, type, size ) {\n\n    if( fileName.indexOf(\"/\") >-1 ) {\n      throw {\n        message: \"saveFile: '\"+fileName+\"' - invalid path, RAMFS device only supports flatdir\"\n      }\n    }\n    if( ! this.exists( fileName ) ) {\n      var fEntry = {\n        fname: fileName,\n        type: type,\n        size: size\n      }\n\n      this.data[ fileName ] = { type: type, data: data};\n      this.files.push( fEntry );\n    }\n\n  }\n\n  loadFile( fileName, cbRec ) {\n\n    if( ! this.exists( fileName ) ) {\n      throw makeError(\"File not found\");\n    }\n\n    cbRec.clazz[ cbRec.method ]( fileName, cbRec, this.data[ fileName ].data );\n\n    //return this.data[ fileName ];\n\n  }\n\n  deleteFile( fileName ) {\n\n    if( ! this.existsFile( fileName ) ) {\n      return false;\n    }\n\n    try {\n      var files = this.files;\n\n      for( var i=0; i<files.length; i++) {\n        if( files[i].fname == fileName ) {\n          files[ i ] = undefined;\n          break;\n        }\n      }\n\n      this.data[ fileName ] = undefined;\n    }\n    catch ( e ) {\n      throw {\n        message: \"deleteFile: '\" + fileName + \"' - \" + e.message\n      }\n    }\n    return true;\n  }\n\n  formatDisk() {\n\n    this.files = [];\n    this.data  = {};\n\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n\n    this.files = [];\n    this.data  = {};\n\n  }\n\n  init() {}\n\n  ready() {\n    return true;\n  }\n\n  exists( fileName ) {\n\n    var el = document.getElementById( fileName );\n\n    if( el ) {\n      return true;\n    }\n  }\n\n  saveFile( fileName, data, type, size ) {\n\n    throw { message: \"saveFile '\"+fileName+\"' - SCRIPTURL is readonly\" }\n\n  }\n\n  makeDataContainer( data ) {\n    return {\n      success: true,\n      data: data\n    }\n  }\n\n  loadTextFromURL( url, cb ){\n      // read text from URL location\n      var request = new XMLHttpRequest();\n      var _this = this;\n\n      request.onreadystatechange = function () {\n          if (request.readyState === 4 && request.status === 200) {\n\n              _this.loadedFile( url, cb, _this.makeDataContainer( request.responseText ) );\n          }\n      }\n      request.overrideMimeType(\"text/plain\");\n      request.open('GET', url, true);\n      request.send(null);\n  }\n\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  loadFile( fileName, cbRec ) {\n\n    if( ! this.exists( fileName ) ) {\n      throw makeError(\"File not found\");\n    }\n\n    var el = document.getElementById( fileName );\n\n    if( el.innerText.trim() == \"\" ) {\n\n      var found = false;\n      if( el.src ) {\n        if( el.src != \"\" ) {\n          found = true;\n        }\n      }\n      if(! found ) {\n          return { type: \"bas\", data: \"10 print \\\"?program not found error\\\"\" };\n      }\n\n      this.loadTextFromURL( el.src, cbRec );\n\n\n    }\n    else {\n\n      var lines = el.innerText.split(\"\\n\");\n      var data = \"\";\n      for( var i=0; i<lines.length; i++) {\n        if( data != \"\") { data += \"\\n\"; }\n        data+= lines[ i ].trim();\n      }\n\n      cbRec.clazz[ cbRec.method ]( fileName, cbRec, this.makeDataContainer( data ) );\n\n      /*\n\n        loadFile( path, cb )\n        loadedFile( path, cb, data )\n      */\n\n    }\n\n  }\n\n  loadedFile( fileName, cbRec, data) {\n    cbRec.clazz[ cbRec.method ]( fileName, cbRec, data );\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n    var scriptsDom = document.getElementsByTagName(\"script\");\n    var scripts = [];\n\n    for( var i=0; i<scriptsDom.length; i++) {\n      var item = scriptsDom.item(i);\n      //if(item.type == \"text/basic\" ) {\n        console.log( item.attributes.id );\n        var id = item.attributes.id.nodeValue;\n\n        scripts.push(  { fname: id } );\n    }\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<scripts.length; i++) {\n        if( defaultMatcherFunction (  path, scripts[i].fname ) ) {\n          files2.push( scripts[ i ] );\n        }\n      }\n\n      scripts = files2;\n    }\n\n    return {files:  scripts, title: \"page scripts\", free: 0 };\n\n  }\n\n  deleteFile( fileName ) {\n\n    throw { message: \"SCRIPTURL is readonly\" }\n\n  }\n\n  formatDisk() {\n\n    throw { message: \"formatDisk '\"+fileName+\"' - SCRIPTURL is readonly\" }\n\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  /* QFS - Qualified file system */\n  /* Qualified paths can be used to find files on other file system*/\n  constructor( sys, dependencies ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    if(!dependencies) {\n      throw \"dependencies expected\";\n    }\n\n    this.dependencies = dependencies;\n    this.initialized = false;\n    this.sys = sys;\n    this.defaultFS = sys.bootCfg.fs.default;\n    this.currentFS = this.defaultFS;\n\n    this.validCharacters =\n      \"abcdefghijklmnopqrstuvwxyz\" +\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\" +\n      \"0123456789+-._\";\n\n  }\n\n  init() {\n    this.initialize();\n  }\n\n  initialize() {\n\n    this.fsList = [];\n    var dependencies = this.dependencies;\n\n    for( var i=0; i< dependencies.length; i++) {\n        var fsToken = dependencies[i];\n        var fs = {\n          token: fsToken,\n          fs: this.sys.m[ fsToken ],\n          prefix: fsToken + \"://\"\n        }\n        this.fsList.push( fs );\n    }\n\n     this.initialized = true;\n  }\n\n  matcher( matchString, fileName ) {\n    if( matchString.endsWith( \"*\" ) ) {\n      var newMatchString = matchString.substr( 0, matchString.length - 1 );\n      if( fileName.startsWith( newMatchString )) {\n        return true;\n      }\n    }\n    else if( matchString.startsWith( \"*\" ) ) {\n      var newMatchString = matchString.substr( 1 );\n      if( fileName.endsWith( newMatchString )) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getCurrent() {\n    return this.currentFS;\n  }\n\n  checkFS( qpath0 ) {\n\n    var qpath = qpath0;\n    var fsList = this.fsList;\n\n    if( qpath.split(\"://\").length == 1 ) { //no prefix\n      qpath = qpath0 + \"://\";\n    }\n\n    for( var i=0; i< fsList.length; i++) {\n        var fs = fsList[i];\n        if( qpath.startsWith( fs.prefix ) ) {\n          return fs;\n        }\n    }\n    return null;\n  }\n\n  setFS( path ) {\n\n    var fs = this.checkFS(path);\n\n    if( ! fs ) {\n      return false;\n    }\n    this.currentFS = fs.token;\n    return true;\n  }\n\n  listFS() {\n    var list = [];\n    var fsList = this.fsList;\n\n    for( var i=0; i< fsList.length; i++) {\n        var fs = fsList[i];\n        list.push( fs.prefix );\n    }\n\n    return list;\n  }\n\n  ready() {\n    return this.initialized;\n  }\n\n  getFS( qpath ) {\n\n    var fsList = this.fsList;\n\n    if( qpath.split(\"://\").length == 1 ) { //no prefix\n      for( var i=0; i< fsList.length; i++) {\n          var fs = fsList[i];\n          if( (this.currentFS + \"://\") == fs.prefix ) {\n            return fs;\n          }\n      }\n    }\n\n    for( var i=0; i< fsList.length; i++) {\n        var fs = fsList[i];\n        if( qpath.startsWith( fs.prefix ) ) {\n          return fs;\n        }\n    }\n\n    this.currentFS\n\n    return null;\n  }\n\n  getLPath( qpath ) {\n    var parts = qpath.split(\"://\");\n    if( parts.length <2 ) { return qpath; }\n    return parts[ 1 ];\n  }\n\n  getDir( qpath ) {\n\n    if( !this.initialized ) {\n      return {\n        files: [],\n        title: \"null\",\n        free: -1,\n        fs: \"?\"\n      };\n    }\n\n    var fsRecord = this.getFS( qpath );\n\n    if( !fsRecord ) {\n      return {\n        files: [],\n        title: \"null\",\n        free: -1,\n        fs: \"?\"\n      };\n    }\n    var result = fsRecord.fs.getDir( this.getLPath( qpath), this.matcher );\n    result.fs = fsRecord.prefix;\n    return result;\n  }\n\n  existsFile( qpath ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    return false;\n  }\n\n  checkFileName( f ) {\n    for( var i=0; i<f.length; i++ ) {\n      var c = f.charAt(i);\n      if( this.validCharacters.indexOf( c ) < 0 ) {\n        return false;\n      }\n    }\n    return true;\n\n  }\n\n  doCallBack( callback, callBackResponse ) {\n\n    if( callback.clazz )  {\n\n        if( callback.data ) {\n          callBackResponse.cbData = callback.data;\n        }\n        callback.clazz[ callback.method ]( callBackResponse );\n\n    }\n    else {\n        callback( callBackResponse );\n    }\n\n\n  }\n\n  saveFile(\n      /*mandatory*/ qpath, data, callRecord,\n      /*optional*/ type, length ) {\n\n    if( !this.initialized ) {\n      return null;\n    }\n\n\n    var fsRecord = this.getFS( qpath );\n    if( !fsRecord ) {\n      throw { message: qpath + \" has unknown file system\" };\n    }\n\n    var lpath = this.getLPath( qpath );\n    if( !lpath ) {\n      throw { message: \"QPath '\" + qpath + \"' has no local path\" };\n    }\n\n    if( !this.checkFileName( lpath ) ) {\n      throw { message: \"path '\" + lpath + \"' has invalid characters\" };\n    }\n\n    var result = fsRecord.fs.saveFile( lpath, data, type, length );\n\n    var args = {};\n    args.qpath = qpath;\n    args.type = type;\n    args.length = length;\n\n\n    var callBackResponse = { result: result, args: args, origCallBackRecord: callRecord };\n\n    this.doCallBack( callRecord, callBackResponse );\n\n    return null;\n\n  }\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n\n  loadFile( qpath , callRecord  ) {\n\n    var cbRec = callRecord;\n    var makeError = this.makeError;\n\n    if( !this.initialized ) {\n\n      cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError(\"Not Initialized\") );\n\n      return;\n    }\n\n    var fsRecord = this.getFS( qpath );\n\n    if( !fsRecord ) {\n\n      cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError(qpath + \" has unknown file system\") );\n\n      return;\n    }\n\n    var lpath = this.getLPath( qpath );\n    if( !lpath ) {\n\n      cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError( \"QPath '\" + qpath + \"' has no local path\" ) );\n\n      return;\n    }\n\n    if( !this.checkFileName( lpath ) ) {\n      throw { message: \"path '\" + lpath + \"' has invalid characters\" };\n    }\n    //original calling callrecord looks like this\n    //var callRecord = { clazz: this, method: \"loadedApp\" }\n\n    var wrappedCallBackRecord = {\n        origCallBackRecord: callRecord,\n        qpath: qpath,\n        clazz: this,\n        method: \"loadedFile\"\n    };\n\n    try {\n      fsRecord.fs.loadFile( lpath, wrappedCallBackRecord );\n    }\n    catch( e ){\n      if( e.fsErrorSignature ) {\n        cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError( e.reason ) );\n        return;\n      }\n      else {\n        cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError( \"Internal error\", e ) );\n        return;\n      }\n    }\n\n  }\n\n  loadedFile( path, cbWrapRec, response ) {\n    var cbRec = cbWrapRec.origCallBackRecord;\n    cbRec.clazz[ cbRec.method ]( cbWrapRec.qpath, cbRec , response );\n  }\n\n\n  /*\n\n    loadFile( path, cb )\n    loadedFile( path, cb, data )\n  */\n\n  deleteFile( qpath, callRecord ) {\n\n    if( !this.initialized ) {\n      return null;\n    }\n\n    var fsRecord = this.getFS( qpath );\n    if( !fsRecord ) {\n      throw { message: qpath + \" has unknown file system\" };\n    }\n\n    var lpath = this.getLPath( qpath );\n    if( !lpath ) {\n      throw { message: \"QPath '\" + qpath + \"' has no local path\" };\n    }\n\n    if( !this.checkFileName( lpath ) ) {\n      throw { message: \"path '\" + lpath + \"' has invalid characters\" };\n    }\n\n    //TODO asynch delete\n    var result = fsRecord.fs.deleteFile( lpath );\n\n    var args = {};\n    args.qpath = qpath;\n\n    var callBackResponse = { result: result, args: args, origCallBackRecord: callRecord };\n\n    this.doCallBack( callRecord, callBackResponse );\n\n    return null;\n  }\n\n  formatDisk( qpath ) {\n\n    if( ! this.existsFile( fileName ) ) {\n      return \"no such file\";\n    }\n\n    return \"error\";\n\n  }\n\n\n}\n\nexport { FILESYSMODULE as default};\n"],"names":["MrBeepChannel","constructor","audioCtx","waveform","masterVolume","volumeFunc","this","initialized","initializedFully","effects","FLR","FS","VLR","VS","enable","_init","disable","maxGain","gain","value","createGain","connect","volumeValue","b0","b1","b2","b3","b4","b5","b6","filter","createBiquadFilter","type","frequency","Q","node","createScriptProcessor","onaudioprocess","e","output","outputBuffer","getChannelData","i","white","Math","random","occilator","setValueAtTime","currentTime","createOscillator","start","setVolume","volume","playBeep","duration","durInSeconds","durInSeconds0","durInSeconds1","durInSeconds2","now","cancelScheduledValues","linearRampToValueAtTime","clearEffect","addEffect","time","length","push","playEffect","freq","setAttackDecayRelease","attackT","decayT","releaseT","setSustainLevel","sustainV","playSound","sustainT","durInSeconds3","setFrequency","f","startSound","releaseSound","MrBeep","window","AudioContext","webkitAudioContext","channels","defaults","masterGain","destination","channelCount","_int_v2g","_int_log10","x","log","LN10","v","console","reset","channelVolume","channel","channelFrequency","channelSetAttackDecayRelease","channelSetSustainLevel","DATA","options","opts","opt","display","navigator","clipboard","readText","data","fg","bg","border","getOptions","HANDLERS","menuSys","sys","setBasic","basic","m","doExposedAction","id","handler_pasteFromClip","handler_pasteBox","pastebox","style","pasteArea","defaultPasteText","oldInnerText","innerText","input","unsetInputHandler","clearMenu","hideMenu","color","backgroundColor","bgColor","focus","select","out","hideInner","__this","pasteHandler","setTimeout","pasteHandler2","showInner","unhideMenu","setInput","removeEventListener","pasteTextFromClipboard","addEventListener","alert","then","clipText","bootCfg","fs","default","mode","warnings","privacyMute","subSys","keyboard","allowDefault","all","events","adEvents","boot","cfg","staticFlag","init","staticTarget","headerElement","domContainer","document","createElement","body","appendChild","SIG","SUBSYS","VERSION","CODENAME","nulcon","rootScript","getElementById","displayMode","parseInt","dataset","isNaN","bootMode","dynamicMinTarget","indexOf","bootDebug","getSys","initSimpleLogging","buf","getAll","writeln","txt","s","rawlog","array","line","j","sep","rawlogcon","args","Array","prototype","slice","call","arguments","apply","logwarn","warn","logerr","error","addModule","toList","checkL","dep","deps","mods","ci","displaymodes","drivers","tablecon","canvas","modes","textmode1","textmode2","textmode3","menuCreated","getDriver","currentDriver","getMode","getModes","getCurrentMode","currentMode","setMode","menu","Number","dc","getDeviceConfig","cm","endMode","create","device","initMode","config","notifyOnClick","basicmenu","destroy","undefined","tmp","split","driver","splice","cursorOn","cols","rows","y","hidden","blinking","reverse","outColors","fontSizeInt","fontSizeCSS","fontFamily","htmlPalette","txtBgColor","txtColor","htmlColor","ix","outDiv0","remove","cvs","cvs2","ctx","ctx2","rowel","cellel","blinkInterval","clearInterval","getColumCount","getRowCount","getDimensions","headerElementManager","msgs","queuedMessages","inputElement","colsPercentage","outDiv1","outEl","event","sel","selection","createRange","toString","getSelection","rangeCount","getRangeAt","cloneContents","childNodes","text","rix","cix","firstChild","getTextOfSelection","clipboardData","setData","preventDefault","table","borderCollapse","borderSpacing","resize","fontSize","tableLayout","readOnly","textAlign","tr","padding","maxHeight","height","rowArray","td","textOverflow","whiteSpace","overflow","maxWidth","innerHTML","width","position","zIndex","verticalAlign","marginLeft","marginRight","get","setDimensions","clientWidth","dirty","dirtyFlags","_this","setInterval","_int_blink","native","operation","action","blinkMode","hasPixels","_int_updateArea","srccells","x0","y0","x1","y1","cell","src","textContent","update","p","list","_int_blinkOff","show","cx","cy","el","cells","x2","y2","updateAll","hide","getElement","clear","__int_nl","__int_scrollDown","str","c","substr","__int_write_direct_ch","ch","cellyp1","cursorMode","colors","palette","pad2","hs","rv","pl","htmlCol","newcolor","r","floor","g","b","bmPalette","defaultTextMode","cvsCursor","ctxCursor","cache","fontSizeIntW","fontSizeIntH","oc","bgHTML","fgHTML","w","h","ww","innerWidth","wh","innerHeight","startsWith","percentages","percentagex","percentagey","percentage","fsw","fsh","center","getContext","alpha","strokeStyle","cX","cY","updCtxImageData","synched","offsets","font","textBaseline","fsid2","tmp0","measureText","oIndicatorChar","oIndicatorSize","oIndicatorOffset","handler","myFunction","drawImage","_int_storeset_color","oldfg","oldbg","_int_restore_color","index","index2","paintCursor","yy","offX","_int_paintchar","col1","col2","_int_drawIndicator","fillStyle","fillRect","cacheel","charCodeAt","tmp3","tmpw","off","fillText","op_gcolor","params","op_line","beginPath","moveTo","lineTo","stroke","gfxUpdate","record","lineLen","pixels","upd","imd","getImageData","pdata","xrel","offset","putImageData","getBitmapDimensions","mrbeepaudio","mrBeep","simplewarning","key","warningOngoing","notify","simpleWarning","oldBGColor","priv","verified","denied","confirmLocalStorage","localStorage","getItem","confirm","setItem","mutedinput","getKey","setInputHandler","clazz","prefix","domelinput","evtQueueKeyPress","target","shift","elFun","checkIfAllowDefault","ad","l","queuekp","kEvent","keyLabel","shiftKey","ctrlKey","inputMode","htmlwrapper","isAttr","executeFunction","paramArray","backgroundImage","backgroundSize","execute","htmlCodeArr","htmlCode","handle","htmlHandle","setnode","htmlAppend","htmlValue","arr","attr","attributes","getNamedItem","attrName","nodeValue","setAttribute","parentNode","parts","elName","apps","audioInitFlag","audioInit","audio","con","settings","worker","Worker","qfs","loadFile","method","initMore","settingsPath","cbMessage","settingsLoadResponse","success","postMessage","windowWidth","windowHeight","bWH","_parent","onmessage","message","t","write","writec","d","parCount","p1","p2","p3","p4","showMenu","setPos","loadAppFromProgram","loadDataFromProgram","saveProgram","deleteFile","dir","path","setfs","setStatus","listfs","cursor","processId","messageObject","textW","textH","bitmapW","bitmapH","properties","areasList","callback","saveFile","code","writeText","status","windowResizeEvent","sub","nullHandler","loadApp","url0","block","charAt","requestClipboardCopy","requestClipboardCopyScreen","requestColorReset","requestExport","requestFileSystems","listFS","list2","requestShowList","requestListDirectory","getDir","getCurrent","files","fname","requestListScripts","script","requestAbout","requestList","requestRenumber","requestNew","requestVars","requestDataBlocks","requestHelp","requestClearScreen","requestResetConsole","requestRun","requestStop","reason","deletedFile","qpath","result","origCallBackRecord","savedProgram","url","label","loadedApp","response","pgmData","QPath","loadedDataFromProgram","loadedAppFromProgram","currentFs","setFS","title","free","inputKeyHandler","doAction","handlers","menus","statusWidgets","pgmLen","varLen","mnuBttnOptContainers","mnuBttnOptContainersTgl","mnuBttns","mnuBttnContainers","mnuLinks","statusTopMargin","statusColor","statusBgColor","statusFont","cnt","getOnClickMenuButtonFunc","ll","k","lnk","getClickLinkFunc","getOnOverLinkFunc","element","flag","button","parent","menuOptions","div0","buttn0","div1","borderTop","borderBottom","borderLeft","borderRight","minWidth","active","lnks","o","JSON","stringify","statusItem","marginTop","statusItems","interpreterStatus","buttons","mainOptions","onDeselect","styleButtons","buttonTable","paddingBottom","paddingTop","paste","ta","optLst2","optLstTgl","funData","toLowerCase","parse","k2","lnk2","thisIx","optLst","sfs","initialize","currentDisk","privacy","ready","getEmptyDirStructure","name","defaultMatcherFunction","storageName","json","sessionStorage","foundNullIx","files2","setDir","existsFile","fileName","found","removeFromDir","updateDir","programLen","size","fileName0","container","makeError","details","fsErrorSignature","cbRec","_removeFile","removeItem","formatDisk","getFullDisk","disk","content","diskStr","makeDataContainer","disks","diskId","lastDisk","disksNotInitialized","last","selectDisk","getDisks","createDiskFromImage","image","createDiskFromImage2","createSysDiskFromImage","sysDisk","labl","padStart","outtent","createDisk","newDir","ramfs","exists","fEntry","loadTextFromURL","cb","request","XMLHttpRequest","onreadystatechange","readyState","loadedFile","responseText","overrideMimeType","open","send","trim","lines","scriptsDom","getElementsByTagName","scripts","item","dependencies","defaultFS","currentFS","validCharacters","fsList","fsToken","token","matcher","matchString","endsWith","newMatchString","checkFS","qpath0","getFS","getLPath","fsRecord","checkFileName","doCallBack","callBackResponse","cbData","callRecord","lpath","wrappedCallBackRecord","cbWrapRec","mods0","Object","getOwnPropertyNames","conStyle","onReady"],"sourceRoot":""}