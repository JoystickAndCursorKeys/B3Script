{"version":3,"file":"basicworker.js","mappings":"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","sources":["webpack://B3/./tmp/basicworker.js"],"sourcesContent":["//src/sys/modules/basic/worker/sys.js\n//src/sys/modules/basic/worker/basicarray.js\n//src/sys/modules/basic/worker/basicerrorhandler.js\n//src/sys/modules/basic/worker/coding/codingeditor.js\n//src/sys/modules/basic/worker/basicruntime.js\n//src/sys/modules/basic/worker/extendedcommands.js\n//src/sys/modules/basic/worker/pgmmanager.js\n//src/sys/modules/basic/worker/basiccommands.js\n//src/sys/modules/basic/worker/basicparser.js\n//src/sys/modules/basic/worker/basictokenizer.js\n//src/sys/modules/basic/worker/input.js\n//src/sys/modules/basic/worker/processes.js\n//src/sys/modules/basic/worker/commandhelp.js\n//src/sys/modules/basic/worker/../../rwbuffers/worker/textarea.js\n//src/sys/modules/basic/worker/../../rwbuffers/worker/bitmap.js\n//src/sys/modules/basic/worker/../../rwbuffers/worker/audio.js\n//src/sys/modules/basic/worker/workerbootstrap_static.js\n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n\n// ## sys.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/sys.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/sys.js\n\nvar sys = {\n  appName: \"unknown\",\n  unique: 0\n\n};\n\nconsole = sys;\n\n/* LOGGER */\n\nfunction init_sys() {\n\n  function post( type, message ) {\n    postMessage( { type: type, message: message } );\n  }\n\n  sys.post = post;\n\n  sys.log = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      var args2 = [];\n\n      for( var i=0; i<args.length ; i++) {\n        args2.push( JSON.stringify( args[ i ]) );\n      }\n      post(\"syslog\",args2 );\n\n  }\n\n  sys.logerr = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      post(\"syserr\",args );\n\n  }\n\n  sys.load = function( rt, path, device ) {\n\n      post(\"load\", { processId: rt.processId, path:path, device: device } );\n\n  }\n\n  sys.loaddata = function( rt, path, type, label ) {\n\n      post(\"loaddata\", { processId: rt.processId, path:path, type: type, label: label } );\n\n  }\n\n  sys.save = function( rt, path, device, data ) {\n\n      post(\"save\", { processId: rt.processId, path:path, device: device , data: data } );\n\n  }\n\n  sys.delete = function( rt, path, device ) {\n\n      post(\"delete\", { processId: rt.processId, path:path, device: device  } );\n\n  }\n\n  sys.dir = function( rt, path, device ) {\n\n      post(\"dir\", { processId: rt.processId, path:path, device: device } );\n\n  }\n\n\n  sys.setcfg = function( cfg ) {\n      this.cfg = cfg;\n  }\n\n  sys.listfs = function( rt  ) {\n\n      post(\"listfs\", { processId: rt.processId } );\n\n  }\n\n  sys.poststatus = function( procId, status  ) {\n\n      post(\"status\", { procId: procId, status: status } );\n\n  }\n\n  sys.setfs = function( rt, path  ) {\n\n      this.fs = path;\n      post(\"setfs\", { path: path, processId: rt.processId } );\n\n  }\n\n  sys.setDisplayMode = function( rt, m ){\n    post( \"displaymode\", { processId: rt.processId, m:m } );\n  }\n\n  sys.blinkMode = function( m ){\n    post( \"blinkMode\", { m:m } );\n  }\n\n\n  sys.html = {}\n\n  sys.html.executeFunction = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      post( \"htmldofun\",args );\n\n  }\n\n  sys.html.html = function() {\n\n      var args = Array.prototype.slice.call(arguments);\n      post( \"html\",args );\n\n  }\n\n  sys.html.htmlnode = function() {\n\n    var args = Array.prototype.slice.call(arguments);\n    post( \"htmlnode\",args );\n\n  }\n\n\n  sys.html.get = function() {\n\n    post( \"htmlget\", args );\n    return { wait_for_result: true }\n\n  }\n\n  sys.export = function( code, destination ) {\n    post( \"export\", { code: code, destination: destination } );\n  }\n\n  sys.signalHideMenu = function( flag ) {\n    post( \"signalHideMenu\", { hide: flag } );\n  }\n\n}\n\nfunction start_sys() {\n  sys.log(\"Starting wsys\");\n\n  sys.processes = new processes( sys );\n  sys.input = new Input( sys );\n  sys.out = new TextArea( sys );\n  sys.bout = new BitMap( sys );\n  sys.audio = new Audio( sys );\n  sys.rootProcId = -1;\n\n  /* APPLICATION */\n\n  /* HANDLERS */\n  self.onmessage = function( obj ) {\n\n      try {\n        var data = obj.data;\n\n        if( data.type == \"keydown\" ) {\n\n          sys.input.inputKeyHandler( data );\n          sys.audio.flagUserInput();\n\n        }\n        else if( data.type == \"message\") {\n          var id = data.processId;\n          var runtime = sys.processes.get( id );\n\n          runtime.receiveMessage( data.message, data.messageObject );\n\n          //TODO, index of runtime.\n        }\n        else if( data.type == \"interrupt\") {\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          runtime.interrupt( 0, data.sub, data.data );\n\n          //TODO, index of runtime.\n        }\n        else if( data.type == \"loadpgm\" ) {\n\n          sys.log(\"Received 'loadpgm' message. Loaded \" + data.pgmData.length + \" bytes..\" );\n\n          var editor = new Editor( sys );\n          var runtime = new BasicRuntime( sys, editor );\n          sys.log(\"Context created, parsing program\");\n\n          var ok = runtime.bootPGM( data.pgmData, data.QPath  );\n          sys.log(\"Parsed program => RUN\");\n\n          if( ok ) {\n            runtime.runPGM();\n            sys.log(\"Program started...\");\n          }\n          else {\n            runtime.stop();\n          }\n\n          var id = sys.processes.register( runtime );\n          sys.log(\"Basic program registered as process \" + id + \".\");\n\n          if( sys.rootProcId == -1 ) {\n            sys.rootProcId = id;\n          }\n          pgmman.addRuntime( runtime );\n\n\n        }\n        else if( data.type == \"inittxtarea\" ) {\n\n          sys.log( \"init with: \" + JSON.stringify( data ) )\n\n          sys.out.attach( data.w, data.h );\n\n\n        }\n        else if( data.type == \"initcolors\" ) {\n\n          sys.log( \"init colors with: \" + JSON.stringify( data ) )\n\n          sys.out.setDefault( data.colors.fg, data.colors.bg );\n          sys.out.control( 18, data.colors.border );\n          sys.out.reset();\n\n        }\n        else if( data.type == \"systeminfo\" ) {\n\n          sys.log( \"systeminfo with: \" + JSON.stringify( data ) )\n          sys.screenModes = data.modes;\n          sys.displayMode = data.mode;\n          sys.windowWidth = data.windowWidth;\n          sys.windowHeight = data.windowHeight;\n\n        }\n        else if( data.type == \"setcfg\" ) {\n\n          sys.log( \"init with: \" + JSON.stringify( data ) );\n\n          sys.setcfg( data.cfg );\n\n        }\n        else if( data.type == \"initbitmap\" ) {\n\n          sys.log( \"init with: \" + JSON.stringify( data ) );\n          sys.bout.attach( data.w, data.h );\n\n        }\n        else if( data.type == \"clipboardCopy\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var code = runtime.getProgramAsText();\n\n          sys.export( code, \"clipboard\" );\n\n          if( runtime.isReady() ) {\n            runtime.printLine(\"(!)Copied program to clipboard\");\n            runtime.printReady();\n          }\n          sys.log( \"clipboard copy\" )\n\n        }\n        else if( data.type == \"export\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var code = runtime.getProgramAsText();\n\n          sys.export( code, \"disk\" );\n\n          if( runtime.isReady() ) {\n            runtime.printLine(\"(!)Export program to disk\");\n            runtime.printReady();\n          }\n          sys.log( \"Export to disk\" )\n\n        }\n        else if( data.type == \"showList\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var list = data.list;\n\n          runtime.enterListMode(list);\n\n        }\n        else if( data.type == \"list\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var list = [\"LIST\",\"\"];\n          for (const l of runtime.program)\n            {\n\n              var lineNr = parseInt(l[0]);\n\n              list.push( l[2] );\n            }\n\n          runtime.enterListMode(list);\n\n        }\n        else if( data.type == \"renumber\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          runtime.renumberProgram( 10,10 );\n\n          var list = [\"RENUMBER\"];\n          runtime.enterListMode(list);\n\n        }\n        else if( data.type == \"new\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( !runtime.isRunning() ) {\n            runtime.new();\n\n            var output = [\"NEW\", \"\"];\n            runtime.enterListMode( output );\n          }\n        }\n        else if( data.type == \"pastpgm\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( !runtime.isRunning() ) {\n            runtime.new();\n            runtime.resetConsole();\n\n            var result = runtime.textLinesToBas( data.data.split(\"\\n\") );\n            var pgm = result.pgm;\n            runtime.setProgram( pgm );\n\n            if( result.exception ) {\n              throw result.exception;\n            }\n\n          }\n        }\n        else if( data.type == \"vars\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var varList = runtime.getFullVarList();\n          varList.unshift( \"\" );\n          varList.unshift( \"VARS\" );\n\n          runtime.enterListMode( varList );\n\n        }\n        else if( data.type == \"datablocks\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          var list = runtime.getDataBlocks();\n          var blockList = [\"DATABLOCKS\",\"\"];\n\n          for( var i=0;i<list.length;i++) {\n            blockList.push( list[i] );\n          }\n\n          runtime.enterListMode( blockList );\n\n        }\n        else if( data.type == \"stopMenu\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isRunning() ) {\n            runtime.stop();\n            runtime.toggleMenu();\n          }\n          else {\n            runtime.toggleMenu();\n          }\n\n        }\n        else if( data.type == \"toggleMenu\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n          runtime.toggleMenu();\n\n        }\n        else if( data.type == \"help\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.clearScreen();\n            runtime.printLine(\"HELP\");\n            runtime.printHelp();\n            runtime.printLine(\"\");\n            runtime.printLine(\"For more help type:\");\n            runtime.printLine(\"HELP <option>\");\n            runtime.printLine(\"\");\n            runtime.printReady();\n          }\n\n        }\n        else if( data.type == \"run\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.clearScreen();\n            runtime.printLine(\"RUN\");\n            runtime.runPGM();\n          }\n        }\n        else if( data.type == \"stop\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isRunning() ) {\n            runtime.stop();\n          }\n        }\n        else if( data.type == \"resetConsole\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.resetConsole();\n          }\n        }\n        else if( data.type == \"colorReset\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.colorReset( data.colors );\n          }\n        }\n        else if( data.type == \"clearScreen\" ) {\n\n          var runtime = sys.processes.get( sys.rootProcId );\n\n          if( runtime.isReady() ) {\n            runtime.clearScreen();\n          }\n        }\n        else {\n          var type = obj.data;\n          if(! type ) {\n            type = \"????\";\n          }\n          else {\n            type=type.type;\n            if(! type ) {\n              type = \"????\";\n            }\n          }\n          sys.logerr( \"Ignored unclassified message type (\"+type+\") for 'APP://\"+sys.appName+\"':  \" + JSON.stringify( obj.data ) );\n          //postMessage( self.onAppMessage( obj ) );\n        }\n      }\n      catch( e ) {\n        if( e.message ) {\n          sys.logerr( e.message + \" at \" + e.fileName + \":\"+ e.lineNumber );\n        }\n        else if ( e.clazz ) {\n          sys.logerr( e.clazz + \": \" + e.detail + \" at \"+ e.lineNr );\n          sys.out.writeln( \"?\" + e.clazz + \" error at \" + e.lineNr );\n        }\n\n        sys.logerr( JSON.stringify( e ) );\n\n      }\n\n    }\n}\n\ninit_sys();\n\n//--EOC \n\n// ## basicarray.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicarray.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicarray.js\n\nclass  BasicArray {\n\n  constructor( name, indices, defaultValue  ) {\n    this.name = name;\n    this.indices = indices;\n    this.buffer = null;\n    this.defaultValue = defaultValue;\n  }\n\n  getIndexCount() {\n    return this.indices.length;\n  }\n\n  _check( indices ) {\n    if( indices.length != this.indices.length ) {\n      throw \"BasicArray:00:index dimension mismatch:For array \" + this.name;\n    }\n    for( var i=0; i<indices.length; i++) {\n      if ( indices[i] > this.indices[ i ]) {\n        var detail = \"\\\"\" + this.name + \"[\" + indices[i] + \"]\"+\"\\\" does not exist\";\n        if( indices.length > 1) {\n          detail = \"\\\"\" + this.name + \"\\\" with index \" + indices[i] + \" does not exist\";\n          detail += \" for index dimension \" + i;\n        }\n        throw \"BasicArray:01:index out of bounds:\" + detail;\n      }\n      else if ( indices[i] < 0) {\n        throw \"BasicArray:02:index smaller then zero:For array \" + this.name;\n      }\n\n    }\n  }\n\n  set( indices, val ) {\n    this._check( indices );\n    if( this.buffer == null ) {\n      this.buffer = [];\n    }\n    var ptr = this.buffer;\n    var last = indices.length - 1;\n    for( var i=0; i<=last; i++) {\n\n      if( i == last ) {\n        ptr[ indices[ i ]] = val;\n      }\n      else {\n        if( (ptr [ indices[i] ] === undefined )) {\n          ptr[ indices[ i ]] = [];\n        }\n        ptr = ptr[ indices[ i ]];\n      }\n    }\n  }\n\n  get( indices ) {\n    this._check( indices );\n\n    if( this.buffer == null ) {\n      return this.defaultValue;\n    }\n    var ptr = this.buffer;\n    var last = indices.length - 1;\n    for( var i=0; i<=last; i++) {\n\n      if( i == last ) {\n        return ptr[ indices[ i ]];\n      }\n      else {\n        if( (ptr [ indices[i] ] === undefined )) {\n          return this.defaultValue;\n        }\n        ptr = ptr[ indices[ i ]];\n      }\n    }\n  }\n\n}\n\n//--EOC \n\n// ## basicerrorhandler.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicerrorhandler.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicerrorhandler.js\n\nclass ErrorHandler {\n\n  newError( clazz, detail, context, lineNr ) {\n    return { context: context, clazz: clazz, detail: detail, lineNr: lineNr };\n  }\n\n  throwError( clazz, detail, context, lineNr ) {\n    throw this.newError( clazz, detail, context, lineNr );\n  }\n\n\n  fromSimpleExternalError( s, context, lineNr0 ) {\n\n    var lineNr = lineNr0;\n    if( lineNr === undefined ) {\n      lineNr = -1;\n    }\n\n    var parts = s.split(\":\");\n    if( !parts.length == 3) {\n      return undefined;\n    }\n\n    var err = this.newError( parts[2], parts[3], context, lineNr );\n\n    err.extCode0 = parts[0];\n    err.extCode1 = parts[1];\n\n    return err;\n\n  }\n\n  fromSerializedError( s, context, lineNr0 ) {\n\n    var lineNr = lineNr0;\n    if( lineNr === undefined ) {\n      lineNr = -1;\n    }\n    if( ! this.isSerializedError( s ) ) {\n      return this.newError( \"unknown\", null, context, lineNr );\n    }\n    var parts = s.substr(1).split(\"@\");\n    if( parts.length == 1 ) {\n        return this.newError( parts[0], null, context, lineNr );\n    }\n    return this.newError( parts[0], parts[1], context, lineNr );\n\n  }\n\n  isSerializedError( e ) {\n    if( typeof e != \"string\" ) {\n      return false;\n    }\n    return e.startsWith( \"@\" );\n  }\n\n  isError( e ) {\n    if( Object.prototype.toString.call( e ) === '[object Object]' ) {\n      var ctx = e[ \"context\" ];\n      var clss = e[ \"clazz\" ];\n      var dtl = e[ \"detail\" ];\n\n      if( !( clss === undefined ) ) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\n//--EOC \n\n// ## coding/codingeditor.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/coding/codingeditor.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/coding/codingeditor.js\n\nclass Editor {\n\n  constructor( sys ) {\n    this.sys = sys;\n    this.output = sys.out;\n    this.keyMode = \"insert\";\n\n    //this.lineMarkers = [ 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0 ];\n  }\n\n\n  addRunTime( rt ) {\n    this.runTime = rt;\n  }\n\n  keyHandlerForCLE( e ) {\n\n      if( e.keyLabel == \"Enter\"  && !e.shiftKey ) {\n        var command = sys.out.getCurrentLine();\n        this.output.writeln(\"\");\n\n        this.runTime.executeInteractiveLine( command );\n\n      }\n      else if( e.keyLabel == \"Enter\" && e.shiftKey ) {\n\n        this.output.ScrollDownByCurrentLine();\n\n      }\n      else if( e.keyLabel == \"Backspace\" ||\n              e.keyLabel == \"Delete\"  ) {\n\n        if( e.keyLabel == \"Delete\" ) {\n              this.output.delete();\n        }\n        else {\n            this.output.backspace();\n        }\n\n      }\n      else if( e.keyLabel == \"ArrowUp\" && !e.ctrlKey) {\n        this.output.cursorMove(\"up\");\n      }\n      else if( e.keyLabel == \"ArrowDown\" && !e.ctrlKey) {\n        this.output.cursorMove(\"down\");\n      }\n      else if( e.keyLabel == \"ArrowUp\" && e.ctrlKey ) {\n        this.output.cursorMove(\"up\");\n        this.output.cursorMove(\"up\");\n        this.output.cursorMove(\"up\");\n        this.output.cursorMove(\"up\");\n      }\n      else if( e.keyLabel == \"ArrowDown\" && e.ctrlKey ) {\n        this.output.cursorMove(\"down\");\n        this.output.cursorMove(\"down\");\n        this.output.cursorMove(\"down\");\n        this.output.cursorMove(\"down\");\n      }\n      else if( e.keyLabel == \"ArrowLeft\" && !e.ctrlKey ) {\n        this.output.cursorMove(\"left\");\n      }\n      else if( e.keyLabel == \"ArrowRight\" && !e.ctrlKey) {\n        this.output.cursorMove(\"right\");\n      }\n      else if( (e.keyLabel == \"ArrowRight\" && e.ctrlKey) ) {\n        this.output.jumpTo(\"text-end\");\n      }\n      else if( (e.keyLabel == \"ArrowLeft\" && e.ctrlKey) ) {\n        this.output.jumpTo(\"text-start\");\n      }\n      else if( e.keyLabel == \"Home\" && !e.ctrlKey && !e.shiftKey ) {\n        this.output.jumpTo(\"line-start\");\n      }\n      else if( e.keyLabel == \"Home\" && e.shiftKey && !e.ctrlKey ) {\n        this.output.clear();\n      }\n      else if( e.keyLabel == \"End\" && !e.ctrlKey ) {\n        this.output.jumpTo(\"line-end\");\n      }\n      else if( e.keyLabel == \"Home\" && e.ctrlKey && !e.shiftKey ) {\n        this.output.jumpTo(\"home\");\n      }\n      else if( e.keyLabel == \"End\" && e.ctrlKey ) {\n        this.output.jumpTo(\"end\");\n      }\n      else if( e.keyLabel == \"Tab\" ) {\n        if( this.keyMode == \"insert\") {\n          this.output.insert(  \"        \" );\n        }\n        else {\n          this.output.write(  \"        \" );\n        }\n\n      }\n      else if( e.keyLabel == \"Insert\" ) {\n\n        if( this.keyMode == \"insert\") {\n          this.keyMode = \"overwrite\";\n        }\n        else {\n          this.keyMode = \"insert\";\n        }\n        this.output.setCursorMode( this.keyMode )\n      }\n      else {\n        if( e.key != null ) {\n          if( this.keyMode == \"insert\") {\n            this.output.insert( e.key );\n          }\n          else {\n            this.output.write( e.key );\n          }\n        }\n      }\n\n  }\n\n\n  interactiveKeyHandler( e ) {\n    this.keyHandlerForCLE( e );\n  }\n}\n\n//--EOC \n\n// ## basicruntime.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicruntime.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicruntime.js\n\nclass BasicRuntime {\n\n  constructor( sys, editor ) {\n\n    this.debugFlag = false;\n    this.sys = sys;\n    this.editor = editor;\n    this.editor.addRunTime( this );\n    this.listSpeed = 15;\n\n    this.output = sys.out;\n    this.bitmap = sys.bout;\n    this.input = sys.input;\n    this.audio = sys.audio;\n    this.input.setHandler( this );\n    this.input.setInterActive( false);\n    this.html = sys.html;\n    this.menuEnable = false;\n\n    this.program = [];\n    this.runFlag = false;\n    this.isWaitingFlag = false;\n    this.waitingTime = 0;\n\n    this.waitForMessageFlag = false;\n    this.waitForMessageVariable = null;\n    this.executeLineFlag = false;\n    this.goPlayExampleFlag = false;\n\n    this.inputFlag = false;\n    this.inputCommand = false;\n    this.listFlag = false;\n    this.immersiveFlag = false;\n    this.statusChanged = false;\n\n    this.gosubReturn = [];\n    this.nullTime = new Date().getTime();\n\n    this.turboMode = false;\n    this.cmdCountPerCycleDefault = 20000;\n    this.cmdCountPerCycleTurbo = 20000;\n    this.cmdCountPerCycle = this.cmdCountPerCycleDefault ;\n\n    var c = this.output;\n    this.commands = new BasicCommands( this );\n    this.extendedcommands = new ExtendedCommands( this.commands, this );\n\n    this.erh = new ErrorHandler();\n    this.vars = {};\n    this.functions = [];\n    this.data = [];\n    this.loadedData = { default: [] };\n    this.loadedLabel = null;\n\n    this.kbBuffer = [];\n\n    this.yPos = -1;\n\n    this.SHORTLINE = 0;\n    this.LONGLINESTART = 1;\n    this.LONGLINEEND = 2;\n\n    this.forContext = { default:[] }\n\n    this.outputCallBacksAll = {\n        lineOverFlow: { clazz: this, method: \"cbLineOverFlow\" },\n        scroll: { clazz: this, method: \"cbScroll\" },\n        clearScreen: { clazz: this, method: \"cbClearScreen\" }\n    }\n\n    this.outputCallBacksClScr = {\n        lineOverFlow: undefined,\n        scroll: { clazz: this, method: \"cbScroll\" },\n        clearScreen: { clazz: this, method: \"cbClearScreen\" }\n    }\n\n    //this.setTurbo( true );\n    this.synchClock( );\n    this.exitMode = \"stay\";\n\n    this.code2colMap = [];\n    var km = this.code2colMap;\n\n    km[0x90] = 0;\n    km[0x05] = 1;\n    km[0x1c] = 2;\n    km[0x9f] = 3;\n    km[0x9c] = 4;\n    km[0x1e] = 5;\n    km[0x1f] = 6;\n    km[0x9e] = 7;\n\n    km[0x81] = 8;\n    km[0x95] = 9;\n    km[0x96] = 10;\n    km[0x97] = 11;\n    km[0x98] = 12;\n    km[0x99] = 13;\n    km[0x9a] = 14;\n    km[0x9b] = 15;\n\n    this.symbolTable = {};\n\n    this.symbolTable.up     = 0x91;\n    this.symbolTable.down   = 0x11;\n    this.symbolTable.left   = 157;\n    this.symbolTable.right  = 29;\n    this.symbolTable[\"reverse on\"]  = 0x12;\n    this.symbolTable[\"reverse off\"]  = 0x92;\n    this.symbolTable[\"clear\"]  = 0x93;\n    this.symbolTable[\"home\"]  = 0x13;\n    this.symbolTable.black  = 144;\n    this.symbolTable.white  = 5;\n    this.symbolTable.red  = 28;\n    this.symbolTable.cyan  = 159;\n    this.symbolTable.purple  = 156;\n    this.symbolTable.green  = 30;\n    this.symbolTable.blue  = 31;\n    this.symbolTable.yellow  = 158;\n    this.symbolTable.orange  = 129;\n    this.symbolTable.brown  = 149;\n    this.symbolTable.pink  = 150; // light red\n    this.symbolTable.grey1  = 151;  //dark grey\n    this.symbolTable.grey2  = 152;\n    this.symbolTable[\"light green\"]  = 153;\n    this.symbolTable[\"light blue\"]  = 154;\n    this.symbolTable.grey3  = 155; //light grey\n\n\n    var backmap = []\n    var mapInfo = Object.entries(this.symbolTable);\n    for( var i=0; i<mapInfo.length; i++) {\n      backmap[ mapInfo[i][1]] = mapInfo[i][0];\n    }\n    this.symbolTableBM = backmap;\n\n  }\n\n  flagStatusChange() {\n    this.statusChanged = true;\n  }\n\n  clearInputCommand() {  /* for GET and GETKEY, for input we use something else */\n    this.inputCommand = false;\n  }\n\n  flagInputCommand() {  /* for GET and GETKEY, for input we use something else */\n    this.inputCommand = true;\n  }\n\n  setWaiting( time ) {  /* for GET and GETKEY, for input we use something else */\n    this.isWaitingFlag = true;\n    this.waitingTime = time;\n  }\n\n  clearWaiting() {  /* for GET and GETKEY, for input we use something else */\n    this.isWaitingFlag = false;\n  }\n\n\n  getScopeVars( s ) {\n    return s.vars;\n  }\n\n  getFullVarList() {\n    var scopes = this.getFullScopes();\n    var varList = [];\n\n    for( var si = 0; si< scopes.length; si++ ) {\n\n      var fullscope = scopes[si];\n      var vars = this.getScopeVars( fullscope.scope );\n      var names = Object.getOwnPropertyNames( vars );\n\n      for( var i=0;i<names.length;i++) {\n        var name = names[i];\n        var value = vars[ name ];\n        var path = fullscope.path;\n        if( path == \"\" ) { path = \"\"; }\n        else { path += \"/\"; }\n        if( ! name.startsWith( \"@array_\" ) ) {\n            if( name.endsWith(\"$\") ) {\n                varList.push( path + name + \" = \\\"\" + value + \"\\\"\" );\n            }\n            else {\n                varList.push( path + name + \" = \" + value );\n            }\n        }\n        else {\n            var descr = \"\";\n            for( var ii=0; ii<value.indices.length; ii++ ) {\n              if( ii>0 ) { descr += \",\"; }\n              descr += value.indices[  ii ];\n\n            }\n            varList.push( name.substr(7) + \" = array with dim(\" + descr + \")\" );\n        }\n      }\n    }\n\n    return varList;\n  }\n\n  getFullScopes() {\n    var scopes = [];\n    var path = \"\";\n    for( var si = 0 ; si < this.scopes.length; si++ ) {\n      var scope = this.scopes[si].name;\n\n      if( si > 0) {\n        if( path != \"\" ) {\n          path += \"/\";\n        }\n        path += scope;\n      }\n\n      scopes.push( { path: path, scope: this.scopes[si]  } );\n    }\n\n    return scopes;\n  }\n\n  cpuNeeded() {\n    if (this.runFlag ) { return 1; }\n    else if (this.listFlag ) { return .8; }\n    return .1;\n\n  }\n\n  getStatus() {\n\n    var status = \"\";\n    var lineNr;\n    if( this.runFlag ) {\n      lineNr = this.program[ this.runPointer ][0];\n      status = \"running[\" + lineNr + \"]\";\n    }\n    else {\n      status = \"stopped\";\n    }\n\n    if( this.runFlag && this.inputFlag ) {\n      status = \"running[\" + lineNr + \"]/input\";\n    }\n    else if( !this.runFlag && this.listFlag ) {\n      status = \"stopped/listing\";\n    }\n\n    var vlen = Object.getOwnPropertyNames( this.getVars() ).length;\n\n\n    this.statusChanged = false;\n\n    return {\n      status: status,\n      pgmLen: this.program.length,\n      varLen: vlen,\n      displayMode: this.sys.displayMode\n    }\n  }\n\n  dir( path, device ) {\n    this.sys.dir( this, path, device );\n    this.startWaitForMessage( \"dir\" )\n  }\n\n  listfs() {\n    this.sys.listfs( this );\n    this.startWaitForMessage( \"listfs\" )\n  }\n\n  setfs( path ) {\n    this.sys.setfs( this, path );\n    this.startWaitForMessage( \"path\" )\n  }\n\n  load( path, start, device ) {\n    this.sys.load( this, path, device );\n    this.startWaitForMessage( \"load\" )\n    this.autoStartAfterLoad = start;\n\n  }\n\n  loaddata( path, type, label ) {\n    this.sys.loaddata( this, path, type, label );\n    this.startWaitForMessage( \"loaddata\" )\n\n  }\n\n  save( path0, device ) {\n\n    var data = this.getProgramAsText();\n    var path = path0;\n    if( path0 == null ) {\n      path = \"default.bas\";\n    }\n    this.sys.save( this, path, device, data );\n    this.startWaitForMessage( \"save\" )\n  }\n\n  deleteFile( path, device ) {\n\n    this.sys.delete( this, path, device );\n    this.startWaitForMessage( \"delete\" )\n  }\n\n\n  startWaitForMessage( variable ) {\n    this.waitForMessageFlag = true;\n    this.waitForMessageVariable = variable;\n  }\n\n\n  keyInterrupt( _type, _data ) {\n    this.interrupt( 0, _type, {} );\n  }\n\n  interrupt( _ix, _type, _data ) {\n\n\n\n    if( _ix == 0 && this.interruptFlag0 ) {\n        return; //allready in an interrupt0\n    }\n\n    if( _ix == 1 && this.interruptFlag1 ) {\n        return; //allready in an interrupt1\n    }\n\n\n    var line, useLabel;\n    if( _ix == 0 ) {\n\n      line = this.handlers.interrupt0;\n      if( line === undefined ) {\n        return;\n      }\n      this.interruptFlag0 = true;\n      useLabel = this.handlers.interrupt0ParamIsLabel;\n    }\n    else {\n\n      line = this.handlers.interrupt1;\n      if( line === undefined ) {\n        return;\n      }\n      this.interruptFlag1 = true;\n      useLabel = this.handlers.interrupt1ParamIsLabel;\n    }\n\n\n    this.newScope( \"interrupt\" + _ix,\n      { runPointer: this.runPointer, runPointer2: this.runPointer2 } );\n\n    var variables = Object.entries( _data );\n    this.setVar( \"itr0$\".toUpperCase(), _type.toUpperCase() );\n    for( var i=0; i<variables.length; i++) {\n      this.setVar( variables[i][0].toUpperCase(), variables[i][1] );\n    }\n\n    var pgm = this.program;\n    var len=this.program.length;\n    var found = false;\n\n    if( useLabel ) {\n\n      line = this.labels[line];\n      if( line == undefined ) {\n        throw \"@undef'd label\";\n      }\n    }\n\n    for( var i=0; i<len; i++) {\n      var l = pgm[i];\n\n      if( l[0] == line ) {\n        this.runPointer = i;\n        this.runPointer2 = 0;\n        found = true;\n        break;\n      }\n    }\n\n    if(!found ) {\n      throw \"@invalid interrupt handler\";\n    }\n\n  }\n\n  receiveMessage( _message, _data ) {\n\n    this.vars[ this.waitForMessageVariable ] = _message;\n    this.waitForMessageFlag = false;\n\n    if( _message.startsWith( \"displaysize:\" )) {\n        this.output.reInit( _data.textW, _data.textH );\n        this.bitmap.reInit( _data.bitmapW, _data.bitmapH );\n        this.sys.displayMode = _data.mode;\n\n    }\n    else if( _message == \"load:error\" ) {\n\n      if( this.runFlag == false ) {\n          this.printError(\"load\", false, undefined, _data.reason );\n      }\n    }\n    else if( _message == \"load:completed\" ) {\n\n      sys.log(\"Received 'load:completed' message. Loaded \" + _data.pgmData.length + \" bytes..\" );\n\n      var ok = this.bootPGM( _data.pgmData, _data.path  );\n      sys.log(\"Parsed program => RUN\");\n\n      if( ok && this.autoStartAfterLoad ) {\n        this.output.control( 24 )\n        this.runPGM();\n        sys.log(\"Program started...\");\n      }\n      else {\n        this.stop();\n      }\n    }\n    else if( _message == \"loaddata:completed\" ) {\n\n      sys.log(\"Received 'loaddata:completed' message. Loaded \" + _data.data.length + \" bytes..\" );\n\n      this.insertData( _data.data, _data.type, _data.label  );\n\n    }\n    else if( _message == \"loaddata:error\" ) {\n\n      sys.log(\"Received 'loaddata:error' message. Error \" + _data.reason );\n\n      this.printError(\"loaddata\", false, undefined, _data.reason );\n      this.stop();\n    }\n    else if( _message == \"delete:completed\" ) {\n\n      sys.log(\"Received 'delete:completed' message.\" );\n\n    }\n    else if( _message == \"delete:error\" ) {\n\n      sys.log(\"Received 'delete:error' message. Error \" + _data.reason );\n\n      this.printError(\"delete\", false, undefined, _data.reason );\n      this.stop();\n    }\n    else if( _message == \"save:completed\" ) {\n\n      sys.log(\"Received 'save:completed' message.\" );\n\n      if( !this.isRunning() ) {\n      }\n    }\n    else if( _message == \"save:error\" ) {\n\n      sys.log(\"Received 'save:error' message. Error \" + _data.reason );\n\n      this.printError(\"save\", false, undefined, _data.reason );\n      this.stop();\n    }\n    else if( _message == \"dir:completed\" ) {\n\n      sys.log(\"Received 'dir:completed' message.\" );\n\n      var list = [\"\",\"Directory of: \\\"\" + _data.title + \"\\\" on \" + _data.fs, \"\" ];\n\n      for( var i=0; i<_data.files.length; i++) {\n          list.push( _data.files[i].fname );\n      }\n\n      list.push( _data.files.length + \" files\");\n\n      this.enterListMode( list );\n\n    }\n    else if( _message == \"dir:error\" ) {\n\n      sys.log(\"Received 'dir:error' message. Error \" + _data.reason );\n\n      this.printError(\"dir\", false, undefined, _data.reason );\n      this.stop();\n    }\n    else if( _message == \"listfs:completed\" ) {\n\n      sys.log(\"Received 'listfs:completed' message.\" );\n\n      var list = [\"\", \"Default Filesystem: \\\"\" + _data.currentFs + \"\\\"\", \"\", \"Devices:\", \"\" ];\n\n      //var fs = fsList[i];\n\n\n      for( var i=0; i<_data.fs.length; i++) {\n\n          var fs = _data.fs[i];\n          var str = \"\\\"\" + fs.name + \"\\\"\";\n          var deviceNumberLen = (fs.device + \"\").length;\n          str = str + \"                  \".substr( 0,(18-str.length-deviceNumberLen) ) + fs.device;\n\n\n          list.push(\"     \" + str );\n      }\n\n      list.push( \"\" );\n      list.push( _data.fs.length + \" Filesystem Devices Found\");\n\n      this.enterListMode( list );\n\n    }\n    else if( _message == \"setfs:completed\" ) {\n\n      if( !this.isRunning() ) {\n        if( _data.status == \"ok\" ) {\n        }\n        else {\n          this.printError(\"file system\", false, undefined, \"Could not select file system\" );\n        }\n\n      }\n      else {\n        if( _data.status != \"ok\" ) {\n\n          this.printError(\"file system\", false, undefined, \"Could not select file system\" );\n          this.stop();\n        }\n      }\n    }\n\n    if( this.stopAfterMessage ) {\n      this.stopAfterMessage = false;\n      this.runFlag = false;\n      this.HandleStopped( false );\n\n    }\n\n    if( !this.isRunning() && this.listFlag == false ) {\n      this.printReady();\n    }\n\n  }\n\n  stop() {\n    if( this.runFlag ) {\n      this.runStop();\n    }\n    if( this.listFlag ) {\n      this.listStop();\n    }\n  }\n\n  interactiveKeyHandler( e ) {\n\n    if( this.runFlag == true ) {\n      if( e.keyLabel == \"Enter\" ) {\n\n        var cxy = this.output.getCursorPos();\n\n        var string = this.output.getLineFrom( this.inputStartInputPosX, cxy[1]);\n        this.output.writeln(\"\");\n\n        this.handleLineInput( string, true );\n\n      }\n      else if( e.keyLabel == \"Backspace\" ||\n              e.keyLabel == \"Delete\"  ) {\n        var x = this.output.getCursorPos()[0];\n\n        if( e.keyLabel == \"Delete\" ) {\n              this.output.delete();\n        }\n        else {\n            if( x > this.inputStartInputPosX ) {\n                this.output.backspace();\n            }\n            else {\n              this.output.delete();\n            }\n        }\n\n      }\n      else if( e.keyLabel == \"ArrowLeft\" && !e.ctrlKey) {\n        var cx = this.output.getCursorPos();\n        if( cx[0] > this.inputStartInputPosX ) {\n          this.output.cursorMove(\"left\");\n        }\n      }\n      else if( e.keyLabel == \"ArrowRight\" && !e.ctrlKey) {\n        this.output.cursorMove(\"right\");\n      }\n      else if( e.keyLabel == \"Home\" && !e.ctrlKey ) {\n        var xy = this.output.getCursorPos();\n\n        this.output.setCursorPos( this.inputStartInputPosX, xy[1]);\n      }\n      else if( (e.keyLabel == \"ArrowRight\" && e.ctrlKey)) {\n        this.output.jumpTo(\"text-end\");\n      }\n      else if( e.keyLabel == \"End\" ) {\n        this.output.jumpTo(\"text-end-all\");\n      }\n      else if( (e.keyLabel == \"ArrowLeft\" && e.ctrlKey) ) {\n        this.output.jumpTo(\"text-start\");\n        var xy = this.output.getCursorPos();\n        if( xy[0]< this.inputStartInputPosX ) {\n          this.output.setCursorPos( this.inputStartInputPosX, xy[1] );\n        }\n      }\n      else {\n        if( e.key != null ) {\n          this.output.write( e.key );\n        }\n      }\n    }\n    else {\n      this.editor.interactiveKeyHandler( e );\n    }\n  }\n\n  toggleMenu()  {\n    this.menuEnable = !this.menuEnable;\n\n    if( this.menuEnable ) {\n      this.sys.signalHideMenu( false );\n    }\n    else {\n      this.sys.signalHideMenu( true );\n    }\n  }\n\n  HandleStopped( startingProgram ) {\n\n    this.clearWaiting();\n    this.input.setInterActive( true);\n    this.input.flush();\n    if( !startingProgram && this.menuEnable ) {\n      this.sys.signalHideMenu( false );\n    }\n\n    this.flagStatusChange();\n  }\n\n  importPGMHandler( content, filename ) {\n    var pgm = this.textLinesToBas( content.split(\"\\n\") ).pgm;\n    this.fileName = filename;\n\n    this.program = pgm;\n    this.sys.log( \"imported program \" + filename +\" with \" + content.length + \" bytes \");\n  }\n\n  bootPGM( content, filename ) {\n    try {\n      var pgm = this.textLinesToBas( content.split(\"\\n\") ).pgm;\n      this.fileName = filename;\n\n      this.program = pgm;\n      this.setProgram( pgm );\n\n      this.sys.log( \"imported program \" + filename +\" with \" + content.length + \" bytes \");\n      return true;\n    }\n    catch ( e ) {\n      var tmp = 1;\n\n      var pgm = this.textLinesToBas( \"\" ).pgm;\n      this.program = pgm;\n      this.HandleStopped( false );\n      this.printError(\"parsing syntax\", false, e.lineNr, e.detail );\n      this.printReady();\n      return false;\n\n    }\n  }\n\n\n/*  exportPGM() {\n    var exportName = \"program.bas\";\n    if( this.fileName ) {\n      exportName = this.fileName;\n    }\n\n    var text = this.getProgramAsText();\n    this.DESKTOP.requestDownload( text, exportName );\n  }\n*/\n\n  exitProgram() {\n    this.closeWindow( this.windowId );\n  }\n\n\n  enterListMode( list ) {\n    this.listFlag = true;\n    this.list = list;\n    this.listPointer = 0;\n    this.printLine(\"\");\n    this.listFlagBakInteractive = this.input.getInterActive();\n    this.input.setInterActive( false );\n    this.flagStatusChange();\n  }\n\n  setExitMode( v ) {\n    this.exitMode = v;\n  }\n\n  synchClock() {\n\n    //var clock = new Date().getTime();\n    var nullClock = new Date();\n    nullClock.setHours(0);\n    nullClock.setSeconds(0);\n    nullClock.setMinutes(0);\n    nullClock.setMilliseconds(0);\n\n    this.nullTime = nullClock;\n\n  }\n\n  setTurbo( on ) {\n    if( on ) {\n      this.cmdCountPerCycle = this.cmdCountPerCycleTurbo ;\n      this.turboMode = true;\n      return;\n    }\n    this.cmdCountPerCycle = this.cmdCountPerCycleDefault ;\n    this.turboMode = false;\n  }\n\n  setProgram( pgm ) {\n    this.program = pgm;\n    this.runFlag = false;\n    this.HandleStopped( true );\n\n    this.inputFlag = false;\n    this.listFlag = false;\n\n    this.flagStatusChange();\n\n  }\n\n  appendProgram( pgm ) {\n\n    for(var i=0; i<pgm.length; i++) {\n      var exists = -1;\n\n      for(var j=0; j<this.program.length; j++) {\n        if( this.program[j][0] == pgm[i][0] ) {\n          exists = j;\n        }\n      }\n\n      if( exists>-1 ) {\n        this.program[ exists ] = pgm[ i ];\n      }\n      else {\n        this.program.push( pgm[ i ] );\n      }\n    }\n\n    var sortF = function compare( a, b ) {\n      return a[0] - b[0];\n    }\n\n    this.program.sort( sortF );\n\n    this.runFlag = false;\n    this.HandleStopped( false );\n\n    this.inputFlag = false;\n    this.listFlag = false;\n    //this.output.clearCursor();\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  getProgramState() {\n    return {\n      runFlag: this.runFlag,\n      inputFlag: this.inputFlag,\n      vars: this.vars,\n      functions: this.functions,\n      forContext: this.forContext,\n      runPointer: this.runPointer,\n      runPointer2: this.runPointer2\n    }\n  }\n\n  setProgramState( pgmState ) {\n      this.runFlag = pgmState.runFlag;\n      this.HandleStopped( false );\n      this.inputFlag = pgmState.inputFlag;\n      this.vars = pgmState.vars;\n      this.functions = pgmState.functions;\n      this.forContext = pgmState.forContext;\n      this.runPointer = pgmState.runPointer;\n      this.runPointer2 = pgmState.runPointer2;\n  }\n\n  _setByteBits( bits ) {\n\n   var byte = 0b00000000;\n\n   for( var i=0; i<8; i++) {\n     if(i>0) {\n       byte = byte >> 1;\n     }\n     if( bits[i]) {\n       byte = byte | 128;\n     }\n   }\n   return byte;\n  }\n\n  _getByteBits( byte ) {\n    var masks = [\n      0b00000001,0b00000010,0b00000100,0b00001000,\n      0b00010000,0b00100000,0b01000000,0b10000000\n    ];\n\n   var results = [ false, false, false, false, false, false, false, false ];\n\n   for( var i=0; i<8; i++) {\n\n     results[ i ] = (byte & masks[i]) > 0;\n\n   }\n\n   return results;\n  }\n\n  upperFirst( s ) {\n    if( s ) {\n      if ( s.length > 1 ) {\n          return s.substr(0,1).toUpperCase() + s.substr( 1 );\n      }\n    }\n    return s;\n  }\n\n  printError( s, supressLine, explicitline, detail ) {\n\n    var line1 = (\"?\" + this.upperFirst( s ) + \" error\" + this.onLineStr());\n\n    if( explicitline ) {\n        line1 = ( (\"?\" + this.upperFirst( s ) + \" error in \" + explicitline ) );\n    }\n    if( supressLine ) {\n        line1 = ( (\"?\" + this.upperFirst( s ) + \" error\") );\n    }\n\n    this.output.writeln(  line1 );\n    if( detail ) {\n      this.output.writeln(  \">> \" + detail );\n    }\n\n  }\n\n  printInfo( s ) {\n\n    this.sys.log(  ( s + this.onLineStr()).toUpperCase() );\n\n  }\n\n  printHelp() {\n    this.extendedcommands[\"_stat_help\"]([]);\n  }\n\n  printLine( s ) {\n    this.output.writeln(s);\n    this.reverseOn = false;\n  }\n\n\n  print( s ) {\n    this.output.writeln(s);\n    this.reverseOn = false;\n  }\n\n\n//{ fg: 5, bg:1, border: 7 }\n  colorReset( colors ) {\n    this.output.setDefault( colors.fg, colors.bg );\n    this.output.control( 18, colors.border );\n    this.output.colorReset();\n  }\n\n  resetConsole() {\n    var wh = this.output.getDimensions();\n\n    //this.output.textArea(  wh[0], wh[1], -1, -1 );\n\n    this.output.reset();\n    //this.output.setPos(0,0);\n  }\n\n  clearScreen() {\n    this.output.clear();\n    this.output.setPos(0,0);\n  }\n\n  getMillis() {\n    var millis=new Date().getTime() - this.nullTime;\n    return millis;\n  }\n\n  getJiffyTime() {\n    var millis=new Date().getTime() - this.nullTime;\n    var jiffis = Math.floor(millis / (1000 / 60));\n\n    return jiffis % 5184000;\n  }\n\n  getTime() {\n    var millis=new Date().getTime() - this.nullTime;\n    millis = millis % 86400000;\n\n    var hours = Math.floor(millis / 3600000);\n    millis = millis - (hours * 3600000 );\n    var minutes = Math.floor(millis / 60000);\n    millis = millis - (minutes * 60000 );\n    var seconds = Math.floor(millis / 1000);\n    //millis = millis - (seconds * 1000 );\n    return [hours,minutes,seconds];\n  }\n\n  reset( hard, muteReady ) {\n    this.output.clearScreen();\n    this.output.writel(\"Ready.\");\n\n    this.inputFlag = false;\n    this.runFlag = false;\n    this.listFlag = false;\n\n    this.clrPGM();\n    this.setTurbo( false );\n  }\n\n  compressPGMText( pgmTxt ) {\n\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n    var kws = p.getKeyWordCodes();\n    var txt2 = pgmTxt;\n\n    for( var i=0; i<kws.length; i++) {\n      var kw = kws[i];\n      if( !(kw===undefined || kw === null )) {\n          txt2 = txt2.replaceAll( kw.toLowerCase() , String.fromCharCode(i));\n      }\n    }\n\n    return txt2;\n  }\n\n\n  getProgramAsTextNoPETSCII() {\n    var text = \"\";\n    for (const l of this.program)\n      {\n        if( text != \"\") {\n          text += \"\\n\";\n        }\n        text +=  this.prepareLineForExportNoPETSCII( l[2].trim(), true );\n      }\n    return text;\n  }\n\n  getProgramSize() {\n    return this.program.length;\n  }\n\n  getProgramAsText() {\n    var text = \"\";\n    for (const l of this.program)\n      {\n        if( text != \"\") {\n          text += \"\\n\";\n        }\n        //text +=  this.prepareLineForExport( l[2].trim() );\n        if( l[1][0].type == \"control\" && l[1][0].controlKW == \"sub\" ) {\n            text += \"\\n\";\n        }\n        text += l[2].trim();\n      }\n    return text;\n  }\n\n  prepareLineForExport( txt0 ) {\n    var txt;\n    txt = txt0.trim();\n    var dst = \"\";\n\n    for( var i=0; i<txt.length; i++) {\n      var c = txt.charCodeAt( i );\n      if( c<31 || c==92 || c>=126 ) {\n        var symdef = this.symbolTableBM[ c ];\n        if( ! ( symdef === undefined ) ) {\n            dst += \"{\" + symdef + \"}\";\n        }\n        else {\n            dst += \"{\"+c+\"}\"\n        }\n\n      }\n      else {\n        dst += txt.charAt( i );\n      }\n    }\n    return dst.toLowerCase();\n  }\n\n  replaceAll( src, str1, str2 ) {\n\n    var rv = src;\n    while( rv.indexOf( str1 ) > -1 ) {\n      rv = rv.replace( str1, str2 );\n    }\n    return rv;\n  }\n\n\n  rebuildNoPETSCIILineString( raw )\n  {\n\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n    var noPetsciiLine = this.prepareLineForExportNoPETSCII( raw, false );\n    var rec = p.parseLine( noPetsciiLine );\n    return rec;\n  }\n\n\n  prepareLineForExportNoPETSCII( txt0, toLower ) {\n    var txt;\n    txt = txt0.trim();\n    var dst = \"\";\n    var last= \"\";\n\n    for( var i=0; i<txt.length; i++) {\n      var c = txt.charCodeAt( i );\n      var cc = txt.charAt( i );\n      if( c<31 || c==92 || c>=94 ) {\n\n        var prevCharIsQuote = false, nextCharIsQuote=false;\n        if( (i+1)<txt.length) {\n          var cc2 = txt.charAt( i+1 );\n          if( cc2 == \"\\\"\" ) {\n            nextCharIsQuote = true;\n          }\n        }\n        if( last == \"\\\"\" ) {\n            prevCharIsQuote = true;\n          }\n\n        if( prevCharIsQuote && !nextCharIsQuote ) {\n            dst = dst.substr( 0, dst.length-1 );\n            dst += \"CHR$(\"+c+\");\\\"\";\n        }\n        else if( prevCharIsQuote && nextCharIsQuote ) {\n            dst = dst.substr( 0, dst.length-1 );\n            dst += \"CHR$(\"+c+\")\";\n            i++;\n        }\n        else if( !prevCharIsQuote && nextCharIsQuote ) {\n            dst += \"\\\";CHR$(\"+c+\")\";\n            i++;\n        }\n\n        else {\n            dst += \"\\\";CHR$(\"+c+\");\\\"\";\n        }\n      }\n      else {\n        dst += txt.charAt( i );\n      }\n      last = cc;\n    }\n\n    var dst2= this.replaceAll( dst, \";\\\"\\\";\",\";\");\n\n    if( toLower ) { return dst2.toLowerCase(); }\n    return dst2;\n  }\n\n  ResolveStringSymbolToCode( x ) {\n\n    if(this.symbolTable[x]) {\n      return this.symbolTable[x];\n    }\n\n    return x;\n  }\n\n  prepareLineForImport( txt0 ) {\n    var txt;\n    txt = txt0.trim(); //.toUpperCase();\n    var dst = \"\";\n\n    var i=0; while( i<txt.length ) {\n      var c = txt.charCodeAt( i );\n      if( c == 123 ) {\n        i++;\n        var num = \"\";\n        while( i < txt.length ) {\n            c = txt.charCodeAt( i );\n            if( c == 125 ) {\n              i++;\n              break;\n            }\n            num += String.fromCharCode( c );\n\n            if( this.debugFlag ) {\n              console.log(\"found ESC seq char \" + String.fromCharCode( c ) );\n              console.log(\"found ESC seq char code \" + c);\n            }\n            i++;\n        }\n\n        if( this.debugFlag ) {\n          console.log(\"found ESC seq \" + num);\n        }\n\n        num = this.ResolveStringSymbolToCode(num.toLowerCase());\n\n        if( this.debugFlag ) {\n          console.log(\"found resolved ESC seq \" + num);\n        }\n\n        dst += String.fromCharCode( parseInt( num, 10) );\n      }\n      else if( c == 8221 || c == 8220) { //looks like a double quote\n        dst += \"\\\"\";\n        i++;\n      }\n      else {\n        dst += txt.charAt( i );\n        i++;\n      }\n    }\n\n    if( this.debugFlag ) {\n      console.log(\"dst:\" + dst);\n    }\n\n    return dst;\n  }\n\n  getProgramLines() {\n\n    return this.program;\n  }\n\n  padZeros2( x ) {\n    var s = x + \"\";\n    for(var i=s.length; i<2; i++) {\n      s=\"0\"+s;\n    }\n    return s;\n  }\n\n  evalExpressionPart( p ) {\n    var val=0;\n\n    if( p.type==\"num\" ) {\n      if( p.data == \".\" ) {\n        val = 0;\n      }\n      else if((\"\"+p.data).indexOf(\".\") >= 0) {\n        val = parseFloat(p.data);\n      }\n      else {\n        val = parseInt(p.data);\n      }\n    }\n    else if( p.type==\"str\" ) {\n      val = p.data;\n    }\n    else if( p.type==\"var\" ) {\n      if(p.data.startsWith(\"TI\")) {\n        val = this.getMillis();\n        if(p.data.endsWith(\"$\")) {\n          val = this.getTime();\n          val = \"\" +\n            this.padZeros2(val[0]) +\n            this.padZeros2(val[1]) +\n            this.padZeros2(val[2]);\n        }\n      }\n      else if(p.data == \"CURRENTLINE\") {\n        val = this.runPointer;\n        if( val != -1 ) {\n          val = parseInt( this.program[ val ][0] );\n        }\n      }\n      else if(p.data == \"PI\") {\n        val = Math.PI;\n      }\n      else {\n        val = this.vars[ p.data ];\n      }\n      if( val == undefined ) {\n        val = 0;\n        if( this.scopes[0].vars[ p.data ] ) {\n          val = this.scopes[0].vars[ p.data ];\n        }\n      }\n    }\n    else if( p.type==\"array\" ) {\n      var varIntName = \"@array_\" + p.data;\n      var arr = this.vars[ varIntName ];\n\n      if( arr === undefined ) {\n        if( this.scopes[0].vars[ varIntName ] ) {\n          arr = this.scopes[0].vars[ varIntName ];\n        }\n        if( arr === undefined ) {\n          throw \"@no such array@Array '\"+ varIntName+\"' does not exist\";\n        }\n      }\n\n      if( arr.getIndexCount() != p.indices.length ) {\n          throw \"@bad subscript@Array index dimensions do not match\";\n      }\n\n      var indices = [];\n      for( var ai=0; ai<p.indices.length; ai++) {\n        indices[ai] = this.evalExpression( p.indices[ ai ] );\n      }\n\n      val = arr.get( indices );\n      if( val === undefined ) {\n        val = 0;\n      }\n\n    }\n    else if( p.type==\"expr\" ) {\n      val = this.evalExpression( p );\n    }\n    else if( p.type==\"funCall\" ) {\n\n      var values = [];\n      for( var j=0; j<p.params.length; j++) {\n        var par = this.evalExpression( p.params[j] );;\n        values.push( {value: par} );\n      }\n      try {\n        var commands = this.commands;\n        var ecommands = this.extendedcommands;\n        var cmds = this.commands;\n\n        var nFunName = \"_fun_\" + p.functionName.toLowerCase().replace(\"$\",\"_DLR_\");\n\n        var stc = commands[ nFunName ];\n        if( stc === undefined ) {\n\n          stc = ecommands[ nFunName ];\n\n          if( stc === undefined ) {\n\n            stc = ecommands[ nFunName ];\n\n            this.printError(\"no such function: \" + p.functionName);\n            console.log(\"Cannot find functionName \" + nFunName );\n\n            throw \"@no such function \" + p.functionName;\n\n          }\n          else {\n            cmds = ecommands;\n          }\n        }\n\n        val = cmds[ nFunName ]( values );\n\n      }\n      catch ( e ) {\n        throw e;\n      }\n    }\n    else if( p.type==\"defFnCall\" ) {\n\n      try {\n        var fName = p.functionName;\n        var parValue = this.evalExpression( p.params[0] );\n        var restore = null;\n\n        if( this.functions[ fName ] === undefined ) {\n          throw \"@undef'd function\";\n        }\n        var functRecord = this.functions[ fName ];\n\n        if(!(  this.vars[ functRecord.par ] === undefined )) {\n          restore= this.vars[ functRecord.par ];\n        }\n\n        this.vars[ functRecord.par ] = parValue;\n        val  = this.evalExpression( functRecord.expr );\n\n        if( restore != null ) {\n          this.vars[ restore.name ] = restore;\n        }\n        else {\n          this.vars[ functRecord.par ] = 0; //TODO, actually should delete it\n        }\n\n      }\n      catch ( e ) {\n        throw e;\n      }\n    }\n\n    return val;\n  }\n\n  evalExpression( expr ) {\n\n    if( expr == null ) {\n      return null;\n    }\n\n    if( expr.parts.length == 0 ) {\n      return null;\n    }\n\n    var val = this.evalExpressionPart( expr.parts[ 0 ] );\n\n    for( var i=1; i<expr.parts.length; i++) {\n      var p = expr.parts[ i ];\n      if( p.op == \"+\" ) {\n        val += this.evalExpressionPart( p );\n      }\n      else if( p.op == \"^\" ) {\n        val = Math.pow( val, this.evalExpressionPart( p ) );\n      }\n      else if( p.op == \"-\" ) {\n        val -= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"*\" ) {\n        val *= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"/\" ) {\n        if( this.evalExpressionPart( p ) == 0) {\n          throw \"@division by zero\";\n        }\n        val /= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"%\" ) {\n        val %= this.evalExpressionPart( p );\n      }\n      else if( p.op == \";\" ) {\n        val += (\"\" + this.evalExpressionPart( p ));\n      }\n      else if( p.op == \"OR\"  ) {\n          val |= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"AND\"  ) {\n          val &= this.evalExpressionPart( p );\n      }\n      else if( p.op == \"<\" ) {\n        if( val < (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \">\" ) {\n        if( val > (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \"=\" ) {\n        if( val == (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \"<>\" ) {\n        if( val != (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \"<=\" ) {\n        if( val <= (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n      else if( p.op == \">=\" ) {\n        if( val >= (this.evalExpressionPart( p ) ) ) {\n          val = -1;\n        } else {\n          val = 0;\n        }\n      }\n\n      else {\n        throw \"@syntax@unknown operator '\"+p.op+\"'\";\n      }\n    }\n\n    if( expr.negate ) {\n      return -val;\n    }\n    if( expr.binaryNegate ) {\n      if( val == 0 ) {\n        return -1;\n      }\n      return 0;\n    }\n    return val;\n  }\n\n  exitInputState() {\n    var con = this.output;\n    var p = this.program;\n\n    this.inputFlag = false;\n\n\n    var l = this.program[ this.runPointer ];\n    var cmds = l[1];\n\n    this.input.setInterActive( false);\n\n    this.runPointer2++;\n\n    if( this.runPointer2 >=  cmds.length ) {\n\n      this.runPointer2 = 0;\n      this.runPointer++;\n\n      if( this.runPointer >=  p.length ) {\n\n        this.runFlag = false;\n\n        this.HandleStopped( false );\n\n        this.printLine(\"\");\n        this.printReady();\n\n      }\n\n    }\n\n\n  }\n\n  cycle() {\n\n    /*return values*/\n    var END_W_ERROR = 0;\n    var TERMINATE_PROGRAM = -1;\n    var LINE_FINISHED = 10;\n    var MIDLINE_INTERUPT = 20;\n    var TERMINATE_W_JUMP = 30;\n    var PAUSE_F_INPUT = 40;\n    var WAIT_SPECIFIC_TIME = 50;\n\n    var c = this.output;\n\n    var cmdCount = this.cmdCountPerCycle;\n    var lineNumber = -1;\n    try {\n\n      if( this.bitmap.isActive() ) {\n        this.bitmap.triggerFlush();\n      }\n      if( this.output.isActive() && this.output.changeCount() > 0) {\n        this.output.triggerFlush();\n      }\n\n      if( !this.runFlag ||\n            this.inputFlag ||\n            this.listFlag\n             ) {\n\n        if( this.listFlag ) {\n           var countdown = this.listSpeed;\n           while( this.listPointer < this.list.length && countdown-- > 0 ) {\n               this.listCodeLine( this.list[ this.listPointer ] );\n               this.listPointer++;\n           }\n           if (  this.listPointer >= this.list.length ){\n             this.listStop();\n             this.flagStatusChange();\n           }\n\n        }\n      }\n      else {\n\n        if(this.debugFlag) console.log(\"START CYCLE------------------------------\" );\n\n        var p = this.program;\n\n        while (true) {\n\n\n          if( this.waitForMessageFlag ) {\n              break;\n              //return this.statusChanged;\n          }\n\n          if(this.debugFlag) console.log(\"START CYCLE LOOP-------------\" );\n          var l = p[ this.runPointer ];\n          lineNumber = l[0];\n\n          if( l === undefined ) {\n            var t=1;\n          }\n          var bf = this.runPointer2;\n          if(this.debugFlag) console.log(\" this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n          if(this.debugFlag) console.log(\" cmdCount = \" + cmdCount);\n          var rv = this.runCommands( l[1], cmdCount );\n\n          if(! ( this.traceVars === undefined )) {\n              for( var tvi=0; tvi<this.traceVars.length; tvi++) {\n                var thisVar = this.traceVars[ tvi ];\n                var thisValue = this.vars[ thisVar ];\n                var oldValue = this.traceOldValues[ thisVar ];\n\n                if( ! ( thisValue === undefined )) {\n                  if( oldValue != thisValue ) {\n                    this.traceList.push(\n                      \"TRC(\" + lineNumber + \") \" + thisVar + \"=\" + thisValue\n                    );\n\n                    this.traceOldValues[ thisVar ] = thisValue;\n                  }\n\n                }\n              }\n          }\n\n          //console.log(\" rv = \", rv);\n          var af = rv[ 1 ];\n\n          if( rv[0] == MIDLINE_INTERUPT) {\n            this.runPointer2 = af;\n          }\n\n          var executedCount = rv[2];\n\n          if(this.debugFlag) console.log(\" bf = \" + bf, \" af = \" + af);\n          if(this.debugFlag) console.log(\" executedCount = \" + executedCount);\n          if(this.debugFlag) console.log(\" rv = \" + rv);\n\n          cmdCount = cmdCount - executedCount;\n\n          if( rv[0]<=0 ) {\n            if(this.debugFlag) console.log(\" PGM END!!!!\" );\n            this.runFlag = false;\n            var e = null;\n            if( rv.length >= 4 ) {\n              e = rv[3];\n            }\n            this.printLine(\"\");\n            this.printReady();\n            this.HandleStopped( false );\n            if( rv[0] == END_W_ERROR ) {\n\n              this.setVar(\"LINE\", lineNumber );\n              console.log(\"ERROR: \", e, \" LINE \", this.retreiveRuntimeLine() );\n              console.log(\"PARAMETER DUMP:\", this.vars );\n              console.log(\"FUNCTION DUMP:\", this.functions );\n            }\n            if(this.debugFlag) console.log(\"CYCLE RETURN END\");\n            //return this.statusChanged;\n            break;\n          }\n          else if( rv[0] == LINE_FINISHED ) {\n            this.runPointer ++;\n            this.runPointer2 = 0;\n            if(this.debugFlag) console.log(\" new this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n\n            if( this.runPointer >=  p.length ) {\n              if(this.debugFlag) console.log( \"end program\");\n\n              this.setVar(\"LINE\", lineNumber );\n\n              if( !this.waitForMessageFlag ) {\n                this.runFlag = false;\n                this.HandleStopped( false );\n                this.printReady();\n              }\n              else {\n                this.stopAfterMessage = true;\n              }\n              break;\n            }\n          }\n          else if( rv[0] == TERMINATE_W_JUMP ) {\n\n            if(this.debugFlag) console.log(\" jump to new this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n\n          }\n          else if( rv[0] == PAUSE_F_INPUT ) {\n\n            this.runPointer2 = af;\n            if(this.debugFlag) console.log(\"CYCLE PAUSE 4 INPUT\" + this.runPointer + \",\" + this.runPointer2);\n            break;\n\n          }\n          else if( rv[0] == WAIT_SPECIFIC_TIME ) {\n\n            this.runPointer2 = af;\n            if(this.debugFlag) console.log(\"CYCLE PAUSE 4 SPECIFIC TIME\" + this.runPointer + \",\" + this.runPointer2);\n            break;\n\n          }\n\n          if( cmdCount<=0 ) {\n            if(this.debugFlag) console.log(\"Breaking cmdCount=\" + cmdCount)\n            break;\n          }\n\n        }\n\n        if(this.debugFlag) console.log(\" this.runPointer = \" + this.runPointer, \" this.runPointer2 = \" + this.runPointer2 );\n\n      }\n\n    }\n    catch (e) {\n      //c.clearCursor();\n\n      sys.log(\"DEBUG: \", typeof e );\n\n      this.setVar(\"LINE\", lineNumber );\n\n\n      if( this.erh.isError( e ) ) {\n        var err = e;\n\n        this.setVar(\"ERR\", err.clazz );\n        this.setVar(\"ERRDETAIL\", err.detail  );\n\n        this.printError( err.clazz, undefined, undefined, err.detail );\n      }\n      else if( this.erh.isSerializedError( e ) ) {\n        var err = this.erh.fromSerializedError( e );\n\n        this.setVar(\"ERR\", err.clazz );\n        this.setVar(\"ERRDETAIL\", err.detail  );\n\n        this.printError( err.clazz, undefined, undefined, err.detail );\n      }\n      else {\n        var err = this.erh.fromSimpleExternalError( e, undefined, undefined );\n\n        if( err ) {\n\n            this.setVar(\"ERR\", err.clazz );\n            this.setVar(\"ERRDETAIL\", err.detail  );\n            this.printError( err.clazz, undefined, undefined, err.detail );\n        }\n        else {\n\n            this.setVar(\"ERR\", \"unexpected\" );\n            this.setVar(\"ERRDETAIL\", \"unexpected\"  );\n            this.printError( \"unexpected\", undefined, undefined, e );\n        }\n\n      }\n\n      this.printReady();\n      this.runFlag = false;\n      this.HandleStopped( false );\n\n      sys.log(\"ERROR: \", e, \" LINE \", this.retreiveRuntimeLine() );\n      sys.log(\"PARAMETER DUMP:\", this.vars );\n      sys.log(\"FUNCTION DUMP:\", this.functions );\n\n    }\n\n    var pi = this.procIf;\n\n    var cstate = pi.STATE_CLI;\n\n    if( this.isWaitingFlag  ) { cstate = pi.STATE_WAITING ;}\n    else if( this.inputFlag  ) { cstate = pi.STATE_INPUT ;}\n    else if( this.runFlag | this.listFlag ) { cstate = pi.STATE_RUNNING; }\n\n    return [ this.statusChanged, cstate, this.waitingTime ];\n  }\n\n  doReturn() {\n\n    var oldPointers = this.gosubReturn.pop();\n    if( oldPointers === undefined ) {\n      throw \"@return without gosub\";\n    }\n\n    this.runPointer2 = oldPointers[ 1 ];\n    this.runPointer = oldPointers[ 0 ];\n\n    //this.goto( oldLine );\n  }\n\n\n  doInterruptReturn() {\n\n    if( this.scope.name == \"interrupt0\" ) {\n      this.interruptFlag0 = false; // TODO interrupt, take from scope which flag\n    }\n    else {\n      this.interruptFlag1 = false; // TODO interrupt, take from scope which flag\n    }\n\n    this.runPointer = this.scope.data.runPointer;\n    this.runPointer2 = this.scope.data.runPointer2;\n\n    this.closeScope();\n\n  }\n\n\n\n\n  gosub( line0, runPointer2 ) {\n\n\n    var pgm = this.program;\n    var len=this.program.length;\n    var retLine = null;\n    var retCmd = null;\n\n    var line = line0;\n    if( (typeof line0).toLowerCase() == \"string\" ) {\n      line = this.labels[line0];\n      if( line == undefined ) {\n        throw \"@undef'd label\";\n      }\n    }\n\n    this.runPointer2 = runPointer2;\n\n    if( ( this.runPointer2 + 1) < this.program[ this.runPointer ][1].length ) {\n      retCmd = this.runPointer2 + 1;\n      retLine = this.runPointer;\n    }\n    else {\n      if( (this.runPointer+1) < len ) {\n        retCmd=0;\n        retLine = this.runPointer+1 ;\n      }\n      else {\n        retCmd=9999;\n        retLine = this.runPointer;\n      }\n    }\n\n    this.gosubReturn.push( [ retLine, retCmd ] );\n    this.goto( line );\n  }\n\n  goto( line0 ) {\n\n    //console.log( \"goto line \" + line)\n    var pgm = this.program;\n    var len=this.program.length;\n    var found = false;\n    var line;\n\n    line = line0;\n    if( (typeof line0).toLowerCase() == \"string\" ) {\n      line = this.labels[line0];\n      if( line == undefined ) {\n        throw \"@undef'd label\";\n      }\n    }\n\n    for( var i=0; i<len; i++) {\n      var l = pgm[i];\n\n      if( l[0] == line ) {\n        this.runPointer = i;\n        this.runPointer2 = 0;\n        found = true;\n      }\n    }\n\n    if(!found ) {\n      throw \"@undef'd statement\";\n    }\n\n    if(!this.runFlag ) {\n      this.startAsGoto = true;\n      this.runPGM();\n    }\n  }\n\n  listStop() {\n    if( this.listFlag ) {\n      if( this.runFlag ) {\n        this.listFlag = false;\n        this.input.setInterActive( this.listFlagBakInteractive );\n      }\n      else {\n        var c = this.output;\n        this.listFlag = false;\n        this.HandleStopped( false );\n        this.printLine( \"\" );\n        this.printReady();\n      }\n    }\n  }\n\n\n  runStop() {\n    if( this.runFlag ) {\n      var c = this.output;\n      this.runFlag = false;\n      this.handlers.interrupt0 = undefined;\n      this.handlers.interrupt1 = undefined;\n\n      this.HandleStopped( false );\n\n      console.log( \"break in \" + this.program[ this.runPointer ][0] );\n\n      this.setVar( \"LINE\", this.program[ this.runPointer ][0] );\n      this.setVar(\"ERR\", \"BREAK\" );\n\n      this.printLine(\"\");\n      this.printLine( \"break in \" + this.program[ this.runPointer ][0]);\n      this.printReady();\n    }\n  }\n\n  isRunning() {\n    return this.runFlag;\n  }\n\n  isListing() {\n    return this.listFlag;\n  }\n\n  isInput() {\n    return this.inputFlag;\n  }\n\n  isReady() {\n    return !this.runFlag && !this.listFlag && ! this.executeLineFlag;\n  }\n\n\n  getDataBlocks() {\n    var list = [];\n\n    var mapInfo = Object.entries( this.loadedData );\n    for( var i=0; i<mapInfo.length; i++) {\n      if( mapInfo[i][1].length > 0) {\n        list.push( mapInfo[i][0] + \": \" + mapInfo[i][1].length  );\n      }\n\n    }\n\n    return list;\n\n  }\n\n  readData() {\n\n    if( this.dataPointer >= this.data.length ) {\n      return undefined;\n    }\n\n    var result = this.data[ this.dataPointer ];\n    this.dataPointer++;\n\n    return result;\n  }\n\n\n  getDataLength() {\n\n    return this.data.length;\n\n  }\n\n  setData( label0 ) {\n    var label = label0;\n    if( ! label ) {\n      label = \"default\";\n    }\n\n    this.data = this.loadedData[ label ];\n    this.dataPointer = 0;\n\n  }\n\n  insertData( data, type, label0 ) {\n\n    //this.loadedData = { default: [] };\n    var label = label0;\n    if( ! label ) {\n      label = \"default\";\n    }\n    this.loadedLabel = label;\n    this.dataPointer = 0;\n\n    var arr = [];\n    this.loadedData[label ] = arr;\n\n    var typeParts = type.split(\":\");\n    var typeData = typeParts[0].toUpperCase();\n    var dataSyntax = typeParts[1].toUpperCase();\n\n    this[\"parseSimpleData\" + typeData + \"_\" + dataSyntax]( data, arr );\n\n    this.data = arr;\n  }\n\n\n  parseSimpleDataI_CSV( data, toArr ) {\n    var data2 = data.replaceAll(\" \",\"\").replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\");\n    data2 = data2.split(\",\");\n    for( var i=0; i<data2.length; i++) {\n      toArr.push( data2[ i ] );\n    }\n\n  }\n\n\n  parseSimpleDataS_CSV( data, toArr ) {\n    var data2 = data.replaceAll(\" \",\"\").replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\");\n    data2 = data2.split(\",\");\n    for( var i=0; i<data2.length; i++) {\n      toArr.push( data2[ i ] );\n    }\n\n  }\n\n  parseSimpleDataS_LINES( data, toArr ) {\n    var data2;\n    data2 = data.split(\"\\n\");\n    for( var i=0; i<data2.length; i++) {\n      toArr.push( data2[ i ] );\n    }\n\n  }\n\n  printChar( c  ) {\n    this.output.write( c );\n  }\n\n  listCodeLine( rawLine ) {\n    if( rawLine === undefined ) {\n        this.printLine( \"???\" );\n        return;\n    }\n\n    this.printLine( rawLine );\n\n  }\n\n  rebuildLineString( nr, raw,\n      removePadding,\n      renumbering,\n      addSmartPadding,\n      shortenKeywords)\n  {\n\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n\n    var tokens = p.getTokens( raw, false, false );\n\n    if( ! ( renumbering === undefined )) {\n\n\n\n      var nopadTokens = [];\n      for( i = 0; i<tokens.length; i++) {\n        if( tokens[i].type != \"pad\") {\n          nopadTokens.push( tokens[ i ] );\n        }\n      }\n\n      var foundGoto = false;\n      var foundGotoParIndex = -1;\n\n      for( i = 0; i<nopadTokens.length; i++) {\n\n          if( i>1 ) {\n            if( nopadTokens[i].type == \"num\" &&\n                nopadTokens[i-1].type == \"name\" && nopadTokens[i-1].data == \"THEN\" ) {\n              foundGoto = true;\n              foundGotoParIndex = i;\n            }\n            else if( nopadTokens[i].type == \"num\" &&\n                  nopadTokens[i-1].type == \"name\" &&\n                  ( nopadTokens[i-1].data == \"GOTO\" || nopadTokens[i-1].data == \"GOSUB\" )) {\n              foundGoto = true;\n              foundGotoParIndex = i;\n            }\n        }\n\n        if( nopadTokens[i].type == \"num\" && foundGoto &&  i == foundGotoParIndex ) {\n          var newLine = renumbering[ \"old_\" + nopadTokens[i].data ];\n          if( newLine == undefined ) { newLine = 99999;}\n          nopadTokens[i].data =newLine;\n          foundGoto = false;\n        }\n      }\n    }\n    tokens[0].data = nr;\n    var newString;\n\n    newString = nr;\n    if( removePadding ) {\n      newString = nr + \" \" ;\n    }\n    for( var i = 1 ; i< tokens.length; i++) {\n      if( removePadding ) {\n         if( tokens[i].type == \"pad\" ) {\n           continue;\n         }\n       }\n\n       if( shortenKeywords ) {\n         if( tokens[i].type == \"name\" && tokens[i].data == \"PRINT\" ) {\n           tokens[i].data = \"?\";\n         }\n       }\n       else {\n         if( tokens[i].type == \"name\" && tokens[i].data == \"?\" ) {\n           tokens[i].data = \"PRINT\";\n         }\n      }\n\n      if( tokens[i].type == \"str\" ) {\n        newString += \"\\\"\" + tokens[i].data + \"\\\"\";\n      }\n      else if( tokens[i].type == \"name\" && addSmartPadding == true) {\n        newString += tokens[i].data + \" \";\n      }\n      else if( tokens[i].type == \"num\" && addSmartPadding == true) {\n        if( tokens[i].data.length == 1 ) {\n            newString += \" \" + tokens[i].data;\n        }\n        else {\n            newString += tokens[i].data;\n        }\n      }\n      else {\n        newString += tokens[i].data;\n      }\n\n    }\n\n    var rec = p.parseLine( newString );\n\n    return rec;\n  }\n\n  lineIsData( line ) {\n    console.log( line );\n    if( line[1].length == 1 ) {\n      if( ! ( line[1][0].controlKW === undefined) ) {\n        if( line[1][0].controlKW.toUpperCase() == \"DATA\" ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  lineIsRem( line ) {\n    console.log( line );\n    if( line[1].length == 1 ) {\n      if( ! ( line[1][0].controlKW === undefined) ) {\n        if( line[1][0].controlKW.toUpperCase() == \"REM\" ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  lineIsSub( line ) {\n    console.log( line );\n    if( line[1].length == 1 ) {\n      if( ! ( line[1][0].controlKW === undefined) ) {\n        if( line[1][0].controlKW.toUpperCase() == \"SUB\" ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  renumberProgram( start, gap ) {\n\n    var p = this.program;\n\n    var newLineNr = start;\n    var renumbering = {};\n    var lineNumbers = [];\n\n    var method = \"sub\";\n\n    if( method  == \"plain\" ) {\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n\n          renumbering[\"old_\" + line[0]] = newLineNr;\n          lineNumbers.push( newLineNr );\n          newLineNr += gap;\n      }\n    }\n    else if( method  == \"data\" ) {\n      // non data\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var data = this.lineIsData( line );\n\n          if( data ) {\n            continue;\n          }\n          else {\n            renumbering[\"old_\" + line[0]] = newLineNr;\n            lineNumbers.push( newLineNr );\n            newLineNr += gap;\n          }\n      }\n\n      //data\n      var kNumber = Math.ceil( newLineNr / 1000 );\n      var newLineNr2 = 1000 * ( kNumber  );\n      if( newLineNr2 - newLineNr  < 100 ) {\n        newLineNr2+=1000;\n      }\n      newLineNr = newLineNr2;\n\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var data = this.lineIsData( line );\n\n          if( !data ) {\n            continue;\n          }\n          else {\n            renumbering[\"old_\" + line[0]] = newLineNr;\n            lineNumbers.push( newLineNr );\n            newLineNr += gap;\n          }\n      }\n\n    }\n    else if( method  == \"rem\" ) {\n      // non data\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var rem = this.lineIsRem( line );\n\n          if( rem ) {\n            var kNumber = Math.ceil( newLineNr / 1000 );\n            var newLineNr2 = 1000 * ( kNumber  );\n            if( newLineNr2 - newLineNr  < 100 ) {\n              newLineNr2+=1000;\n            }\n            newLineNr = newLineNr2;\n          }\n          renumbering[\"old_\" + line[0]] = newLineNr;\n          lineNumbers.push( newLineNr );\n          newLineNr += gap;\n\n      }\n\n    }\n    else if( method  == \"sub\" ) {\n      // non data\n      for( var i=0; i<p.length; i++) {\n          var line = p[ i ];\n          var rem = this.lineIsSub( line );\n\n          if( rem ) {\n            var kNumber = Math.ceil( newLineNr / 1000 );\n            var newLineNr2 = 1000 * ( kNumber  );\n            if( newLineNr2 - newLineNr  < 100 ) {\n              newLineNr2+=1000;\n            }\n            newLineNr = newLineNr2;\n          }\n          renumbering[\"old_\" + line[0]] = newLineNr;\n          lineNumbers.push( newLineNr );\n          newLineNr += gap;\n\n      }\n\n    }\n    //newLineNr = start;\n    for( var i=0; i<p.length; i++) {\n        newLineNr = lineNumbers[ i ]\n        var line = p[ i ];\n        var lRec = this.rebuildLineString( newLineNr, line[2], true, renumbering, true );\n\n        line[0] = newLineNr;\n        line[1] = lRec.commands;\n        line[2] = lRec.raw.trim();\n\n        //newLineNr += gap;\n    }\n  }\n\n  PETSCIIreplace( keywordCompress ) {\n    var p = this.program;\n\n    for( var i=0; i<p.length; i++) {\n        var line = p[ i ];\n\n        var lRec = this.rebuildNoPETSCIILineString( line[2] );\n\n        line[1] = lRec.commands;\n        line[2] = lRec.raw;\n\n    }\n  }\n\n  compressProgram( keywordCompress ) {\n    var p = this.program;\n\n    for( var i=0; i<p.length; i++) {\n        var line = p[ i ];\n\n       var lRec = this.rebuildLineString( line[0], line[2], true, undefined, false, keywordCompress );\n\n        line[1] = lRec.commands;\n        line[2] = lRec.raw;\n\n    }\n  }\n\n  normalizeProgram() {\n    var p = this.program;\n\n    for( var i=0; i<p.length; i++) {\n        var line = p[ i ];\n\n        var lRec = this.rebuildLineString( line[0], line[2], true, undefined, true );\n\n        line[1] = lRec.commands;\n        line[2] = lRec.raw;\n\n    }\n  }\n\n  clrPGM() {\n    this.vars = {};\n    this.functions = [];\n    this.restoreDataPtr();\n  }\n\n  restoreDataPtr() {\n    this.dataPointer = 0;\n    this.data = this.loadedData[ \"default\" ];\n  }\n\n  normalizeData( dataRec ) {\n    var data = dataRec.data;\n\n    if( dataRec.type == \"num\" ) {\n      if( (typeof data).toLowerCase() == \"string\" ) {\n        data = parseInt( data );\n      }\n    }\n    else {\n      if( (typeof data).toLowerCase() == \"number\" ) {\n        data = \"\" + data ;\n      }\n    }\n\n    return data;\n  }\n\n  runPGM() {\n\n    this.executeLineFlag = false;\n    this.stopAfterMessage = false;\n\n    if( this.startAsGoto ) {\n        this.startAsGoto = false;\n\n        var bak1 = this.runPointer;\n        var bak2 = this.runPointer2;\n\n        this.runPGM();\n\n        this.runPointer = bak1;\n        this.runPointer2 = bak2;\n\n\n        return;\n    }\n\n    this.input.setInterActive( false);\n    this.input.flush();\n\n    var c = this.output;\n    var p = this.program;\n\n    this.loadedData[ \"default\" ] = [];\n    this.restoreDataPtr();\n\n    this.gosubReturn = [];\n    this.scopes = [];\n    this.newScope( \"global\", {} );\n    this.functions = [];\n    this.handlers = {}\n    this.labels = {};\n    this.traceList = [];\n    this.traceOldValues = {};\n\n    var normalize = this.normalizeData;\n\n    for( var i=0; i<p.length; i++) {\n\n        var line = p[ i ];\n        var commands = line[1];\n\n        for( var j=0; j<commands.length; j++) {\n\n          var command = commands[j];\n\n          if( command.type  == \"control\" && command.controlKW == \"data\") {\n            for( var k=0; k<command.params.length; k++) {\n              this.loadedData[ \"default\" ].push( normalize( command.params[k] ) );\n            }\n          }\n          else if( command.type  == \"control\" && command.controlKW == \"on\") {\n            if( command.params[0] == \"interrupt1\") {\n              this.handlers.interrupt1 = command.params[1];\n              this.handlers.interrupt1ParamIsLabel = command.label;\n            }\n            else if( command.params[0] == \"interrupt0\") {\n              this.handlers.interrupt0 = command.params[1];\n              this.handlers.interrupt0ParamIsLabel = command.label;\n            }\n          }\n          else if( command.type  == \"control\" && command.controlKW == \"sub\") {\n            var label = command.label;\n            this.labels[ label ] = parseInt(line[0]);\n          }\n        }\n    }\n\n    if( this.debugFlag ) {\n      console.log(\"data dump:\",this.data);\n    }\n\n\n    if( this.program.length > 0) {\n      this.runFlag = true;\n      this.inputFlag = false;\n      this.waitingTime = 0;\n      this.isWaitingFlag = false;\n      this.runPointer = 0;\n      this.runPointer2 = 0;\n      this.waitForMessageFlag = false;\n      this.interruptFlag0 = false;\n      this.interruptFlag1 = false;\n\n    }\n    else {\n      this.runFlag = false;\n      this.inputFlag = false;\n      this.waitingTime = 0;\n      this.isWaitingFlag = false;\n      this.runPointer = 0;\n      this.runPointer2 = 0;\n      this.waitForMessageFlag = false;\n      this.interruptFlag0 = false;\n      this.interruptFlag1 = false;\n      this.input.setInterActive( true);\n    }\n\n    this.flagStatusChange();\n  }\n\n  getVars() {\n    return this.vars;\n  }\n\n\n\n\n  doForInit( from, to, step, varName, cmdPointer, cmdArrayLen, linePointersLen ) {\n\n    var ctx = this.forContext;\n\n    if( this.vars[ varName ] === undefined ) {\n      this.vars[ varName ] = 0;\n    }\n    this.vars[ varName ] = this.evalExpression( from );\n\n    ctx.default.push( varName );\n    ctx[varName] = {};\n\n    var ctxv = ctx[varName];\n    ctxv.to = this.evalExpression( to );\n\n    if( step == null ) {\n        ctxv.step = 1;\n    }\n    else {\n      ctxv.step = this.evalExpression( step );\n    }\n\n    ctxv.jumpTo =\n      { line: this.runPointer,\n        cmdPointer: cmdPointer+1 }\n    if( ctxv.jumpTo.cmdPointer >= cmdArrayLen )  {\n\n      if( this.runPointer == -1) {\n        throw \"@syntax@Can't find command after 'FOR'\";\n      }\n      else {\n        if( ( this.runPointer + 1) >= linePointersLen ) {\n          throw \"@syntax@Can't find command after 'FOR', on next line\";\n        }\n        ctxv.jumpTo.line++;\n        ctxv.jumpTo.cmdPointer = 0;\n      }\n    }\n\n  }\n\n  doForNext( nextVarName ) {\n    var ctx = this.forContext;\n    if( ctx.default.length == 0 ) {\n      throw \"@syntax@Next without for\";\n    }\n    var varName = ctx.default[ctx.default.length-1];\n    if( nextVarName  != null ) {\n      varName = nextVarName;\n    }\n\n    var ctxv = ctx[varName];\n\n    this.vars[ varName ] += ctxv.step;\n    if( ctxv.step > 0) {\n      if(this.vars[ varName ]<=ctxv.to) {\n\n        return ctxv.jumpTo;\n      }\n    }\n    else if( ctxv.step == 0) {\n      return ctxv.jumpTo;\n    }\n    else {\n      if(this.vars[ varName ]>=ctxv.to) {\n        return ctxv.jumpTo;\n      }\n    }\n\n    ctx.default.pop();\n    return -1;\n  }\n\n  onLineStr() {\n\n    var line = this.retreiveLine();\n    if( line == -1 || line == \"\") { return \"\"; }\n\n    return \" in \" + line;\n\n  }\n\n  retreiveRuntimeLine() {\n    if( this.runPointer > -1 ) {\n      var line = this.program[this.runPointer];\n      return line[0];\n    }\n    return -1;\n  }\n\n\n  retreiveLine() {\n    if( this.runFlag ) {\n      return this.retreiveRuntimeLine();\n    }\n    else {\n      if( this[\"parseLineNumber\"] === undefined ) {\n        return -1;\n      }\n      if( this.parseLineNumber == -1) { return \"\"; }\n      return this.parseLineNumber;\n    }\n    return -1;\n  }\n\n\n  commandToString( cmd ) {\n    if( cmd.type == \"control\" )  {\n      return cmd.controlKW.toUpperCase();\n    }\n    else if( cmd.type == \"call\" ) {\n      return cmd.statementName;\n    }\n    else if( cmd.type == \"assignment\" )  {\n      return \"assign ->\" + cmd.var;\n    }\n    return \"????\";\n  }\n\n  runCommands( cmds, limit ) {\n    /* return values\n      false -> error or end program\n      true  -> executed ok\n\n      should return\n      end_w_error\n      terminate_program\n      line_finished\n      goto_gosub\n    */\n\n    var commands = this.commands;\n    var ecommands = this.extendedcommands;\n    var EXPR = 0, PAR = 1;\n\n    /*return values*/\n    var END_W_ERROR = 0;\n    var TERMINATE_PROGRAM = -1;\n    var LINE_FINISHED = 10;\n    var MIDLINE_INTERUPT = 20;\n    var TERMINATE_W_JUMP = 30;\n    var PAUSE_F_INPUT = 40;\n    var WAIT_SPECIFIC_TIME = 50;\n\n    var end = cmds.length;\n    var i=this.runPointer2;\n    var cnt=0;\n\n    if(!(limit == undefined )) {\n      //nothing\n    }\n    else {\n      limit = 9999; //reaching to infinite (max on line maybe  40)\n    }\n\n    while( i<end && cnt<limit ) {\n\n\n      var cmd=cmds[i];\n\n      var l=this.program[this.runPointer];\n      if( l ) {\n        if(parseInt(l[0]) == 3155 ) {\n          console.log(\"bump\");\n        }\n      }\n\n      if( cmd.type == \"control\" )  {\n        var cn = cmd.controlKW;\n        if( cn == \"goto\" ) {\n          this.goto( cmd.params[0] );\n          return [TERMINATE_W_JUMP,i+1,cnt+1];\n        }\n        else if( cn == \"end\" ) {\n          return [TERMINATE_PROGRAM,i+1,cnt+1];\n        }\n        else if( cn == \"stop\" ) {\n          this.printInfo(\"break\");\n          return [TERMINATE_PROGRAM,i+1,cnt+1];\n        }\n        else if( cn == \"gosub\" ) {\n          this.gosub( cmd.params[0], i );\n          return [TERMINATE_W_JUMP,i+1,cnt+1];\n        }\n        else if( cn == \"on\" ) {\n          var onCommand = cmd.params[ 0 ];\n\n          if( onCommand != \"interrupt0\"  && onCommand != \"interrupt1\" ) {\n            var onExpr = cmd.params[ 1 ];\n            var onLineNrs = cmd.params[ 2 ];\n\n            var value = this.evalExpression( onExpr );\n            if( (value-1)>=0 && (value-1)<onLineNrs.length ) {\n              if( onCommand == \"goto\" ) {\n                this.goto( onLineNrs[ (value-1) ] );\n                return [TERMINATE_W_JUMP,i+1,cnt+1];\n              }\n              else if( onCommand == \"gosub\" ) {\n                this.gosub( onLineNrs[ (value-1) ], i );\n                return [TERMINATE_W_JUMP,i+1,cnt+1];\n              }\n            }\n          }\n\n          //if not jumping, do nothing\n        }\n        else if( cn == \"return\" ) {\n\n          if( this.interruptFlag0 || this.interruptFlag1) {\n\n            this.doInterruptReturn();\n\n          }\n          else {\n            this.doReturn();\n          }\n\n          return [TERMINATE_W_JUMP,i+1,cnt+1];\n        }\n        else if( cn == \"if\" ) {\n          var IF_ERROR = -1;\n          var IF_TRUE = 1;\n          var IF_FALSE = 0;\n\n          var ifresult = this.evalExpression( cmd.params[0] );\n          if( ifresult != IF_FALSE ) {\n             //return [MIDLINE_INTERUPT,i+1];\n          }\n          else  {\n             return [LINE_FINISHED,i+1,cnt+1];\n          }\n        }\n        else if( cn == \"data\" ) {\n          //Nothing\n        }\n        else if( cn == \"rem\" ) {\n          return [LINE_FINISHED,i+1,cnt+1];\n        }\n        else if( cn == \"sub\" ) {\n          return [LINE_FINISHED,i+1,cnt+1];\n        }\n        else if( cn == \"for:init\" ) {\n          this.doForInit( cmd.params[0], cmd.params[1], cmd.params[2], cmd.variable, i, cmds.length );\n        }\n        else if( cn == \"for:next\" ) {\n\n          var jump = this.doForNext( cmd.nextVar );\n\n          if( !(jump === -1 ) ) {\n\n            if( jump.line != -1 ) {\n                if( this.runPointer == jump.line ) {\n                  i = jump.cmdPointer;\n                  cnt++;\n                  continue;\n                }\n                else {\n                  this.runPointer = jump.line;\n                  this.runPointer2 = jump.cmdPointer;\n                }\n                return [TERMINATE_W_JUMP,i+1,cnt+1];\n            }\n            else {\n              i = jump.cmdPointer;\n              cnt++;\n              continue;\n            }\n          }\n        }\n        else if( cn == \"dim\" ) {\n          var vars = this.vars;\n\n          for( var ix=0; ix<cmd.params.length; ix++) {\n\n            var indices = [];\n            for( var ai=0;ai<cmd.params[ix].length;ai++){\n              indices[ai] = this.evalExpression( cmd.params[ix][ai] );\n            }\n\n            var arrRec = new BasicArray( cmd.arrayNames[ix], indices, 0 );\n\n            var varIntName = \"@array_\" + cmd.arrayNames[ix];\n\n            if( ! ( this.vars[ varIntName ] === undefined )) {\n              this.printError( \"redim'd array\" );\n              return [END_W_ERROR,i+1,cnt+1];\n            }\n            this.vars[ varIntName ] = arrRec;\n          }\n\n        }\n        else if( cn == \"def\" ) {\n          this.functions[ cmd.params[0] ] = {\n            par: cmd.params[1],\n            expr: cmd.params[2]\n          };\n        }\n        else {\n          this.printError( \"illegal ctrl token '\" + cn  +\"'\");\n          return [END_W_ERROR,i+1,cnt+1];\n        }\n      }\n      else if( cmd.type == \"call\" )  {\n        var values = [];\n        var pardefs = [];\n        var mycommands = commands;\n        var stc = mycommands[ \"_stat_\" + cmd.statementName.toLowerCase()];\n\n        if( stc === undefined ) {\n          //cmd.statementName.toLowerCase().startsWith(\"x\") )\n          mycommands = ecommands;\n\n          stc = mycommands[ \"_stat_\" + cmd.statementName.toLowerCase()];\n\n          if( stc === undefined ) { }\n          else {\n            if( mycommands.enabled == false &&\n              cmd.statementName.toLowerCase() != \"xon\") {\n                  this.printError( \"extended not enabled\" );\n                  return [END_W_ERROR,i+1,cnt+1];\n            }\n          }\n        }\n\n        var intf = mycommands[ \"_if_\" + cmd.statementName.toLowerCase()];\n        if( !( intf === undefined ) ) {\n            pardefs = mycommands[ \"_if_\" + cmd.statementName.toLowerCase()]();\n        }\n        else {\n          for( var j=0; j<cmd.params.length; j++) {\n            pardefs[j] = EXPR;\n          }\n        }\n\n        for( var j=0; j<cmd.params.length; j++) {\n          if( pardefs[j] == EXPR ) {\n\n            var p = this.evalExpression( cmd.params[j] );  //NOTE this one gets the trailing ;, from a \"PRINT ;\" command\n\n            if( p != null ) {\n              values.push( { type: \"value\", value: p } );\n            }\n          }\n          else if( pardefs[j] == PAR ) {\n            var varName = cmd.params[j].parts[0].data;\n            var varType0 = cmd.params[j].parts[0].type;\n\n            if( varType0 == \"array\" ) {\n\n              var varType = \"num\";\n              if( varName.indexOf(\"$\") > -1) {\n                varType = \"str\";\n              }\n\n              values.push( { type: \"var\", value: varName, varType: varType0 + \":\" + varType } );\n\n\n            }\n            else {\n              var varType = \"num\";\n              if( varName.indexOf(\"$\") > -1) {\n                varType = \"str\";\n              }\n\n              values.push( { type: \"var\", value: varName, varType: varType } );\n\n            }\n\n          }\n          else { /*RAW*/\n            //values.push( cmd.params[j].parts );\n            values.push( cmd.params[j] );\n\n          }\n        }\n        try {\n          //var stc = ;\n          if( stc === undefined ) {\n            this.printError(\"syntax\");\n            return [END_W_ERROR,i+1,cnt+1];\n          }\n          else {\n\n              this.inputCommand  = false;\n\n              mycommands[ \"_stat_\" + cmd.statementName.toLowerCase()]( values );\n\n              if( this.inputFlag ) {  //}|| this.inputCommand ) {\n                return [PAUSE_F_INPUT,i+1,cnt+1];\n              }\n              else if ( this.isWaitingFlag )  {\n                return [WAIT_SPECIFIC_TIME,i+1,cnt+1];\n              }\n          }\n\n        }\n        catch ( e ) {\n          console.log(e);\n\n          if( this.erh.isSerializedError( e ) ) {\n            var err = this.erh.fromSerializedError( e );\n            this.printError( err.clazz, false, false, err.detail );\n          }\n          else if( this.erh.isError( e ) ) {\n            var err = e;\n            this.printError( err.clazz, false, false, err.detail );\n          }\n          else {\n            this.printError(\"unexpected \" + e );\n          }\n\n          return [END_W_ERROR,i+1,cnt];\n        }\n      }\n      else if( cmd.type == \"assignment\" )  {\n        if( cmd.arrayAssignment ) {\n          var varIntName = \"@array_\" + cmd.var;\n          if( this.vars[ varIntName ] === undefined ) {\n            this.printError(\"bad subscript\",false, false, \"No such Array\");\n            //printError( s, supressLine, explicitline, detail ) {\n            return [END_W_ERROR,i+1,cnt];\n          }\n\n          var arr = this.vars[ varIntName ];\n          if( cmd.indices.length != arr.getIndexCount() ) {\n            this.printError(\"bad subscript\",false, false, \"Wrong dimensions\");\n            return [END_W_ERROR,i+1,cnt];\n          }\n\n          var indices = [];\n          for( var ai=0;ai<cmd.indices.length;ai++){\n            indices[ai] = this.evalExpression( cmd.indices[ai] );\n          }\n\n          if( cmd.var.endsWith(\"%\") ) {\n              arr.set( indices, Math.floor( this.evalExpression( cmd.expression ) ) );\n          }\n          else if( ! cmd.var.endsWith(\"$\") ) {\n              var v = this.evalExpression( cmd.expression );\n              if( ! (typeof v == \"number\") ) {\n                this.printError(\"type mismatch\", undefined, undefined, \"value not a number\");\n                return [END_W_ERROR,i+1,cnt];\n              }\n              arr.set( indices, this.evalExpression( cmd.expression ) );\n          }\n          else {\n              arr.set( indices, this.evalExpression( cmd.expression ) );\n          }\n\n        }\n        else { //single var (not an array)\n          if( this.vars[ cmd.var ] === undefined ) {\n            if(cmd.var.startsWith(\"TI\")) {\n              this.printError(\"syntax\");\n              return [END_W_ERROR,i+1,cnt+1];\n            }\n            this.vars[ cmd.var ] = 0;\n          }\n          if(cmd.var.endsWith(\"%\")) {\n            this.vars[ cmd.var ] = Math.floor( this.evalExpression( cmd.expression ) );\n          }\n          else if( ! cmd.var.endsWith(\"$\") ) {\n              var v = this.evalExpression( cmd.expression );\n              if( ! (typeof v == \"number\") ) {\n                this.printError(\"type mismatch\", undefined, undefined, \"value not a number\");\n                return [END_W_ERROR,i+1,cnt];\n              }\n              this.vars[ cmd.var ] = this.evalExpression( cmd.expression );\n          }\n          else {\n            this.vars[ cmd.var ] = this.evalExpression( cmd.expression );\n          }\n        }\n      }\n      //cnt++;\n      i++;\n      cnt++;\n    }\n\n    if( i== cmds.length ) {\n      return [LINE_FINISHED,i,cnt];\n    }\n\n    return [MIDLINE_INTERUPT,i,cnt];\n\n  }\n\n  newScope( name, data ) {\n    var scope = { name: name, vars: {}, data: data };\n    this.scopes.push( scope );\n    this.vars = scope.vars;\n    this.scope = scope;\n  }\n\n  closeScope() {\n    this.scopes.pop();\n    this.vars = this.scopes[ this.scopes.length - 1 ].vars;\n  }\n\n\n  getArray( a ) {\n   return this.vars[  \"@array_\" + a ];\n  }\n\n  setVar( a, b ) {\n    this.vars[ a ] = b;\n  }\n\n  getTraceList() {\n    if( this.traceList === undefined ) {\n      return [];\n    }\n\n    return this.traceList;\n  }\n\n  setTraceVar( v ) {\n    if( this.traceVars === undefined ) {\n        this.traceVars = [];\n    }\n    this.traceVars.push( v.toUpperCase() );\n\n  }\n\n  resetTraceVar( v ) {\n    this.traceVars = undefined;\n  }\n\n\n  old( ) {\n    this.program = this.oldProgram;\n  }\n\n  new( ) {\n    this.oldProgram = this.program ;\n    this.program = [];\n  }\n\n  removePgmLine( linenr ) {\n\n    var pgm2 = [];\n\n    for( var i=0; i<this.program.length; i++) {\n      var pl=this.program[i];\n      if( pl[0] != linenr ) {\n        pgm2.push(pl);\n      }\n    }\n    this.program = pgm2;\n\n  }\n\n\n  padSpaces6( no ) {\n    var s = no + \"\";\n    for(var i=s.length; i<6; i++) {\n      s+=\" \";\n    }\n    return s;\n  }\n\n  padSpaces8( no ) {\n    var s = no + \"\";\n    for(var i=s.length; i<8; i++) {\n      s+=\" \";\n    }\n    return s;\n  }\n\n\n  insertPgmLine( linenr, commands, handlers, raw ) {\n\n    this.insertPgmLineLocal( linenr, commands, handlers, raw, this.program );\n  }\n\n  insertPgmLineLocal( linenr, commands, handlers, raw, myProgram ) {\n\n    for( var i=0; i<myProgram.length; i++) {\n      var pl=myProgram[i];\n      if( pl[0] == linenr ) {\n        myProgram[i] = [linenr, commands, raw.trim() ];\n        return;\n      }\n    }\n\n    myProgram.push( [linenr, commands, raw.trim(), handlers ]);\n\n    var sortF = function compare( a, b ) {\n      return a[0] - b[0];\n    }\n\n    myProgram.sort( sortF );\n\n  }\n\n  textLinesToBas( lines ) {\n\n    var myProgram = [];\n    var exception = undefined;\n\n    if( this.debugFlag ) {\n      console.log( \"textLinesToBas\" );\n    }\n    for( var i = 0; i<lines.length; i++ ) {\n\n      var line = this.prepareLineForImport( lines[ i ] );\n      var p = new Parser( this.commands, this.extendedcommands );\n      p.init();\n\n      var l = null;\n\n      try {\n          l = p.parseLine( line );\n      }\n      catch ( e ) {\n        if( exception === undefined ) {\n            exception = e;\n        }\n\n        try {\n          l = p.parseErrorLine( line );\n        }\n        catch ( e ) {\n            this.printError( \"unexpected text (at \"+i+\")\", true );\n            console.log(\"Illegal Line: \", line );\n        }\n      }\n\n      if( l == null ) {\n        continue;\n      }\n      if( l.lineNumber != -1 ) {\n        if( l.commands.length > 0) {\n          this.insertPgmLineLocal( l.lineNumber, l.commands, l.handlers, l.raw,  myProgram);\n          //this.program[ l.lineNumber ] = [l.commands,l.raw];\n        }\n        else {\n          throw \"Error, no commands on line \" + l.lineNumber;\n        }\n      }\n      else {\n        throw \"Error, command must start with number to be part of program\";\n      }\n\n      if( this.debugFlag ) {\n        console.log(\"program:\",myProgram);\n        console.log(\"Line: \", l );\n      }\n    }\n    return { pgm: myProgram, exception: exception };\n  }\n\n  printReady() {\n    this.printLine(\"Ready.\");\n  }\n\n\n  startConsoleDataInput( vars ) {\n\n    if( this.debugFlag ) {\n      console.log(\"inputvars=\",vars);\n    }\n    this.inputFlag = true;\n    this.inputVars = vars;\n    this.input.setInterActive( true);\n    this.inputVarsPointer = 0;\n    this.output.write( \"? \");\n    this.inputStartInputPosX = this.output.getCursorPos()[0];\n\n    this.flagStatusChange();\n\n  }\n\n  executeInteractiveLine( str ) {\n    this.handleLineInput( str, false );\n  }\n\n  handleLineInput( str, isInputCommand ) {\n\n    if( this.debugFlag ) {\n      console.log(\"handleLineInput: start debug / isInputCommand=\" + isInputCommand + \" -------------\");\n    }\n\n    if( isInputCommand ) {\n\n        var input=str;\n        var qMark = input.indexOf(\"?\");\n        while( qMark > -1 ) {\n          input = input.substr(qMark+2);\n          qMark = input.indexOf(\"?\");\n        }\n\n        if( this.debugFlag ) {\n          console.log(\"handleLineInput: start debug / input, name -------------\");\n          console.log( \"InputVarsPointer:\" , this.inputVarsPointer );\n          console.log( \"InputVars:\" , this.inputVars );\n\n          console.log( \"Input String:\" ,input );\n          console.log( \"Input Vars[current]:\" ,this.inputVars[ this.inputVarsPointer ] );\n        }\n\n\n        var vName = this.inputVars[ this.inputVarsPointer ];\n        if( vName.indexOf(\"$\") >-1 ) {\n            this.setVar( this.inputVars[ this.inputVarsPointer ], input.trim() );\n        }\n        else {\n          var num = parseFloat( input.trim() );\n\n          if( isNaN( num ) ) {\n            this.printLine(\"?redo from start\");\n            this.printChar( \"? \");\n            return;\n          }\n          this.setVar( this.inputVars[ this.inputVarsPointer ], num );\n        }\n\n        this.inputVarsPointer++;\n        if( this.inputVarsPointer >= this.inputVars.length ) {\n\n          this.exitInputState();\n        }\n        else {\n          this.printChar( \"?? \");\n        }\n\n        if( this.debugFlag ) {\n          console.log(\"handleLineInput: end debug -------------\");\n        }\n        return;\n    }\n\n    this.executeLineFlag = true;\n\n    if( this.debugFlag ) {\n      console.log( str );\n    }\n    var p = new Parser( this.commands, this.extendedcommands );\n    p.init();\n    try {\n      var l = p.parseLine( str );\n    }\n    catch( e ) {\n\n      this.parseLineNumber = -1;\n      if( this.erh.isError( e ) ) {\n        this.parseLineNumber = e.lineNr;\n        this.printError( e.clazz, true, undefined, e.detail );\n      }\n      else {\n        this.printError( \"syntax\", true );\n      }\n      this.printReady();\n    }\n    if( l == null ) {\n      if( this.debugFlag ) {\n        console.log(\"handleLineInput: end debug -------------\");\n      }\n\n      this.executeLineFlag = false;\n      return;\n    }\n\n    if( l.lineNumber != -1 ) {\n      if( l.commands.length > 0) {\n        this.insertPgmLine( l.lineNumber, l.commands, l.handlers, l.raw);\n      }\n      else {\n        this.removePgmLine( l.lineNumber  );\n      }\n    }\n    else {\n      this.runPointer = -1;\n      this.runPointer2 = 0;\n\n      try {\n        this.runCommands( l.commands );\n      }\n      catch( e ) {\n\n        this.parseLineNumber = -1;\n\n        if( this.erh.isSerializedError( e ) ) {\n          var err = this.erh.fromSerializedError( e );\n          this.parseLineNumber = err.lineNr;\n          this.printError( err.clazz, undefined, undefined, err.detail );\n        }\n        else if( this.erh.isError( e ) ) {\n          var err = e;\n          this.printError( err.clazz );\n          this.parseLineNumber = err.lineNr;\n        }\n        else {\n          this.printError(\"unexpected \" + e );\n        }\n\n        this.runFlag = false;\n      }\n\n      if( ! this.runFlag && ! this.listFlag && !this.waitForMessageFlag) {\n        this.printReady();\n      }\n\n    }\n\n    this.executeLineFlag = false;\n\n    if( this.debugFlag ) {\n      console.log(\"program:\",this.program);\n      console.log(\"Line: \", l );\n\n      console.log(\"handleLineInput: end debug -------------\");\n    }\n  }\n\n}\n\n//--EOC \n\n// ## extendedcommands.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/extendedcommands.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/extendedcommands.js\n\nclass ExtendedCommands {\n\n  constructor( basicCmds, runtime ) {\n    this.output = runtime.output;\n    this.bitmap = runtime.bitmap;\n    this.audio = runtime.audio;\n    this.html = runtime.html;\n    this.input = runtime.input;\n    this.runtime = runtime;\n    this.sys = runtime.sys;\n    this.cmds = {};\n    this.func = {};\n    this.statementList = null;\n    this.erh = new ErrorHandler();\n    this.basicCmds = basicCmds;\n\n  }\n\n  getStatements( raw ) {\n\n    //TODO, why is it called so often?\n    var stats = Object.getOwnPropertyNames( ExtendedCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_stat_\")) {\n        if( stats[i].startsWith(\"_stat_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(6 ).toUpperCase();\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n  getFunctions( raw ) {\n    var stats = Object.getOwnPropertyNames( ExtendedCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_fun_\")) {\n        if( stats[i].startsWith(\"_fun_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(5 ).toUpperCase().replace(\"_DLR_\",\"$\");\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n\n  getAllCategories() {\n    var categoryIndexes = this.basicCmds.getCategories();\n    var categoryIndexes2 = this.getCategories( categoryIndexes );\n\n    return new CommandHelp().getCategoriesNormalize( categoryIndexes2 );\n  }\n\n  getCategories( categoryIndexes ) {\n\n    return new CommandHelp().getCategoriesIntermediate( categoryIndexes, this );\n\n  }\n\n\n\n  /************************ commands ************************/\n\n\n  _stat_info_help() { return \"general:Show help on commands:[<Help Category Index>]\"; }\n\n  _stat_help( pars ) {\n\n  this.output.writeln(\"\");\n  var catRecord = this.getAllCategories();\n  var lst = catRecord[0];\n  var catLists = catRecord[1];\n  var hlpctx = 1000;\n\n  if( pars.length == 1 ) {\n    hlpctx = pars[0].value;\n  }\n\n  if( hlpctx == 1000 ) {\n    this.output.writeln(\"------------------------------\");\n    this.output.writeln(\" Help Categories:\");\n    this.output.writeln(\"------------------------------\");\n    for( var i=0; i<lst.length; i++) {\n      this.output.writeln( i + \" \" + lst[i].toUpperCase() );\n    }\n  }\n  else {\n\n    var lbl = lst[ hlpctx ];\n    lst = catLists[ lbl ];\n    if(lst === undefined ) {\n      this.erh.throwError( \"invalid help index\" );\n    }\n    this.output.writeln(\"------------------------------\");\n    this.output.writeln(\" Help on Category: \\\"\" + lbl.toUpperCase() + \"\\\"\");\n    this.output.writeln(\"------------------------------\");\n    for( var i=0; i<lst.length; i++) {\n      //this.context.printLine( ((hlpctx * 100) + i) + \" \" + lst[i] );\n      var attr = lst[i].attribs;\n      var padLen = 11-lst[i].name.length;\n      var pad = \"               \".substr(0,padLen );\n\n\n      if( attr.description ) {\n          this.output.writeln( \" \" + lst[i].name  + pad + \" ; \" + attr.description );\n      }\n      else {\n          this.output.writeln( \" \" + lst[i].name  );\n      }\n      if( attr.input ) {\n        var lines = attr.input.split(\"\\n\");\n\n        this.output.writeln( \"               input : \" + lines[0] );\n        for( var l=1; l<lines.length; l++) {\n            var line = lines[ l ];\n\n            this.output.writeln( \"                       \" + line );\n          }\n          this.output.writeln( \"\" );\n        }\n\n        if( attr.output ) {\n          var lines = attr.output.split(\"\\n\");\n\n          this.output.writeln( \"               output : \" + lines[0] );\n          for( var l=1; l<lines.length; l++) {\n              var line = lines[ l ];\n\n              this.output.writeln( \"                       \" + line );\n            }\n            this.output.writeln( \"\" );\n        }\n      }\n    }\n  this.output.writeln(\"\");\n\n  }\n\n  _if_cls() {\n    var EXPR = 0, PAR = 1, RAW=2;\n    return [RAW];\n  }\n\n  _stat_info_cls() { return \"general:Clears the screen:[<ResetScreenFlag>]\"; }\n\n  _stat_cls( pars ) {\n    var reset = false;\n\n    if( pars.length > 1 ) {\n      throw \"parameters\";\n    }\n    if( pars.length == 1 && pars[0].parts.length > 1 ) {\n      throw \"parameters\";\n    }\n    if( pars.length == 1 && pars[0].parts.length == 1 ) {\n      if( pars[0].parts[0].data.toUpperCase() == \"RESET\" ) {\n          reset = true;\n      }\n      else {\n        throw \"parameters\";\n      }\n    }\n\n    if( reset ) {\n      this.output.control( 12 );\n    }\n    else {\n      this.output.control( 24 );\n    }\n  }\n\n  _stat_info_reset() { return \"general:Resets the audio and the terminal:[ <Mode> (0=screen, 1=audio, 2=all) ]\"; }\n  _stat_reset( pars ) {\n\n    if( pars.length == 0 ) {\n      this.output.reset();\n      this.audio.reset();\n      this.runtime.resetTraceVar();\n      return;\n    }\n\n    var mode = pars[0].value;\n\n    if( mode != 0 && mode != 1 && mode != 2 ) {\n      this.erh.throwError( \"mode\", \"only 0, 1, 2 supported\" );\n      return\n    }\n\n    if( mode == 0) {\n      this.output.reset();\n    }\n    if( mode == 1) {\n      this.audio.reset();\n    }\n    else  {\n      this.output.reset();\n      this.audio.reset();\n    }\n\n  }\n\n\n  _stat_info_menu() { return \"general:Enable the programmers menu\"; }\n  _stat_menu( pars ) {\n\n    if( pars.length == 0 ) {\n      this.runtime.toggleMenu();\n      return;\n    }\n\n  }\n\n  _stat_info_reverse() { return \"print:Reverse the print output:<ReverseFlag>\"; }\n\n  _stat_reverse( pars ) {\n\n    if( pars.length == 0 ) {\n      this.output.control( 65 );\n      return;\n    }\n\n    var reverse = pars[0].value;\n    if( reverse <0 || reverse >1 ) {\n      return;\n    }\n\n    this.output.control( 64 + reverse );\n  }\n\n  _stat_info_beep() { return \"sound:Make a short sound:<Channel>,<Frequency>,<Length>\"; }\n  _stat_beep( pars ) {\n\n\n    if( pars.length == 0 ) {\n      this.audio.playBeep( 0, 440, 100 );\n\n      return\n    }\n\n    if( pars.length != 3) {\n      this.erh.throwError( \"parameter count\", \"expected channel, freq, time\" );\n      return\n    }\n\n    this.audio.playBeep( pars[0].value, pars[1].value, pars[2].value );\n\n  }\n\n\n\n  _stat_info_sound() { return \"sound:Make a pre defined sound:<Channel>,<Frequency>,<Length>\"; }\n  _stat_sound( pars ) {\n\n    if( pars.length == 0 ) {\n      this.audio.playSound( 0, 440, 100 );\n\n      return\n    }\n\n    if( pars.length != 3) {\n      this.erh.throwError( \"parameter count\", \"expected channel, freq, time\" );\n      return\n    }\n\n    this.audio.playSound( pars[0].value, pars[1].value, pars[2].value );\n\n  }\n\n\n  _stat_info_setadr() { return \"sound:Define Attach,Decay and Release:<Channel>, <AttackT>, <decayT>, <releaseT>\"; }\n  _stat_setadr( pars ) {\n\n\n    if( pars.length != 4) {\n      this.erh.throwError( \"parameter count\", \"expected channel, attackT, decayT, releaseT\" );\n      return\n    }\n\n    this.audio.attackDecayRelease(\n       pars[0].value,\n       pars[1].value,\n       pars[2].value,\n       pars[3].value\n      );\n\n  }\n\n  _stat_info_volume() { return \"sound:Change the audio volume:<Volume>\"; }\n  _stat_volume( pars ) {\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameter count\", \"expected volume\" );\n      return\n    }\n\n    this.audio.volume( pars[0].value );\n\n  }\n\n  _stat_info_chfreq() { return \"sound:Change the channel audio frequency:<Channel, Frequency>\"; }\n  _stat_chfreq( pars ) {\n\n    if( pars.length != 2) {\n      this.erh.throwError( \"parameter count\", \"expected channel, frequency\" );\n      return\n    }\n\n    this.audio.channelFrequency( pars[0].value, pars[1].value );\n\n  }\n\n  _stat_info_chvolume() { return \"sound:Change the channel audio volume:<Channel>, <Volume>\"; }\n  _stat_chvolume( pars ) {\n\n    if( pars.length != 2) {\n      this.erh.throwError( \"parameter count\", \"expected channel, volume\" );\n      return\n    }\n\n    this.audio.channelVolume( pars[0].value, pars[1].value );\n\n  }\n\n  _stat_info_chsvolume() { return \"sound:Change the channel sustain volume:<Channel>, <Volume>\"; }\n  _stat_chsvolume( pars ) {\n\n    if( pars.length != 2) {\n      this.erh.throwError( \"parameter count\", \"expected channel, volume\" );\n      return\n    }\n\n    this.audio.channelSustainVolume( pars[0].value, pars[1].value );\n\n  }\n\n  _stat_info_addfx() { return \"sound:Add a Sound FX part to the channel:<Channel>, <Type>, <Value>, <Time>\"; }\n  _stat_addfx( pars ) {\n\n    if( pars.length != 4) {\n      this.erh.throwError( \"parameter count\", \"expected channel, type, value and time(ms)\" );\n      return\n    }\n\n    this.audio.addEffect(\n        pars[0].value,\n        pars[1].value,\n        pars[2].value,\n        pars[3].value\n       );\n\n  }\n\n  _stat_info_clearfx() { return \"sound:Clear a sound effect:<Channel>\"; }\n  _stat_clearfx( pars ) {\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameter count\", \"expected channel\" );\n      return\n    }\n\n    this.audio.clearEffect( pars[0].value  );\n\n  }\n\n  _stat_info_playfx() { return \"sound:Change the channel sustain volume:<Channel> [,<Frequency> ]\"; }\n  _stat_playfx( pars ) {\n\n    if( pars.length < 1 || pars.length >2 ) {\n      this.erh.throwError( \"parameter count\", \"expected <Channel> [,<Frequency> ]\" );\n      return\n    }\n\n    var freq = 0;\n    if( pars.length >1 ) {\n      freq = pars[1].value;\n    }\n\n    this.audio.playEffect( pars[0].value, freq );\n\n  }\n\n\n  _stat_info_textarea() { return \"print:Limit text to certain area: <CollSize>,<RowSize>\\n [,<xOffset>,<yOffset>]\"; }\n  _stat_textarea( pars ) {\n\n    var result;\n\n    if( pars.length != 2 && pars.length != 4) {\n      this.erh.throwError( \"parameter count\", \"expected cols, rows [, xoffset, yoffset ]\" );\n      return\n    }\n\n    var cols = Math.round( pars[0].value );\n    var rows = Math.round( pars[1].value );\n\n    var wh = this.output.getDimensions();\n\n    var xo, yo;\n    xo = -1, yo = -1;\n    if( pars.length == 4) {\n      var xo = Math.round( pars[2].value );\n      var yo = Math.round( pars[3].value );\n    }\n\n    if( cols > 0 && rows > 0  && cols <= wh[0] && rows <= wh[1] ) {\n\n        var divx = wh[0] - cols;\n        var divy = wh[1] - rows;\n\n        if( xo > 0 && xo > divx ) {\n          this.erh.throwError( \"parameter\", \"xo to big\");\n        }\n        if( yo > 0 && yo > divy ) {\n          this.erh.throwError( \"parameter\", \"yo to big\");\n        }\n\n        this.output.textArea(  cols, rows, xo, yo );\n\n        return\n    }\n\n  }\n\n  _stat_info_gcolor() { return \"graphics:Set graphics pen color index:<Color Index>\"; }\n  _stat_gcolor( pars ) {\n\n    var result;\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameter count\", \"expected color\" );\n      return\n    }\n\n    if( pars.length == 1) {\n        var col = Math.round( pars[0].value );\n        if( col > 0 && col < 16) {\n            this.bitmap.setLineColor(  col );\n        }\n        return\n    }\n\n  }\n\n\n\n  _stat_info_origin() { return \"graphics:Specify origin of graphics console:<X0>,<Y0>,<Dx>,<Dy>\"; }\n  _stat_origin( pars ) {\n    if( pars.length != 4 ) {\n      this.erh.throwError( \"parameter count\", \"expected 4 (x0,y0,dx,dy), not \" + pars.length );\n      return;\n    }\n\n    if( !this.bitmap.isActive() ) {\n      this.erh.throwError( \"invalid display mode\", \"current mode cannot show graphics\" );\n      return;\n    }\n\n    if( pars[2].value != 1 && pars[2].value != -1 ) {\n      this.erh.throwError( \"parameter\", \"dx must be 1 or -1\" );\n      return;\n    }\n\n    if( pars[3].value != 1 && pars[3].value != -1 ) {\n      this.erh.throwError( \"parameter\", \"dy must be 1 or -1\" );\n      return;\n    }\n\n    this.bitmap.origin(\n      pars[0].value,\n      pars[1].value,\n      pars[2].value,\n      pars[3].value\n\n    );\n  }\n\n  _stat_info_line() { return \"graphics:Draw a line:<X0>,<Y0>,<X1>,<Y1>\"; }\n  _stat_line( pars ) {\n    if( pars.length != 4 ) {\n      this.erh.throwError( \"parameter count\", \"expected 2 (x0,y0,y1,y1), not \" + pars.length );\n      return;\n    }\n\n    if( !this.bitmap.isActive() ) {\n      this.erh.throwError( \"invalid display mode\", \"current mode cannot show graphics\" );\n      return;\n    }\n\n    this.bitmap.line(\n      pars[0].value,\n      pars[1].value,\n      pars[2].value,\n      pars[3].value\n\n    );\n  }\n\n  _stat_info_plot() { return \"graphics:Plot a pixel:<X0>,<Y0>,<X1>,<Y1>\"; }\n  _stat_plot( pars ) {\n    if( pars.length != 2 ) {\n      this.erh.throwError( \"parameter count\", \"expected 2 (x,y), not \" + pars.length );\n      return;\n    }\n\n    if( !this.bitmap.isActive() ) {\n      this.erh.throwError( \"invalid display mode\", \"current mode cannot show graphics\" );\n      return;\n    }\n\n    this.bitmap.plot( pars[0].value, pars[1].value );\n  }\n\n  _stat_info_center() { return \"print:Print horizontal center:<StringToPrint>\"; }\n  _stat_center( pars ) {\n\n    var string;\n\n    if( pars.length > 1 ) {\n      this.erh.throwError( \"too many parameters\", \"expected max 2, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 0 ) {\n      return;\n    }\n\n    string = pars[0].value;\n\n    this.output.center( string );\n  }\n\n\n  _stat_info_gtext() { return \"experimental:Write text at position x,y:<X>,<Y>,<Text>\"; }\n  _stat_gtext( pars ) {\n\n    var string;\n\n    if( pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"expected x,y and text parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.gtext( pars[0].value, pars[1].value, pars[2].value );\n  }\n\n\n  _stat_info_immediate() { return \"poke:Set flag to flush the render pipeline after each poke:<RenderImmediateFlag>\"; }\n  _stat_immediate( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 1) {\n      this.erh.throwError( \"parameters\", \"expected 1 parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.setPokeFlush( pars[0].value != 0 );\n  }\n\n\n  _stat_info_pokeccl() { return \"poke:Put a character directly into the screen buffer:<Y>,<X>,<Code>,<FGColor>,<BGColor>\"; }\n  _stat_pokeccl( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length < 3 ) {\n      this.erh.throwError( \"parameters\", \"expected at least 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    var fg = undefined;\n    var bg = undefined;\n\n    if( pars.length >= 4 ) { fg = pars[3].value; }\n    if( pars.length >= 5 ) { bg = pars[4].value; }\n    this.output.pokeccl( pars[0].value, pars[1].value, pars[2].value, fg, bg );\n  }\n\n  _stat_info_pokec() { return \"poke:Put a character directly into the screen buffer:<Y>,<X>,<Code>\"; }\n  _stat_pokec( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"expected 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.pokec( pars[0].value, pars[1].value, pars[2].value );\n  }\n\n  _stat_info_pokecl() { return \"poke:Put color directly into the screen buffer:<X>,<Y>,<FGColor>[,<BGColor>]\"; }\n  _stat_pokecl( pars ) {\n\n    var row = -1, col = -1;\n    var bg = undefined;\n\n    if( pars.length != 3 &&  pars.length != 4 ) {\n      this.erh.throwError( \"parameters\", \"expected 3 or 4 parameters, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 4 ) {\n      bg = pars[3].value;\n    }\n\n    this.output.pokecl( pars[0].value, pars[1].value, pars[2].value, bg );\n  }\n\n  _stat_info_pokebcl() { return \"poke:Put background color directly into the screen buffer:<Y>,<X>,<BGColor>\"; }\n  _stat_pokebcl( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"expected 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    this.output.pokecl( pars[0].value, pars[1].value, undefined, pars[2].value );\n  }\n\n  _stat_info_locate() { return \"print:Set the cursor position:<Y>,<X>\"; }\n  _stat_locate( pars ) {\n\n    var row = undefined, col = undefined;\n\n    if( pars.length > 2 ) {\n      this.erh.throwError( \"too many parameters\", \"expected max 2, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 0 ) {\n      return;\n    }\n\n    if( pars.length >= 1 ) {\n      row = pars[0].value;\n    }\n\n    if( pars.length >= 2 ) {\n      col = pars[1].value;\n    }\n\n    this.output.setCursorPos( col, row );\n  }\n\n  _stat_info_hide() { return \"general:Hide the terminal\"; }\n  _stat_hide( pars ) {\n    this.output.control( 25 );\n  }\n\n\n  _if_html() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  _stat_info_html() { return \"html:Unsupported command\"; }\n  _stat_html( pars ) {\n    var html = this.html;\n\n    if( pars.length == 0 ) {\n      return;\n    }\n\n    var newLine = true;\n    var value;\n    var contentIx = 0;\n    var handleIx = -1;\n    var htmlHandle = null;\n    var htmlValue = \"\";\n    var htmlAppend = false;\n\n    if( pars.length == 2) {\n      contentIx = 1;\n      handleIx = 0;\n    }\n\n    for( var i=0; i<pars.length && i<2; i++) {\n\n      var exparts = pars[i];\n      var exparts2=\n        { parts: [],\n          binaryNegate: exparts.binaryNegate,\n          negate: exparts.negate  };\n\n      for( var j=0; j<exparts.parts.length; j++) {\n        if( exparts.parts[j].type == \"uniop\" &&\n            exparts.parts[j].op == \"+\" && j==(exparts.parts.length-1)\n            && (i == pars.length-1)) {\n              htmlAppend = true;\n        }\n        else {\n          exparts2.parts.push( exparts.parts[j] );\n        }\n      }\n      value = this.runtime.evalExpression( exparts2 );\n\n      if( i == handleIx ) {\n        htmlHandle =  value;\n      }\n      else {\n        htmlValue = value;\n      }\n    }\n\n    this.html.html(\n        {\n          htmlHandle: htmlHandle,\n          htmlValue: htmlValue,\n          htmlAppend: htmlAppend\n        }\n      );\n  }\n\n  _stat_info_htmlnode() { return \"html:Unsupported command\"; }\n  _stat_htmlnode( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    var node = pars[0];\n\n    this.html.htmlnode( node );\n\n  }\n\n\n  _stat_info_htmlbg() { return \"html:Unsupported command\"; }\n  _stat_htmlbg( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    var url = pars[0].value;\n\n    this.html.executeFunction( \"body.style.backgroundImage\", url );\n\n  }\n\n  _stat_info_color() { return \"print:Sets the console color index:<PenColor>[, <PaperColor>\\n[, <BorderColor>]]\"; }\n  _stat_color( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    if( pars.length == 1) {\n        var col = pars[0].value;\n        this.output.control( 16, col );\n        return\n    }\n\n    var bgcol = pars[1].value;\n    var col = pars[0].value;\n    this.output.control( 16, col   );\n    this.output.control( 17, bgcol );\n\n    if( pars.length == 3) {\n        var border = pars[2].value;\n        this.output.control( 18, border );\n        return\n    }\n\n  }\n\n  _stat_info_display() { return \"general:Set the console display mode:<DisplayModeNumber>\"; }\n  _stat_display( pars ) {\n\n    var result;\n    var modes = this.sys.screenModes;\n\n    if( pars.length == 0) {\n\n        var list = [ ];\n\n\n        for( var i=0 ; i<modes.length ; i++) {\n          if( modes[ i] ) {\n            list.push( i + \":   \" + modes[i]);\n          }\n        }\n        //list.push( \"Current Mode: \" + this.sys.displayMode );\n\n        this.runtime.enterListMode( list );\n        return\n    }\n\n    if( pars.length > 1) {\n        this.erh.throwError( \"too many variables\", \"expected one parameter only\" );\n    }\n\n    var mode = pars[0].value;\n    if( modes[mode] === undefined ) {\n      this.erh.throwError( \"Invalid mode\", \"No such display mode\" );\n    }\n    this.sys.setDisplayMode( this.runtime, mode );\n    this.sys.blinkMode( !this.runtime.isRunning() );\n    this.runtime.flagStatusChange();\n    this.runtime.startWaitForMessage( \"displaysize\" )\n\n\n  }\n\n\n  _stat_info_gfilter() { return \"experimental:Add a html filter to the display:<FilterString>\"; }\n  _stat_gfilter( pars ) {\n\n    var result;\n\n    if( pars.length != 1) {\n        this.erh.throwError( \"too many variables\", \"expected one parameter only\" );\n    }\n\n    var filter = pars[0].value;\n   \n    this.output.setFilter( filter );\n\n  }\n\n  _stat_info_border() { return \"general:Changes the border color:<ColorIndex>\"; }\n  _stat_border( pars ) {\n\n    var result;\n\n    if( pars.length == 0) {\n        return\n    }\n\n    if( pars.length > 1) {\n        this.erh.throwError( \"too many parameters\", \"expected one parameter only\" );\n    }\n\n    var bcol = pars[0].value;\n    this.output.control( 18, bcol );\n\n  }\n\n  _stat_info_export() { return \"program:Export program for download\"; }\n  _stat_export( pars ) {\n    if( pars.length > 0) {\n        this.erh.throwError( \"too many parameters\", \"export needs no parameters\" );\n    }\n\n    var code = this.runtime.getProgramAsText();\n    this.sys.export( code, \"disk\" );\n  }\n\n  _stat_info_copy() { return \"program:Copy program to clipboard\"; }\n  _stat_copy( pars ) {\n    if( pars.length > 0) {\n        this.erh.throwError( \"too many parameters\", \"copy needs no parameters\" );\n    }\n\n    var code = this.runtime.getProgramAsText();\n    this.sys.export( code, \"clipboard\" );\n    this.runtime.printLine(\"Copied \" + this.runtime.getProgramSize() + \" program lines to the clipboard\" );\n  }\n\n\n  _stat_info_txtcopy() { return \"experimental:Copy data to clipboard:<StringData$>\"; }\n  _stat_txtcopy( pars ) {\n    if( pars.length != 1) {\n        this.erh.throwError( \"parameter count\", \"dcopy needs 1 parameter\" );\n    }\n\n    this.sys.export( pars[0].value + \"\", \"clipboard\" );\n\n  }\n\n\n\n  _fun_info_peekcl() { return \"poke:Get color information directly from from screen buffer:<Y>,<X>[,<Mode]\"; }\n  _fun_peekcl( pars ) {\n\n    var row = -1, col = -1;\n    var mode = 0;\n\n    if( pars.length != 3  && pars.length != 2 ) {\n      this.erh.throwError( \"parameters\", \"expected 2 or 3 parameters, not \" + pars.length );\n      return;\n    }\n\n    if( pars.length == 3 ) {\n      mode = pars[2].value;\n    }\n    return this.output.peekcl( pars[0].value, pars[1].value, mode );\n  }\n\n\n  _fun_info_peekc() { return \"poke:Get a character directly into from screen buffer:<Y>,<X>\"; }\n  _fun_peekc( pars ) {\n\n    var row = -1, col = -1;\n\n    if( pars.length != 2 ) {\n      this.erh.throwError( \"parameters\", \"expected 2 parameters, not \" + pars.length );\n      return;\n    }\n\n    return this.output.peekc( pars[0].value, pars[1].value );\n  }\n\n\n  _fun_info_ucbase() { return \"string:Return unicode-set base character code:<SetName$>\"; }\n  _fun_ucbase( pars ) {\n\n    if( pars.length != 1 ) {\n      this.erh.throwError( \"parameters\", \"UCBASE() needs one parameter\" );\n    }\n\n    var baseLabel = pars[0].value;\n\n    if( baseLabel.toLowerCase() == \"box\" ) {\n      return parseInt( \"2500\", 16 );\n    }\n    else if( baseLabel.toLowerCase() == \"blocks\" ) {\n      return parseInt( \"2580\", 16 );\n    }\n    else if( baseLabel.toLowerCase() == \"symbol\" ) {\n      return parseInt( \"2b00\", 16 ); //can be too wide\n    }\n    else if( baseLabel.toLowerCase() == \"legacy\" ) {\n      return parseInt( \"1fb00\", 16 );\n    }\n    return 0;\n  }\n\n  _fun_info_uc_DLR_() { return \"string:Create unicode character:<UnicodeHexCode$>\"; }\n  _fun_uc_DLR_( pars ) {\n\n    if( pars[0].value ) {\n      if( typeof pars[0].value == \"string\" ) {\n          return String.fromCodePoint( parseInt( pars[0].value, 16 ) );\n      }\n      return String.fromCodePoint( pars[0].value);\n    }\n    return \"?\";\n  }\n\n  _fun_info_dc_DLR_() { return \"print:Return device control char. sequence:<Parameter1>, <Parameter2>\"; }\n  _fun_dc_DLR_( pars ) {\n\n    var val = \"\";\n\n    val = String.fromCodePoint( 17 ) + String.fromCodePoint( pars[0].value) + String.fromCodePoint( pars[1].value);\n\n    return val;\n  }\n\n  _fun_info_html_DLR_() { return \"html:Unsupported function\"; }\n  _fun_html_DLR_( pars ) {\n    return\n      this.html.get();\n  }\n\n\n  _fun_info_width() { return \"general:Return the console width in pixels\"; }\n  _fun_width( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"width() has no parameters\" );\n    }\n\n    var wh = this.bitmap.getDimensions();\n    return wh[0];\n  }\n\n  _fun_info_height() { return \"general:Return the console height in pixels\"; }\n  _fun_height( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"width() has no parameters\" );\n    }\n\n    var wh = this.bitmap.getDimensions();\n    return wh[1];\n  }\n\n  _fun_info_cols()  { return \"print:Return the console width in columns\"; }\n  _fun_cols( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"cols() has no parameters\" );\n    }\n\n    var wh = this.output.getDimensions();\n    return wh[0];\n  }\n\n  _fun_info_columns() { return \"print:Return the console width in columns\"; }\n  _fun_columns( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"columns() has no parameters\" );\n    }\n\n    var wh = this.output.getDimensions();\n    return wh[0];\n  }\n\n  _fun_info_rows() { return \"print:Return the console height in rows\"; }\n  _fun_rows( pars ) {\n\n    if( pars.length != 0 ) {\n        this.erh.throwError( \"too many parameters\", \"rows() has no parameters\" );\n    }\n\n    var wh = this.output.getDimensions();\n    return wh[1];\n  }\n\n}\n\n//--EOC \n\n// ## pgmmanager.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/pgmmanager.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/pgmmanager.js\n\nclass BasicProgramManager {\n\n  constructor() {\n    this.rt = [];\n  }\n\n  addRuntime = function( ctx ) {\n\n    this.rt.push( ctx );\n\n  }\n\n}\n\nvar pgmman = new BasicProgramManager();\n\n//--EOC \n\n// ## basiccommands.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basiccommands.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basiccommands.js\n\nclass BasicCommands {\n\n  constructor( runtime ) {\n    this.output = runtime.output;\n    this.bitmap = runtime.bitmap;\n    this.input = runtime.input;\n    this.runtime = runtime;\n    this.sys = runtime.sys;\n    this.cmds = {};\n    this.func = {};\n    this.statementList = null;\n    this.erh = new ErrorHandler();\n\n    this.keyLabelCodes = {};\n\n    this.randnrs = [];\n    for(var i=0; i<10000;i++) {\n      this.randnrs.push( Math.random() );\n    }\n    this.randIndex = 0;\n    this.randStep = 1;\n\n  }\n\n  getStatements( raw ) {\n\n    //TODO, why is it called so often?\n    var stats = Object.getOwnPropertyNames( BasicCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_stat_\")) {\n        if( stats[i].startsWith(\"_stat_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(6 ).toUpperCase();\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n  getFunctions( raw ) {\n    var stats = Object.getOwnPropertyNames( BasicCommands.prototype );\n\n    var stats2 = [];\n\n    for( var i=0;i<stats.length;i++) {\n      if( stats[i].startsWith(\"_fun_\")) {\n        if( stats[i].startsWith(\"_fun_info_\")) { continue; }\n\n        var name = stats[i];\n\n        if( ! raw ) {\n            name = name.substr(5 ).toUpperCase().replace(\"_DLR_\",\"$\");\n        }\n\n        stats2.push( name );\n      }\n    }\n\n    return stats2;\n  }\n\n  getCategories() {\n\n    return new CommandHelp().getCategoriesIntermediate( [{},{}], this );\n\n  }\n\n\n  /************************ commands ************************/\n\n  _stat_info_new() { return \"program:Delete the current program from memory:\"; }\n  _stat_new( pars ) {\n\n    this.runtime.new();\n  }\n\n  _stat_info_list() { return \"program:List the basic program\"; }\n  _stat_list( pars ) {\n\n    var start = 0;\n    var end   = 999999;\n    var parts = [];\n\n    var mode = \"noparam\";\n\n    if( pars.length==1 ) {\n      parts = pars[0].parts;\n    }\n\n    if( parts.length == 1 && parts[0].type == \"num\" && parts[0].data >=0 ) {\n      start = parts[0].data;\n      end = parts[0].data;\n    }\n    else if( parts.length == 1 && parts[0].type == \"num\" && parts[0].data <0 ) {\n      /*NOTE, this will stop working if RAW changes to return uniop + posnum */\n      end = -parts[0].data;\n    }\n    else if( parts.length == 2\n        && parts[0].type == \"num\"\n        && parts[1].type == \"num\"\n        && parts[1].op == \"-\"\n          ) {\n      start = parts[0].data;\n      end = parts[1].data;\n\n    }\n    else if( parts.length == 2\n        && parts[0].type == \"num\"\n        && parts[1].type == \"uniop\"\n        && parts[1].op == \"-\"\n          ) {\n      start = parts[0].data;\n    }\n\n    var runtime = this.runtime;\n    var list = [];\n    for (const l of runtime.program)\n      {\n\n        var lineNr = parseInt(l[0]);\n        if(  l[0] == null || (lineNr>= start && lineNr<= end) ) {\n          if( l[1][0].type == \"control\" && l[1][0].controlKW == \"sub\" ) {\n              list.push( \"\" );\n          }\n          list.push( l[2] );\n        }\n      }\n\n      this.runtime.enterListMode( list );\n  }\n\n\n  _if_get() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [PAR];\n  }\n\n  _if_getkey() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [PAR];\n  }\n\n  _if_read() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [PAR];\n  }\n\n  _if_input() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW, RAW, RAW, RAW, RAW, RAW, RAW, RAW, RAW, RAW];\n  }\n\n  _if_list() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  _if_run() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  _stat_info_read() { return \"io:Read a value from the data::<Data$ or Data>\"; }\n  _stat_read( pars ) {\n    var p0 = pars[ 0 ];\n    if( p0.type != \"var\" ) {\n      this.erh.throwError( \"not a var\", \"parameter 0\" );\n    }\n\n    var data = this.runtime.readData();\n    if( data === undefined ) { this.erh.throwError( \"out of data\" ); }\n\n    if( p0.varType == \"num\" && (typeof data).toLowerCase() == \"number\" ) {\n          this.runtime.setVar(\n            p0.value,  data  );\n    }\n    else if( p0.varType == \"str\" && (typeof data).toLowerCase() == \"string\" ) {\n          this.runtime.setVar(\n            p0.value,  data  );\n    }\n    else if( p0.varType == \"num\" && (typeof data).toLowerCase() == \"string\" ) {\n\n          data = parseInt ( data );\n\n          if( isNaN( data ) ) {\n            this.erh.throwError( \"expected number\" );\n          }\n          this.runtime.setVar(\n            p0.value, data );\n    }\n    else if( p0.varType == \"str\" && (typeof data).toLowerCase() == \"number\" ) {\n          this.runtime.setVar(\n            p0.value,  \"\" + data  );\n    }\n\n  }\n\n  _stat_info_get() { return \"io:Retrieve the last key pressed::<Key$>\"; }\n  _stat_get( pars ) {\n    var p0 = pars[ 0 ];\n\n    if( p0.type != \"var\" ) {\n      this.erh.throwError( \"not a var\", \"parameter 0\" );\n    }\n\n    var k = this.input.getKey();\n    if( k == null ) { this.runtime.setVar(p0.value, \"\"); }\n    else {\n      if( k.key != null ) {\n        this.runtime.setVar(p0.value, k.key );\n      }\n      else {\n        this.runtime.setVar(p0.value, \"???\" );\n      }\n    }\n\n    this.runtime.flagInputCommand();\n  }\n\n  _stat_info_getkey() { return \"io:Retrieve the last key pressed::<Key$>\"; }\n  _stat_getkey( pars ) {\n    var p0 = pars[ 0 ];\n\n    if( p0.type != \"var\" ) {\n      this.erh.throwError( \"not a var\", \"parameter 0\" );\n    }\n\n    var k = this.input.getKey();\n    if( k == null ) { this.runtime.setVar(p0.value, \"\" ); }\n    else {\n      if( k.key != null ) {\n        this.runtime.setVar(p0.value, k.key );\n      }\n      else {\n        this.runtime.setVar(p0.value, k.keyLabel );\n      }\n    }\n\n    this.runtime.flagInputCommand();\n  }\n\n  _stat_info_input() { return \"io:Waits for the user to type in a value::<Value>\"; }\n  _stat_input( pars ) {\n\n    var vars = [];\n    var con = this.output;\n\n    for( var i=0; i<pars.length; i++) {\n      if( i == 0 ) {\n        var par = pars[0];\n\n        if( par.parts.length == 2 ) {\n          if( par.parts[0].type == \"str\" ) {\n            con.write( par.parts[0].data );\n            if( par.parts[1].type == \"var\" && par.parts[1].op == \";\" ) {\n              vars.push( par.parts[1].data );\n            }\n          }\n        }\n        else if( par.parts.length == 1 ) {\n          vars.push( par.parts[0].data );\n        }\n\n      }\n      else {\n        sys.log( \"PARS[\"+i+\"]\", pars[i] );\n        if( pars[i].parts[0].type != \"var\" ) {\n\n          this.erh.throwError( \"not a var\", \"parameter \" + i);\n        }\n        vars.push( pars[i].parts[0].data );\n      }\n    }\n\n    this.runtime.startConsoleDataInput( vars );\n\n  }\n\n  _stat_info_restore() { return \"io:Set the READ-pointer, to the beginning:\"; }\n  _stat_restore( pars ) {\n    this.runtime.restoreDataPtr();\n  }\n\n  _stat_info_waitms() { return \"program:Wait a certain time:<MilliSeconds>\"; }\n  _stat_waitms( pars ) {\n    this.runtime.setWaiting( pars[0].value );\n  }\n\n  _stat_info_load() { return \"program:Load a program in memory:<FileName>\"; }\n  _stat_load( pars ) {\n    var runtime = this.runtime;\n    var result;\n\n    runtime.printLine(\"\");\n\n    if( pars.length == 0) {\n      runtime.printLine(\"searching\");\n    }\n    else {\n      runtime.printLine(\"searching for \\\"\" + pars[0].value + \"\\\"\" );\n    }\n\n    if( pars.length == 0) {\n        result = runtime.load( \"*\", false, -1 );\n    }\n    else {\n      if( pars.length == 1) {\n        result = runtime.load( pars[0].value, false, -1 );\n      }\n      else if( pars.length == 2) {\n        result = runtime.load( pars[0].value, false, pars[1].value );\n      }\n    }\n    this.aSync = true;\n\n  }\n\n  _stat_info_setdata() { return \"experimental:Set data pointer:[<Label>]\"; }\n  _stat_setdata( pars ) {\n\n    var runtime = this.runtime;\n    var label = null;\n\n    if( pars.length > 1  ) {\n      this.erh.throwError( \"parameters\", \"Setdata takes one optional parameter\" );\n    }\n\n    if( pars.length == 1 ) {\n      label = pars[0].value ;\n    }\n\n    var list = runtime.setData( label );\n\n  }\n\n  _stat_info_datablocks() { return \"experimental:Dump data blocks in memory\"; }\n  _stat_datablocks( pars ) {\n\n    var runtime = this.runtime;\n    var result;\n\n    if( pars.length != 0 ) {\n      this.erh.throwError( \"parameters\", \"Listdata takes no parameterss\" );\n    }\n\n    var list = runtime.getDataBlocks();\n    runtime.enterListMode( list );\n\n  }\n\n  _stat_info_loaddata() { return \"experimental:Load data in memory:<Filename> [, <Type>, <Label>]\"; }\n  _stat_loaddata( pars ) {\n\n    var runtime = this.runtime;\n    var result;\n    var label = null;\n    var type = \"I:CSV\";\n    runtime.printLine(\"\");\n\n    if( pars.length != 1 && pars.length != 2 && pars.length != 3 ) {\n      this.erh.throwError( \"parameters\", \"loaddata takes one mandatory and two optional parameters\" );\n    }\n\n    if( pars.length >= 2 ) {\n      type = pars[1].value ;\n    }\n\n    if( type.indexOf(\":\") < 0) {\n      this.erh.throwError( \"invalid type specification\", \"Expected <Type>:<FileSyntax>. Example: \\\"I:CSV\\\"\" );\n    }\n\n    if( pars.length == 3 ) {\n      label = pars[2].value ;\n    }\n\n    result = runtime.loaddata( pars[0].value, type, label );\n\n    this.aSync = true;\n\n  }\n\n\n  _stat_info_dir() { return \"program:List a files on the current file system:[<Path> [,<Device>]]\"; }\n  _stat_dir( pars ) {\n    var runtime = this.runtime;\n    var result;\n\n    runtime.printLine(\"\");\n\n    if( pars.length == 0) {\n      runtime.dir( \"\" );\n      return;\n    }\n\n    if( pars.length == 1) {\n      runtime.dir( pars[0].value, -1 );\n      return;\n    }\n    else if( pars.length == 2) {\n      runtime.dir( pars[0].value, pars[1].value );\n      return;\n    }\n\n    this.erh.throwError( \"parameter\", \"dir takes 0,1 or 2 parameter(s)\"  );\n\n    this.aSync = true;\n\n  }\n\n  _stat_info_fs() { return \"program:Set or List (the) filesystem(s):[<FileSystem$>]\"; }\n  _stat_fs( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n      runtime.listfs();\n    }\n    else if( pars.length == 1) {\n      runtime.setfs( pars[0].value );\n    }\n\n\n    this.aSync = true;\n\n  }\n\n\n  _stat_info_renumber() { return \"program:Renumber the current program\"; }\n  _stat_renumber( pars ) {\n\n    var runtime = this.runtime;\n    runtime.renumberProgram( 10,10 );\n\n  }\n\n  _stat_info_vars() { return \"program:List all variables to the screen\"; }\n  _stat_vars( pars ) {\n\n\n    var runtime = this.runtime;\n\n    var varList = runtime.getFullVarList();\n    this.runtime.enterListMode( varList );\n\n  }\n\n\n  _stat_info_tracevar() { return \"program:Trace variable changes:[<VariableName$>]\"; }\n  _stat_tracevar( pars ) {\n\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n      var traceList = runtime.getTraceList();\n      this.runtime.enterListMode( traceList );\n\n      return;\n    }\n\n    if( pars.length == 1) {\n      runtime.setTraceVar( pars[0].value );\n      return;\n    }\n\n  }\n\n  _stat_info_clrtracevar() { return \"program:Stop tracing variables\"; }\n  _stat_clrtracevar( pars ) {\n\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n      var traceList = runtime.resetTraceVar();\n    }\n  }\n\n\n  _stat_info_boot() { return \"program:Load and run a program:<FileName>\"; }\n  _stat_boot( pars ) {\n    var runtime = this.runtime;\n    var result;\n\n    runtime.printLine(\"\");\n\n    if( pars.length == 0) {\n      runtime.printLine(\"searching\");\n    }\n    else {\n      runtime.printLine(\"searching for \" + pars[0].value);\n    }\n\n    if( pars.length == 0) {\n        result = runtime.load( \"*\", true, -1 );\n    }\n    else {\n      result = runtime.load( pars[0].value, true, -1 );\n    }\n    this.aSync = true;\n\n  }\n\n  _stat_info_save() { return \"program:Save the current program:<FileName>\"; }\n  _stat_save( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length == 0) {\n        runtime.save( null );\n    }\n    else if ( pars.length == 1 ){\n      runtime.save( pars[0].value, -1 );\n    }\n    else if( pars.length == 2) {\n      runtime.save( pars[0].value, pars[1].value );\n    }\n  }\n\n  _stat_info_delete() { return \"program:Delete a file:<FileName>\"; }\n  _stat_delete( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length != 1 && pars.length != 2) {\n        this.erh.throwError( \"parameter\", \"delete without filename\" );\n    }\n    else if ( pars.length == 1 ){\n      runtime.deleteFile( pars[0].value, -1 );\n    }\n    else if( pars.length == 2) {\n      runtime.deleteFile( pars[0].value, pars[1].value );\n    }\n  }\n\n\n\n\n  _stat_info_run() { return \"program:Run the current program\"; }\n  _stat_run( pars ) {\n    var runtime = this.runtime;\n\n    runtime.runPGM();\n  }\n\n\n  _if_print() {\n      var EXPR = 0, PAR = 1, RAW=2;\n      return [RAW];\n  }\n\n  isNumber(value) {\n    return typeof value === 'number' && isFinite(value);\n  }\n\n  normalizeIfNumber( x )  {\n    if( this.isNumber( x ) ) {\n      if ( x >= 0 ) {\n        return \" \" + x;\n      }\n    }\n    return \"\" + x;\n  }\n\n  _stat_info_print() { return \"print:Print text or values to the console:<Value>[<Value>;][;]\"; }\n  _stat_print( pars ) {\n\n    var runtime = this.runtime;\n    var con= this.output;\n\n    if( pars.length == 0 ) {\n      con.nl();\n      return;\n    }\n    else if( pars.length == 1 ) {\n      if( pars[0].parts.length == 0 ) {\n        con.nl();\n        return;\n      }\n    }\n\n    var newLine = true;\n    var value;\n    for( var i=0; i<pars.length; i++) {\n\n      newLine = true;\n      if( i<(pars.length-1)) {\n        newLine = false;\n      }\n\n      if( i>0) {\n        con.write( \"         \" );\n      }\n\n      var exparts = pars[i];\n      var exparts2=\n        { parts: [],\n          binaryNegate: exparts.binaryNegate,\n          negate: exparts.negate  };\n\n      for( var j=0; j<exparts.parts.length; j++) {\n        if( exparts.parts[j].type == \"uniop\" &&\n            exparts.parts[j].op == \";\" && j==(exparts.parts.length-1)\n            && (i == pars.length-1)) {\n              //console.log( \"i=\"+i+\" newline: set to false\");\n          newLine = false;\n        }\n        else {\n          exparts2.parts.push( exparts.parts[j] );\n        }\n      }\n\n      value = runtime.evalExpression( exparts2 );\n\n      if( i == 0) {\n        con.write( this.normalizeIfNumber( value ) );\n      }\n      else {\n        con.write( \"\" + value );\n      }\n      if( newLine ) { con.nl(); runtime.setWaiting( 1 ); }\n\n    }\n\n  }\n\n  _stat_info_clr() { return \"program:Clear all variables\"; }\n  _stat_clr( pars ) {\n    return this.runtime.clrPGM();\n  }\n\n  /************************ functions ************************/\n\n  _fun_info_datalen() { return \"experimental:Return length of current datablock\"; }\n  _fun_datalen( pars ) {\n    var runtime = this.runtime;\n    return runtime.getDataLength();\n  }\n\n  _fun_info_chr_DLR_() { return \"string:Return ascii character:<Ascii Code>\"; }\n  _fun_chr_DLR_( pars ) {\n    return String.fromCharCode( pars[0].value );\n  }\n\n  _fun_info_str_DLR_() { return \"string:Converts number to string: <Number>[,<Base>[,<Trim>]]\"; }\n  _fun_str_DLR_( pars ) {\n\n    if( pars.length <1 || pars.length >3  ) {\n      this.erh.throwError( \"parameter\", \"str$() takes 1,2 or 3 parameters\"  );\n    }\n\n    var number = pars[0].value;\n    var base = 10;\n    var trim = false;\n\n    if( pars.length>=2  ) {\n      base = pars[1].value;\n    }\n\n    if( pars.length==3  ) {\n      trim = ( pars[1].value > 0);\n    }\n\n    var numberStr = number.toString(base);\n\n    if( number >=0 && !trim) {\n      return \" \" +  numberStr;\n    }\n\n    return numberStr;\n  }\n\n  _fun_info_abs() { return \"math:Absolute value\"; }\n  _fun_abs( pars ) {\n    if( pars[0].value < 0 ) {\n      return -pars[0].value;\n    }\n    return pars[0].value;\n  }\n\n  _fun_info_len() { return \"string:Length of a string\"; }\n  _fun_len( pars ) {\n    return pars[0].value.length;\n  }\n\n  _fun_info_asc() { return \"string:ASCII value of a character\"; }\n  _fun_asc( pars ) {\n    if( (typeof pars[0].value).toUpperCase() == \"STRING\" ) {\n\n      if ( pars[0].value.length > 0) {\n          return pars[0].value.charCodeAt(0);\n      }\n    }\n    return 0;\n  }\n\n  _fun_info_val() { return \"string:Retrieve number from string\"; }\n  _fun_val( pars ) {\n    var base = 10;\n\n    if( pars.length==2  ) {\n      base = pars[1].value;\n    }\n\n    if(base < 2 || base > 16) {\n      this.erh.throwError( \"base\", \"base should be inbetween 2 and 16\" );\n    }\n\n    var val = parseInt( pars[0].value, base );\n\n    if( isNaN( val ) ) {\n      this.erh.throwError( \"invalid number syntax\", \"Could not parse \" + pars[0].value+ \" with base\" + base  );\n    }\n\n    return val;\n  }\n\n  _fun_info_hex2dec() { return \"string:Retrieve number from hexadecimal string\"; }\n  _fun_hex2dec( pars ) {\n    var base = 16;\n\n    if( pars.length != 1  ) {\n      this.erh.throwError( \"parameter\", \"HEX2DEC() needs one parameter\" );\n    }\n\n    var val = parseInt( pars[0].value, base );\n\n    if( isNaN( val ) ) {\n      this.erh.throwError( \"invalid number syntax\", \"Could not parse \" + pars[0].value+ \" with base\" + base  );\n    }\n\n    return val;\n  }\n\n\n  _fun_info_hex_DLR_() { return \"string:Format a number as a hexadecimal string\"; }\n  _fun_hex_DLR_( pars ) {\n    var base = 16;\n\n    if( pars.length != 1  ) {\n      this.erh.throwError( \"parameter\", \"HEX$() needs one parameter\" );\n    }\n\n    var hexString = (pars[0].value * 1).toString(16);\n\n    return hexString;\n }\n\n\n\n\n  _fun_info_exp() { return \"math:Exponent\"; }\n  _fun_exp( pars ) {\n    return Math.exp( pars[0].value );\n  }\n\n  intGetNextRand() {\n    this.randIndex = (this.randIndex + this.randStep) % this.randnrs.length;\n    return this.randnrs[ this.randIndex ];\n  }\n\n  intSeedRand( x0 ) {\n\n    if( x0 < 0) {\n      var x = -x0;\n      var base = Math.floor( x * 11 );\n      this.randIndex= base % this.randnrs.length;\n      this.randStep = 1+(base % 7);\n\n      /* Also reseed random buffer */\n      this.randnrs = [];\n      for(var i=0; i<10000;i++) {\n        this.randnrs.push( Math.random() );\n      }\n    }\n    else {\n\n      const minute = 1000 * 60;\n      const hour = minute * 60;\n      const day = hour * 24;\n      const year = day * 365;\n\n      const d = new Date();\n      let seedModifier = Math.round(d.getTime() / year);\n\n      x = -x;\n      var base = Math.floor( seedModifier * 11 );\n      this.randIndex= base % this.randnrs.length;\n      this.randStep = 1+(base % 7);\n\n      /* Also reseed random buffer */\n      this.randnrs = [];\n      for(var i=0; i<10000;i++) {\n        this.randnrs.push( Math.random() );\n      }\n    }\n\n  }\n\n\n  _fun_info_pad_DLR_() { return \"string:Add string padding:<String>, <padChar>,<Length>[,<PadLeft>]\"; }\n  _fun_pad_DLR_( pars ) {\n\n    if( pars.length < 3 || pars.length >4 ) {\n      this.erh.throwError( \"syntax\", \"pad$() takes 3 or 4 parameters\" );\n    }\n\n    var str = pars[0].value;\n    var ch = pars[1].value;\n    var len = pars[2].value;\n    var left = true;\n\n    if( pars.length == 4 ) {\n      left= pars[3].value;\n\n      if( left !== 0 ) {\n        left = true;\n      }\n      else { left = false; }\n    }\n\n    var dest = \"\";\n\n    var strLen = str.length;\n    var toPad = len-strLen;\n    for( var i = 0; i<toPad ; i++) {\n      dest += ch;\n    }\n\n    if( left ) {\n      dest = dest + str;\n    }\n    else {\n      dest = str + dest;\n    }\n\n    return dest;\n  }\n\n\n  _fun_info_rnd() { return \"math:Random number between 0 and 1:<SeedOrMode> (0=JS, 1=Seed, NoValue=Default)\"; }\n  _fun_rnd( pars ) {\n\n    if( pars.length >1) {\n      this.erh.throwError( \"syntax\", \"rnd takes one parameter\" );\n    }\n\n    if( pars.length == 1) {\n\n      if( pars[0].value == 0 ) {\n        return Math.random();\n      }\n      this.intSeedRand( pars[0].value );\n    }\n\n    return this.intGetNextRand();\n  }\n\n  _fun_info_sqr() { return \"math:Square Root\"; }\n  _fun_sqr( pars ) {\n    return Math.sqrt( pars[0].value);\n  }\n\n  _fun_info_log() { return \"math:Logaritm\"; }\n  _fun_log( pars ) {\n    return Math.log( pars[0].value);\n  }\n\n  _fun_info_pos() { return \"print:Position\"; }\n  _fun_pos( pars ) {\n    return this.runtime.getLinePos();\n  }\n\n  _fun_info_left_DLR_() { return \"string:Left part of the string\"; }\n  _fun_left_DLR_( pars ) {\n      //? LEFT$(A$,8)\n      var s = pars[0].value;\n\n      if( (typeof s) != \"string\") {\n        throw \"@type mismatch\";\n      }\n      return s.substr(0,pars[1].value);\n  }\n\n  _fun_info_right_DLR_() { return \"string:Right part of the string\"; }\n  _fun_right_DLR_( pars ) {\n      //? RIGHT$(A$,8)\n      var s = pars[0].value;\n\n      if( (typeof s) != \"string\") {\n        throw \"@type mismatch\";\n      }\n      return s.substr( s.length - pars[1].value );\n  }\n\n  _fun_info_mid_DLR_() { return \"string:A substring\"; }\n  _fun_mid_DLR_( pars ) {\n      //? RIGHT$(A$,8)\n      var s = pars[0].value;\n\n      if( (typeof s) != \"string\") {\n        throw \"@type mismatch\";\n      }\n      if( pars.length == 3) {\n        return s.substr( pars[1].value-1, pars[2].value );\n      }\n      else if( pars.length == 2) {\n        return s.substr( pars[1].value-1 );\n      }\n  }\n\n  _fun_info_sin() { return \"math:Sinus\"; }\n  _fun_sin( pars ) {\n    return Math.sin( pars[0].value);\n  }\n\n  _fun_info_tri() { return \"math+:Triangle\"; }\n  _fun_tri( pars ) {\n    var v = Math.abs( pars[0].value) % 1;\n\n    if( v<=0.5 ) {\n        return v*2;\n    }\n    else if( v<=1 ) {\n        return 1-((v-0.5) * 2);\n    }\n  }\n\n  _fun_info_saw() { return \"math+:Saw Tooth\"; }\n  _fun_saw( pars ) {\n    var v = Math.abs( pars[0].value) % 1;\n\n    return v;\n\n  }\n\n  _fun_info_tan() { return \"math:Tangent\"; }\n  _fun_tan( pars ) {\n    return Math.tan( pars[0].value);\n  }\n\n  _fun_info_atn() { return \"math:ATan function\"; }\n  _fun_atn( pars ) {\n    return Math.atan( pars[0].value);\n  }\n\n  _fun_info_cos() { return \"math:Cosinus\"; }\n  _fun_cos( pars ) {\n    return Math.cos( pars[0].value);\n  }\n\n  _fun_info_spc() { return \"string:Spaces for padding:<SizeOfPadding>\"; }\n  _fun_spc( pars ) {\n    var out=\"\";\n    for( var i=0; i<pars[0].value; i++) {\n      out+=\" \";\n    }\n    return out;\n  }\n\n  _max(x,m) {\n    if( x<m ) {  return x; }\n    return m;\n  }\n\n\n\n  _fun_info_int() { return \"math:Convert to Integer\"; }\n  _fun_int( pars ) {\n    return Math.floor( pars[0].value );\n  }\n\n  _fun_info_range() { return \"math+:Keep in range:<V>,<MIN>,<MAX>\"; }\n  _fun_range( pars ) {\n\n    if( pars.length <3) {\n      this.erh.throwError( \"parameter\", \"expected 3 parameters\" );\n    }\n    var v = pars[0].value ;\n    var min = pars[1].value ;\n    var max = pars[2].value ;\n\n    if( v<min ) { return min; }\n    if( v>max ) { return max; }\n    return v;\n  }\n\n\n  _fun_info_tab() { return \"print:Tab cursor Xpos to the right:<NumberOfTabs>\"; }\n  _fun_tab( pars ) {\n    var runtime = this.runtime;\n\n    if( pars.length <1) {\n      this.erh.throwError( \"syntax\", \"missing parameter 0\" );\n    }\n    var p = pars[0].value;\n    if( p<0 || p > 255 ) {\n      this.erh.throwError( \"illegal quantity\", \"value must be in-between 0 and 255\" );\n    }\n\n    for( var i=0; i<pars[0].value ; i++) {\n        this.output.write( \" \" );\n    }\n\n    return \"\";\n  }\n\n  _fun_info_sgn() { return \"math:Sign of number\"; }\n  _fun_sgn( pars ) {\n    var x = pars[0].value;\n\n    if( x<0 ) { return -1; }\n    else if( x>0 ) { return 1; }\n    return 0;\n  }\n\n  _fun_info_millis() { return \"time:Current time in milliseconds\"; }\n  _fun_millis( pars ) {\n    return this.runtime.getMillis( );\n  }\n\n  _fun_info_jiffies() { return \"time:Current time in 'jiffies'\"; }\n  _fun_jiffies( pars ) {\n    return this.runtime.getJiffyTime( );\n  }\n}\n\n//--EOC \n\n// ## basicparser.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basicparser.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basicparser.js\n\nclass Parser {\n\n  constructor( cmds, ecmds ) {\n    this.commands = cmds;\n    this.extendedcommands = ecmds;\n    this.erh = new ErrorHandler();\n    this.debugFlag = false;\n  }\n\n  init() {\n\n\t  this.CTRL_KW = [\"IF\",\"THEN\",\"GOTO\",\"AND\", \"NOT\", \"OR\",  \"GOSUB\", \"RETURN\", \"FOR\", \"TO\", \"NEXT\", \"STEP\", \"DATA\", \"REM\", \"GOSUB\", \"DIM\", \"END\", \"LET\", \"STOP\", \"DEF\", \"FN\", \"ON\", \"SUB\", \"INTERRUPT0\", \"INTERRUPT1\" ];\n    this.SHORTCUT_KW = [\"?\"];\n\n    this.KEYWORDS = this.commands.getStatements();\n\n    var more = this.extendedcommands.getStatements();\n    for( var i=0; i<more.length; i++) {\n      this.KEYWORDS.push( more[ i ] );\n    }\n\n    more = this.commands.getFunctions();\n    for( var i=0; i<more.length; i++) {\n      this.KEYWORDS.push( more[ i ] );\n    }\n\n    more = this.extendedcommands.getFunctions();\n    for( var i=0; i<more.length; i++) {\n      this.KEYWORDS.push( more[ i ] );\n    }\n\n     for( var i=0; i<this.CTRL_KW.length; i++) {\n       this.KEYWORDS.push( this.CTRL_KW[ i ] );\n     }\n\n     for( var i=0; i<this.SHORTCUT_KW.length; i++) {\n       this.KEYWORDS.push( this.SHORTCUT_KW[ i ] );\n     }\n     //this.padArray( this.KWCODES, 256 );\n\n     if( this.debugFlag ) { console.log(\"KEYWORDS:\" , this.KEYWORDS ); }\n\n     this.screenCodes2CTRLTable = [];\n     var tab = this.screenCodes2CTRLTable;\n\n     tab['\\x93'] = '\\x13';\n     tab['\\xd3'] = '\\x93';\n  }\n\n  getKeyWordCodes() {\n\n    this.throwError( null, \"(Extended) Keywords not yet supported\", \"extended disabled\" );\n    return this.KWCODES;\n  }\n\n  padArray( arr, nr ) {\n    var missing = nr - arr.length;\n    while( missing > 0) {\n      arr.push( null );\n      missing--;\n    }\n  }\n\n  throwError( ctx, detail, clazz ) {\n\n    var clazz2 = clazz;\n    if( clazz2 === undefined ) {\n      clazz2 = \"syntax\";\n    }\n\n    if( ctx ) {\n      console.log(\" Exception \" + clazz + \" at line \" + ctx.lineNumber+ \" \" + detail );\n    }\n\n    if( ctx ) {\n      if( ! ( ctx.lineNumber == undefined ) ) {\n        this.erh.throwError( clazz2, detail, ctx, ctx.lineNumber );\n      }\n    }\n\n    this.erh.throwError( clazz2, detail, undefined, -1 );\n\n  }\n\n  upperCaseNameTokens( tokens ) {\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n\t\t\tvar token = tokens[i];\n\n\t\t\tif( token ) {\n\t\t\t\tif( token.type == \"name\" ) {\n\t\t\t\t\ttoken.data = token.data.toUpperCase();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn tokens;\n\t}\n\n\tremovePadding( tokens ) {\n\t\tvar tokens2 = [];\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n\t\t\tvar token = tokens[i];\n\n\t\t\tif( token ) {\n\t\t\t\tif( token.type != \"pad\" ) {\n\t\t\t\t\ttokens2.push( token );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn tokens2;\n\t}\n\n  mergeCompTokens( tokens ) {\n\t\tvar tokens2 = [];\n\n    /* Convert token sequences like (\"<\",\"=\")\n       into single token \"<=\" */\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n\t\t\tvar token = tokens[i];\n\n\t\t\tif( i>0 ) {\n        var token2 = tokens[i-1];\n\t\t\t\tif( ( token.type == \"comp\" || token.type == \"eq\" ) &&\n            ( token2.type == \"comp\" || token2.type == \"eq\" ) ) {\n\t\t\t\t\ttoken2.type = \"@@removeme\";\n          token.data = token2.data + token.data;\n          token.type = \"comp\";\n          if( token.data == \"><\" ) {\n            token.data = \"<>\";\n          }\n          else if( token.data == \"=<\" ) {\n            token.data = \"<=\";\n          }\n          else if( token.data == \"=>\" ) {\n            token.data = \">=\";\n          }\n\n  \t\t\t}\n\t\t\t}\n\n      if( ( token.type == \"name\"  && token.data == \"OR\" ) ||\n        ( token.type == \"name\"  && token.data == \"AND\" ) ||\n        ( token.type == \"name\"  && token.data == \"NOT\" )) {\n          token.type = \"bop\";\n        }\n\n\t\t}\n\n    for( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n      if( tokens[i].type!=\"@@removeme\") {\n        tokens2.push( tokens[i] );\n      }\n    }\n\n\t\treturn tokens2;\n\t}\n\n\n\n  mergeBrokenUpTokens( tokens ) {\n\n    var splits = [];\n\n    //console.log(\"tokens\",tokens)\n    //standard\n    splits.push( { p1: \"REST\", p2: \"OR\", p3: \"E\", whole: \"RESTORE\" } );\n    splits.push( { p1: \"S\", p2: \"TO\", p3: \"P\", whole: \"STOP\" } );\n\n\n    //extended\n//    splits.push( { p1: \"Dsk\", p2: \"OR\", p3: \"T\", whole: \"DXPORT\" } );\n//    splits.push( { p1: \"LXP\", p2: \"OR\", p3: \"T\", whole: \"LXPORT\" } );\n    splits.push( { p1: \"IMP\", p2: \"OR\", p3: \"T\", whole: \"IMPORT\" } );\n    splits.push( { p1: \"EXP\", p2: \"OR\", p3: \"T\", whole: \"EXPORT\" } );\n    splits.push( { p1: \"L\", p2: \"GET\", p3: \"URL\", whole: \"LGETURL\" } );\n    splits.push( { p1: \"L\", p2: \"GET\", p3: \"NAME\", whole: \"LGETNAME\" } );\n    splits.push( { p1: \"L\", p2: \"GET\", p3: \"ID\", whole: \"LGETID\" } );\n    splits.push( { p1: \"GO\", p2: \"TO\", p3: null, whole: \"GOTO\" } );\n    splits.push( { p1: \"GO\", p2: \"SUB\", p3: null, whole: \"GOSUB\" } );\n\n    splits.push( { p1: \"GO\", p2: \"LINK\", p3: null, whole: \"GOLINK\" } );\n    splits.push( { p1: \"WINDOW\", p2: \"S\", p3: null, whole: \"WINDOWS\" } );\n    splits.push( { p1: \"UN\", p2: \"TAG\", p3: null, whole: \"UNTAG\" } );\n    splits.push( { p1: \"LINK\", p2: \"S\", p3: null, whole: \"LINKS\" } );\n    splits.push( { p1: \"DE\", p2: \"LET\", p3: \"E\", whole: \"DELETE\" } );\n    splits.push( { p1: \"LDE\", p2: \"LET\", p3: \"E\", whole: \"LDELETE\" } );\n    splits.push( { p1: \"TDE\", p2: \"LET\", p3: \"E\", whole: \"TDELETE\" } );\n    splits.push( { p1: \"B\", p2: \"OR\", p3: \"DER\", whole: \"BORDER\" } );\n    splits.push( { p1: \"G\", p2: \"COLOR\", p3: \"S\", whole: \"GCOLORS\" } );\n    splits.push( { p1: \"CHAR\", p2: \"COL\", p3: null, whole: \"CHARCOL\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"CP\", p3: null, whole: \"SFRAMECP\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"FLIPX\", p3: null, whole: \"SFRAMEFLIPX\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"FLIPY\", p3: null, whole: \"SFRAMEFLIPY\" } );\n    splits.push( { p1: \"SFRAME\", p2: \"FX\", p3: null, whole: \"SFRAMEFX\" } );\n    splits.push( { p1: \"TAG\", p2: \"S\", p3: null, whole: \"TAGS\" } );\n    splits.push( { p1: \"X\", p2: \"ON\", p3: null, whole: \"XON\" } );\n    splits.push( { p1: \"S\", p2: \"POS\", p3: null, whole: \"SPOS\" } );\n    splits.push( { p1: \"S\", p2: \"POKE\", p3: null, whole: \"SPOKE\" } );\n    splits.push( { p1: \"WJ\", p2: \"IF\", p3: \"FY\", whole: \"WJIFFY\" } );\n    splits.push( { p1: \"REF\", p2: \"OR\", p3: \"MAT\", whole: \"REFORMAT\" } );\n\n\n    var tokens2 = []; //tokens;\n\n    for( var i=0; i<tokens.length; i++) {\n      tokens2.push( tokens[ i ]);\n    }\n\n    for( var i=0; i<splits.length; i++) {\n      var r=splits[i];\n      tokens2 = this.mergeTokenRange( tokens2, r );\n    }\n\n    if( this.debugFlag ) {  console.log( tokens2 ); }\n    return tokens2;\n  }\n\n\n  mergeTokenRange( tokens, record ) {\n\t\tvar tokens2 = [];\n    var tokens3 = [];\n\n    /* Convert \"S\",\"TO\",\"P\" into \"STOP\" */\n\n\t\tfor( \tvar i=0;\n\t\t\t\t\ti<tokens.length;\n\t\t\t\t\ti++)\n\t\t{\n      tokens2[i] = tokens[i];\n\t\t}\n\n    for( \tvar i=1;\n\t\t\t\t\ti<tokens2.length;\n\t\t\t\t\ti++)\n\t\t{\n      if( record.p3 == null ) {\n        if(\n           ( tokens2[i-1].type == \"name\" || tokens2[i-1].type == \"bop\" ) &&\n           ( tokens2[i-0].type == \"name\" || tokens2[i-0].type == \"bop\" ) ) {\n             if(\n                tokens2[i-1].data == record.p1 &&\n                tokens2[i-0].data == record.p2 ) {\n                  tokens2[i-1].data = record.whole;\n                  tokens2[i-0].type = \"removeme\";\n                }\n           }\n      }\n      else {\n        if(i<2) {\n          continue;\n        }\n        if(\n          ( tokens2[i-2].type == \"name\" || tokens2[i-2].type == \"bop\" ) &&\n           ( tokens2[i-1].type == \"name\" || tokens2[i-1].type == \"bop\" ) &&\n           ( tokens2[i-0].type == \"name\" || tokens2[i-0].type == \"bop\" ) ) {\n\n             if( tokens2[i-2].data == record.p1 &&\n                tokens2[i-1].data == record.p2 &&\n                tokens2[i-0].data == record.p3 ) {\n                  tokens2[i-2].data = record.whole;\n                  tokens2[i-1].type = \"removeme\";\n                  tokens2[i-0].type = \"removeme\";\n                }\n           }\n      }\n\t\t}\n\n    var j=0;\n    for( \tvar i=0;\n\t\t\t\t\ti<tokens2.length;\n\t\t\t\t\ti++)\n\t\t{\n      if( tokens2[i].type != \"removeme\" ) {\n          tokens3[j] = tokens2[i];\n          j++;\n      }\n\t\t}\n\n\t\treturn tokens3;\n\t}\n\n\tparseFunParList( context ) {\n\n\t\tvar tokens = context.tokens;\n\t\tvar params = [];\n\t\tvar even = true;\n\n\t\tvar endTokens = [];\n\t\tendTokens.push( { type: \"sep\", data: \"@@@all\" });\n\t\tendTokens.push( { type: \"bracket\", data: \")\" });\n\n\t\tendTokens.push();\n\n\t\twhile( true ) {\n\n\t\t\tvar token;\n\n      if( tokens.length > 0) {\n        if( tokens[0].type==\"bracket\" && tokens[0].data==\")\") {\n          break;\n        }\n      }\n\n\t\t\tif( even ) {\n        var expr = this.parseBoolExpression( context, endTokens );\n        expr.type = \"expr\";\n\t\t\t\tparams.push( expr );\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoken = tokens.shift();\n\n\t\t\t\tif( token.type==\"sep\" ) {\n\t\t\t\t\t//all ok, next par\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.throwError( context, \"Expected ',' or ')', got '\" + token.data + \"'\");\n\t\t\t\t}\n\t\t\t}\n\t\t\teven = !even;\n\t\t}\n\n\t\treturn params;\n\t}\n\n\tpeekIfNextIsOpenBracket( context ) {\n\n\t\tvar tokens = context.tokens;\n\n\t\tif( tokens.length > 0 ) {\n\t\t\tif( tokens[0].type == \"bracket\" && tokens[0].data == \"(\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tparseSubExpression( context ) {\n\n\t\tvar token = context.tokens.shift();\n\n\t\tif( !(token.type == \"bracket\" && token.data == \"(\")) {\n\t\t\tthis.throwError( context, \"parsing subexpression, expected \\\"bracket\\\", not '\" + token.data + \"'\");\n\t\t}\n\n\t\tvar endTokens = [];\n\t\tendTokens.push( { type: \"bracket\", data: \")\" });\n\n\t\tvar expr = this.parseBoolExpression( context, endTokens );\n\t\tcontext.tokens.shift();\n\n\t\texpr.type = \"expr\";\n\t\treturn expr;\n\t}\n\n\n  tokensToString( token )  {\n    var str = \"\";\n\n    if(token.data == \"@@@all\") {\n        str = str + \"'\" + token.type + \"'\";\n    }\n    else {\n      //str = str + \"'\" + token.type + \"/\" + token.data + \"'\";\n      str = str + \"'\" + token.data + \"'\";\n    }\n\n    return str;\n  }\n\n  endTokensToString( endTokenArray )  {\n    var str = \"\";\n\n    for( var et=0; et<endTokenArray.length; et++) {\n      var endToken = endTokenArray[et];\n\n      if( str != \"\") { str+= \" \";}\n      str += this.tokensToString( endToken );\n    }\n    return str;\n  }\n\n  isEndToken( token, endTokenArry ) {\n\n    for( var et=0; et<endTokenArry.length; et++) {\n      var endToken = endTokenArry[et];\n\n      if( token.type == endToken.type && token.data == endToken.data ) {\n        return true;\n      }\n      else if( token.type == endToken.type && endToken.data == \"@@@all\" ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  parseSimpleExpression( context, endTokens ) {\n\n    var endLoop;\n\t\tvar tokens = context.tokens;\n\n    if( tokens.length == 0) {\n      return undefined;\n    }\n\n\t\tvar token, returnValue=undefined;\n\t\ttoken = tokens.shift();\n\n\t\tif( !token ) {\n\t\t\tthis.throwError( context, \"empty simple expression\");\n\t\t}\n\n    endLoop = this.isEndToken( token, endTokens );\n    if( endLoop ) {\n      this.throwError( context, \"empty simple expression\");\n    }\n\n\n    if( token.type == \"op\" && token.data == \"-\" ) {\n\t\t\t\tvar pair = this.parseSimpleExpression( context, endTokens );\n        pair[0].data = -pair[0].data;\n        return pair;\n\t\t}\n\n\t\tif( token.type == \"num\" ) {\n        returnValue= { type: \"num\", data: token.data };\n\t\t}\n\t\telse if( token.type == \"str\" ) {\n\t\t\t\treturnValue= { type: \"str\", data: token.data };\n\t\t}\n\n\n    token = tokens.shift();\n    if( token ) {\n      endLoop = this.isEndToken( token, endTokens );\n      if( ! endLoop ) {\n        endLoop = context.tokens.length == 0;\n      }\n      if( !endLoop ) {\n        this.throwError( context, \"Empty simple expression end expected\");\n      }\n    }\n\n\t\treturn [returnValue, token];\n\t}\n\n\n  parseBoolExpression( context, endTokens0 ) {\n\n    var endTokens = [];\n    var tokens = context.tokens;\n\n    for( var i=0; i < endTokens0.length; i++ ) {\n      endTokens.push( endTokens0[ i ] );\n    }\n\n    endTokens.push( { type: \"bop\", data: \"OR\" });\n    endTokens.push( { type: \"bop\", data: \"AND\" });\n\n    var first = true;\n    var eList = [];\n    var op = null;\n    while( true ) {\n\n      var expr = this.parseExpression( context, endTokens );\n      if( first && tokens.length == 0) {\n        return expr;\n      }\n      first = false;\n\n      var opData = null;\n      if( op != null ) {\n          opData = op.data;\n      }\n\n      //if( expr.parts.length == 1) {\n      //    expr.parts[0].op = opData;\n      //    expr.parts[0].dbg = \"1\";\n      //    eList.push(  expr.parts[0] );\n      //}\n      //else {\n          expr.op = opData;\n          expr.type = \"expr\";\n          expr.dbg = \"1\";\n          eList.push(  expr );\n      //}\n\n      if( tokens.length > 0) {\n        if( tokens[0].type == \"bop\" ) {\n          var op = tokens.shift();\n          continue;\n        }\n      }\n      break;\n    }\n\n    if( eList.length == 1 ) {\n        eList[0].dbg2 = \"len=1\";\n        return eList[0];\n    }\n\n\n    var retExpr = {\n      negate: false,\n      binaryNegate: false,\n      type: \"expr\",\n      parts: [],\n      op: null\n    };\n\n    for( i=0; i<eList.length; i++) {\n      retExpr.parts.push( eList[ i ] );\n    }\n\n    return retExpr;\n\n  }\n\n\tparseExpression( context, endTokens ) {\n\n\t\tvar tokens = context.tokens;\n    if( tokens.length == 0) {\n      return null;\n    }\n\n\t\tvar expression = {\n\t\t\t\t\tparts: [],\n          negate: false,\n          binaryNegate: false\n\t\t};\n\n\t\tvar index = 0;\n\t\tvar even = true;\n\t\tvar op = null;\n\t\tvar parts = expression.parts;\n    var first = true;\n    var negate = false;\n\n    var binaryNegate = false;\n\n\n\t\twhile( true ) {\n\t\t\tvar token, part;\n\t\t\ttoken = tokens.shift();\n\n\t\t\tif( !token ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n      var endLoop = this.isEndToken( token, endTokens );\n      if( endLoop ) {\n\n        tokens.unshift( token );\n        break;\n      }\n\n\t\t\tif( even ) {\n\n\t\t\t\tif( token.type == \"num\" ) {\n\t\t\t\t\tpart = { type: \"num\", data: token.data, op: op };\n          if( negate ) {\n            part.data = -part.data;\n          }\n\t\t\t\t\tparts.push( part );\n          first = false;\n          negate = false;\n\t\t\t\t}\n\t\t\t\telse if( token.type == \"str\" ) {\n\t\t\t\t\tpart = { type: \"str\", data: token.data, op: op };\n\t\t\t\t\tparts.push( part );\n          if( negate ) {\n            this.throwError( context, \"found negation on a string\", \"type mismatch\");\n          }\n          first = false;\n\t\t\t\t}\n\t\t\t\telse if( token.type==\"bracket\" && token.data==\"(\") {\n\t\t\t\t\t\ttokens.unshift( token );\n\n            var subEndTokens = [];\n            subEndTokens.push( { type: \"bracket\", data: \")\" });\n\n\t\t\t\t\t\tvar expr = this.parseSubExpression( context, subEndTokens );\n            expr.op = op;\n            expr.negate = negate;\n            expr.binaryNegate = binaryNegate;\n\t\t\t\t\t\tparts.push ( expr );\n            first = false;\n            negate = false;\n\t\t\t\t}\n\t\t\t\telse if( token.type==\"name\" ) {\n\n\t\t\t\t\t\tvar name = token.data;\n\t\t\t\t\t\tvar isFunctionCallOrArray = this.peekIfNextIsOpenBracket( context );\n            var isUserDefinedFunctionCall = (name == \"FN\");\n\n\t\t\t\t\t\tif( isFunctionCallOrArray ) { /*We have a function or an Array */\n\n\t\t\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\t\t\tvar parameters = this.parseFunParList( context );\n              tokens.shift();\n\n              part = { type: \"funCall\", params: parameters, op: op, functionName: name };\n\n              if( this.KEYWORDS.indexOf( name ) == -1 ) {\n                //isArray  example: x=a(5)\n                part = { type: \"array\", data: name, op: op, indices: parameters };\n\n              }\n\n              if( op == null && negate ) {\n                var subExpression = {\n                      parts: [part],\n                      negate: true,\n                      binaryNegate: false,\n                      type: \"expr\"\n                };\n                parts.push ( subExpression );\n              }\n\t\t\t\t\t\t\telse {\n                parts.push ( part );\n              }\n\n\t\t\t\t\t\t}\n            else if( isUserDefinedFunctionCall ) {\n\n              token = tokens.shift();\n              name = token.data;\n\n              token = tokens.shift();\n              var parameters = this.parseFunParList( context ); //TODO limit to 1 par\n              tokens.shift();\n\n              part = { type: \"defFnCall\", params: parameters, op: op, functionName: name };\n\n              if( op == null && negate ) {\n                var subExpression = {\n                      parts: [part],\n                      negate: true,\n                      binaryNegate: false,\n                      type: \"expr\"\n                };\n                parts.push ( subExpression );\n              }\n\t\t\t\t\t\t\telse {\n                parts.push ( part );\n              }\n\n            }\n\t\t\t\t\t\telse { /* we have an variable*/\n\n\t\t\t\t\t\t\tpart = { type: \"var\", data: token.data, op: op };\n              if( op == null && negate ) {\n                var subExpression = {\n                      parts: [part],\n                      negate: true,\n                      binaryNegate: false,\n                      type: \"expr\"\n                };\n                parts.push ( subExpression );\n              }\n              else {\n                parts.push ( part );\n              }\n\n\t\t\t\t\t\t}\n            negate = false;\n            first = false;\n\t\t\t\t}\n        else if( token.type==\"op\" && token.data==\"-\" ) {\n          negate = ! negate;\n          continue;\n        }\n        else if( token.type==\"bop\" && token.data==\"NOT\" && first ) {\n          binaryNegate = ! binaryNegate;\n          expression.binaryNegate = binaryNegate;\n          if( this.debugFlag ) {\n            console.log(\"NOT\")\n          }\n          continue;\n        }\n\t\t\t\telse {\n\t\t\t\t\tthis.throwError( context, \"Expected \\\"number\\\", \\\"string\\\", \\\"symbol\\\" or \\\"bracket\\\", not \" + token.data);\n\t\t\t\t}\n        op = null;\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif( token.type == \"op\" || token.type == \"comp\" || token.type == \"eq\" || token.type == \"bop\" ) {\n\t\t\t\t\top = token.data;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.throwError( context, \"Expected \\\"operator\\\" or one of (\"+\n          this.endTokensToString(endTokens)+\n          \"), not '\" + token.data + \"'\");\n\t\t\t\t}\n\t\t\t}\n\t\t\teven = !even;\n\n\t\t}\n\n    if( op != null ) {\n      part = { type: \"uniop\", data: null, op: op };\n      parts.push ( part );\n    }\n\n\t\tif( expression.parts == null ) {\n\t\t\treturn null;\n\t\t}\n\n    var newParts;\n    newParts = this.groupParts( expression.parts, \"^\" );\n    newParts = this.groupParts( newParts, \"/\" );\n    newParts = this.groupParts( newParts, \"*\" );\n    newParts = this.groupParts( newParts, \"+\" );\n    newParts = this.groupParts( newParts, \"-\" );\n\n    var oldExpression = expression;\n    expression = {\n          parts: newParts,\n          negate: oldExpression.negate,\n          binaryNegate: oldExpression.binaryNegate\n    };\n\n\t\treturn expression;\n\t}\n\n\n  groupParts( parts0 , op ) {\n\n    var parts1=[], parts2=[];\n\n    for( var i=0; i<parts0.length; i++ ) {\n      parts1.push( parts0[ i ] );\n    }\n\n    for( var i=0; i<parts1.length; i++ ) {\n\n      var part = parts1[ i ];\n      if( i>0 && part.op == op ) {\n        var prevPart = parts1[ i-1 ];\n\n        var subExpr = {\n          negate: false,\n          binaryNegate: false,\n          type: \"expr\",\n          parts: [],\n          op: prevPart.op\n        };\n\n        subExpr.parts[ 0 ] = prevPart;\n        subExpr.parts[ 0 ].op = null;\n        subExpr.parts[ 1 ] = part;\n\n        parts1[i-1] = null;\n        parts1[ i ] = subExpr;\n\n      }\n    }\n\n\n    for( var i=0; i<parts1.length; i++ ) {\n\n      var part = parts1[ i ];\n      if( part != null ) {\n        parts2.push( part );\n      }\n    }\n\n    return parts2;\n  }\n\n  normalizeStatementName( x ) {\n    if(x == \"?\") {\n      return \"print\";\n    }\n    return x;\n  }\n\n  parseAssignment( context, preTokens, commands, command, nameToken, token0  ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    command.type = \"assignment\";\n    command.var = nameToken;\n    command.arrayAssignment = false;\n\n    var endTokens = [];\n    endTokens.push( { type: \"cmdsep\", data: \"@@@all\" });\n\n    command.expression = this.parseBoolExpression( context, endTokens );\n    commands.push( command );\n  }\n\n  parseArrayAssignment( context, preTokens, commands, command, nameToken, token0  ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    command.type = \"assignment\";\n    command.var = nameToken;\n    command.arrayAssignment = true;\n\n    //token = tokens.shift();\n    var indices = this.parseFunParList( context );\n    command.indices = indices;\n\n    tokens.shift();\n    if( this.debugFlag ) {\n      console.log(\"tokens after:\",tokens)\n    }\n\n    token = tokens.shift();\n    if( token === undefined ) {\n      token = { type: \"@@@notoken\" };\n    }\n\n    if( token.type != \"eq\") {\n      this.throwError( context, \"Expected =\");\n    }\n\n    var endTokens = [];\n    endTokens.push( { type: \"cmdsep\", data: \"@@@all\" });\n\n    command.expression = this.parseBoolExpression( context, endTokens );\n    commands.push( command );\n\n  }\n\n  parseControlStructure(  context, preTokens, commands, command, handlers, nameToken, token0  ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    if( true ) {\n\n      command.type = \"control\";\n      var controlToken = nameToken;\n      command.controlKW = nameToken.toLowerCase();\n      if( token.type != \"@@@notoken\") {\n        tokens.unshift( token );\n      }\n\n      if( controlToken == \"LET\") {\n\n        token = tokens.shift();\n        if( token.type != \"name\") {\n          this.throwError( context, \"LET expects var name\");\n        }\n        nameToken = token.data;\n\n        token = tokens.shift();\n        if( token === undefined ) {\n          token = { type: \"@@@notoken\" };\n        }\n\n/*        if( token.type != \"bracket\") { #TODO array assignments, ex: LET a(8) = 2\n          this.throwError( context, \"LET expects =\");\n        }\n*/\n\n        if( token.type == \"eq\") {\n\n          this.parseAssignment( context, preTokens, commands, command, nameToken, token );\n        }\n        else if( token.type == \"bracket\" && token.data==\"(\" ) {\n\n          this.parseArrayAssignment( context, preTokens, commands, command, nameToken, token );\n\n        }\n        else {\n          this.throwError( context, \"Unexpected data after 'LET': '\" + token.data + \"'\" );\n        }\n\n      }\n      else if( controlToken == \"DIM\") {\n\n        var first = true;\n        command.params = [];\n        command.arrayNames = [];\n\n        while( true ) {\n\n          token = tokens.shift();\n          if(!first ) {\n            if( token === undefined ) {\n              break;\n            }\n            if( ! ( token.type == \"sep\" && token.data == \",\" )) {\n              tokens.unshift( token );\n              break;\n            }\n            token = tokens.shift();\n          }\n\n          if( token.type != \"name\" ) {\n            this.throwError( context, \"DIM expects var name\");\n          }\n\n          nameToken = token.data;\n\n          token = tokens.shift();\n          if( token === undefined ) {\n            token = { type: \"@@@notoken\" };\n          }\n\n          if( !(token.type==\"bracket\" && token.data==\"(\") ) {\n            this.throwError( context, \"DIM expects (\");\n          }\n\n          var indices = this.parseFunParList( context );\n\n          token = tokens.shift();\n          if( token === undefined ) {\n            token = { type: \"@@@notoken\" };\n          }\n\n          if( !(token.type==\"bracket\" && token.data==\")\") ) {\n            this.throwError( context, \"DIM expects )\");\n          }\n\n          command.params.push( indices );\n          command.arrayNames.push( nameToken );\n\n          first = false;\n        }\n\n        commands.push( command );\n      }\n      else if( controlToken == \"DEF\") {\n\n        token = tokens.shift();\n        if( !( token.type == \"name\" && token.data == \"FN\" ) ) {\n          this.throwError( context, \"DEF expects FN\");\n        }\n\n        token = tokens.shift();\n        if( token.type != \"name\") {\n          this.throwError( context, \"DEF FN expects function name\");\n        }\n        var fName = token.data;\n\n        token = tokens.shift();\n        if(! ( token.type == \"bracket\" && token.data == \"(\" )) {\n          this.throwError( context, \"DEF FN expects function name and ->( varname )\");\n        }\n\n        token = tokens.shift();\n        if(! ( token.type == \"name\"  )) {\n          this.throwError( context, \"DEF FN expects function name and ( ->varname )\");\n        }\n        var varName = token.data;\n\n        token = tokens.shift();\n        if(! ( token.type == \"bracket\" && token.data == \")\" )) {\n          this.throwError( context, \"DEF FN expects function name and ( varname -> )\");\n        }\n\n        token = tokens.shift();\n        if(! ( token.type == \"eq\" && token.data == \"=\" )) {\n          this.throwError( context, \"DEF FN expects function name and ( varname ) -> =\");\n        }\n\n\n        endTokens = [];\n        var expr_fn = this.parseBoolExpression( context, endTokens );\n\n        if( this.debugFlag ) {\n          console.log(\"expr = \" + expr_fn );\n        }\n\n        command.params=[];\n        command.params[0] = fName;\n        command.params[1] = varName;\n        command.params[2] = expr_fn;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"GOTO\" || controlToken == \"GOSUB\") {\n        var num = -1;\n\n        token = tokens.shift();\n\n        if( token === undefined ) {\n          this.throwError( context, \"GOTO/GOSUB expects linenumber or label\", \"undef'd statement\");\n        }\n\n        if( token.type != \"num\") {\n          //this.throwError( context, \"GOTO/GOSUB expects number\", \"undef'd statement\");\n\n          if( token.type != \"name\") {\n              this.throwError( context, \"GOTO/GOSUB expects linenumber or label\", \"undef'd statement\");\n          }\n\n          var label = token.data;\n\n          token = tokens.shift();\n          if( token !== undefined ) {\n            if( token.type != \"cmdsep\") {\n              this.throwError( context, \"Expected \\\"command separator\\\", instead of '\"+token.data+\"'\");\n            }\n          }\n\n          command.params=[];\n          command.params[0] = label;\n          command.label = true;\n          commands.push( command );\n          return;\n\n        }\n        num = parseInt(token.data);\n        token = tokens.shift();\n        if( token !== undefined ) {\n          if( token.type != \"cmdsep\") {\n            this.throwError( context, \"Expected \\\"command separator\\\", instead of '\"+token.data+\"'\");\n          }\n        }\n\n        command.params=[];\n        command.params[0] = num;\n        command.label = false;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"ON\" ) {\n        var nums = [];\n        var onInterrupt = false;\n\n        endTokens = [];\n        endTokens.push( { type: \"name\", data: \"GOTO\" });\n        endTokens.push( { type: \"name\", data: \"GOSUB\" });\n\n        token = tokens.shift();\n        var onExpr = null;\n\n        if( token.type == \"name\" && (token.data == \"INTERRUPT0\" || token.data == \"INTERRUPT1\")) {\n          onInterrupt = true;\n          onExpr = {\n            type: \"control\",\n            data: token.data\n          }\n        }\n        else {\n          tokens.unshift( token );\n          onExpr = this.parseBoolExpression( context, endTokens );\n        }\n\n        token = tokens.shift();\n        if( token.type != \"name\") {\n          this.throwError( context, \"ON expects GOTO/GOSUB\");\n        }\n\n        if( !onInterrupt ) {\n          if( !( token.data == \"GOTO\" || token.data == \"GOSUB\" )) {\n            this.throwError( context, \"ON expects GOTO/GOSUB\");\n          }\n        }\n        else {\n          if( !( token.data == \"GOTO\" )) {\n            this.throwError( context, \"ON INTERRUPT expects GOTO\");\n          }\n        }\n\n        var onType = token.data;\n\n        token = tokens.shift();\n\n        var labelFlag = false;\n        var label = \"\";\n        var num0;\n\n        if( token.type != \"num\") {\n\n            if( token.type != \"name\") {\n                this.throwError( context, \"GOTO/GOSUB expects linenumber or label\", \"undef'd statement\");\n            }\n\n            labelFlag = true;\n            label = token.data;\n\n        }\n        else {\n          num0  = parseInt(token.data);\n        }\n\n        nums.push( num0 );\n\n        if( !onInterrupt ) {\n          while ( true ) {\n\n            token = tokens.shift();\n            if( token == undefined ) { break; }\n            if( token.type == \"cmdsep\") { break; }\n            if( token.type == \"cmdsep\") { break; }\n            if( !( token.type == \"sep\" && token.data == \",\" )) {\n              this.throwError( context, \"ON GOTO/GOSUB expects numberlist\");\n            }\n\n            token = tokens.shift();\n            if( token.type != \"num\") {\n              this.throwError( context, \"GOTO/GOSUB expects number\");\n            }\n            nums.push(  parseInt(token.data) );\n          }\n\n          if( nums.length > 1 ) {\n            this.throwError( context, \"ON INTERUPT GOTO expects only a single line number\");\n          }\n\n          command.params=[];\n          command.params[0] = onType.toLowerCase();\n          command.params[1] = onExpr;\n          command.params[2] = nums;\n          commands.push( command );\n        }\n        else {\n\n          command.params=[];\n          command.params[0] = onExpr.data.toLowerCase();\n          if ( labelFlag ) {\n              command.params[1] = label;\n          }\n          else {\n              command.params[1] = num0;\n          }\n          command.label = labelFlag;\n\n          commands.push( command );\n\n        }\n\n      }\n      else if( controlToken == \"RETURN\") {\n        var num = -1;\n\n        command.params=[];\n        commands.push( command );\n\n      }\n      else if( controlToken == \"END\") {\n        var num = -1;\n\n        command.params=[];\n        commands.push( command );\n\n      }\n      else if( controlToken == \"STOP\") {\n        var num = -1;\n\n        command.params=[];\n        commands.push( command );\n\n      }\n      else if( controlToken == \"FOR\") {\n\n        var variable, expr_from, expr_to, expr_step;\n        var endTokens = [];\n\n        token = tokens.shift();\n        if( token.type != \"name\" ) {\n          this.throwError( context,\n                \"For expects variable, no var found, found \" + token.type+\"/\"+token.data);\n        }\n\n        variable = token.data;\n\n        token = tokens.shift();\n        if( !( token.type == \"eq\" && token.data == \"=\" )) {\n          this.throwError( context,\n                \"For expects '=', not found, found \" + token.type+\"/\"+token.data);\n        }\n\n        endTokens = [];\n        endTokens.push( { type: \"name\", data: \"TO\" });\n\n        expr_from = this.parseBoolExpression( context, endTokens );\n\n        token = tokens.shift();\n        if( !( token.type == \"name\" && token.data == \"TO\" ) ) {\n          this.throwError( context, \"For expects 'to', not found, found \" + token.type+\"/\"+token.data);\n        }\n\n        endTokens = [];\n        endTokens.push( { type: \"cmdsep\", data: \":\" });\n        endTokens.push( { type: \"name\", data: \"STEP\" });\n\n        expr_to = this.parseBoolExpression( context, endTokens );\n        expr_step = { parts: [ { data: \"1\", op: null, type: \"num\"} ] };\n\n        token = tokens.shift();\n        if( !( token === undefined ) ) {\n          if( token.type == \"name\" && token.data == \"STEP\") {\n\n              endTokens = [];\n              endTokens.push( { type: \"cmdsep\", data: \":\" });\n              expr_step = this.parseBoolExpression( context, endTokens );\n          }\n          else {\n            if(! ( token.type == \"cmdsep\" && token.data == \":\")) {\n              throw \"FOR: unexpected token '\" + token.data +\"'\";\n            }\n          }\n        }\n\n        command.controlKW = \"for:init\";\n        command.params=[];\n        command.params[0] = expr_from;\n        command.params[1] = expr_to;\n        command.params[2] = expr_step;\n        command.variable = variable;\n        commands.push( command );\n        if( this.debugFlag ) {\n          console.log(\"command=\", command);\n        }\n\n      }\n      else if( controlToken == \"NEXT\") {\n\n        var variable;\n\n        var explicit = false;\n        while( true ) {\n\n          var token = tokens.shift();\n          if( ! token ) {\n            break;\n          }\n          if( token.type == \"cmdsep\" ) {\n            break;\n          }\n\n          if( token.type != \"name\" ) {\n            throw \"Next expected variable, not '\" +token.data+ \"'\";\n          }\n\n          var nextcommand = {\n            controlKW: \"for:next\",\n            nextVar: token.data,\n            lineNumber: command.lineNumber,\n            type: command.type\n          };\n\n          commands.push( nextcommand );\n          explicit = true;\n\n          var token = tokens.shift();\n          if( ! token ) {\n            break;\n          }\n          if( token.type == \"cmdsep\" ) {\n            break;\n          }\n          if( !( token.type == \"sep\" && token.data == \",\" )) {\n            throw \"Expected comma, found '\" + token.data + \"'\";\n          }\n        }\n\n        if( ! explicit ) {\n          command.controlKW = \"for:next\";\n          command.nextVar = null;\n          commands.push( command );\n        }\n\n      }\n      else if( controlToken == \"IF\") {\n\n        var expr1, expr2, comp;\n        endTokens = [];\n        endTokens.push( { type: \"name\", data: \"THEN\" });\n        endTokens.push( { type: \"name\", data: \"GOTO\" });\n        var expr1 = this.parseBoolExpression( context, endTokens );\n        command.params= [ expr1 ];\n\n        token = tokens.shift();\n\n        if( token.type == \"name\" && token.data == \"GOTO\") {\n          var insert = {};\n          insert.data = \"GOTO\";\n          insert.type = \"name\";\n          tokens.unshift( insert );\n        } else {\n          if( tokens.length > 0 ) {\n            if( tokens[0].type == \"num\" ) {\n              var insert = {};\n              insert.data = \"GOTO\";\n              insert.type = \"name\";\n              tokens.unshift( insert );\n            }\n          }\n        }\n\n        //var block = this.parseLineCommands( context );\n        var result = this.parseLineCommands( context );\n        var block = result.commands;\n\n        if( this.debugFlag ) {\n          console.log( block );\n        }\n\n        commands.push( command );\n\n        for( var bi=0; bi<block.length; bi++) {\n          commands.push( block[bi] );\n        }\n\n      }\n      else if( controlToken == \"DATA\") {\n\n        var dataArray = [];\n        var endTokens;\n\n        endTokens = [];\n        endTokens.push( { type: \"cmdsep\", data: \":\" });\n        endTokens.push( { type: \"sep\", data: \",\" });\n\n        while ( true ) {\n            var pair = this.parseSimpleExpression( context, endTokens );\n\n            var expr1 = pair[0];\n\n\n            if( expr1 === undefined ) {\n              throw \"DATA: expected data\";\n            }\n\n            dataArray.push( expr1 );\n\n            token = pair[1];\n            if( token === undefined ) {\n              break;\n            }\n            if( token.type == \"cmdsep\" && token.data == \":\" ) {\n              break;\n            }\n            else if( token.type == \"sep\" && token.data ==\",\") {\n              continue;\n            }\n            else {\n              this.throwError( context, \"data unknown token found \" + token.type+\"/\"+token.data);\n            }\n        }\n\n        command.params=dataArray;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"SUB\") {\n\n        var label = \"\";\n        token = tokens.shift();\n        if( token == null ) { throw \"SUB expected label\"; }\n\n        if( token.type != \"name\" ) {\n          throw \"SUB expected label not '\" +token.data+ \"'\";\n        }\n\n        label = token.data.toUpperCase();\n\n        token = tokens.shift();\n        if( token != null ) { throw \"SUB unexpected data after label\"; }\n\n        command.label = label;\n        commands.push( command );\n\n      }\n      else if( controlToken == \"REM\" ) {\n\n        while( true ) {\n\n            token = tokens.shift();\n            if( token == null ) { break ; }\n        }\n\n        commands.push( command );\n\n      }\n      else {\n        this.throwError( context, command.controlKW + \" not implemented\");\n      }\n    }\n  }\n\n  parseStatementCall(  context, preTokens, commands, command, nameToken, token0 ) {\n\n    var token = token0;\n\t\tvar tokens = context.tokens;\n\n    command.statementName = this.normalizeStatementName( nameToken );\n    command.type = \"call\";\n\n\n    if( token.type != \"@@@notoken\") {\n      tokens.unshift( token );\n    }\n\n    command.params = [];\n\n    while ( true ) {\n\n      var endCommand = false;\n      var endTokens = [];\n      endTokens.push( { type: \"sep\", data: \"@@@all\" });\n      endTokens.push( { type: \"cmdsep\", data: \"@@@all\" });\n\n      var expression = this.parseBoolExpression( context, endTokens );\n      if( this.debugFlag ) {\n        console.log( expression );\n      }\n\n      if( expression != null ) {\n        command.params.push( expression );\n\n        token = tokens.shift();\n        if( token != undefined ) {\n          if( token === undefined ) {\n            endCommand = true;\n          }\n          if( token.type == \"cmdsep\" ) {\n            endCommand = true;\n          }\n          else if( token.type == \"sep\") {\n            continue;\n          }\n          else {\n            this.throwError( context, \"Unexpected characters in statement call: '\" + token.data +\"'\");\n          }\n        }\n        else {\n          endCommand = true;\n        }\n\n      }\n      else {\n        endCommand = true;\n      }\n\n      if( endCommand  ) {\n        commands.push( command );\n        break;\n      }\n    }\n  }\n\n\tparseLineCommands( context, preTokens ) {\n\n\t\tvar tokens = context.tokens;\n\t\tvar commands = [];\n    var handlers = {};\n\n\t\tvar i=1;\n\t\twhile( true ) {\n\n\t\t\tvar command = {};\n\t\t\tvar token;\n      var keyword = false;\n      var control = false;\n\n\t\t\tcommand.lineNumber = context.lineNumber;\n\n\t\t\ttoken = tokens.shift();\n\t\t\tif( token === undefined ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif( token.type == \"cmdsep\" ) {\n\t\t\t\t/* empty command */\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( token.type != \"name\" ) {\n\t\t\t\tif( token.type != \"trash\" ) {\n          this.throwError( context, \"Unexpected token, expected symbolname, got '\" + oken.data +\"'\") ;\n        }\n        else {\n          this.throwError( context, \"Unexpected character, expected \\\"symbolname\\\", got \" + token.detail ) ;\n        }\n\t\t\t}\n\n\t\t\tvar nameToken = token.data;\n\t\t\tvar cmdType = \"unknown\";\n\n\t\t\tif( this.CTRL_KW.indexOf( token.data ) > -1) {\n\t\t\t\t\tcontrol = true;\n\t\t\t}\n\n      if( this.KEYWORDS.indexOf( token.data ) > -1 || token.data == \"XON\") {\n\t\t\t\t\tkeyword = true;\n\t\t\t}\n      else {\n        if( this.SHORTCUT_KW.indexOf( token.data ) > -1) {\n  \t\t\t\t\tkeyword = true;\n  \t\t\t}\n      }\n\n\t\t  token = tokens.shift();\n\t\t\tif( token === undefined ) {\n\t\t\t\ttoken = { type: \"@@@notoken\" };\n\t\t\t}\n\n      if (  control ) {\n\n        this.parseControlStructure( context, preTokens, commands, command, handlers, nameToken, token );\n\n      }\n\t\t\telse if( token.type == \"eq\") {\n\n\t\t\t\tthis.parseAssignment( context, preTokens, commands, command, nameToken, token );\n\t\t\t}\n      else if( token.type == \"bracket\" && token.data==\"(\" && !keyword ) {\n\n\t\t\t\tthis.parseArrayAssignment( context, preTokens, commands, command, nameToken, token );\n\n\t\t\t}\n      else {\n          if( !keyword ) {\n            console.log(\"Dump: \",context, preTokens, commands, command, nameToken, token);\n            this.throwError( context, \"no such command: \" + nameToken );\n          }\n          this.parseStatementCall( context, preTokens, commands, command, nameToken, token );\n\n      }\n\n\t\t}\n\n    var result = {\n        commands: commands,\n        handlers: handlers\n      };\n\n    return result;\n\t}\n\n  logTokens( tokens ) {\n    if( !this.debugFlag ) { return ; }\n\n    var tokensStr = \"\";\n    for( var i=0; i<tokens.length; i++) {\n      var tok = tokens[i];\n      var tokStr = tok.type + \":\" + tok.data;\n      if( tokensStr != \"\" ) {\n        tokensStr += \", \";\n      }\n      tokensStr += tokStr;\n    }\n\n    console.log( tokensStr );\n\n\n    for( var i=0; i<tokens.length; i++) {\n        var tok = tokens[i];\n        console.log(\"token: \",tok);\n    }\n\n  }\n\n\n\n\n  parseErrorLine( line ) {\n\n    var lineRecord = {\n      lineNumber: -1,\n      commands: []\n    };\n\n    var errContext, detail, lineNr=-1;\n\n    errContext=\"tokenizer\";\n    detail=\"init\";\n\t\tvar toker = new Tokenizer( new StringReader ( line ), this.KEYWORDS );\n\n    detail=\"parsing tokens\";\n    var tokens = toker.tokenize();\n    if( this.debugFlag ) {\n      console.log(\"Tokens after tokenizer\");\n    }\n    this.logTokens( tokens );\n\n    detail=\"internal\";\n    tokens = this.upperCaseNameTokens( tokens );\n    tokens = this.removePadding( tokens );\n    tokens = this.mergeCompTokens( tokens );\n    tokens = this.mergeBrokenUpTokens( tokens );\n\n\n    if( this.debugFlag ) {\n      console.log(\"Tokens after merge\");\n    }\n    this.logTokens( tokens );\n\n    if( tokens.length == 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif( tokens[0].type == \"num\" ) {\n\t\t\tlineRecord.lineNumber = tokens[0].data;\n      lineNr = tokens[0].data;\n      var lineRest = line.substr( lineNr.length );\n      return this.parseLine( lineNr + \" REM[ERROR] \" + lineRest  );\n    }\n    else {\n      throw \"Expected line number, when reparsing line with error\";\n    }\n\n  }\n\n  parseLine( line ) {\n\n    var lineRecord = {\n      lineNumber: -1,\n      commands: []\n    };\n\n    var errContext, detail, lineNr=-1;\n    try {\n      errContext=\"tokenizer\";\n      detail=\"init\";\n  \t\tvar toker = new Tokenizer( new StringReader ( line ), this.KEYWORDS );\n\n      detail=\"parsing tokens\";\n      var tokens = toker.tokenize();\n      if( this.debugFlag ) {\n        console.log(\"Tokens after tokenizer\");\n      }\n      this.logTokens( tokens );\n\n      detail=\"internal\";\n      tokens = this.upperCaseNameTokens( tokens );\n      tokens = this.removePadding( tokens );\n      tokens = this.mergeCompTokens( tokens );\n      tokens = this.mergeBrokenUpTokens( tokens );\n\n\n      if( this.debugFlag ) {\n        console.log(\"Tokens after merge\");\n      }\n      this.logTokens( tokens );\n\n      if( tokens.length == 0 ) {\n  \t\t\treturn null;\n  \t\t}\n\n  \t\tif( tokens[0].type == \"num\" ) {\n  \t\t\tlineRecord.lineNumber = tokens[0].data;\n        lineNr = tokens[0].data;\n        tokens.shift();\n      }\n\n  \t\tvar context = {\n        tokens: tokens,\n        lineNumber: lineRecord.lineNumber\n      }\n\n      errContext = \"parser\";\n      detail=\"parsing commands\";\n      var result = this.parseLineCommands( context );\n      var commands = result.commands;\n      lineRecord.commands = commands;\n      lineRecord.raw = line;\n      lineRecord.handlers = result.handlers;\n      return lineRecord;\n    }\n    catch ( e ) {\n\n      if( this.erh.isError( e ) ) {\n        if( e.lineNr == -1 ) {\n          if( lineNr != -1 ) {\n            e.lineNr = lineNr;\n          }\n        }\n        throw e;\n      }\n      this.throwError( null, errContext + \" error (\" +e+ \") while \" + detail );\n    }\n  }\n\n  getTokens( line, merge, noPadding  ) {\n\n    try {\n      var toker = new Tokenizer( new StringReader ( line ), this.KEYWORDS );\n      var tokens = toker.tokenize();\n      if( noPadding) { tokens = this.removePadding( tokens ); }\n      if( merge ) {tokens = this.mergeCompTokens( tokens ); }\n      this.logTokens( tokens );\n      return tokens;\n    }\n    catch ( e ) {\n      console.log( e );\n      this.throwError(null,\"getTokens error\",\"internal\");\n    }\n  }\n}\n\n//--EOC \n\n// ## basictokenizer.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/basictokenizer.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/basictokenizer.js\n\nclass StringReader {\n\n\tconstructor( strIn ) {\n\t\t\tthis.buffer = strIn;\n\t\t\tthis.index = 0;\n\t\t\tthis.lineIndex = 1;\n\t\t\tthis.line = 1;\n\t\t\tvar a={}; a.b=strIn;\n\n\t}\n\n\tpeek() {\n\t\treturn this.buffer.substr( this.index,1 );\n\t}\n\tpeek2() {\n\t\treturn this.buffer.substr( this.index,2 );\n\t}\n\n\n\tunconsume( x ) {\n\t\tthis.index -= x;\n\t}\n\n\tconsume() {\n\n\t\tvar c = this.buffer.substr( this.index,1 );\n\t\tthis.index ++;\n\t\tif( c == \"\\n\") {\n\t\t\tthis.line++;\n\t\t\tthis.lineIndex = 1;\n\t\t}\n\n\t}\n\n\tEOF() {\n\t\tvar len = this.buffer.length;\n\t\tif( this.index < len ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n}\n\n\nclass Tokenizer {\n\n\tconstructor( reader, keywords ) {\n\t\t\tthis.tokens = [];\n\t\t\tthis.reader = reader;\n\t\t\tthis.keywords = keywords;\n\t\t\tthis.greedy = false;\n\t}\n\n\tisOpChar( ctx ) {\n\n\t\tvar rv = ctx.c.match(\"[+]|[-]|[*]|[/]|[\\\\%]|[\\\\^]|[;]\") != null;\n\n\t\treturn [rv,0];\n\n\t}\n\n\tisCompChar( ctx ) {\n\n\t\tvar rv =  (ctx.c == \"<\" || ctx.c == \">\");\n\t\treturn [rv,0];\n\t}\n\n\tisEqChar( ctx ) {\n\t\t\tif( ctx.c == \"=\" ) {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t}\n\n\n\tisNameChar( ctx  ) {\n\n\t\t//console.log(\"SEQ: \" + ctx.seq);\n\t\tif( ctx.endFound ) {\n\t\t\treturn [false,0];\n\t\t}\n\t\tvar rv = ctx.c.match(\"[a-zA-Z0-9$%?]\") != null;\n\n\t\tif( ctx.c== \"%\" ) {\n\t\t\t\trv = false;\n\t\t\t\tif( ctx.prev != null ) {\n\t\t\t\t\tvar varNameChar = ctx.prev.match(\"[a-zA-Z0-9]\") != null;\n\t\t\t\t\tif( varNameChar ) {\n\t\t\t\t\t\tctx.endFound = true;\n\t\t\t\t\t\trv = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\n\t\tif( ctx.c==\"$\" ) {\n\t\t\tctx.endFound = true;\n\t\t}\n\n\t\tif( this.greedy ) {\n\t\t\tif( this.keywords.indexOf( ctx.seq.toUpperCase() ) >-1 ) {\n\t\t\t\tctx.endFound = true;\n\t\t\t}\n\t\t\telse if( ! (ctx.seq === undefined )) {\n\t\t\t\tvar trappedKW = false;\n\t\t\t\tvar trapped = null;\n\t\t\t\tfor( var i=0; i<this.keywords.length; i++) {\n\t\t\t\t\tvar kw = this.keywords[i];\n\t\t\t\t\tif( ctx.seq.toUpperCase().indexOf( kw ) > 0 )  {\n\t\t\t\t\t\ttrappedKW = true;\n\t\t\t\t\t\ttrapped = kw;\n\t\t\t\t\t\treturn [rv, kw.length ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\treturn [rv,0];\n\t}\n\n\tisNumChar( ctx  ) {\n\t\treturn [(ctx.c.match(\"[0-9\\.~]\") != null),0];\n\t}\n\n\tisPadChar( ctx  ) {\n\t\t\tif( ctx.c == \" \" || ctx.c == \"\\t\" || ctx.c == \"\\n\" || ctx.c == \"\\r\") {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\n\t\t\treturn [false,0];\n\t}\n\n\tisCommandSepChar( ctx  ) {\n\t\t\tif( ctx.c == \":\" ) {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t}\n\n\n\tisSepChar( ctx  ) {\n\t\t\tif( ctx.c == \",\" ) {\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t}\n\n\tisAnyChar( ctx  ) {\n\t\t\treturn [true,0]; /* Will be executed last */\n\t}\n\n\tisBracket( ctx  ) {\n\t\tif( ctx.c == \"(\" || ctx.c == \")\" || ctx.c == \"[\" || ctx.c == \"]\") {\n\t\t\treturn [true,0];\n\t\t}\n\t\treturn [false,0];\n\t}\n\n\n\tisStrChar( ctx ) {\n\n\t\tif( ctx.endFound ) {\n\t\t\treturn [false,0];\n\t\t}\n\n\t\tif( ctx.index == 0) {\n\t\t\tif( ctx.c==\"\\\"\" ) {\n\t\t\t\tctx.inString = true;\n\t\t\t\treturn [true,0];\n\t\t\t}\n\t\t\treturn [false,0];\n\t\t}\n\t\telse if( ctx.inString ) {\n\t\t\tif ( ctx.index > 0 && ctx.c==\"\\\"\") {\n\t\t\t\tctx.endFound = true;\n\t\t\t}\n\t\t\treturn [true,0];\n\t\t}\n\n\t\treturn [false,0];\n\n\t}\n\n\tnormalizeToken( tok0 ) {\n\t\tvar tok = tok0;\n\n\t\ttok.type = tok0.type;\n\n\t\tif( tok.type == \"str\" ) {\n\t\t\t\ttok.data = tok0.data.substr(1,tok0.data.length-2);\n\t\t}\n\t\treturn tok;\n\t}\n\n\treadChars( read, type0, compareF, tokenType ) {\n\t\tvar tok = { type: type0, data : \"\" }\n\t\tvar ctx = { index:0, prev: null, seq: \"\" };\n\n\t\twhile(!read.EOF()) {\n\n\t\t\tvar c = read.peek();\n\n\t\t\tctx.seq += c;\n\t\t\tctx.c = c;\n\n\t\t\tvar rv = this[compareF ] ( ctx );\n\t\t\tif( rv[1] > 0 ) {\n\t\t\t\t\tread.unconsume( rv[1]-1 );\n\t\t\t\t\tctx.seq = ctx.seq.substr(0,ctx.seq.length-rv[1]) ;\n\t\t\t\t\ttok.data = ctx.seq;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif( !rv[0] ) {\n\t\t\t\treturn this.normalizeToken( tok );\n\t\t\t}\n\t\t\ttok.data += c;\n\t\t\tread.consume();\n\n\t\t\tctx.index++;\n\t\t\tctx.prev = c;\n\n\t\t\tif( tokenType == \"chr\") {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.normalizeToken( tok );\n\t}\n\n\n\ttokenize() {\n\t\tvar read = this.reader;\n\n\t\tvar _this = this;\n\t\tvar tokens = [];\n\n\t\tvar parseRules = [];\n\t\tvar TYPEIX = 0;\n\t\tvar FUNCIX = 1;\n\t\tvar STRINGTYPEIX = 2;\n\n\t\tparseRules.push([\"pad\", \t\t\"isPadChar\"\t\t, \"str\"] );\n\t\tparseRules.push([\"str\", \t\t\"isStrChar\"\t\t, \"str\"] );\n\t\tparseRules.push([\"num\", \t\t\"isNumChar\"\t\t, \"str\"] );\n\t\tparseRules.push([\"name\", \t\t\"isNameChar\"\t, \"str\"] );\n\t\tparseRules.push([\"op\", \t\t\t\"isOpChar\"   \t, \"chr\"] );\n\t\tparseRules.push([\"comp\", \t\t\"isCompChar\"  , \"chr\"] );\n\t\tparseRules.push([\"eq\", \t\t\t\"isEqChar\"   \t, \"chr\"] );\n\t\tparseRules.push([\"bracket\", \"isBracket\"   , \"chr\"] );\n\t\tparseRules.push([\"sep\", \t\t\"isSepChar\"   , \"chr\"] );\n\t\tparseRules.push([\"cmdsep\", \t\"isCommandSepChar\"   , \"chr\"] );\n\t\tparseRules.push([\"trash\", \t\"isAnyChar\"   , \"chr\"] );\n\n\t\twhile( !read.EOF() ) {\n\t\t\tvar c = read.peek();\n\t\t\tvar tokenFound = false;\n\n\t\t\tfor( var i=0; i<parseRules.length; i++) {\n\t\t\t\tvar rule = parseRules[ i ];\n\n\t\t\t\tvar ctx = { index: 0, c:c }\n\t\t\t\tvar rv = this[rule[FUNCIX]]( ctx );\n\t\t\t\tif( rv[0] ) {\n\t\t\t\t\t\tvar tok = this.readChars( read, rule[TYPEIX], rule[FUNCIX], rule[STRINGTYPEIX] );\n\n\t\t\t\t\t\tif( tok.type == \"name\") {\n\t\t\t\t\t\t\ttok.data = tok.data.toUpperCase();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( tok.type == \"trash\") {\n\t\t\t\t\t\t\ttok.detail = \"'\" + tok.data + \"' (ASCII-code=\" + tok.data.charCodeAt(0) + \")\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttokens.push( tok );\n\t\t\t\t\t\ttokenFound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//do nothing\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!tokenFound) {\n\t\t\t\tthrow \"syntax error, unexpected character: '\" + c + \"' =>\" + read.line + \":\" + read.lineIndex;\n\t\t\t}\n\t\t}\n\t\treturn tokens;\n\t}\n}\n\n//--EOC \n\n// ## input.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/input.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/input.js\n\nclass Input {\n\n  constructor( sys ) {\n    this.keyPress = [];\n    this.interactive = false;\n    this.sys = sys;\n  }\n\n  setHandler( hc ) {\n    this.handlerClazz = hc;\n  }\n\n  setInterActive( flag ) {\n\n    this.interactive = flag;\n    this.sys.blinkMode( flag  );\n\n  }\n\n\n  getInterActive() {\n\n    return this.interactive;\n\n  }\n\n\n  flush() {\n    this.keyPress = [];\n  }\n\n  inputKeyHandler( e )  {\n\n    var hc = this.handlerClazz;\n\n    if( e.keyLabel == \"Escape\" ) {\n        hc[\"stop\"]();\n        return;\n    }\n\n    hc[\"keyInterrupt\"]( \"keypress\", e );\n\n    if( !this.interactive ) {\n        this.keyPress.push( e );\n    }\n    else {\n        hc[\"interactiveKeyHandler\"]( e );\n      }\n  }\n\n  getKey() {\n    var key = this.keyPress.shift();\n    if( key ) {\n      return key;\n    }\n    return null;\n  }\n\n}\n\nclass MutedInput {\n\n  setHandler( hc ) {}\n  setActive( flag ) {}\n  getKey() { return null; }\n  inputKeyHandler(e) {}\n  getKey() { return null;}\n\n}\n\n//--EOC \n\n// ## processes.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/processes.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/processes.js\n\nclass processes {\n\n\tconstructor( sys ) {\n\n\t\tconst STATE_NULL \t\t= 9660;\n\t\tconst STATE_LASTSTATE = 9661;\n\t\tconst STATE_CLI = \t\t9670;\n\t\tconst STATE_RUNNING = 9671;\n\t\tconst STATE_INPUT \t= 9672;\n\t\tconst STATE_WAITING = 9673;\n\n\t\tthis.STATE_NULL \t\t\t= STATE_NULL;\n\t\tthis.STATE_LASTSTATE \t= STATE_LASTSTATE;\n\t\tthis.STATE_CLI \t\t\t\t= \t\tSTATE_CLI;\n\t\tthis.STATE_RUNNING \t\t= STATE_RUNNING;\n\t\tthis.STATE_INPUT \t\t\t= STATE_INPUT;\n\t\tthis.STATE_WAITING \t\t= STATE_WAITING;\n\n\t\tthis.sys = sys;\n\t\tthis.processes = [];\n\n\t\tvar _this = this;\n    var processes = _this.processes;\n\n\t\tthis.idlerInterval = null;\n\t\tthis.runInterval = null;\n\t\tthis.waitTimeOut = null;\n\n\t\tvar lastState = STATE_NULL;\n\t\tvar state = STATE_NULL;\n\n\t\tthis.avgIdlerTime = 10;\n\n\t\tvar changeState = function( newState, data ) {\n\n\t\t\t\tif( newState == STATE_INPUT ) {\n\t\t\t\t\t_this.killRuntimeInterval();\n\t\t\t\t}\n\t\t\t\telse if( newState == STATE_WAITING ) {\n\t\t\t\t\t_this.killRuntimeInterval();\n\t\t\t\t\t_this.startWaitingTimeOut( data );\n\t\t\t\t}\n\t\t\t\telse if( newState == STATE_CLI ) {\n\t\t\t\t\t_this.killRuntimeInterval();\n\t\t\t\t\t_this.killWaitingTimeOut();\n\t\t\t\t}\n\t\t\t\telse if( newState == STATE_RUNNING ) {\n\t\t\t\t\t_this.killWaitingTimeOut();\n\t\t\t\t\t_this.startRuntimeInterval( data );\n\t\t\t\t}\n\n\t\t\t\tlastState = state;\n\t\t\t\tstate = newState;\n\t\t}\n\n\t\tvar flags, pstate, update, wtime, p;\n\n\t\tthis.idlerFunction = function()  {\n\t\t\tvar m1 = new Date().getTime();\n\n\t\t\tif( state == STATE_RUNNING  || state == STATE_WAITING ) {\n\t\t\t\treturn; //don't steal cycles from running or waiting timer\n\t\t\t}\n\n\t\t\tp = processes[0];\n\n\t\t\tvar running = p.cpuNeeded();\n\t\t\tif( running>.1 ) { //we do not get this from cycle.  At least not in good time.\n\t\t\t\tvar stat = p.getStatus();\n\t\t\t\t_this.sys.poststatus( 0, stat );\n\n\t\t\t\tchangeState( STATE_RUNNING, running );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tflags = p.cycle();\n\n\t\t\tupdate = flags[ 0 ];\n\t\t\tpstate = flags[ 1 ];\n\t\t\twtime = flags[ 2 ];\n\n\t\t\tif( update ) {\n\t\t\t\tvar stat = p.getStatus();\n\t\t\t\t_this.sys.poststatus( 0, stat );\n\t\t\t}\n\n\t\t\tif( pstate != state ) {\n\t\t\t\tchangeState( pstate, wtime );\n\t\t\t}\n\n\t\t\tvar m2 = new Date().getTime();\n\t\t\tvar m3 = m2-m1;\n\n\t\t\t_this.avgIdlerTime = ((_this.avgIdlerTime * 99) + m3) / 100;\n\t\t}\n\n\t\tthis.runningFunction = function()  {\n\n\t\t\tif( state != STATE_RUNNING ) {\n\t\t\t\treturn; //should never get here\n\t\t\t}\n\n\t\t\t//p = processes[0];\n\t\t\tflags = p.cycle();\n\n\t\t\tpstate = flags[ 1 ];\n\t\t\twtime = flags[ 2 ];\n\n\t\t\tif( pstate != state ) {\n\t\t\t\tchangeState( pstate, wtime );\n\t\t\t}\n\n\t\t}\n\n\t\tthis.waitingFunction = function()  {\n\n\t\t\t_this.runInterval = null;\n\t\t\tp.clearWaiting();\n\t\t\tchangeState( lastState, 0 );\n\n\t\t\tif( state == STATE_RUNNING ) {\n\t\t\t\t_this.runningFunction();\n\t\t\t}\n\t\t}\n\n\t\tchangeState( STATE_CLI );\n}\n\n\tstartIdlerInterval()  {\n\t\tif( this.idlerInterval == null ) {\n\t\t\t\t //this.sys.log(\"Starting process interval (first register)\");\n\t\t\t\t this.idlerInterval = setInterval( this.idlerFunction, 200) ;\n\t\t}\n\t}\n\n\tstartRuntimeInterval( cpu )  {\n\t\tif( this.runInterval == null ) {\n\t\t\t\t //this.sys.log(\"Starting running interval \" + cpu);\n\n\t\t\t\t var iv = Math.floor( 220 - (200*cpu) );\n\t\t\t\t //this.sys.log(\"Starting running interval# \" + iv);\n\n\t\t\t\t this.runInterval = setInterval( this.runningFunction, iv) ;\n\t\t}\n\t}\n\n\tkillRuntimeInterval()  {\n\t\tif( this.runInterval != null ) {\n\t\t\t\t //this.sys.log(\"Stopping running interval\");\n\t\t\t\t clearInterval( this.runInterval ) ;\n\t\t\t\t this.runInterval = null;\n\t\t}\n\t}\n\n\tstartWaitingTimeOut( t )  {\n\t\tif( this.waitTimeOut == null ) {\n\t\t\t\t //this.sys.log(\"Starting waiting timeout \" + t);\n\t\t\t\t this.waitTimeOut = setTimeout( this.waitingFunction, t, t ) ;\n\t\t}\n\t}\n\n\tkillWaitingTimeOut()  {\n\t\tif( this.waitTimeOut != null ) {\n\t\t\t\t //this.sys.log(\"Stopping running wait timeout!!\");\n\t\t\t\t clearTimeout( this.waitTimeOut ) ;\n\t\t\t\t this.waitTimeOut = null;\n\t\t}\n\t}\n\n/*\n\n\n\t\tvar togglerSpeedFunction = function()  {\n\n\t\t\tfastloop = false;\n\n\t\t\tfor( var i=0; i<processes.length; i++ ) {\n\t\t\t\tvar p = processes[i];\n\t\t\t\tvar psl = psleep[i];\n\n\t\t\t\tif( p ) {\n\n\t\t\t\t\t\tvar cpuHungry =  processes[ i ].cpuNeeded();\n\t\t\t\t\t\tvar found = _this.fastProcesses[ i ];\n\n\t\t\t\t\t\tif( !cpuHungry ) {\n\t\t\t\t\t\t\tvar debugPoint = 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( cpuHungry && !found) {\n\t\t\t\t\t\t\t_this.fastProcesses[ i ] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( !cpuHungry && found) {\n\t\t\t\t\t\t\t\t_this.fastProcesses[ i ] = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( _this.fastProcesses[ i ] ) {\n\t\t\t\t\t\t\tfastloop = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tvar cycleFunction = function()  {\n\n\t\t\tvar flags, upd, wait, time;\n\n\t\t\tvar m = null;\n\n\t\t\tfor( var i=0; i<processes.length; i++ ) {\n\t\t\t\tvar p = processes[i];\n\t\t\t\tvar psl = psleep[i];\n\n\t\t\t\tif( p ) {\n\n\t\t\t\t\tif( psl > 0 ) {\n\n\t\t\t\t\t\tif( m === null ) {\n\t\t\t\t\t\t\tm = new Date().getTime();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( m<psl ) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpsleep[i] = 0;\n\t\t\t\t\t\tp.clearWaiting();\n\t\t\t\t\t}\n\n\t\t\t\t\tflags = p.cycle();\n\n\t\t\t\t\tupd = flags[ 0 ];\n\t\t\t\t\twait = flags[ 1 ];\n\n\t\t\t\t\tif( wait ) {\n\t\t\t\t\t\tvar time = flags[ 2 ];\n\n\t\t\t\t\t\tif( m === null ) {\n\t\t\t\t\t\t\t\tvar m = new Date().getTime();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpsleep[i] = m + time  + 10;\n\t\t\t\t\t}\n\n\t\t\t\t\tif( upd ) {\n\t\t\t\t\t\tvar stat = processes[ i ].getStatus();\n\t\t\t\t\t\t_this.sys.poststatus( i, stat );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( fastloop ) {\n\t\t\t\tsetTimeout( cycleFunction, 10 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsetTimeout( cycleFunction, 100 );\n\t\t\t}\n\n\t\t};\n\n\n\t\tchangeState\n\n\t\tsetInterval( togglerSpeedFunction, 100) ;\n\t\tsetTimeout( cycleFunction, 100 );\n\n\n*/\n\n\n\tgetTicks() {\n\t\treturn this.count;\n\t}\n\n\tget( id ) {\n\t\treturn this.processes[ id ];\n\t}\n\n\tregister( obj ) {\n\n\t\tvar newId = this.processes.length;\n\n\t\tthis.processes.push( obj );\n\t\t//this.processesSleep.push( 0 );\n\t\t//this.fastProcesses.push( false );\n\n\t\tobj.processId = newId;\n\t\tobj.procIf = this;\n\n\t\tthis.startIdlerInterval();\n\n\t\treturn newId;\n\t}\n\n\n\tgetRoot() {\n\n\t\treturn this.processes[ 0 ];\n\t}\n}\n\n//--EOC \n\n// ## commandhelp.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/commandhelp.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/commandhelp.js\n\nclass CommandHelp {\n\n\tconstructor() {}\n\n\n  getCategoriesNormalize(  categoryIndexesInt ) {\n    var categoryIndexes = [\n      Object.getOwnPropertyNames( categoryIndexesInt[0] ),\n      categoryIndexesInt[1]\n    ];\n    return categoryIndexes;\n  }\n\n  getCategoriesIntermediate(  categoryIndexes, clazz ) {\n\n\n    var stats = clazz.getStatements( true );\n    var funs = clazz.getFunctions( true );\n\n    var cat = categoryIndexes[ 0 ];\n    var catLists = categoryIndexes[ 1 ];\n\n    if( cat[ \"general\" ] === undefined ) { cat[ \"general\" ] = 0; catLists[ \"general\" ] = []; }\n\n    for( var i=0;i<stats.length;i++) {\n      var rname = stats[i];\n      var si = rname.replace(\"_stat_\",\"_stat_info_\");\n\n      var catlabel;\n      if( !( clazz[ si ] === undefined ) ) { catlabel = clazz[ si ](); }\n      else { catlabel = \"general\"; }\n\n      var f_attribs = {};\n      if( catlabel.indexOf(\":\") >0 ) {\n\n        var partsLen = catlabel.split(\":\" ).length;\n\n        f_attribs.description =  catlabel.split(\":\" )[1];\n        f_attribs.input =   catlabel.split(\":\" )[2];\n        f_attribs.output =  catlabel.split(\":\" )[3];\n\n        catlabel=catlabel.split(\":\")[0];\n      }\n\n      rname = rname.replace(\"_stat_\",\"\").toUpperCase();\n\n      if( cat[ catlabel ] === undefined ) { cat[ catlabel ] = 0; catLists[ catlabel ] = []; }\n      cat[ catlabel ]++;\n      catLists[ catlabel ].push( {name: rname, attribs: f_attribs } );\n    }\n\n    for( var i=0;i<funs.length;i++) {\n      var rname = funs[i];\n      var si = rname.replace(\"_fun_\",\"_fun_info_\");\n\n      var catlabel;\n      if( !( clazz[ si ] === undefined ) ) { catlabel = clazz[ si ](); }\n      else { catlabel = \"general\"; }\n      var f_attribs = {};\n\n      if( catlabel.indexOf(\":\") >0 ) {\n\n          var partsLen = catlabel.split(\":\" ).length;\n\n          f_attribs.description =  catlabel.split(\":\" )[1];\n          f_attribs.input =   catlabel.split(\":\" )[2];\n          f_attribs.output =  catlabel.split(\":\" )[3];\n\n          catlabel=catlabel.split(\":\")[0];\n      }\n\n      rname = rname.replace(\"_fun_\",\"\").replace(\"_DLR_\",\"$\").toUpperCase() + \"()\";\n\n      if( cat[ catlabel ] === undefined ) { cat[ catlabel ] = 0; catLists[ catlabel ] = []; }\n      cat[ catlabel ]++;\n      catLists[ catlabel ].push( {name: rname, attribs: f_attribs } );\n    }\n\n    //var cats = Object.getOwnPropertyNames( cat );\n\n    return [cat,catLists];\n  }\n}\n\n//--EOC \n\n// ## ../../rwbuffers/worker/textarea.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/../../rwbuffers/worker/textarea.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/../../rwbuffers/worker/textarea.js\n\nclass TextArea {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.cursorOn = false;\n\t\tthis.cols = 80;\n\t\tthis.rows = 30;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.hidden = false;\n\n\t\tthis.dc = false;\n\t\tthis.dcCmd = false;\n\n\t\tthis.colors ={};\n\t\tthis.reverse = false;\n\n\t\tthis.defaultFG = 5;\n\t\tthis.defaultBG = 0;\n\n\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\tthis.initialized = false;\n\n\t\tthis.changes = { all: false, list: [] };\n\t\tthis.pokeFlush = true;\n\n\n\t\t//this.textArea( this.cols , this.rows , -1, -1 );\n\t}\n\n\tisActive() {\n    return this.initialized && !this.hidden;\n  }\n\n\treInit( w, h ) {\n\t\tthis._int_initMode( w, h );\n\t}\n\n\n\tdestroy() {\n\n\t\t\tthis.cellel = undefined;\n\n\t\t\tthis.changes = { all: false, list: [] };\n\t\t\tthis.initialized = false;\n\t\t}\n\n\n  /* Adding changes, to be posted to MT throught flush */\n\t_int_addChangeAll() {\n\n\t\t this.changes.all = true;\n\t\t this.changes.list = [];\n\n\t }\n\n\n\n\t changeCount() {\n\t\t if( this.changes.all ) { return 65535; }\n\t\t return this.changes.list.length;\n\t }\n\n\t/* Adding single change, to be posted to MT throught flush */\n\t_int_addChange( area ) {\n\n\t\t\tif(  this.changes.all ) {\n\t\t\t\tif( this.changes.list.length > 0 ) {\n\t\t\t\t\t\tthis.changes.list = [];\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar clist = this.changes.list;\n\t\t\tif( clist.length > 0 ) {\n\t\t\t\tvar lc = clist[ clist.length -1 ];\n\t\t\t\tvar nc = area;\n\t\t\t\tif( lc.y1 == lc.y2 && nc.y1 == nc.y2 && lc.y1 == nc.y1) {\n\t\t\t\t\tif( nc.x1 == lc.x2 +1 ) {\n\t\t\t\t\t\t\tvar x2 = lc.x2;\n\t\t\t\t\t\t\tvar temp=1;\n\t\t\t\t\t\t\tvar changesTargetArray = lc.cells[0];\n\t\t\t\t\t\t\tfor( var i=0; i<area.cells[0].length; i++) {\n\t\t\t\t\t\t\t\tvar cell = area.cells[0][i];\n\t\t\t\t\t\t\t\tchangesTargetArray.push( cell );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlc.x2 = nc.x2;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t \tthis.changes.list.push( area );\n\n\t }\n\n\t /* Force flush to MT the whole buffer */\n\t_int_flushAll() {\n\t\t\tthis.changes.all = true;\n\t\t\tthis.changes.list = [];\n\n\t\t\tthis._int_flush();\n\n\t\t}\n\n  /* Utility function to prepare input for addChange (which itself prepares for flush )*/\n\t_int_getArea( x1, y1, x2, y2 ) {\n\t\t\tvar cells = [];\n\n\t\t\tfor( var y=y1; y<=y2; y++) {\n\t\t\t\tvar row = [];\n\t\t\t\tfor( var x=x1; x<=x2; x++) {\n\t\t\t\t\trow.push( this.cellel[ y][ x] );\n\t\t\t\t}\n\t\t\t\tcells.push( row );\n\t\t\t}\n\n\t\t\tvar area =\n\t\t\t{\n\t\t\t\t cells: cells,\n\t\t\t\t x1: x1,\n\t\t\t\t y1: y1,\n\t\t\t\t x2: x2,\n\t\t\t\t y2: y2\n\t\t\t};\n\n\t\t\treturn area;\n\n\t\t}\n\n   /* Flush local changes to Main Thread for actual display updates*/\n\t _int_flush() {\n\n\t\t\tif( this.changes.all ) {\n\t\t\t\tthis.sys.post( \"textupdate-all\",\n\t\t\t\t\t\t{\n \t\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\t\tbg: this.colors.txtBgColor,\n\t\t\t\t\t\t\tcx: this.x,\n\t\t\t\t\t\t\tcy: this.y,\n\t\t\t\t\t\t\tcells: this.cellel,\n\t\t\t\t\t\t\tcursorMode: this.cursorMode\n\t\t\t\t\t\t} );\n\n\t\t\t\tthis.changes.all = false;\n\n\n\t\t\t}\n\t\t\telse if( this.changes.list.length > 0 ) {\n\n\t\t\t\tthis.sys.post( \"textupdate\",\n\t\t\t\t\t{\n\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\tbg: this.colors.txtBgColor,\n\t\t\t\t\t\tcx: this.x,\n\t\t\t\t\t\tcy: this.y,\n\t\t\t\t\t\tareasList:  this.changes.list,\n\t\t\t\t\t\tcursorMode: this.cursorMode\n\t\t\t\t\t}  );\n\t\t\t\tthis.changes.list = [];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.sys.post( \"textupdate\",\n\t\t\t\t\t{\n\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\tbg: this.colors.txtBgColor,\n\t\t\t\t\t\tcx: this.x,\n\t\t\t\t\t\tcy: this.y,\n\t\t\t\t\t\tareasList:  [],\n\t\t\t\t\t\tcursorMode: this.cursorMode\n\t\t\t\t\t}  );\n\n\t\t\t}\n\n\t\t}\n\n\t\tattach( w, h ) {\n\t\t\tthis._int_initMode( w, h);\n\t\t}\n\n\t\tsetPokeFlush( flag ) {\n\t\t  this.pokeFlush = flag;\n\t\t}\n\n\n\t\tpeekc( x, y ) {\n\n\t\t\tvar cell = this.cellel[y][x];\n     \treturn cell.txt.codePointAt(0);\n\n\t\t}\n\n\t\tpeekcl( x, y, m ) {\n\n\t\t\tvar cell = this.cellel[y][x];\n\n\t\t\tif( m== 0 ) {\n\t\t\t\treturn cell.fg;\n\t\t\t}\n\t\t\telse if( m== 1 ) {\n\t\t\t\treturn cell.bg;\n\t\t\t}\n\t\t\telse  {\n\t\t\t\treturn cell.fg + (16*cell.bg);\n\t\t\t}\n\t\t}\n\n\t\tpokec( x, y , c ) {\n\n\t\t\ttry {\n\t\t\t\tvar cell = this.cellel[y][x];\n\t\t\t\tcell.txt = String.fromCodePoint( c );\n\n\t\t\t\tvar area = this._int_getArea( x, y, x, y );\n\t\t\t\tthis._int_addChange( area );\n\n\t\t\t\tif( this.pokeFlush ) {\n\t\t\t\t\tthis._int_flush();\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch( e ) {\n\t\t\t\tthrow \"Cannot pokec to adress (\" + x + \",\" + y + \")\";\n\t\t\t}\n\n\t\t}\n\n\t\tpokecl( x, y , fg, bg ) {\n\n\t\t\ttry {\n\t\t\t\tvar cell = this.cellel[y][x];\n\t\t\t\tif( !(fg === undefined )) {\n\t\t\t\t\tcell.fg = fg;\n\t\t\t\t}\n\t\t\t\tif( !(bg === undefined )) {\n\t\t\t\t\tcell.bg = bg;\n\t\t\t\t}\n\t\t\t\tvar area = this._int_getArea( x, y, x, y );\n\t\t\t\tthis._int_addChange( area );\n\n\t\t\t\tif( this.pokeFlush ) {\n\t\t\t\t\tthis._int_flush();\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcatch( e ) {\n\t\t\t\tthrow \"Cannot pokec to adress (\" + x + \",\" + y + \")\";\n\t\t\t}\n\t\t}\n\n\n\t\tpokeccl( x, y , c, fg, bg ) {\n\n\t\t\ttry {\n\t\t\t\tvar cell = this.cellel[y][x];\n\n\t\t\t\tcell.txt = String.fromCodePoint( c );\n\t\t\t\tif( !(fg === undefined )) {\n\t\t\t\t\tcell.fg = fg;\n\t\t\t\t}\n\t\t\t\tif( !(bg === undefined )) {\n\t\t\t\t\tcell.bg = bg;\n\t\t\t\t}\n\n\t\t\t\tvar area = this._int_getArea( x, y, x, y );\n\t\t\t\tthis._int_addChange( area );\n\n\t\t\t\tif( this.pokeFlush ) {\n\t\t\t\t\tthis._int_flush();\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcatch( e ) {\n\t\t\t\tthrow \"Cannot pokec to adress (\" + x + \",\" + y + \")\";\n\t\t\t}\n\t\t}\n\n\t\ttriggerFlush() {\n\n\t\t\tthis._int_flush();\n\t\t}\n\n\t\t_int_initMode( w, h ) {\n\n\t\t\tif( this.initialized ) {\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t\tvar sys = this.sys;\n\t\t\t//var msgs = sys.init.queuedMessages; TODO, what to do with queued messages\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t\tthis.rows = h;\n\t\t\tthis.cols = w;\n\n\t\t\tthis.textArea( this.cols, this.rows, -1, -1 );\n\n\t\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\t\tthis.cellel = [];\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar rowArray = [];\n\t\t\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\t\t\tvar cell = {\n\t\t\t\t\t\ttxt: \" \",\n\t\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\t\tbg: this.colors.txtBgColor\n\t\t\t\t\t}\n\t\t\t\t\trowArray.push( cell );\n\t\t\t\t}\n\t\t\t\tthis.cellel.push( rowArray );\n\t\t\t}\n\n\t\t\tthis.changes = { all: true, list: [] };\n\n \t\t  var _this = this;\n\n\t\t\tthis._int_flushAll();\n\n\t\t\tthis.sys.log(\"TEXTAREA w Ready.\");\n\n\t\t\tthis.initialized = true;\n\t\t\tthis.pokeFlush = true;\n\t\t\t/* if true then all pokes in \"character memory\" will be flushed immediately to the */\n\t\t\t/*main browswer process */\n\t}\n\n\n\tgetDimensions() {\n\t\t\treturn [this.cols, this.rows ];\n\t}\n\n\tgetCurrentLine() {\n\t\tvar y = this.y;\n\t\tvar str = \"\";\n\t\tfor( var i = 0; i< this.acols; i++) {\n\t\t\tvar xi = i + this.ax0;\n\t\t\tstr += this.cellel[ y ][ xi ].txt;\n\t\t}\n\t\treturn str;\n\t}\n\n\tgetLineFrom( x0, y ) {\n\n\t\tvar str = \"\";\n\t\tvar x2 = this.acols + this.ax0 - 1;\n\n\t\tfor( var i = x0; i< x2; i++) {\n\t\t\tstr += this.cellel[ this.ay0 + y ][ i ].txt;\n\t\t}\n\t\treturn str;\n\t}\n\n\t/* Commands and functions to modify the text area buffer */\n\n\n\tsetDefault( fg, bg ) {\n\t\tthis.defaultBG = bg;\n\t\tthis.defaultFG = fg;\n\n\t}\n\n\n\tcolorReset() {\n\n\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\t//this.cellel = [];\n\t\tvar fg = this.defaultFG;\n\t\tvar bg = this.defaultBG;\n\n\t\tfor( var ay=0; ay<this.rows; ay++) {\n\t\t\t//var rowArray = [];\n\n\t\t\tvar y = ay;\n\t\t\tfor( var ax=0; ax<this.cols; ax++) {\n\n\t\t\t\tvar x = ax;\n\n\t\t\t\tvar cell = this.cellel[ y ][ x];\n\n\t\t\t\tcell.fg = fg;\n\t\t\t\tcell.bg = bg;\n\t\t\t}\n\t\t\t//this.cellel.push( rowArray );\n\t\t}\n\n\t\tthis.changes = { all: true, list: [] };\n\n\t\tthis._int_flushAll();\n\t}\n\n\treset() {\n\t\tthis.textArea( this.cols, this.rows, -1, -1 );\n\n\t\tthis.colors.txtBgColor= this.defaultBG;\n\t\tthis.colors.txtColor = this.defaultFG;\n\n\t\tthis.pokeFlush = true;\n\t\tthis.clear();\n\n\t}\n\n\ttextArea( w, h, xo, yo ) {\n\t\tvar divx = this.cols - w;\n\t\tvar divy = this.rows - h;\n\n\t\tif( xo < 0 ) {\n\t\t\t\tthis.ax0 = Math.floor(divx / 2);\n\t\t}\n\t\telse {\n\t\t\tthis.ax0 = xo;\n\t\t}\n\n\t\tif( yo < 0 ) {\n\t\t\t\tthis.ay0 = Math.floor(divy / 2);\n\t\t}\n\t\telse {\n\t\t\tthis.ay0 = yo;\n\t\t}\n\n\t\tthis.acols = w;\n\t\tthis.arows = h;\n\t\tthis.x = this.ax0;\n\t\tthis.y = this.ay0;\n\t}\n\n\tclear() {\n\n\t\t//this.cellel = [];\n\t\tfor( var ay=0; ay<this.arows; ay++) {\n\t\t\t//var rowArray = [];\n\n\t\t\tvar y = this.ay0 + ay;\n\t\t\tfor( var ax=0; ax<this.acols; ax++) {\n\n\t\t\t\tvar x = this.ax0 + ax;\n\n\t\t\t\tvar cell = {\n\t\t\t\t\ttxt: \" \",\n\t\t\t\t\tfg: this.colors.txtColor,\n\t\t\t\t\tbg: this.colors.txtBgColor\n\t\t\t\t}\n\t\t\t\tthis.cellel[ y ][ x] = cell;\n\t\t\t}\n\t\t\t//this.cellel.push( rowArray );\n\t\t}\n\n\t\tthis.changes = { all: true, list: [] };\n\n\t\tthis.x = this.ax0;\n\t\tthis.y = this.ay0;\n\n\t\tthis._int_flushAll();\n\t}\n\n\n\tjumpTo( destination ) {\n\t\tif( destination == \"home\" ) {\n\t\t\tthis.y = this.ay0;\n\t\t\tthis.x = this.ax0;\n\t\t}\n\t\tif( destination == \"end\" ) {\n\t\t\tthis.y = this.ay0 + this.arows - 1;\n\t\t\tthis.x = this.ax0 + this.acols - 1;\n\t\t}\n\t\telse if( destination == \"line-start\" ) {\n\t\t\tthis.x = this.ax0;\n\t\t}\n\t\telse if( destination == \"line-end\" ) {\n\t\t\tthis.x = this.ax0 + this.acols - 1;\n\t\t}\n\t\telse if( destination == \"text-end\" ) {\n\n\t\t\t/* where is the last char -> maxX */\n\t\t\tvar c = \"DC\";\n\t\t\tvar oldx = this.x;\n\t\t\tthis.x = ((this.ax0 + this.acols)-1);\n\t\t\tvar max = ((this.ax0 + this.acols)-1);\n\n\t\t\twhile( this.x >= this.ax0 ) {\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t\t\t\tif( c != \" \" ) {\n\t\t\t\t\t\t\tthis.x++;\n\t\t\t\t\t\t\tif( this.x > max) {\n\t\t\t\t\t\t\t\tthis.x = max;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.x--;\n\t\t\t}\n\n\t\t\tvar maxX = this.x;\n\t\t\t/*-reset, and jump to end of next text area-*/\n\t\t\tthis.x = oldx;\n\t\t\tvar c = \"DC\";\n\t\t\twhile( this.x< ((this.ax0 + this.acols)-1) && c != \" \") {\n\t\t\t\t\t\tthis.x++;\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t}\n\n\n\t\t\t/*make sure we did not jump past last char*/\n\t\t\tif( this.x > maxX ) {\n\t\t\t\tthis.x = maxX;\n\t\t\t}\n\t\t}\n\t\telse if( destination == \"text-end-all\" ) {\n\t\t\tvar c = \"DC\";\n\t\t\tthis.x = ((this.ax0 + this.acols)-1);\n\t\t\tvar max = ((this.ax0 + this.acols)-1);\n\n\t\t\twhile( this.x >= this.ax0 ) {\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t\t\t\tif( c != \" \" ) {\n\t\t\t\t\t\t\tthis.x++;\n\t\t\t\t\t\t\tif( this.x > max) {\n\t\t\t\t\t\t\t\tthis.x = max;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.x--;\n\t\t\t}\n\t\t}\n\t\telse if( destination == \"text-start\" ) {\n\t\t\tvar c = \"DC\";\n\t\t\twhile( this.x> this.ax0 && c != \" \") {\n\t\t\t\t\t\tthis.x--;\n\t\t\t\t\t\tc = this.cellel[ this.y ][ this.x ].txt;\n\t\t\t}\n\t\t}\n\n\t\tthis._int_flush();\n\t}\n\n\tcursorMove( dir ) {\n\t\tif( dir == \"up\" ) {\n\t\t\tif( this.y>this.ay0) {\n\t\t\t\tthis.y--;\n\t\t\t}\n\t\t}\n\t\telse if( dir == \"down\" ) {\n\t\t\tif( this.y< ((this.ay0 + this.arows)-1)) {\n\t\t\t\tthis.y++;\n\t\t\t}\n\t\t\telse if( this.y== ((this.ay0 + this.arows)-1)) {\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis._int_addChangeAll();\n\t\t\t}\n\t\t}\n\t\tif( dir == \"left\" ) {\n\t\t\tif( this.x>this.ax0) {\n\t\t\t\tthis.x--;\n\t\t\t}\n\t\t}\n\t\telse if( dir == \"right\" ) {\n\t\t\tif( this.x< ((this.ax0 + this.acols)-1)) {\n\t\t\t\tthis.x++;\n\t\t\t}\n\t\t}\n\t\tthis._int_flush();\n\t}\n\n\tbackspace() {\n\t\tif( this.x != this.ax0 ) {\n\t\t\t\tthis.x--;\n\t\t}\n\n\t\tthis.__int_scrollLineLeftFrom( this.x, this.y );\n\n\t\tvar area = this._int_getArea( this.x, this.y, this.cols-1, this.y, );\n\t\tthis._int_addChange( area );\n\t\tthis._int_flush();\n\t}\n\n\tdelete() {\n\n\t\tthis.__int_scrollLineLeftFrom( this.x, this.y );\n\n\t\tvar area = this._int_getArea( this.x, this.y, this.cols-1, this.y, );\n\t\tthis._int_addChange( area );\n\t\tthis._int_flush();\n\t}\n\n\tnl() {\n\n\t\t\tthis.x = this.ax0;\n\t\t\tthis.y ++;\n\t\t\tvar ya = this.y - this.ay0;\n\n\t\t\tif( ya >= this.arows ) {\n\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis.y = this.ay0 + (this.arows -1);\n\n\t\t\t\tthis._int_flushAll();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._int_flush();\n\n\t}\n\n\t__int_nl() {\n\t\t\tthis.x = this.ax0;\n\t\t\tthis.y ++;\n\t\t\tvar ya = this.y - this.ay0;\n\t\t\tif( ya >= this.arows ) {\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis.y = this.ay0 + (this.arows -1);\n\t\t\t\treturn { scroll: true }\n\t\t\t}\n\t\t\treturn { scroll: false }\n\n\t}\n\n\twriteln( str ) {\n\n\t\t\tfor( var i=0; i<str.length; i++) {\n\t\t\t\tvar c = str.substr(i,1);\n\t\t\t\tthis.__int_write_direct_ch( c );\n\t\t\t}\n\t\t\tvar stat = this.__int_nl();\n\t\t\tif( stat.scroll ) {\n\t\t\t\t\tthis._int_addChangeAll();\n\t\t\t}\n\t\t\tthis._int_flush();\n\t}\n\n\t_int_write( str, insert ) {\n\t\tfor (const c of str) {\n\t\t\tthis.__int_write_direct_ch( c, insert );\n\t\t}\n\t}\n\n\twrite( str ) {\n\t\t\tthis._int_write( str );\n\n\t\t\tthis._int_flush();\n\t}\n\n\n\tinsert( str ) {\n\t\t\tthis._int_write( str, true );\n\n\t\t\tthis._int_flush();\n\t}\n\n\n\n\n\t__int_scrollLinesDownFrom( y  ) {\n\n\t\t\tfor( var yy=this.rows-1; yy>y; yy-- ) {\n\t\t\t\tfor( var xx=0; xx<this.cols; xx++ ) {\n\n\t\t\t\t\tvar cell1 = this.cellel[ yy-1  ][ xx ];\n\t\t\t\t\tvar cell2 = this.cellel[ yy  ]  [ xx];\n\n\t\t\t\t\tcell2.fg = cell1.fg;\n\t\t\t\t\tcell2.bg = cell1.bg;\n\t\t\t\t\tcell2.txt = cell1.txt;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor( var xx=0; xx<this.cols; xx++ ) {\n\n\t\t\t\tvar cell1 = this.cellel[ yy  ][ xx ];\n\n\t\t\t\tcell1.txt = \" \";\n\n\t\t\t}\n\n\t\t\tthis._int_addChangeAll();\n\n\t}\n\n\n\tScrollDownByCurrentLine() {\n\n\t\tif( (this.y ) < (this.rows-1) ) {\n\t\t\tthis.__int_scrollLinesDownFrom( this.y );\n\t\t\tthis._int_flush();\n\t\t}\n\t}\n\n\t__int_scrollLineRightFrom( x0, y  ) {\n\n\t\tvar x = x0;\n\t\tvar x1 = this.ax0 + this.acols - 1;\n\n\t\tif( x0 == x1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor( var i=x1; i>x0; i--) {\n\t\t\tvar cell1 = this.cellel[ y  ][ i-1 ];\n\t\t\tvar cell2 = this.cellel[ y  ][ i ];\n\n\t\t\tcell2.fg = cell1.fg;\n\t\t\tcell2.bg = cell1.bg;\n\t\t\tcell2.txt = cell1.txt;\n\t\t}\n\t}\n\n\t__int_scrollLineLeftFrom( x0, y  ) {\n\n\t\tvar x = x0;\n\t\tvar x1 = this.ax0 + this.acols - 1;\n\n\t\tif( x0 == x1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor( var i=x0; i<x1; i++) {\n\t\t\tvar cell1 = this.cellel[ y  ][ i +1 ];\n\t\t\tvar cell2 = this.cellel[ y  ][ i ];\n\n\t\t\tcell2.fg = cell1.fg;\n\t\t\tcell2.bg = cell1.bg;\n\t\t\tcell2.txt = cell1.txt;\n\t\t}\n\n\n\t}\n\n\t__int_write_direct_ch( ch, insert ) {\n\n\t\tvar code = ch.codePointAt(0);\n\n\t\tif( this.dc && this.dcCmd ) {\n\n\t\t\tthis.dc = false;\n\t\t\tthis.dcCmd = false;\n\t\t\tthis._int_control( this.dcCmdCode, code );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif( this.dc && !this.dcCmd ) {\n\t\t\tthis.dcCmd = true;\n\t\t\tthis.dcCmdCode = code;\n\t\t\treturn;\n\t\t}\n\n\t\tif( code == 17 ) {\n\t\t\t//DC1\n\t\t\tthis.dc = true;\n\t\t\tthis.dcCmd = false;\n\t\t\treturn;\n\t\t}\n\n\t\tvar cell = this.cellel[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tvar area;\n\n\t\tif( insert ) {\n\t\t\tthis.__int_scrollLineRightFrom( this.x, this.y );\n\n\t\t\tarea = this._int_getArea( this.x, this.y, this.ax0 + this.acols-1, this.y );\n\t\t\tthis._int_addChange( area );\n\n\t\t}\n\n\t\tcell.txt = ch;\n\n\t\tif( !this.reverse  ) {\n\t\t\tcell.fg = this.colors.txtColor;\n\t\t\tcell.bg = this.colors.txtBgColor;\n\t\t}\n\t\telse {\n\t\t\tcell.bg = this.colors.txtColor;\n\t\t\tcell.fg = this.colors.txtBgColor;\n\t\t}\n\n\t\tvar oldx = this.x;\n\t\tvar oldy = this.y;\n\n\t\tthis.x++;\n\t\tvar ax = this.x - this.ax0;\n\t\tif( ax > (this.acols-1) ) {\n\t\t\tthis.x = this.ax0;\n\t\t\tvar stat = this.__int_nl();\n\t\t\tif( stat.scroll ) {\n\t\t\t\tthis._int_addChangeAll();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tarea = this._int_getArea( oldx, oldy, oldx, oldy );\n\t\tthis._int_addChange( area );\n\t\t//this._int_addChangeAll();\n\n\t}\n\n\twritec( chr ) {\n\n\t\tif( chr == \"\\n\" ) {\n\t\t\tvar stat = this.__int_nl();\n\t\t\tif( stat.scroll ) {\n\t\t\t\t\tthis._int_addChangeAll();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tthis.__int_write_direct_ch( chr );\n\t\tthis._int_flush();\n\t}\n\n\n\tsetFilter( f ) {\n\t\tthis.sys.post( \"gfilter\", { d: f }  );\n\t}\n\n\t_int_control( chr, data ) {\n\n\t\tif( chr == 16 ) {\n\t\t\tthis.colors.txtColor = data;\n\t\t}\n\t\telse if( chr == 17 ) {\n\t\t\tthis.colors.txtBgColor = data;\n\t\t}\n\t\telse if( chr == 18 ) {\n\t\t\tthis.sys.post( \"border\", { d: data }  );\n\t\t}\n\t\telse if( chr == 24 ) {  //CANCEL -> (we map it to) Clear Screen\n\t\t\tthis.clear();\n\t\t}\n\t\telse if( chr == 12 ) {  //FORMFEED -> (we map it to) RESET SCREEN\n\t\t\tthis.reset();\n\t\t}\n\t\telse if( chr == 25 ) {  //End of Medium -> (we map it to) Hide\n\t\t\t//this.hide();   TODO\n\t\t}\n\t\telse if( chr == 64 ) {\n\t\t\tthis.reverse = false;\n\t\t}\n\t\telse if( chr == 65 ) {\n\t\t\tthis.reverse = true;\n\t\t}\n\t\telse {\n\t\t\tthis.__int_write_direct_ch( \"?\" );\n\t\t}\n\t}\n\n\n\tsetPos( x, y ) {\n\n\t\tthis._int_setPos( x,y );\n\n\t\tthis._int_flush();\n\t}\n\n\tsetCursorMode( mode ) {\n\t\tthis.cursorMode = mode;\n\t\tthis._int_flush();\n\t}\n\n\tsetCursorPos( x, y ) {\n\t\tif( x<0 || y<0 ) { throw \"pos(\"+x+\",\"+y+\") < 0\" ; }\n\n\t\tif( x>=this.acols || y>= this.arows ) { throw \"pos(\"+x+\",\"+y+\") > max\" ; }\n\n\t\tif( ! ( x === undefined ) ) { this.x = x + this.ax0; }\n\t\tif( ! ( y === undefined ) ) { this.y = y + this.ay0; }\n\n\n\t\tthis._int_flush();\n\t}\n\n\tgetCursorPos() {\n\t\t\treturn [this.x - this.ax0, this.y - this.ay0 ];\n\t}\n\n\tcontrol( chr, data ) {\n\n\t\tthis._int_control( chr, data );\n\t\tthis._int_flush();\n\n\t}\n\n\n\t_int_setPos( x, y ) {\n\n\t\tif(x >= 0) {\n\t\t\t\tthis.x = x + this.ax0;\n\t\t}\n\t\tif(y >= 0) {\n\t\t\t\tthis.y = y + this.ay0;\n\t\t}\n\n\t\tif( this.x >= this.acols ) { this.x = this.acols-1;}\n\t\tif( this.y >= this.arows ) { this.y = this.arows-1;}\n\t}\n\n\tcenter( str ) {\n\n\t\t\tif( str.length > this.cols ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar l = str.length;\n\t\t\tvar l2 = l/2;\n\n\t\t\tvar wh = [ this.acols, this.arows ];\n\n\t\t\tvar x = Math.floor( (wh[0] / 2)-l2 );\n\t\t\tthis._int_setPos( x, -1 );\n\t\t\tthis._int_write( str );\n\t\t\tthis.__int_nl();\n\n\t\t\tvar area = this._int_getArea( this.ax0, this.y, this.acols-1, this.y );\n\t\t\tthis._int_addChange( area );\n\t\t\tthis._int_flush();\n\n\t}\n\n\t__int_scrollDown() {\n\n\t\tvar ax0 = this.ax0;\n\t\tvar ay0 = this.ay0;\n\n\t\tfor( var ax=0; ax<this.acols; ax++) {\n\n\t\t\tvar x = ax + ax0;\n\t\t\tfor( var ay=0; ay<this.arows-1; ay++) {\n\n\t\t\t\tvar y = ay + ay0;\n\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tvar cellyp1 = this.cellel[ y+1 ][ x ];\n\n\t\t\t\tcell.txt = cellyp1.txt;\n\t\t\t\tcell.fg = cellyp1.fg;\n\t\t\t\tcell.bg = cellyp1.bg;\n\t\t\t}\n\t\t}\n\n\t\t//fill last row\n\t\tvar y2 = ay0 + (this.arows-1);\n\t\tfor( var ax=0; ax<this.acols; ax++) {\n\n\t\t\tvar x = ax + ax0;\n\n\t\t\tvar cell = this.cellel[ y2 ][ x ];\n\t\t\tcell.txt = \" \";\n\t\t\tif( !this.reverse  ) {\n\t\t\t\tcell.fg = this.colors.txtColor;\n\t\t\t\tcell.bg = this.colors.txtBgColor;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcell.fg = this.colors.txtBgColor;\n\t\t\t\tcell.bg = this.colors.txtColor;\n\t\t\t}\n\t\t}\n\n\t}\n}\n\n//--EOC \n\n// ## ../../rwbuffers/worker/bitmap.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/../../rwbuffers/worker/bitmap.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/../../rwbuffers/worker/bitmap.js\n\nclass BitMap {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n    this.lineColor = 1;\n    this.changes = {};\n    this.changes.flag = false;\n    this.changes.pixels = [];\n\n\t\tthis.origin( 0,0,1,1);\n  }\n\n\n\torigin( ox0, oy0, odx, ody ) {\n\t\tthis.ox0 = ox0;\n\t\tthis.oy0 = oy0;\n\t\tthis.odx = odx;\n\t\tthis.ody = ody;\n\n\t\tvar dir = [\"m\",undefined,\"p\"];\n\t\tvar xdir = \"x\" + dir[ odx + 1 ];\n\t\tvar ydir = \"y\" + dir[ ody + 1 ];\n\t\tvar direction = xdir + ydir;\n\n\t\tthis[\"_int_convertxy\"] = this.getConvertFunc( direction );\n\n\t}\n\n\treInit( w, h ) {\n\t\tthis.width = w;\n    this.height = h;\n\t}\n\n  attach( w, h ) {\n\t\tthis.reInit( w, h );\n\t}\n\n  isActive() {\n    return this.width > 0;\n  }\n\n  getDimensions() {\n\t\t\treturn [this.width, this.height ];\n\t}\n\n  triggerFlush() {\n\n\t\tif( !this.changes.flag ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.sys.post( \"gfxupdate\",\n\t\t\t{\n\t\t\t\tpixels: this.changes.pixels\n\t\t\t}\n\t\t);\n\n\t\tthis.changes.pixels = [];\n\t\tthis.changes.flag = false;\n\n  }\n\n  _int_flush() {\n\n    if( this.changes.flag ) {\n\n      this.sys.post( \"gfxupdate\",\n        {\n          pixels: this.changes.pixels\n        }\n      );\n\n\t\t\tthis.changes.pixels = [];\n\t\t\tthis.changes.flag = false;\n    }\n\n  }\n\n\tsetLineColor( c ) {\n    this.lineColor = c;\n    this.sys.post( \"nativeout\",{\n      action: \"gcolor\",\n      params: { c: c }\n    });\n  }\n\n\tgetConvertFunc( direction ) {\n\t\tvar __this = this;\n\t\tif( direction == \"xpyp\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor(x + __this.ox0), Math.floor(y + __this.oy0)];\n\t\t\t}\n\t\t}\n\t\telse if( direction == \"xpym\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor(x + this.ox0), Math.floor( this.oy0 - y ) ];\n\t\t\t}\n\t\t}\n\t\telse if( direction == \"xmyp\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor( __this.ox0 - x ), Math.floor(y + __this.oy0)];\n\t\t\t}\n\t\t}\n\t\telse if( direction == \"xmym\") {\n\t\t\treturn function( x,y ) {\n\t\t\t\treturn [ Math.floor( __this.ox0 - x ), Math.floor( this.oy0 - y ) ];\n\t\t\t}\n\t\t}\n\t}\n\n/*\n\t_int_convertxy_xpyp( x,y ) {\n\t\treturn [ Math.floor(x + this.ox0), Math.floor(y + this.oy0)];\n\t}\n\n\t_int_convertxy_xpym( x,y ) {\n\t\treturn [ Math.floor(x + this.ox0), Math.floor( this.oy0 - y )];\n\t}\n\n\t_int_convertxy_xmyp( x,y ) {\n\t\treturn [ Math.floor( this.ox0 - x), Math.floor( y + this.oy0)];\n\t}\n\n\t_int_convertxy_xmym( x,y ) {\n\t\treturn [ Math.floor( this.ox0 - x), Math.floor( this.oy0 - y )];\n\t}\n*/\n\n  plot( x, y ) {\n\t\tvar xy2 = this._int_convertxy( x, y );\n\n    var pixel = { x: xy2[0], y: xy2[1], c:this.lineColor };\n\n    this.changes.pixels.push( pixel );\n    this.changes.flag = true;\n\n  }\n\n\tline( x0,y0, x1, y1 ) {\n\n\t\tvar xy0 = this._int_convertxy( x0, y0 );\n\t\tvar xy1 = this._int_convertxy( x1, y1 );\n\n    this.sys.post( \"nativeout\",{\n      action: \"line\",\n      params: { x0:xy0[0], y0:xy0[1], x1:xy1[0], y1:xy1[1] }\n    });\n  }\n\n\tdestroy() {\n\n\t}\n}\n\n//--EOC \n\n// ## ../../rwbuffers/worker/audio.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/../../rwbuffers/worker/audio.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/../../rwbuffers/worker/audio.js\n\nclass Audio {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.userInput = false;\n  }\n\n\tflagUserInput() {\n\t\tthis.userInput = true;\n\t}\n\n  playBeep( channel, frequency, len ) {\n\n\t\tif( !this.userInput ) { return; }\n    this.sys.post( \"audio\",\n    {\n          method: \"playBeep\",\n\t\t\t\t\tparCount: 3,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: frequency,\n\t\t\t\t\tp3: len\n    }\n    );\n  }\n\n\tplaySound( channel, frequency, len ) {\n\n\t\tif( !this.userInput ) { return; }\n    this.sys.post( \"audio\",\n    {\n          method: \"playSound\",\n\t\t\t\t\tparCount: 3,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: frequency,\n\t\t\t\t\tp3: len\n    }\n    );\n  }\n\n\tvolume( volume ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"setVolume\",\n\t\t\t\t\tparCount: 1,\n\t\t\t\t\tp1: volume\n\t\t}\n\t\t);\n\t}\n\n\treset() {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t\t{\n\t\t\t\t\t\tmethod: \"reset\",\n\t\t\t\t\t\tparCount: 0\n\t\t\t}\n\t\t\t);\n\n\t}\n\n\tattackDecayRelease( channel, attackT, decayT, releaseT ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelSetAttackDecayRelease\",\n\t\t\t\t\tparCount: 4,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: attackT,\n\t\t\t\t\tp3: decayT,\n\t\t\t\t\tp4: releaseT\n\t\t}\n\t\t);\n\t}\n\n\tchannelVolume( channel, v ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelVolume\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: v\n\t\t}\n\t\t);\n\t}\n\n\tchannelFrequency( channel, v ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelFrequency\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: v\n\t\t}\n\t\t);\n\t}\n\n\n\tchannelSustainVolume( channel, v ) {\n\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"channelSetSustainLevel\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: v\n\t\t}\n\t\t);\n\t}\n\n\taddEffect( channel,  type , value, time ) {\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"addEffect\",\n\t\t\t\t\tparCount: 4,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: type,\n\t\t\t\t\tp3: value,\n\t\t\t\t\tp4: time\n\t\t}\n\t\t);\n  }\n\n  clearEffect( channel ) {\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"clearEffect\",\n\t\t\t\t\tparCount: 1,\n\t\t\t\t\tp1: channel\n\t\t}\n\t\t);\n\n  }\n\n\tplayEffect( channel, freq ) {\n\t\tif( !this.userInput ) { return; }\n\t\tthis.sys.post( \"audio\",\n\t\t{\n\t\t\t\t\tmethod: \"playEffect\",\n\t\t\t\t\tparCount: 2,\n\t\t\t\t\tp1: channel,\n\t\t\t\t\tp2: freq\n\t\t}\n\t\t);\n\n\t}\n\n}\n\n//--EOC \n\n// ## workerbootstrap_static.js ==========---------- \n// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -\n//  src/sys/modules/basic/worker/workerbootstrap_static.js\n//  BY packworkers.js -- src/sys/modules/basic/worker/workerbootstrap_static.js\n\nsys.log(\"Starting\");\nstart_sys();\n\n//--EOC \n\n"],"names":["sys","appName","unique","console","post","type","message","postMessage","log","args","Array","prototype","slice","call","arguments","args2","i","length","push","JSON","stringify","logerr","load","rt","path","device","processId","loaddata","label","save","data","delete","dir","setcfg","cfg","this","listfs","poststatus","procId","status","setfs","fs","setDisplayMode","m","blinkMode","html","executeFunction","htmlnode","get","wait_for_result","export","code","destination","signalHideMenu","flag","hide","init_sys","BasicArray","constructor","name","indices","defaultValue","buffer","getIndexCount","_check","detail","set","val","ptr","last","undefined","ErrorHandler","newError","clazz","context","lineNr","throwError","fromSimpleExternalError","s","lineNr0","parts","split","err","extCode0","extCode1","fromSerializedError","isSerializedError","substr","e","startsWith","isError","Object","toString","clss","Editor","output","out","keyMode","addRunTime","runTime","keyHandlerForCLE","keyLabel","shiftKey","ScrollDownByCurrentLine","backspace","ctrlKey","cursorMove","jumpTo","clear","insert","write","setCursorMode","key","command","getCurrentLine","writeln","executeInteractiveLine","interactiveKeyHandler","BasicRuntime","editor","debugFlag","listSpeed","bitmap","bout","input","audio","setHandler","setInterActive","menuEnable","program","runFlag","isWaitingFlag","waitingTime","waitForMessageFlag","waitForMessageVariable","executeLineFlag","goPlayExampleFlag","inputFlag","inputCommand","listFlag","immersiveFlag","statusChanged","gosubReturn","nullTime","Date","getTime","turboMode","cmdCountPerCycleDefault","cmdCountPerCycleTurbo","cmdCountPerCycle","commands","BasicCommands","extendedcommands","ExtendedCommands","erh","vars","functions","loadedData","default","loadedLabel","kbBuffer","yPos","SHORTLINE","LONGLINESTART","LONGLINEEND","forContext","outputCallBacksAll","lineOverFlow","method","scroll","clearScreen","outputCallBacksClScr","synchClock","exitMode","code2colMap","km","symbolTable","up","down","left","right","black","white","red","cyan","purple","green","blue","yellow","orange","brown","pink","grey1","grey2","grey3","backmap","mapInfo","entries","symbolTableBM","flagStatusChange","clearInputCommand","flagInputCommand","setWaiting","time","clearWaiting","getScopeVars","getFullVarList","scopes","getFullScopes","varList","si","fullscope","scope","names","getOwnPropertyNames","value","descr","ii","endsWith","cpuNeeded","getStatus","runPointer","vlen","getVars","pgmLen","varLen","displayMode","startWaitForMessage","start","autoStartAfterLoad","path0","getProgramAsText","deleteFile","variable","keyInterrupt","_type","_data","interrupt","_ix","interruptFlag0","interruptFlag1","line","useLabel","handlers","interrupt0","interrupt0ParamIsLabel","interrupt1","interrupt1ParamIsLabel","newScope","runPointer2","variables","setVar","toUpperCase","pgm","len","found","labels","receiveMessage","_message","reInit","textW","textH","bitmapW","bitmapH","mode","printError","reason","pgmData","ok","bootPGM","control","runPGM","stop","insertData","isRunning","list","title","files","fname","enterListMode","currentFs","str","deviceNumberLen","stopAfterMessage","HandleStopped","printReady","runStop","listStop","cxy","getCursorPos","string","getLineFrom","inputStartInputPosX","handleLineInput","x","xy","setCursorPos","toggleMenu","startingProgram","flush","importPGMHandler","content","filename","textLinesToBas","fileName","setProgram","exitProgram","closeWindow","windowId","listPointer","printLine","listFlagBakInteractive","getInterActive","setExitMode","v","nullClock","setHours","setSeconds","setMinutes","setMilliseconds","setTurbo","on","appendProgram","exists","j","sort","a","b","getProgram","getProgramState","setProgramState","pgmState","_setByteBits","bits","byte","_getByteBits","masks","results","upperFirst","supressLine","explicitline","line1","onLineStr","printInfo","printHelp","reverseOn","print","colorReset","colors","setDefault","fg","bg","border","resetConsole","getDimensions","reset","setPos","getMillis","getJiffyTime","millis","Math","floor","hours","minutes","hard","muteReady","writel","clrPGM","compressPGMText","pgmTxt","p","Parser","init","kws","getKeyWordCodes","txt2","kw","replaceAll","toLowerCase","String","fromCharCode","getProgramAsTextNoPETSCII","text","l","prepareLineForExportNoPETSCII","trim","getProgramSize","controlKW","prepareLineForExport","txt0","txt","dst","c","charCodeAt","symdef","charAt","src","str1","str2","rv","indexOf","replace","rebuildNoPETSCIILineString","raw","noPetsciiLine","parseLine","toLower","cc","prevCharIsQuote","nextCharIsQuote","dst2","ResolveStringSymbolToCode","prepareLineForImport","num","parseInt","getProgramLines","padZeros2","evalExpressionPart","parseFloat","PI","varIntName","arr","ai","evalExpression","values","params","par","ecommands","cmds","nFunName","functionName","stc","fName","parValue","restore","functRecord","expr","op","pow","negate","binaryNegate","exitInputState","cycle","cmdCount","lineNumber","isActive","triggerFlush","changeCount","countdown","listCodeLine","bf","runCommands","traceVars","tvi","thisVar","thisValue","oldValue","traceOldValues","traceList","af","executedCount","retreiveRuntimeLine","pi","procIf","cstate","STATE_CLI","STATE_WAITING","STATE_INPUT","STATE_RUNNING","doReturn","oldPointers","pop","doInterruptReturn","closeScope","gosub","line0","retLine","retCmd","goto","startAsGoto","isListing","isInput","isReady","getDataBlocks","readData","dataPointer","result","getDataLength","setData","label0","typeParts","parseSimpleDataI_CSV","toArr","data2","parseSimpleDataS_CSV","parseSimpleDataS_LINES","printChar","rawLine","rebuildLineString","nr","removePadding","renumbering","addSmartPadding","shortenKeywords","newString","tokens","getTokens","nopadTokens","foundGoto","foundGotoParIndex","newLine","lineIsData","lineIsRem","lineIsSub","renumberProgram","gap","newLineNr","lineNumbers","newLineNr2","ceil","lRec","PETSCIIreplace","keywordCompress","compressProgram","normalizeProgram","restoreDataPtr","normalizeData","dataRec","bak1","bak2","normalize","k","doForInit","from","to","step","varName","cmdPointer","cmdArrayLen","linePointersLen","ctx","ctxv","doForNext","nextVarName","retreiveLine","parseLineNumber","commandToString","cmd","statementName","var","limit","TERMINATE_W_JUMP","end","cnt","cn","onCommand","onExpr","onLineNrs","jump","nextVar","ix","arrRec","arrayNames","pardefs","mycommands","enabled","varType0","varType","arrayAssignment","expression","getArray","getTraceList","setTraceVar","resetTraceVar","old","oldProgram","new","removePgmLine","linenr","pgm2","pl","padSpaces6","no","padSpaces8","insertPgmLine","insertPgmLineLocal","myProgram","lines","exception","parseErrorLine","startConsoleDataInput","inputVars","inputVarsPointer","isInputCommand","qMark","isNaN","basicCmds","runtime","func","statementList","getStatements","stats","stats2","getFunctions","getAllCategories","categoryIndexes","getCategories","categoryIndexes2","CommandHelp","getCategoriesNormalize","getCategoriesIntermediate","_stat_info_help","_stat_help","pars","catRecord","lst","catLists","hlpctx","lbl","attr","attribs","padLen","pad","description","_if_cls","_stat_info_cls","_stat_cls","_stat_info_reset","_stat_reset","_stat_info_menu","_stat_menu","_stat_info_reverse","_stat_reverse","reverse","_stat_info_beep","_stat_beep","playBeep","_stat_info_sound","_stat_sound","playSound","_stat_info_setadr","_stat_setadr","attackDecayRelease","_stat_info_volume","_stat_volume","volume","_stat_info_chfreq","_stat_chfreq","channelFrequency","_stat_info_chvolume","_stat_chvolume","channelVolume","_stat_info_chsvolume","_stat_chsvolume","channelSustainVolume","_stat_info_addfx","_stat_addfx","addEffect","_stat_info_clearfx","_stat_clearfx","clearEffect","_stat_info_playfx","_stat_playfx","freq","playEffect","_stat_info_textarea","_stat_textarea","cols","round","rows","wh","xo","yo","divx","divy","textArea","_stat_info_gcolor","_stat_gcolor","col","setLineColor","_stat_info_origin","_stat_origin","origin","_stat_info_line","_stat_line","_stat_info_plot","_stat_plot","plot","_stat_info_center","_stat_center","center","_stat_info_gtext","_stat_gtext","gtext","_stat_info_immediate","_stat_immediate","setPokeFlush","_stat_info_pokeccl","_stat_pokeccl","pokeccl","_stat_info_pokec","_stat_pokec","pokec","_stat_info_pokecl","_stat_pokecl","pokecl","_stat_info_pokebcl","_stat_pokebcl","_stat_info_locate","_stat_locate","row","_stat_info_hide","_stat_hide","_if_html","_stat_info_html","_stat_html","handleIx","htmlHandle","htmlValue","htmlAppend","exparts","exparts2","_stat_info_htmlnode","_stat_htmlnode","node","_stat_info_htmlbg","_stat_htmlbg","url","_stat_info_color","_stat_color","bgcol","_stat_info_display","_stat_display","modes","screenModes","_stat_info_gfilter","_stat_gfilter","filter","setFilter","_stat_info_border","_stat_border","bcol","_stat_info_export","_stat_export","_stat_info_copy","_stat_copy","_stat_info_txtcopy","_stat_txtcopy","_fun_info_peekcl","_fun_peekcl","peekcl","_fun_info_peekc","_fun_peekc","peekc","_fun_info_ucbase","_fun_ucbase","baseLabel","_fun_info_uc_DLR_","_fun_uc_DLR_","fromCodePoint","_fun_info_dc_DLR_","_fun_dc_DLR_","_fun_info_html_DLR_","_fun_html_DLR_","_fun_info_width","_fun_width","_fun_info_height","_fun_height","_fun_info_cols","_fun_cols","_fun_info_columns","_fun_columns","_fun_info_rows","_fun_rows","pgmman","addRuntime","keyLabelCodes","randnrs","random","randIndex","randStep","_stat_info_new","_stat_new","_stat_info_list","_stat_list","_if_get","_if_getkey","_if_read","_if_input","_if_list","_if_run","_stat_info_read","_stat_read","p0","_stat_info_get","_stat_get","getKey","_stat_info_getkey","_stat_getkey","_stat_info_input","_stat_input","con","_stat_info_restore","_stat_restore","_stat_info_waitms","_stat_waitms","_stat_info_load","_stat_load","aSync","_stat_info_setdata","_stat_setdata","_stat_info_datablocks","_stat_datablocks","_stat_info_loaddata","_stat_loaddata","_stat_info_dir","_stat_dir","_stat_info_fs","_stat_fs","_stat_info_renumber","_stat_renumber","_stat_info_vars","_stat_vars","_stat_info_tracevar","_stat_tracevar","_stat_info_clrtracevar","_stat_clrtracevar","_stat_info_boot","_stat_boot","_stat_info_save","_stat_save","_stat_info_delete","_stat_delete","_stat_info_run","_stat_run","_if_print","isNumber","isFinite","normalizeIfNumber","_stat_info_print","_stat_print","nl","_stat_info_clr","_stat_clr","_fun_info_datalen","_fun_datalen","_fun_info_chr_DLR_","_fun_chr_DLR_","_fun_info_str_DLR_","_fun_str_DLR_","number","base","numberStr","_fun_info_abs","_fun_abs","_fun_info_len","_fun_len","_fun_info_asc","_fun_asc","_fun_info_val","_fun_val","_fun_info_hex2dec","_fun_hex2dec","_fun_info_hex_DLR_","_fun_hex_DLR_","_fun_info_exp","_fun_exp","exp","intGetNextRand","intSeedRand","x0","year","day","d","seedModifier","_fun_info_pad_DLR_","_fun_pad_DLR_","ch","dest","toPad","_fun_info_rnd","_fun_rnd","_fun_info_sqr","_fun_sqr","sqrt","_fun_info_log","_fun_log","_fun_info_pos","_fun_pos","getLinePos","_fun_info_left_DLR_","_fun_left_DLR_","_fun_info_right_DLR_","_fun_right_DLR_","_fun_info_mid_DLR_","_fun_mid_DLR_","_fun_info_sin","_fun_sin","sin","_fun_info_tri","_fun_tri","abs","_fun_info_saw","_fun_saw","_fun_info_tan","_fun_tan","tan","_fun_info_atn","_fun_atn","atan","_fun_info_cos","_fun_cos","cos","_fun_info_spc","_fun_spc","_max","_fun_info_int","_fun_int","_fun_info_range","_fun_range","min","max","_fun_info_tab","_fun_tab","_fun_info_sgn","_fun_sgn","_fun_info_millis","_fun_millis","_fun_info_jiffies","_fun_jiffies","ecmds","CTRL_KW","SHORTCUT_KW","KEYWORDS","more","screenCodes2CTRLTable","tab","KWCODES","padArray","missing","clazz2","upperCaseNameTokens","token","tokens2","mergeCompTokens","token2","mergeBrokenUpTokens","splits","p1","p2","p3","whole","r","mergeTokenRange","record","tokens3","parseFunParList","even","endTokens","parseBoolExpression","shift","peekIfNextIsOpenBracket","parseSubExpression","tokensToString","endTokensToString","endTokenArray","et","endToken","isEndToken","endTokenArry","parseSimpleExpression","endLoop","returnValue","pair","endTokens0","first","eList","parseExpression","opData","dbg","dbg2","retExpr","newParts","part","unshift","subEndTokens","isUserDefinedFunctionCall","parameters","subExpression","groupParts","oldExpression","parts0","parts1","parts2","prevPart","subExpr","normalizeStatementName","parseAssignment","preTokens","nameToken","token0","parseArrayAssignment","parseControlStructure","controlToken","expr_fn","nums","onInterrupt","num0","onType","labelFlag","expr_from","expr_to","expr_step","explicit","nextcommand","expr1","block","parseLineCommands","bi","dataArray","parseStatementCall","endCommand","keyword","oken","logTokens","tokensStr","tok","Tokenizer","StringReader","tokenize","lineRest","errContext","lineRecord","toker","merge","noPadding","strIn","index","lineIndex","peek","peek2","unconsume","consume","EOF","reader","keywords","greedy","isOpChar","match","isCompChar","isEqChar","isNameChar","endFound","prev","seq","isNumChar","isPadChar","isCommandSepChar","isSepChar","isAnyChar","isBracket","isStrChar","inString","normalizeToken","tok0","readChars","read","type0","compareF","tokenType","parseRules","tokenFound","rule","categoryIndexesInt","funs","cat","f_attribs","catlabel","rname","processes","STATE_NULL","STATE_LASTSTATE","_this","idlerInterval","runInterval","waitTimeOut","lastState","state","avgIdlerTime","flags","pstate","update","wtime","changeState","newState","killRuntimeInterval","startWaitingTimeOut","killWaitingTimeOut","startRuntimeInterval","idlerFunction","m1","running","stat","m3","runningFunction","waitingFunction","startIdlerInterval","setInterval","cpu","iv","clearInterval","t","setTimeout","clearTimeout","getTicks","count","id","register","obj","newId","getRoot","keyPress","interactive","hc","handlerClazz","inputKeyHandler","cursorOn","y","hidden","dc","dcCmd","defaultFG","defaultBG","txtBgColor","txtColor","initialized","changes","all","pokeFlush","w","h","_int_initMode","destroy","cellel","_int_addChangeAll","_int_addChange","area","clist","lc","nc","y1","y2","x1","x2","changesTargetArray","cells","cell","_int_flushAll","_int_flush","_int_getArea","cx","cy","cursorMode","areasList","attach","codePointAt","rowArray","acols","xi","ax0","ay0","ay","ax","arows","oldx","maxX","__int_scrollDown","__int_scrollLineLeftFrom","__int_nl","__int_write_direct_ch","_int_write","__int_scrollLinesDownFrom","yy","xx","cell1","cell2","__int_scrollLineRightFrom","_int_control","dcCmdCode","oldy","writec","chr","f","_int_setPos","l2","cellyp1","lineColor","pixels","ox0","oy0","odx","ody","direction","getConvertFunc","width","height","action","__this","xy2","_int_convertxy","pixel","y0","xy0","xy1","userInput","flagUserInput","channel","frequency","parCount","attackT","decayT","releaseT","p4","rootProcId","self","onmessage","messageObject","sub","QPath","windowWidth","windowHeight","blockList"],"sourceRoot":""}